(function(){var b;window.Yapp=new Marionette.Application;window.Yapp.API_BASE_URL="/api";window.Yapp.API_BASE_URL="";window.Yapp.YA_MAP_URL="http://api-maps.yandex.ru/2.0-stable/?load=package.full&lang=ru-RU&wizard=constructor";window.Yapp.DEBUG=!0;jQuery(document).ajaxSend(function(b,g,a){var d;b=function(e){var f,b,d,a,c,g;f=null;if(document.cookie&&""!==document.cookie){b=document.cookie.split(";");a=function(b){b=jQuery.trim(b);if(b.substring(0,e.length+1)===e+"=")return f=decodeURIComponent(b.substring(e.length+
1))};c=0;for(g=b.length;c<g;c++)d=b[c],a(d)}return f};d=function(e){var f,b;f=document.location.host;b=document.location.protocol;f="//"+f;b+=f;return e===b||e.slice(0,b.length+1)===b+"/"||e===f||e.slice(0,f.length+1)===f+"/"||!/^(\/\/|http:|https:).*/.test(e)};if(!/^(GET|HEAD|OPTIONS|TRACE)$/.test(a.type.toUpperCase())&&d(a.url))return g.setRequestHeader("X-CSRFToken",b("csrftoken"))});b="undefined"===typeof window.console?{}:window.console;if(!window.Yapp.DEBUG||"undefined"===typeof b.log)b.log=
b.error=b.info=b.debug=b.warn=b.trace=b.dir=b.dirxml=b.group=b.groupEnd=b.time=b.timeEnd=b.assert=b.profile=function(){}}).call(this);this.Templates=this.Templates||{};this.Templates.AuthPopupView=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div class="p-top">\n  <h3>\u0412\u0445\u043e\u0434</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <div class="social-auth">\x3c!-- sa- social auth --\x3e\n    <a href="/login/vkontakte-oauth2" class="sa-vk"></a>\n    <a class="sa-fb" style="opacity: 0.2"></a>\n    <a class="sa-tw" style="opacity: 0.2"></a>\n    <a class="sa-ok" style="opacity: 0.2"></a>\n    <a class="sa-mm" style="opacity: 0.2"></a>\n    <a class="sa-ya" style="opacity: 0.2"></a>\n  </div>\n</div>\n'});
this.Templates.BigPhoto=Handlebars.template(function(b,c,g,a,d){function e(e,f){return'\n        <a href="#" class="a-remove-comment" data-toggle="tooltip" title="\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n        '}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var f,l=this.escapeExpression,v=this,k=g.helperMissing;b='<div class="bp-photo" data-photo-id="';(a=g.id)?a=a.call(c,{hash:{},data:d}):(a=c.id,a="function"===
typeof a?a.apply(c):a);b+=l(a)+'">\n  <img src="';(a=g.thumbnail560)?a=a.call(c,{hash:{},data:d}):(a=c.thumbnail560,a="function"===typeof a?a.apply(c):a);b+=l(a)+'" alt="" class="main-photo">\n\n  <div class="bp-add-like">\n    <img src="/media/'+l((a=(a=c.author,null==a||!1===a?a:a.avatar),"function"===typeof a?a.apply(c):a))+'" alt="" width="22" height="22" class="avatar">\n    <span class="bp-name">'+l((a=(a=c.author,null==a||!1===a?a:a.first_name),"function"===typeof a?a.apply(c):a))+" "+l((a=
(a=c.author,null==a||!1===a?a:a.last_name),"function"===typeof a?a.apply(c):a))+'</span>\n\n    <a href="#" class="a-like ';f={hash:{},inverse:v.noop,fn:v.program(1,function(e,f){return"marked"},d),data:d};if((f=(a=g.ifBelong,a?a.call(c,c.user,c.likeusers,f):k.call(c,"ifBelong",c.user,c.likeusers,f)))||0===f)b+=f;b+='" data-photo-id="';(f=g.id)?f=f.call(c,{hash:{},data:d}):(f=c.id,f="function"===typeof f?f.apply(c):f);b+=l(f)+'"></a>\n    <span class="count-like">';(f=g.likes_count)?f=f.call(c,{hash:{},
data:d}):(f=c.likes_count,f="function"===typeof f?f.apply(c):f);b+=l(f)+'</span>\n  </div>\n</div>\n\n<div class="bp-comments">\n  <div class="toggle-block a-toggle-up">\n    <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 <span>&darr;</span></a>\n\n    ';if((f=g.each.call(c,c.comments,{hash:{},inverse:v.noop,fn:v.programWithDepth(3,function(f,b,d){var a,c,n;a='\n    <div class="item-comment" data-comment-id="';(c=g.id)?c=c.call(f,
{hash:{},data:b}):(c=f.id,c="function"===typeof c?c.apply(f):c);a+=l(c)+'">\n      <img src="/media/'+l((c=(c=f.author,null==c||!1===c?c:c.avatar),"function"===typeof c?c.apply(f):c))+'" alt="" width="29" height="30" class="avatar">\n\n      <div class="comment-body">\n        <div class="comment-author">'+l((c=(c=f.author,null==c||!1===c?c:c.first_name),"function"===typeof c?c.apply(f):c))+" "+l((c=(c=f.author,null==c||!1===c?c:c.last_name),"function"===typeof c?c.apply(f):c))+"</div>\n        <p>";
(n=g.txt)?n=n.call(f,{hash:{},data:b}):(n=f.txt,n="function"===typeof n?n.apply(f):n);a+=l(n)+'</p>\n        <div class="comment-date">';(n=g.created)?n=n.call(f,{hash:{},data:b}):(n=f.created,n="function"===typeof n?n.apply(f):n);a+=l(n)+'</div>\n      </div>\n\n      <div class="action">\n        <a href="#" class="a-complaint-comment" data-toggle="tooltip" title="\u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n        ';
b={hash:{},inverse:v.noop,fn:v.program(4,e,b),data:b};if((n=(c=g.ifEquals,c?c.call(f,(c=f.author,null==c||!1===c?c:c.id),(c=d.user,null==c||!1===c?c:c.id),b):k.call(f,"ifEquals",(c=f.author,null==c||!1===c?c:c.id),(c=d.user,null==c||!1===c?c:c.id),b)))||0===n)a+=n;return a+"\n      </div>\n    </div>\n    "},d,c),data:d}))||0===f)b+=f;b+='\n\n    \x3c!-- hidden comments will be here --\x3e\n    <div class="hidden-content"></div>\n\n    ';if((f=g["if"].call(c,(a=c.user,null==a||!1===a?a:a.authorized),
{hash:{},inverse:v.noop,fn:v.program(6,function(f,e){var b,a;b=""+('\n    <div class="add-comment">\n      <form action="#" id="commentForm">\n        <div class="ac-block">\n          <img src="'+l((a=(a=f.user,null==a||!1===a?a:a.avatar),"function"===typeof a?a.apply(f):a))+'" alt="" width="29" height="30" class="avatar">\n          <div class="ac-body">\n            <div class="toggle-area">\n              <textarea data-photo-id="');(a=g.id)?a=a.call(f,{hash:{},data:e}):(a=f.id,a="function"===
typeof a?a.apply(f):a);return b+=l(a)+'" rows="3" cols="40" placeholder="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"></textarea>\n              <input type="submit" value="">\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\x3c!-- end .add-comment --\x3e\n    '},d),data:d}))||0===f)b+=f;return b+"\n\n  </div>\x3c!-- end .toggle-block a-toggle-up --\x3e\n</div>\x3c!-- end .bp-comments --\x3e\n"});
this.Templates.FooterView=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<footer id="footer">\n  <div class="f-body">\n    <a href="#" class="a-toggle" title="\u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c">&nbsp;</a>\n\n    <ul>\n      <li><a href="#" class="aboutProject nonav">\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435</a></li>\n      <li><a href="#" class="contacts nonav">\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b</a></li>\n      <li><a href="#">\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435</a></li>\n    </ul>\n\n    <div class="apps">\n      <a href="#" class="app-android">&nbsp;</a>\n      <a href="#" class="app-store">&nbsp;</a>\n    </div>\n\n    <div class="share">\n      <div id="vk_like"></div>\n      <div class="fb-like" data-href="http://yasenput.ru" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n    </div>\n\n    <div class="f-social">\n      <a href="http://vk.com/yasenput" target="_blank" class="a-vk">&nbsp;</a>\n      <a href="http://www.facebook.com/yasenput" target="_blank" class="a-fb">&nbsp;</a>\n    </div>\n  </div>\n</footer>\n'});
this.Templates.HeaderView=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var e,f=this.escapeExpression;b='<div class="wrap">\n  <div class="logo">\u044f\u0441\u0435\u043d \u043f\u0443\u0442\u044c</div>\n\n  <div class="head-search">\n    <div class="search">\n      <form action="#" id="multisearchForm">\n        <input type="submit" value="\u041d\u0430\u0439\u0442\u0438">\n\n        <div class="label-fields">\n          ';if((a=g["if"].call(c,
(e=c.location,null==e||!1===e?e:e.country),{hash:{},inverse:this.noop,fn:this.program(1,function(e,b){var a,d;return a=""+('\n          <div class="label label-place">\n            '+f((d=(d=e.location,null==d||!1===d?d:d.country),"function"===typeof d?d.apply(e):d))+'\n            <button class="remove-label"></button>\n          </div>\n          ')},d),data:d}))||0===a)b+=a;b+="\n\n          ";if((a=g["if"].call(c,(e=c.location,null==e||!1===e?e:e.region),{hash:{},inverse:this.noop,fn:this.program(3,
function(e,b){var a,d;return a=""+('\n          <div class="label label-place">\n            '+f((d=(d=e.location,null==d||!1===d?d:d.region),"function"===typeof d?d.apply(e):d))+'\n            <button class="remove-label"></button>\n          </div>\n          ')},d),data:d}))||0===a)b+=a;b+="\n\n          ";if((a=g["if"].call(c,(e=c.location,null==e||!1===e?e:e.city),{hash:{},inverse:this.noop,fn:this.program(5,function(e,b){var a,d;return a=""+('\n          <div class="label label-place">\n            '+
f((d=(d=e.location,null==d||!1===d?d:d.city),"function"===typeof d?d.apply(e):d))+'\n            <button class="remove-label"></button>\n          </div>\n          ')},d),data:d}))||0===a)b+=a;b+='\n          <div class="label label-add">\n            \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c\n            <span>+</span>\n          </div>\n\n          <span class="text-field"><input type="text"></span>\n        </div>\n        <button type="button" class="clear-input"></button>\n      </form>\n\n      <div class="drop-search" style="display:none;"></div>\n    </div>\n  </div>\n\n  <div class="head-nav">\n    <div>\n      <ul>\n        <li class="head-nav-current-item">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</li>\n        <li><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n        <li><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n        <li><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n        <li><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="add-block-head">\n    <i class="ico-add"></i>\n\n    <div>\n      <div class="drop-add-head">\n        <a href="/point/add" class="nonav" data-target="p-add-place">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</a>\n        \x3c!--<a href="/event/add" data-target="p-add-event">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435</a>--\x3e\n      </div>\n    </div>\n  </div>\n\n  ';
if((a=g["if"].call(c,c.authorized,{hash:{},inverse:this.program(9,function(f,e){return'\n    <div class="auth">\n      <img src="/static/images/guest.png" alt="" class="avatar" width="29" height="30">\n      <div class="user-body">\n        <span href="#" class="a-login">\u0412\u0445\u043e\u0434</span>\n      </div>\n    </div>\n  '},d),fn:this.program(7,function(e,b){var d,a;d='\n    <div class="auth user">\n      <img src="';(a=g.avatar)?a=a.call(e,{hash:{},data:b}):(a=e.avatar,a="function"===typeof a?
a.apply(e):a);d+=f(a)+'" alt="" class="avatar" width="29" height="30">\n      <div class="user-body">\n        <div class="user-name">';(a=g.first_name)?a=a.call(e,{hash:{},data:b}):(a=e.first_name,a="function"===typeof a?a.apply(e):a);d+=f(a)+" ";(a=g.last_name)?a=a.call(e,{hash:{},data:b}):(a=e.last_name,a="function"===typeof a?a.apply(e):a);d+=f(a)+'<div class="drop-logout"><a href="/logout/" class="a-logout">\u0412\u044b\u0445\u043e\u0434</a></div></div>\n        <div class="user-likes">\n          <span class="ico ico-like-small"></span>\n          ';
(a=g.count_liked_objects)?a=a.call(e,{hash:{},data:b}):(a=e.count_liked_objects,a="function"===typeof a?a.apply(e):a);d+=f(a)+'\n          <span class="ico ico-comment-small"></span>\n          ';(a=g.count_commented_objects)?a=a.call(e,{hash:{},data:b}):(a=e.count_commented_objects,a="function"===typeof a?a.apply(e):a);return d+=f(a)+"\n        </div>\n      </div>\n    </div>\n  "},d),data:d}))||0===a)b+=a;return b+"\n</div>\n\n"});
this.Templates.LabelTemplate=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var e=this.escapeExpression;b='<div class="label label-';(a=g.type)?a=a.call(c,{hash:{},data:d}):(a=c.type,a="function"===typeof a?a.apply(c):a);b+=e(a)+'" data-id="';(a=g.id)?a=a.call(c,{hash:{},data:d}):(a=c.id,a="function"===typeof a?a.apply(c):a);b+=e(a)+'" data-type="';(a=g.type)?a=a.call(c,{hash:{},data:d}):(a=c.type,a="function"===typeof a?a.apply(c):a);b+=e(a)+
'">\n  ';(a=g.name)?a=a.call(c,{hash:{},data:d}):(a=c.name,a="function"===typeof a?a.apply(c):a);return b+=e(a)+'\n  <button class="remove-label"></button>\n</div>\n'});this.Templates.MapView=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div id="mainmap" style="width: 100%; height: 477px;"></div>\n\n<div class="m-ico-group"></div>\n\n<div class="toggle-bottom">\n  <a href="#" class="a-toggle">\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n</div>\n'});
this.Templates.MultisearchDropdown=Handlebars.template(function(b,c,g,a,d){function e(e,a){var b,d;b='\n    <li class="item-label" data-name="';(d=g.name)?d=d.call(e,{hash:{},data:a}):(d=e.name,d=typeof d===u?d.apply(e):d);b+=r(d)+'" data-id="';(d=g.id)?d=d.call(e,{hash:{},data:a}):(d=e.id,d=typeof d===u?d.apply(e):d);b+=r(d)+'" data-type="name">\n      ';if((d=g["if"].call(e,e.address,{hash:{},inverse:h.program(10,v,a),fn:h.program(7,f,a),data:a}))||0===d)b+=d;return b+"\n    </li>\n    "}function f(e,
a){var f,d;f='\n        <a class="nonav" href="/point/';(d=g.id)?d=d.call(e,{hash:{},data:a}):(d=e.id,d=typeof d===u?d.apply(e):d);f+=r(d)+'">';(d=g.name)?d=d.call(e,{hash:{},data:a}):(d=e.name,d=typeof d===u?d.apply(e):d);f+=r(d)+" <i>";if((d=g["if"].call(e,e.address,{hash:{},inverse:h.noop,fn:h.program(8,l,a),data:a}))||0===d)f+=d;return f+"</i></a>\n      "}function l(e,d){var a,f;f={hash:{},data:d};return r((a=g.splitAddr,a?a.call(e,e.address,",",f):s.call(e,"splitAddr",e.address,",",f)))}function v(e,
d){var a,f;a='\n        <a class="nonav" href="/set/';(f=g.id)?f=f.call(e,{hash:{},data:d}):(f=e.id,f=typeof f===u?f.apply(e):f);a+=r(f)+'">';(f=g.name)?f=f.call(e,{hash:{},data:d}):(f=e.name,f=typeof f===u?f.apply(e):f);return a+=r(f)+"</a>\n      "}function k(e,f){var a,d;a='\n      <li class="item-label" data-name="';(d=g.name)?d=d.call(e,{hash:{},data:f}):(d=e.name,d=typeof d===u?d.apply(e):d);a+=r(d)+'" data-id="';(d=g.id)?d=d.call(e,{hash:{},data:f}):(d=e.id,d=typeof d===u?d.apply(e):d);a+=
r(d)+'" data-type="tags"><a href="#">';(d=g.name)?d=d.call(e,{hash:{},data:f}):(d=e.name,d=typeof d===u?d.apply(e):d);return a+=r(d)+"</a></li>\n    "}function t(d,e){var f,a;f='\n    <li class="item-label" data-name="';(a=g.first_name)?a=a.call(d,{hash:{},data:e}):(a=d.first_name,a=typeof a===u?a.apply(d):a);f+=r(a)+" ";(a=g.last_name)?a=a.call(d,{hash:{},data:e}):(a=d.last_name,a=typeof a===u?a.apply(d):a);f+=r(a)+'" data-id="';(a=g.id)?a=a.call(d,{hash:{},data:e}):(a=d.id,a=typeof a===u?a.apply(d):
a);f+=r(a)+'" data-type="user">\n      <a href="#">';(a=g.first_name)?a=a.call(d,{hash:{},data:e}):(a=d.first_name,a=typeof a===u?a.apply(d):a);f+=r(a)+" ";(a=g.last_name)?a=a.call(d,{hash:{},data:e}):(a=d.last_name,a=typeof a===u?a.apply(d):a);return f+=r(a)+"</a>\n    </li>\n    "}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var s=g.helperMissing,r=this.escapeExpression,u="function",h=this;b='<button type="button"  class="toggle-panel"></button>\n\n<div class="inner-wrap">\n\x3c!--\n  <ul class="item item-place">\n    <li class="item-title">\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f <sup>15</sup></li>\n    ';
if((a=g.each.call(c,c.points,{hash:{},inverse:h.noop,fn:h.program(1,function(a,d){return"\n    "},d),data:d}))||0===a)b+=a;b+="\n  </ul>\n--\x3e\n\n";if((a=g["if"].call(c,c.empty,{hash:{},inverse:h.noop,fn:h.program(3,function(a,d){return'\n  <ul class="item">\n    <li class="drop-not-found">\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e</li>\n  </ul>\n'},d),data:d}))||0===a)b+=a;b+="\n\n";if((a=g["if"].call(c,c.points,{hash:{},inverse:h.noop,fn:h.program(5,
function(a,d){var f,b;f=""+('\n  <ul class="item item-name">\n    <li class="item-title">\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 <sup>'+r((b=(b=a.points,null==b||!1===b?b:b.length),typeof b===u?b.apply(a):b))+"</sup></li>\n    ");if((b=g.each.call(a,a.points,{hash:{},inverse:h.noop,fn:h.program(6,e,d),data:d}))||0===b)f+=b;return f+"\n  </ul>\n"},d),data:d}))||0===a)b+=a;b+="\n\n";if((a=g["if"].call(c,c.tags,{hash:{},inverse:h.noop,fn:h.program(12,function(a,d){var f,e;f=""+('\n  <ul class="item item-labels">\n    <li class="item-title">\u041c\u0435\u0442\u043a\u0438 <sup>'+
r((e=(e=a.tags,null==e||!1===e?e:e.length),typeof e===u?e.apply(a):e))+"</sup></li>\n    ");if((e=g.each.call(a,a.tags,{hash:{},inverse:h.noop,fn:h.program(13,k,d),data:d}))||0===e)f+=e;return f+"\n  </ul>\n"},d),data:d}))||0===a)b+=a;b+="\n\n";if((a=g["if"].call(c,c.users,{hash:{},inverse:h.noop,fn:h.program(15,function(a,d){var e,f;e=""+('\n  <ul class="item item-users">\n    <li class="item-title">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <sup>'+r((f=(f=a.users,null==
f||!1===f?f:f.length),typeof f===u?f.apply(a):f))+"</sup></li>\n    ");if((f=g.each.call(a,a.users,{hash:{},inverse:h.noop,fn:h.program(16,t,d),data:d}))||0===f)e+=f;return e+"\n  </ul>\n"},d),data:d}))||0===a)b+=a;return b+"\n</div>\n"});
this.Templates.PointAddView=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var e=this.escapeExpression,f=g.helperMissing;b='<div class="p-top">\n  <h3>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="clearfix p-body">\n  <form action="#" id="pointAddForm" enctype="multipart/form-data" method="POST">\n    <div class="fr w-385">\n      <div class="map-block">\n        <div id="popup-map-place" style="width:385px; height:305px"></div>\n\n        <div class="drop-filter">\n          <input name="address" type="text" placeholder="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043c\u0435\u0441\u0442\u0430..." class="input-map-txt" data-key="address" autocomplete="off" id="add-new-place-address" value="';(a=
g.address)?a=a.call(c,{hash:{},data:d}):(a=c.address,a="function"===typeof a?a.apply(c):a);b+=e(a)+'">\n          <ul class="drop-results"></ul>\n        </div>\n        <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b..." class="input-map-coords">\n\n      </div>\n    </div>\n\n    <div class="fl w-385">\n      <div class="input-line">\n        <div class="required">*</div>\n\n        \x3c!--<div class="drop-filter">--\x3e\n          <input name="name" type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430..." id="p-add-place-name" data-key="name" autocomplete="off" class="search-matches">\n          <ul class="drop-results"></ul>\n        \x3c!--</div>--\x3e\n      </div>\n\n      <div class="input-line">\n        <div class="required">*</div>\n\n        <textarea  name="description" data-key="description" rows="4" cols="33" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430..." class="input-place-desc" id="add-new-place-description" value="';
(a=g.description)?a=a.call(c,{hash:{},data:d}):(a=c.description,a="function"===typeof a?a.apply(c):a);b+=e(a)+'"></textarea>\n      </div>\n\n      <div class="add-place-choose-type-place">\n        <h4>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043c\u0435\u0441\u0442\u0430:</h4>\n\n        <div class="clearfix ctp-labels">\n          ';if((a=g.each.call(c,c.requireLabels,{hash:{},inverse:this.noop,fn:this.program(1,function(a,d){var b,c,s;b='\n            <div class="ctp-item-label">\n              <div class="placemark" data-label-id="';
(c=g.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c="function"===typeof c?c.apply(a):c);b+=e(c)+'">\n                \x3c!--<span class="m-ico m-dostoprimechatelnost"></span>--\x3e\n                <img src="/media/';(c=g.icons)?c=c.call(a,{hash:{},data:d}):(c=a.icons,c="function"===typeof c?c.apply(a):c);b+=e(c)+'">\n              </div>\n              <span class="ctp-item-title">';s={hash:{},data:d};return b+=e((c=g.addShy,c?c.call(a,a.name,s):f.call(a,"addShy",a.name,s)))+"</span>\n            </div>\n          "},
d),data:d}))||0===a)b+=a;b+='\n        </div>\n\n        <div class="clearfix ctp-more-labels">\n          <div class="input-line">\n            <div class="drop-filter select-labels">\n              <div class="p-labels drop-labels">\n                <div class="clearfix selected-labels">\n                  <div class="label label-add">\n                    \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u0442\u043a\u0443\n                    <span>+</span>\n                  </div>\n\n                  <span class="text-field"><input type="text"></span>\n                </div>\n\n                <input type="button" value=" " class="clear-selected">\n\n                <ul class="drop-labels-field"></ul>\n              </div>\n            </div>\n          </div>\n\n          <div class="labels-field">\n            ';
if((a=g.each.call(c,c.additionalLabels,{hash:{},inverse:this.noop,fn:this.program(3,function(a,d){var f,b;f='\n            <div class="label label-place" data-label-id="';(b=g.id)?b=b.call(a,{hash:{},data:d}):(b=a.id,b="function"===typeof b?b.apply(a):b);f+=e(b)+'">';(b=g.name)?b=b.call(a,{hash:{},data:d}):(b=a.name,b="function"===typeof b?b.apply(a):b);return f+=e(b)+"</div>\n            "},d),data:d}))||0===a)b+=a;b+='\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="clear"></div>\n\n    <div class="clearfix place-photos">\n      <h4>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043a \u043c\u0435\u0441\u0442\u0443:</h4>\n\n      <div class="item-photo load-photo">\n        <input name="img" type="file">\n      </div>\n\n      <span class="photos-prev"></span>\n      <span class="photos-next"></span>\n\n      <div class="photos-gallery">\n        <ul id="item-photo-list">\n          ';
if((a=g.each.call(c,c.imgs,{hash:{},inverse:this.noop,fn:this.program(5,function(a,d){var f,b;f='\n            <li>\n              <div class="item-photo">\n                <img src="';(b=g.thumbnail104x104)?b=b.call(a,{hash:{},data:d}):(b=a.thumbnail104x104,b="function"===typeof b?b.apply(a):b);return f+=e(b)+'" alt="" width="104" height="104">\n                <button class="remove-photo"></button>\n\n                <i class="ico-main-photo"></i>\n                <div class="txt-tooltip">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u044b\u043c</div>\n              </div>\n            </li>\n          '},
d),data:d}))||0===a)b+=a;return b+'\n        </ul>\n\n        <div class="item-photo photo-loading" style="display:none;">\n          <div class="load-status">\n            <div class="progress-loading">\n              <div style="width: 0%;" class="value"></div>\n            </div>\n            <span class="progress-count">0%</span>\n          </div>\n        </div>\n\n      </div>\n    </div>\x3c!-- end .place-photos --\x3e\n\n    <footer class="p-footer">\n      <div class="input-line submit-line">\n          <input type="submit" value="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e" class="fr a-btn" id="a-add-point">\n\n        <label class="fr custom-checkbox checked">\n          <input type="checkbox" checked>\n          \u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0437\u044c\u044f\u043c\n        </label>\n\n        <small class="required-desc">\u041f\u043e\u043b\u044f \u0441\u043e \u0437\u043d\u0430\u0447\u043a\u043e\u043c * \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</small>\n      </div>\n    </footer>\n  </form>\n</div>\n'});
this.Templates.PointDetailView=Handlebars.template(function(b,c,g,a,d){function e(a,d){return'\n                        <button type="button" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e" class="remove-photo"></button>\n                      '}function f(a,d){return'\n                        <button type="button" title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0444\u043e\u0442\u043e" class="complaint-photo"></button>\n                      '}
function l(a,d){var f,e;f='\n        <div class="label label-place">';(e=g.name)?e=e.call(a,{hash:{},data:d}):(e=a.name,e=typeof e===n?e.apply(a):e);return f+=p(e)+"</div>\n        "}function v(a,d){return'\n  <a href="#" class="a-btn a-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n  '}function k(a,d){return"marked"}function t(a,d){return'<i class="ico-wifi"></i>'}function s(a,d){return'<i class="ico-disabled"></i>'}function r(a,d){return'<i class="ico-p"></i>'}
function u(a,d){return'<i class="ico-wc"></i>'}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var h,n="function",p=this.escapeExpression,q=this,w=g.helperMissing;b='<div class="clearfix p-body">\n<header>\n  \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n\n  \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n\n  <h2><a href="#" class="a-place-name">';(a=g.name)?a=a.call(c,
{hash:{},data:d}):(a=c.name,a=typeof a===n?a.apply(c):a);b+=p(a)+'</a></h2>\n  <small>\u0423\u0432\u0438\u0434\u0435\u043b</small>\n  <a href="#">'+p((a=(a=c.author,null==a||!1===a?a:a.first_name),typeof a===n?a.apply(c):a))+" "+p((a=(a=c.author,null==a||!1===a?a:a.last_name),typeof a===n?a.apply(c):a))+'</a>\n  <div class="addr">';(h=g.address)?h=h.call(c,{hash:{},data:d}):(h=c.address,h=typeof h===n?h.apply(c):h);b+=p(h)+'</div>\n\n  <div class="p-place-desc">\n    ';(h=g.headDescription)?h=h.call(c,
{hash:{},data:d}):(h=c.headDescription,h=typeof h===n?h.apply(c):h);b+=p(h);if((h=g["if"].call(c,c.tailDescription,{hash:{},inverse:q.noop,fn:q.program(1,function(a,d){var f,e;f='<span class="hellip">&hellip;</span><span class="hidden more-desc">';(e=g.tailDescription)?e=e.call(a,{hash:{},data:d}):(e=a.tailDescription,e=typeof e===n?e.apply(a):e);return f+=p(e)+'<br></span><a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>'},d),data:d}))||0===h)b+=h;b+='\n  </div>\n\n  <div class="stats">\n    <span>\n      <span class="ico-want-small"></span>\n      ';
(h=g.beens_count)?h=h.call(c,{hash:{},data:d}):(h=c.beens_count,h=typeof h===n?h.apply(c):h);b+=p(h)+'\n    </span>\n\n    <span>\n      <span class="ico-like-small"></span>\n      ';(h=g.likes_count)?h=h.call(c,{hash:{},data:d}):(h=c.likes_count,h=typeof h===n?h.apply(c):h);b+=p(h)+'\n    </span>\n\n    <span>\n      <span class="ico-comment-small"></span>\n      ';(h=g.comments_count)?h=h.call(c,{hash:{},data:d}):(h=c.comments_count,h=typeof h===n?h.apply(c):h);b+=p(h)+'\n    </span>\n\n    <span>\n      <span class="ico-star-small"></span>\n      ';
(h=g.collections_count)?h=h.call(c,{hash:{},data:d}):(h=c.collections_count,h=typeof h===n?h.apply(c):h);b+=p(h)+'\n    </span>\n\n    <span>\n      <span class="ico-vote-small"></span>\n      ';(h=g.reviewusersplus)?h=h.call(c,{hash:{},data:d}):(h=c.reviewusersplus,h=typeof h===n?h.apply(c):h);b+=p(h)+"/";(h=g.reviewusersminus)?h=h.call(c,{hash:{},data:d}):(h=c.reviewusersminus,h=typeof h===n?h.apply(c):h);b+=p(h)+'\n    </span>\n  </div>\n</header>\n\n<div class="wide-box">\n  <ul class="p-tabs">\n    <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n    <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n    <li><a href="#tab-desc" data-toggle="tab">\u041e \u043c\u0435\u0441\u0442\u0435</a></li>\n    <li><a href="#tab-events" data-toggle="tab">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n\n    <li><div class="shadow"></div></li>\n  </ul>\n\n  <div class="tabs-content">\n    <div id="tab-photo" class="tab-pane active">\n      <ul class="tabs-inside">\x3c!-- tp- tab photo --\x3e\n        <li class="active"><a href="#tp-tab-pop" data-toggle="tab">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435</a></li>\n        <li><a href="#tp-tab-my" data-toggle="tab">\u043d\u043e\u0432\u044b\u0435</a></li>\n        <li><a href="#tp-tab-new" data-toggle="tab">\u043c\u043e\u0438</a></li>\n      </ul>\n\n      <div class="tabs-content">\n        <div class="toggle-block">\n          <div class="clearfix p-gallery">\n            <div class="clearfix place-photos">\n              <div class="photos-gallery">\n                <ul>\n                  ';
if((h=g.each.call(c,c.imgs,{hash:{},inverse:q.noop,fn:q.programWithDepth(3,function(a,d,b){var c,l,k;c='\n                  <li>\n                    <div class="item-photo selected" data-photo-id="';(l=g.id)?l=l.call(a,{hash:{},data:d}):(l=a.id,l=typeof l===n?l.apply(a):l);c+=p(l)+'">\n                      <a href="/point/'+p((l=b.id,typeof l===n?l.apply(a):l))+"/photo/";(k=g.id)?k=k.call(a,{hash:{},data:d}):(k=a.id,k=typeof k===n?k.apply(a):k);c+=p(k)+'">\n                        <img src="';(k=
g.thumbnail104x104)?k=k.call(a,{hash:{},data:d}):(k=a.thumbnail104x104,k=typeof k===n?k.apply(a):k);c+=p(k)+'" alt="" width="104" height="104">\n                      </a>\n\n                      ';d={hash:{},inverse:q.program(6,f,d),fn:q.program(4,e,d),data:d};if((k=(l=g.ifEquals,l?l.call(a,(l=a.author,null==l||!1===l?l:l.id),(l=b.user,null==l||!1===l?l:l.id),d):w.call(a,"ifEquals",(l=a.author,null==l||!1===l?l:l.id),(l=b.user,null==l||!1===l?l:l.id),d)))||0===k)c+=k;return c+"\n                    </div>\n                  </li>\n                  "},
d,c),data:d}))||0===h)b+=h;b+='\n                </ul>\n              </div>\n              <div class="item-photo load-photo">\n                <form id="addPhotoForm" action="" method="POST" enctype="multipart/form-data">\n                  <input name="img" type="file">\n                </form>\n              </div>\n\n              \x3c!--\n              <div class="item-photo load-photo">\n                <input type="file">\n              </div>\n              --\x3e\n\n              <span class="photos-next"></span>\n              <span class="photos-prev"></span>\n            </div>\n\n            <div id="big-photo"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div id="tab-map" class="tab-pane">\n      <div class="map">\n        <div id="popup-map-1" style="width:560px; height:510px"></div>\n\n        <div class="m-ico-group">\n          <a href="#">\n            <span class="m-ico m-hotel"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-cafe"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-restoran"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-turism"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-azs"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-active-rest"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-sto"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-commerc"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-hunting"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-events"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-shop"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-fishing"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-monument"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-church"></span>\n          </a>\n        </div>\n\n        <div class="placemark" style="top:35%">\n          <span class="m-ico m-hotel"></span>\n        </div>\n\n        <div class="placemark placemark-wide" style="top:65%">\n          <span class="m-ico m-commerc"></span>\n          <span class="num">32</span>\n        </div>\n      </div>\n    </div>\n\n    <div id="tab-desc" class="tab-pane">\n      <div class="tab-desc">\n        <div class="clearfix place-features-group">\n          ';
if((h=g["if"].call(c,c.wifi,{hash:{},inverse:q.noop,fn:q.program(8,function(a,d){return'\n          <label class="custom-checkbox checked">\n            <input type="checkbox" value="" checked>\n            Wi-Fi\n          </label>\n          '},d),data:d}))||0===h)b+=h;b+="\n\n          ";if((h=g["if"].call(c,c.parking,{hash:{},inverse:q.noop,fn:q.program(10,function(a,d){return'\n          <label class="custom-checkbox">\n            <input type="checkbox" value="">\n            \u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430\n          </label>\n          '},
d),data:d}))||0===h)b+=h;b+="\n\n          ";if((h=g["if"].call(c,c.invalid,{hash:{},inverse:q.noop,fn:q.program(12,function(a,d){return'\n          <label class="custom-checkbox">\n            <input type="checkbox" value="">\n            \u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0438\u043d\u0432\u0430\u043b\u0438\u0434\u043e\u0432\n          </label>\n          '},d),data:d}))||0===h)b+=h;b+='\n        </div>\n\n        <div class="mode">\n          <h4 class="title-block">\n            <a href="#" class="a-remove-mode" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c" data-toggle="tooltip"></a>\n            <a href="#" class="a-edit-mode" title="\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c" data-toggle="tooltip"></a>\n            \u0420\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b\n          </h4>\n\n          <textarea rows="7" cols="60" id="mode-field" readonly>\n          \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a - \u0441 8:00 \u0434\u043e 17:00\n          \u0412\u0442\u043e\u0440\u043d\u0438\u043a - \u0441 8:00 \u0434\u043e 17:00\n          \u0421\u0440\u0435\u0434\u0430 - \u0441 8:00 \u0434\u043e 17:00\n          \u0427\u0435\u0442\u0432\u0435\u0440\u0433 - \u0441 8:00 \u0434\u043e 17:00\n          \u041f\u044f\u0442\u043d\u0438\u0446\u0430 - \u0441 8:00 \u0434\u043e 17:00\n          \u0421\u0443\u0431\u0431\u043e\u0442\u0430 - \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439\n          \u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u0438\u0435 - \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439</textarea>\n        </div>\n\n        <div class="add-new-section">\n          <h4 class="title-block">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b</h4>\n\n          <div class="add-new-section-body">\n            <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b..">\n            <textarea cols="50" rows="4" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435..."></textarea>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div id="tab-events" class="tab-pane">\n      <div class="calendar">\n        <select id="c-year-2">\n          <option value="1">2013</option>\n          <option value="2">2012</option>\n          <option value="3">2011</option>\n          <option value="4">2010</option>\n        </select>\n\n        <select id="c-month-2">\n          <option value="1">\u042f\u043d\u0432\u0430\u0440\u044c</option>\n          <option value="2">\u0424\u0435\u0432\u0440\u0430\u043b\u044c</option>\n          <option value="3">\u041c\u0430\u0440\u0442</option>\n          <option value="4">\u0410\u043f\u0440\u0435\u043b\u044c</option>\n          <option value="5">\u041c\u0430\u0439</option>\n          <option value="6">\u0418\u044e\u043d\u044c</option>\n          <option value="7">\u0418\u044e\u043b\u044c</option>\n          <option value="8">\u0410\u0432\u0433\u0443\u0441\u0442</option>\n          <option value="9">\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c</option>\n          <option value="10">\u041e\u043a\u0442\u044f\u0431\u0440\u044c</option>\n          <option value="11">\u041d\u043e\u044f\u0431\u0440\u044c</option>\n          <option value="12">\u0414\u0435\u043a\u0430\u0431\u0440\u044c</option>\n        </select>\n\n        <ul class="c-days">\n          <li><a href="#">1</a></li>\n          <li><a href="#">2</a></li>\n          <li><a href="#">3</a></li>\n          <li><a href="#" class="active">4</a></li>\n          <li><a href="#">5</a></li>\n          <li><a href="#">6</a></li>\n          <li><a href="#">7</a></li>\n          <li><span>8</span></li>\n          <li><span>9</span></li>\n          <li><a href="#">10</a></li>\n          <li><a href="#">11</a></li>\n          <li><a href="#">12</a></li>\n          <li><a href="#">13</a></li>\n          <li><a href="#">14</a></li>\n          <li><a href="#">15</a></li>\n          <li><a href="#">16</a></li>\n          <li><a href="#">17</a></li>\n          <li><span>18</span></li>\n          <li><a href="#">19</a></li>\n          <li><a href="#">20</a></li>\n          <li><a href="#">21</a></li>\n          <li><a href="#">22</a></li>\n          <li><a href="#">23</a></li>\n          <li><a href="#">24</a></li>\n          <li><a href="#">25</a></li>\n          <li><a href="#">26</a></li>\n          <li><a href="#">27</a></li>\n          <li><a href="#">28</a></li>\n          <li><a href="#">29</a></li>\n          <li><a href="#">30</a></li>\n          <li><span>31</span></li>\n          <li><a href="#"></a></li>\n        </ul>\n      </div>\n\n      <div class="toggle-block">\n        <ul class="event-list">\n          <li>\n            <a href="#" class="fl photo">\n              <img src="temp/img-1.jpg" alt="">\n            </a>\n\n            <div class="body">\n              <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n              <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n              <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n              <div class="stats">\n                <span>\n                  <span class="ico-want-small"></span>\n                  15\n                </span>\n\n                <span>\n                  <span class="ico-like-small"></span>\n                  23\n                </span>\n\n                <span>\n                  <span class="ico-comment-small"></span>\n                  2\n                </span>\n              </div>\n\n              <div class="short-desc">\n                <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                <div class="body">\n                  <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                  <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n                </div>\n              </div>\n            </div>\n          </li>\n\n          <li class="even">\n            <a href="#" class="fl photo">\n              <img src="temp/img-2.jpg" alt="">\n            </a>\n\n            <div class="body">\n              <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n              <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n              <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n              <div class="stats">\n                <span>\n                  <span class="ico-want-small"></span>\n                  15\n                </span>\n\n                <span>\n                  <span class="ico-like-small"></span>\n                  23\n                </span>\n\n                <span>\n                  <span class="ico-comment-small"></span>\n                  2\n                </span>\n              </div>\n\n              <div class="short-desc">\n                <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                <div class="body">\n                  <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                  <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n                </div>\n              </div>\n            </div>\n          </li>\n        </ul>\n\n        <div class="hidden-content">\n          <ul class="event-list">\n            <li>\n              <a href="#" class="fl photo">\n                <img src="temp/img-1.jpg" alt="">\n              </a>\n\n              <div class="body">\n                <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n                <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n                <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n                <div class="stats">\n                  <span>\n                    <span class="ico-want-small"></span>\n                    15\n                  </span>\n\n                  <span>\n                    <span class="ico-like-small"></span>\n                    23\n                  </span>\n\n                  <span>\n                    <span class="ico-comment-small"></span>\n                    2\n                  </span>\n                </div>\n\n                <div class="short-desc">\n                  <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                  <div class="body">\n                    <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                    <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n\n        <a href="#" class="a-toggle">\u0432\u0441\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f <span>&darr;</span></a>\n      </div>\n\n      <a href="#" class="btn btn-event"><b>+</b> \u0421\u043e\u0431\u044b\u0442\u0438\u0435</a>\n    </div>\n  </div>\n\n  <div class="tabs-content p-common-content">\n    \x3c!--\n    <section class="p-block event-labels">\n      <h4 class="title-block">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0441 \u044d\u0442\u0438\u043c \u043c\u0435\u0441\u0442\u043e\u043c</h4>\n\n      <menu class="p-nav-collection">\n        <a href="#" class="prev">&larr; \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435</a>\n        <a href="#" class="next">\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 &rarr;</a>\n      </menu>\n\n      <div class="clearfix body">\n        <div class="scroll-photos">\n          <ul class="ul-collection-list">\n            <li>\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n\n            <li>\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </section>\n    --\x3e\n\n    \x3c!--\n    <section class="p-block peoples">\n      <h4 class="title-block">\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0445\u043e\u0442\u044f\u0442 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c</h4>\n\n      <div class="clearfix toggle-block">\n        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n\n        <div class="clearfix hidden-content">\n          <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n        </div>\n\n        <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <span>&darr;</span></a>\n      </div>\n    </section>\n    --\x3e\n\n    ';
if((h=g["if"].call(c,c.tags,{hash:{},inverse:q.noop,fn:q.program(14,function(a,d){var f,e;f='\n    <section class="p-block event-labels">\n      <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n      <div class="body">\n        ';if((e=g.each.call(a,a.tags,{hash:{},inverse:q.noop,fn:q.program(15,l,d),data:d}))||0===e)f+=e;return f+"\n      </div>\n    </section>\n    "},d),data:d}))||0===h)b+=h;b+="\n  </div>\n</div>\n\n</div>\n\n";if((h=g["if"].call(c,(a=c.user,null==a||!1===a?a:a.authorized),
{hash:{},inverse:q.noop,fn:q.program(17,function(a,d){var f,e,b;f='\n<aside id="right-panel">\n  <a href="#" class="a-btn a-add-collection">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n  <a href="#" class="a-btn a-add-path">\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n  ';b={hash:{},inverse:q.noop,fn:q.program(18,v,d),data:d};if((b=(e=g.ifEquals,e?e.call(a,(e=a.author,null==e||!1===e?e:e.id),(e=a.user,null==e||!1===e?e:e.id),b):w.call(a,
"ifEquals",(e=a.author,null==e||!1===e?e:e.id),(e=a.user,null==e||!1===e?e:e.id),b)))||0===b)f+=b;f+='\n\n  <div class="small-icons">\n    <a href="#" class="a-like ';b={hash:{},inverse:q.noop,fn:q.program(20,k,d),data:d};if((b=(e=g.ifBelong,e?e.call(a,a.user,a.likeusers,b):w.call(a,"ifBelong",a.user,a.likeusers,b)))||0===b)f+=b;f+='" data-placement="bottom" data-original-title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip"></a>\n    <a href="#" class="a-complaint" data-placement="bottom" data-original-title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043c\u0435\u0441\u0442\u043e" data-toggle="tooltip"></a>\n  </div>\n\n  <div class="aside-social">\n    <div class="share">\n      <div id="vk_like_point"></div>\n      <br>\n      <div class="fb-like" data-href="http://yasenput.ru/point/';
(b=g.id)?b=b.call(a,{hash:{},data:d}):(b=a.id,b=typeof b===n?b.apply(a):b);f+=p(b)+'" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n    </div>\n  </div>\n\n  <div class="small-icons">\n    ';if((b=g["if"].call(a,a.wifi,{hash:{},inverse:q.noop,fn:q.program(22,t,d),data:d}))||0===b)f+=b;if((b=g["if"].call(a,a.invalid,{hash:{},inverse:q.noop,fn:q.program(24,s,d),data:d}))||0===b)f+=b;if((b=g["if"].call(a,a.parking,{hash:{},inverse:q.noop,
fn:q.program(26,r,d),data:d}))||0===b)f+=b;if((b=g["if"].call(a,a.wc,{hash:{},inverse:q.noop,fn:q.program(28,u,d),data:d}))||0===b)f+=b;return f+"\n  </div>\n</aside>\n"},d),data:d}))||0===h)b+=h;return b+"\n"});
this.Templates.PointItemView=Handlebars.template(function(b,c,g,a,d){function e(a,d){return"marked"}function f(a,d){var e,f;return e=""+('\n        <img src="'+n((f=(f=(f=(f=(f=a.points,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.imgs),null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail207),typeof f===h?f.apply(a):f))+'" alt="" width="207" height="'+n((f=(f=(f=(f=(f=a.points,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.imgs),null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail207_height),typeof f===
h?f.apply(a):f))+'">\n      ')}function l(a,f){return'\n        <img src="/static/images/collection_logo.png" alt="" width="65" height="52">\n      '}function v(a,f){var d,e;return d=""+('\n      <li>\n        <a href="#">\n          <img src="'+n((e=(e=(e=(e=(e=a.points,null==e||!1===e?e:e[0]),null==e||!1===e?e:e.imgs),null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail65x52),typeof e===h?e.apply(a):e))+'" alt="" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="'+
n((e=(e=(e=(e=(e=a.points,null==e||!1===e?e:e[1]),null==e||!1===e?e:e.imgs),null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail65x52),typeof e===h?e.apply(a):e))+'" alt="" width="65" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="'+n((e=(e=(e=(e=(e=a.points,null==e||!1===e?e:e[2]),null==e||!1===e?e:e.imgs),null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail65x52),typeof e===h?e.apply(a):e))+'" alt="" width="65" height="52">\n        </a>\n      </li>\n    ')}
function k(e,a){var f,d,b;f="\n      ";if((b=g["if"].call(e,(d=e.points,null==d||!1===d?d:d[1]),{hash:{},inverse:p.program(13,s,a),fn:p.program(11,t,a),data:a}))||0===b)f+=b;return f+"\n    "}function t(e,a){var f,d;return f=""+('\n        <li>\n          <a href="#">\n            <img src="'+n((d=(d=(d=(d=(d=e.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail65x52),typeof d===h?d.apply(e):d))+'" alt="" width="65" height="52">\n          </a>\n        </li>\n\n        <li>\n          <a href="#">\n            <img src="'+
n((d=(d=(d=(d=(d=e.points,null==d||!1===d?d:d[1]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail135x52),typeof d===h?d.apply(e):d))+'" alt="" width="135" height="52">\n          </a>\n        </li>\n      ')}function s(e,a){var d,f,b;d="\n        ";if((b=g["if"].call(e,(f=e.points,null==f||!1===f?f:f[0]),{hash:{},inverse:p.noop,fn:p.program(14,r,a),data:a}))||0===b)d+=b;return d+"\n      "}function r(e,a){var d,f;return d=""+('\n          <li>\n            <a href="#">\n              <img src="'+
n((f=(f=(f=(f=(f=e.points,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.imgs),null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail205x52),typeof f===h?f.apply(e):f))+'" alt="" width="205" height="52">\n            </a>\n          </li>\n        ')}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};b="";var u,h="function",n=this.escapeExpression,p=this,q=g.helperMissing;a={hash:{},inverse:p.noop,fn:p.program(1,function(a,d){var b,c,m;b='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';
m={hash:{},inverse:p.noop,fn:p.program(2,e,d),data:d};if((m=(c=g.ifBelong,c?c.call(a,a.user,a.likeusers,m):q.call(a,"ifBelong",a.user,a.likeusers,m)))||0===m)b+=m;b+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n\n    <div class="yasen-info">\n      <span class="yp-title">';(m=g.ypi)?m=m.call(a,{hash:{},data:d}):(m=a.ypi,m=typeof m===h?m.apply(a):m);b+=n(m)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';
(m=g.likes_count)?m=m.call(a,{hash:{},data:d}):(m=a.likes_count,m=typeof m===h?m.apply(a):m);b+=n(m)+'</small>\n        <i class="yp-marked"></i><small>';(m=g.collections_count)?m=m.call(a,{hash:{},data:d}):(m=a.collections_count,m=typeof m===h?m.apply(a):m);b+=n(m)+'</small>\n        <i class="yp-place"></i><small>';(m=g.beens_count)?m=m.call(a,{hash:{},data:d}):(m=a.beens_count,m=typeof m===h?m.apply(a):m);b+=n(m)+'</small>\n        <i class="yp-star"></i><small>+';(m=g.reviewusersplus)?m=m.call(a,
{hash:{},data:d}):(m=a.reviewusersplus,m=typeof m===h?m.apply(a):m);b+=n(m)+"/-";(m=g.reviewusersminus)?m=m.call(a,{hash:{},data:d}):(m=a.reviewusersminus,m=typeof m===h?m.apply(a):m);b+=n(m)+'</small>\n      </div>\n    </div>\n\n    <a href="/set/';(m=g.id)?m=m.call(a,{hash:{},data:d}):(m=a.id,m=typeof m===h?m.apply(a):m);b+=n(m)+'" class="a-photo nonav">\n      ';if((m=g["if"].call(a,(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),{hash:{},inverse:p.program(6,
l,d),fn:p.program(4,f,d),data:d}))||0===m)b+=m;b+='\n    </a>\n  </div>\n\n  <ul class="photo-preview a-photo nonav">\n    ';if((m=g["if"].call(a,(c=a.points,null==c||!1===c?c:c[2]),{hash:{},inverse:p.program(10,k,d),fn:p.program(8,v,d),data:d}))||0===m)b+=m;b+='\n  </ul>\n  <div class="body author-point">\n    <img src="/media/'+n((c=(c=a.author,null==c||!1===c?c:c.avatar),typeof c===h?c.apply(a):c))+'" alt="" class="avatar" width="29" height="30">\n\n      <h3>';(m=g.name)?m=m.call(a,{hash:{},data:d}):
(m=a.name,m=typeof m===h?m.apply(a):m);return b+=n(m)+"</h3>\n      <p>\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043b "+n((c=(c=a.author,null==c||!1===c?c:c.first_name),typeof c===h?c.apply(a):c))+" "+n((c=(c=a.author,null==c||!1===c?c:c.last_name),typeof c===h?c.apply(a):c))+"</p>\n  </div>\n"},d),data:d};if((a=(u=g.ifEquals,u?u.call(c,c.type_of_item,"set",a):q.call(c,"ifEquals",c.type_of_item,"set",a)))||0===a)b+=a;b+="\n\n";a={hash:{},inverse:p.noop,
fn:p.program(16,function(a,d){var f,b,c;f='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';c={hash:{},inverse:p.noop,fn:p.program(2,e,d),data:d};if((c=(b=g.ifBelong,b?b.call(a,a.user,a.likeusers,c):q.call(a,"ifBelong",a.user,a.likeusers,c)))||0===c)f+=c;f+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n    <a href="#" class="a-collection nonav" title="\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e" data-toggle="tooltip" data-placement="bottom">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n\n    <div class="yasen-info">\n      <span class="yp-title">';
(c=g.ypi)?c=c.call(a,{hash:{},data:d}):(c=a.ypi,c=typeof c===h?c.apply(a):c);f+=n(c)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';(c=g.likes_count)?c=c.call(a,{hash:{},data:d}):(c=a.likes_count,c=typeof c===h?c.apply(a):c);f+=n(c)+'</small>\n        <i class="yp-marked"></i><small>';(c=g.collections_count)?c=c.call(a,{hash:{},data:d}):(c=a.collections_count,c=typeof c===h?c.apply(a):c);f+=n(c)+'</small>\n        <i class="yp-place"></i><small>';
(c=g.beens_count)?c=c.call(a,{hash:{},data:d}):(c=a.beens_count,c=typeof c===h?c.apply(a):c);f+=n(c)+'</small>\n        <i class="yp-star"></i><small>+';(c=g.reviewusersplus)?c=c.call(a,{hash:{},data:d}):(c=a.reviewusersplus,c=typeof c===h?c.apply(a):c);f+=n(c)+"/-";(c=g.reviewusersminus)?c=c.call(a,{hash:{},data:d}):(c=a.reviewusersminus,c=typeof c===h?c.apply(a):c);f+=n(c)+'</small>\n      </div>\n    </div>\n\n    <a href="/point/';(c=g.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c=typeof c===h?c.apply(a):
c);f+=n(c)+'" class="a-photo nonav">\n      <img src="'+n((b=(b=(b=a.imgs,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.thumbnail207),typeof b===h?b.apply(a):b))+'" alt="" width="207" height="'+n((b=(b=(b=a.imgs,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.thumbnail207_height),typeof b===h?b.apply(a):b))+'">\n    </a>\n  </div>\n\n  <div class="body">\n      <img src="/media/'+n((b=(b=a.author,null==b||!1===b?b:b.avatar),typeof b===h?b.apply(a):b))+'" alt="" class="avatar" width="29" height="30">\n    <h3>';
(c=g.name)?c=c.call(a,{hash:{},data:d}):(c=a.name,c=typeof c===h?c.apply(a):c);f+=n(c)+"</h3>\n    <p>";(c=g.address)?c=c.call(a,{hash:{},data:d}):(c=a.address,c=typeof c===h?c.apply(a):c);return f+=n(c)+"</p>\n  </div>\n"},d),data:d};if((a=(u=g.ifEquals,u?u.call(c,c.type_of_item,"point",a):q.call(c,"ifEquals",c.type_of_item,"point",a)))||0===a)b+=a;return b+"\n"});this.Templates.PointListView=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];return""});
this.Templates.PointPanelView=Handlebars.template(function(b,c,g,a,d){function e(a,f){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var f,l;a=g.helperMissing;b='<menu class="tabs">\n  <a href="/popular" data-target="tab-popular" class="';l={hash:{},inverse:this.noop,fn:this.program(1,e,d),data:d};if((l=(f=g.ifEquals,f?f.call(c,c.active,"popular",l):a.call(c,"ifEquals",c.active,"popular",l)))||0===l)b+=l;b+=' nonav menu-item">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435</a>\n  <a href="/new" data-target="tab-new" class="';
l={hash:{},inverse:this.noop,fn:this.program(1,e,d),data:d};if((l=(f=g.ifEquals,f?f.call(c,c.active,"new",l):a.call(c,"ifEquals",c.active,"new",l)))||0===l)b+=l;return b+' nonav menu-item">\u043d\u043e\u0432\u043e\u0435</a>\n</menu>\n'});this.Templates.PointsMainLayout=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<header id="point-panel" class="clearfix top-panel"></header>\n\n<div id="point-content" class="content tabs-content">\n  <section id="tab-popular"></section>\n  <section id="tab-new"></section>\n</div>\n'});
this.Templates.ProgressImage=Handlebars.template(function(b,c,g,a,d){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};b="";var e=this.escapeExpression;if((c=g.each.call(c,c.imgs,{hash:{},inverse:this.noop,fn:this.program(1,function(a,d){var b,c;b='\n  <li>\n    <div class="item-photo">\n      <img src="';(c=g.thumbnail104x104)?c=c.call(a,{hash:{},data:d}):(c=a.thumbnail104x104,c="function"===typeof c?c.apply(a):c);return b+=e(c)+'" alt="" width="104" height="104">\n      <button class="remove-photo"></button>\n\n      <i class="ico-main-photo"></i>\n      <div class="txt-tooltip">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u044b\u043c</div>\n    </div>\n  </li>\n'},
d),data:d}))||0===c)b+=c;return b+"\n"});
this.Templates.SetDetailView=Handlebars.template(function(b,c,g,a,d){function e(a,d){return'\n      \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n    '}function f(a,d){return"marked"}function l(a,d){return'<a href="#" class="a-btn stp-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'}function v(a,d){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;d=d||{};var k,
t=this.escapeExpression,s=this,r=g.helperMissing;b='<div class="clearfix p-body">\n  <header>\n    ';if((a=g["if"].call(c,(k=c.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:s.noop,fn:s.program(1,e,d),data:d}))||0===a)b+=a;b+='\n      \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n      <h2>'+t((k=(k=c.activePoint,null==k||!1===k?k:k.name),"function"===typeof k?k.apply(c):k))+'</h2>\n      <small>\u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0441\u044f</small> <a href="#">'+
t((k=(k=(k=c.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.first_name),"function"===typeof k?k.apply(c):k))+" "+t((k=(k=(k=c.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.last_name),"function"===typeof k?k.apply(c):k))+'</a>\n\n      <div class="addr">'+t((k=(k=c.activePoint,null==k||!1===k?k:k.address),"function"===typeof k?k.apply(c):k))+'</div>\n\n      <div class="stats">\n        <span>\n          <span class="ico-like-small"></span>\n          '+t((k=(k=c.activePoint,
null==k||!1===k?k:k.likes_count),"function"===typeof k?k.apply(c):k))+'\n        </span>\n\n        <span>\n          <span class="ico-comment-small"></span>\n          '+t((k=(k=c.activePoint,null==k||!1===k?k:k.comments),"function"===typeof k?k.apply(c):k))+'\n        </span>\n      </div>\n  </header>\n\n  <div class="wide-box">\n    <ul class="p-tabs">\n      <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n      <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n      <li><a href="#tab-desc" data-toggle="tab">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435</a></li>\n\n      <li><div class="shadow"></div></li>\n    </ul>\n\n    <div class="tabs-content">\n\n      <div id="tab-photo" class="tab-pane active">\n        <div class="tabs-content">\n          <div class="toggle-block">\n            <div class="clearfix p-gallery">\n              <div class="clearfix place-photos">\n                <div class="photos-gallery">\n                  <ul>\n                    ';
if((a=g.each.call(c,(k=c.activePoint,null==k||!1===k?k:k.imgs),{hash:{},inverse:s.noop,fn:s.programWithDepth(3,function(a,d,f){var e,b,c;e=""+('\n                    <li>\n                      <div class="item-photo" data-set-id="'+t((b=f.id,"function"===typeof b?b.apply(a):b))+'" data-photo-id="');(c=g.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c="function"===typeof c?c.apply(a):c);e+=t(c)+'">\n                        <a href="/set/'+t((b=f.id,"function"===typeof b?b.apply(a):b))+"/point/"+t((b=(b=
f.activePoint,null==b||!1===b?b:b.id),"function"===typeof b?b.apply(a):b))+"/photo/";(c=g.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c="function"===typeof c?c.apply(a):c);e+=t(c)+'">\n                          <img src="';(c=g.thumbnail104x104)?c=c.call(a,{hash:{},data:d}):(c=a.thumbnail104x104,c="function"===typeof c?c.apply(a):c);return e+=t(c)+'" alt="" width="104" height="104">\n                        </a>\n                          <button class="remove-photo"></button>\n                          <button class="complaint-photo"></button>\n                      </div>\n                    </li>\n                    '},
d,c),data:d}))||0===a)b+=a;b+='\n                  </ul>\n                </div>\n\n                <div class="item-photo load-photo">\n                  <form id="addImageForm" action="" method="POST" enctype="multipart/form-data">\n                    <input name="img" type="file">\n                  </form>\n                </div>\n\n                <span class="photos-next"></span>\n                <span class="photos-prev"></span>\n              </div>\n\n              <div id="big-photo"></div>\x3c!-- end #big-photo --\x3e\n\n            </div>\n          </div>\n        </div>\n      </div>\x3c!-- end #tab-photo --\x3e\n\n      <div id="tab-map" class="tab-pane">\n        <div class="map">\n            <div id="popup-map-1" style="width:560px; height:510px"></div>\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043d\u0430\u0447\u0430\u043b\u043e) --\x3e\n\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043a\u043e\u043d\u0435\u0446) --\x3e\n            <div class="m-ico-group">\n                <a href="#">\n                    <span class="m-ico m-hotel"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-cafe"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-restoran"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-turism"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-azs"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-active-rest"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-sto"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-commerc"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-hunting"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-events"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-shop"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-fishing"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-monument"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-church"></span>\n                </a>\n            </div>\n\n        </div>\n\n        <div id="near-objects">\n          <h4 class="title-block">\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u043d\u0438\u0446\u044b</h4>\n\n          <ol>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043e\u0434\u0438\u043d</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0434\u0432\u0430</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0438</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0447\u0435\u0442\u044b\u0440\u0435</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043f\u044f\u0442\u044c</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n          </ol>\n        </div>\n\n      </div>\x3c!-- end #tab-map --\x3e\n\n      <div id="tab-desc" class="tab-pane">\n        <div class="toggle-block">\n          <ul class="ul-desc"></ul>\n          <div class="hidden-content">\n            <ul class="ul-desc"></ul>\n          </div>\n\n          <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f <span>&darr;</span></a>\n        </div>\n\n        <div class="add-comment">\n          <form action="#">\n            <div class="ac-block">\n              <img src="'+
t((k=(k=c.user,null==k||!1===k?k:k.avatar),"function"===typeof k?k.apply(c):k))+'" alt="" width="29" height="30" class="avatar">\n\n              <div class="ac-body">\n                <div class="toggle-area">\n                  <textarea rows="3" cols="40"></textarea>\n                  <input type="submit" value=" ">\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\x3c!-- end #tab-desc --\x3e\n\n      <div class="tabs-content p-common-content" style="display: none">\n        <section class="p-block peoples">\n          <h4 class="title-block">\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0445\u043e\u0442\u044f\u0442 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c</h4>\n          <div class="clearfix toggle-block">\n            <div class="clearfix hidden-content"></div>\n            <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <span>&darr;</span></a>\n          </div>\n        </section>\n\n        <section class="p-block event-labels">\n            <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n            <div class="body">\n              ';
if((a=g.each.call(c,(k=c.activePoint,null==k||!1===k?k:k.tags),{hash:{},inverse:s.noop,fn:s.program(5,function(a,d){var f,e;f='\n                <div class="label">';(e=g.name)?e=e.call(a,{hash:{},data:d}):(e=a.name,e="function"===typeof e?e.apply(a):e);return f+=t(e)+"</div>\n              "},d),data:d}))||0===a)b+=a;b+="\n            </div>\n        </section>\n      </div>\x3c!-- end .tabs-content --\x3e\n    </div>\n  </div>\n\n  <footer>\n    ";if((a=g["if"].call(c,(k=c.user,null==k||!1===k?
k:k.authorized),{hash:{},inverse:s.noop,fn:s.program(1,e,d),data:d}))||0===a)b+=a;b+='\n  </footer>\n</div>\x3c!-- end .cleatfix-body --\x3e\n\n<header id="c-top-panel">\n  <div class="inner-wrap">\n    <aside class="stp-buttons">\n    ';if((a=g["if"].call(c,(k=c.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:s.noop,fn:s.program(7,function(a,d){var e,b,c;e='\n      <div class="c-buttons">\n        <a href="#" class="a-btn stp-like ';c={hash:{},inverse:s.noop,fn:s.program(8,f,d),data:d};if((c=
(b=g.ifBelong,b?b.call(a,a.user,a.likeusers,c):r.call(a,"ifBelong",a.user,a.likeusers,c)))||0===c)e+=c;e+='">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</a>\n        ';c={hash:{},inverse:s.noop,fn:s.program(10,l,d),data:d};if((c=(b=g.ifEquals,b?b.call(a,(b=a.author,null==b||!1===b?b:b.id),(b=a.user,null==b||!1===b?b:b.id),c):r.call(a,"ifEquals",(b=a.author,null==b||!1===b?b:b.id),(b=a.user,null==b||!1===b?b:b.id),c)))||0===c)e+=c;return e+"\n      </div>\n    "},d),data:d}))||0===a)b+=a;b+='\n      <div class="c-edit-buttons">\n        \x3c!--<a href="#" class="a-btn stp-remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>--\x3e\n        <a href="#" class="a-btn stp-save">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</a>\n      </div>\n    </aside>\n\n    <div class="ctp-head">\n      <h1>';
(a=g.name)?a=a.call(c,{hash:{},data:d}):(a=c.name,a="function"===typeof a?a.apply(c):a);b+=t(a)+"</h1>\n      ";a={hash:{},inverse:s.program(14,function(a,d){var e,f;return e=""+('\n        \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\n        <a href="#">'+t((f=(f=a.author,null==f||!1===f?f:f.first_name),"function"===typeof f?f.apply(a):f))+" "+t((f=(f=a.author,null==f||!1===f?f:f.last_name),"function"===typeof f?f.apply(a):f))+"</a>\n      ")},
d),fn:s.program(12,function(a,f){return"\n      "},d),data:d};if((a=(k=g.ifEquals,k?k.call(c,c.author,"new",a):r.call(c,"ifEquals",c.author,"new",a)))||0===a)b+=a;b+='\n    </div>\n\n    <div class="ctp-content">\n      ';(a=g.headDescription)?a=a.call(c,{hash:{},data:d}):(a=c.headDescription,a="function"===typeof a?a.apply(c):a);b+=t(a)+"\n      ";if((a=g["if"].call(c,c.tailDescription,{hash:{},inverse:s.noop,fn:s.program(16,function(a,f){var d,e;d='\n        <span class="hellip">\u2026</span>\n        <span class="hidden more-desc">';
(e=g.tailDescription)?e=e.call(a,{hash:{},data:f}):(e=a.tailDescription,e="function"===typeof e?e.apply(a):e);return d+=t(e)+'</span>\n        <a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>\n      '},d),data:d}))||0===a)b+=a;b+='\n    </div>\n\n    <div class="c-edit-inputs">\n      <input type="text" value="';(a=g.name)?a=a.call(c,{hash:{},data:d}):(a=c.name,a="function"===typeof a?a.apply(c):a);b+=t(a)+'">\n      <input type="text" value="';(a=g.description)?
a=a.call(c,{hash:{},data:d}):(a=c.description,a="function"===typeof a?a.apply(c):a);b+=t(a)+'">\n    </div>\n  </div>\n</header>\n\n<aside id="c-left-panel">\n  <div class="aside-content">\n    <div class="aside-viewport">\n      <ol id="ol-collection">\n        ';if((a=g.each.call(c,c.points,{hash:{},inverse:s.noop,fn:s.programWithDepth(18,function(a,f,e){var d,b,c;d='\n        <li class="choose_place ';c={hash:{},inverse:s.noop,fn:s.program(19,v,f),data:f};if((c=(b=g.ifEquals,b?b.call(a,a.id,(b=
e.activePoint,null==b||!1===b?b:b.id),c):r.call(a,"ifEquals",a.id,(b=e.activePoint,null==b||!1===b?b:b.id),c)))||0===c)d+=c;d+='" data-placemark-id="placemark-1">\n          <a href="/set/'+t((b=e.id,"function"===typeof b?b.apply(a):b))+"/point/";(c=g.id)?c=c.call(a,{hash:{},data:f}):(c=a.id,c="function"===typeof c?c.apply(a):c);d+=t(c)+'" class="choose_place_a" data-id="';(c=g.id)?c=c.call(a,{hash:{},data:f}):(c=a.id,c="function"===typeof c?c.apply(a):c);d+=t(c)+'">';(c=g.name)?c=c.call(a,{hash:{},
data:f}):(c=a.name,c="function"===typeof c?c.apply(a):c);return d+=t(c)+'</a>\n            <button type="button" class="remove-collection"></button>\n          </li>\n        '},d,c),data:d}))||0===a)b+=a;return b+'\n      </ol>\n    </div>\n\n    <a href="#" class="clp-up"></a> \x3c!-- clp- collection left panel  --\x3e\n    <a href="#" class="clp-down"></a>\n  </div>\n</aside>\n'});
(function(){Handlebars.registerHelper("ifEquals",function(b,c,g){return(null!=b?b.toString():void 0)===(null!=c?c.toString():void 0)?g.fn(this):g.inverse(this)});Handlebars.registerHelper("ifBelong",function(b,c,g){var a,d,e,f;if(void 0===c)return!1;e=0;for(f=c.length;e<f;e++)d=c[e],d.id===b.id&&(a=!0);return a?g.fn(this):g.inverse(this)});Handlebars.registerHelper("dateFormat",function(b,c){var g;return window.dateFormat?(g=c.hash.format||"MMM Do, YYYY",(new Date(b)).format(g)):b});Handlebars.registerHelper("eachKey",
function(b,c){var g,a,d,e;a="";b=b.toString().substring(1,b.length-1).split(",");d=0;for(e=b.length;d<e;d++)g=b[d],a+=c.fn(g.trim());return a});Handlebars.registerHelper("splitAddr",function(b,c,g){b=b.split(c);return b[2]});Handlebars.registerHelper("addShy",function(b,c){var g,a;if(_.contains(b," "))return b;g=b.slice(0,10);a=b.slice(10);return new Handlebars.SafeString(""+g+"&shy;"+a)})}).call(this);
(function(){Yapp.module("Common",{startWithParent:!1,define:function(){this.addInitializer(function(){console.log("initializing Common Module");this.router=new Yapp.Common.Router({controller:new Yapp.Common.Controller});Yapp.header.show(new Yapp.Common.HeaderView({model:Yapp.user}));return Yapp.footer.show(new Yapp.Common.FooterView)});return this.sliderPhotos={flag:null,countHidden:0,afterMove:function(b){if(0===b)this.prev.addClass("disabled"),this.next.removeClass("disabled");else if(b===$("li",
this.slider).length-this.p.visible)this.prev.removeClass("disabled"),this.next.addClass("disabled");else return this.prev.removeClass("disabled"),this.next.removeClass("disabled")},move:function(b){var c;c=this;c.countHidden+=1*b;return c.slider.animate({left:-(c.slider.find("li:eq(1)").outerWidth(!0)*c.countHidden)},function(){c.flag=null;return c.afterMove(c.countHidden)})},init:function(b){var c;c=this;c.p=b;c.prev=$(".photos-prev",b.root);c.next=$(".photos-next",b.root);c.slider=$("ul",b.root);
c.countHidden=0;c.slider.animate({left:0},300);$("li",b.root).length<=b.visible?(c.prev.hide(),c.next.hide()):(c.prev.show(),c.next.show());c.next.unbind("click.SliderPhotos").bind("click.SliderPhotos",function(){if(c.flag||$(this).hasClass("disabled"))return!1;c.flag=!0;c.move(1);return!1}).removeClass("disabled");return c.prev.unbind("click.SliderPhotos").bind("click.SliderPhotos",function(){if(c.flag||$(this).hasClass("disabled"))return!1;c.flag=!0;c.move(-1);return!1}).addClass("disabled")},reinit:function(b){return this.init(b||
this.p)}}}})}).call(this);
(function(){Yapp.module("Map",{startWithParent:!1,define:function(){return this.addInitializer(function(){var b=this;console.log("initializing Map Module");this.router=new Yapp.Map.Router({controller:new Yapp.Map.Controller});return $.getScript(Yapp.YA_MAP_URL,function(){return ymaps.ready(function(){var c,g;console.log("Init Yandex map");c=new ymaps.Map("mainmap",{center:[ymaps.geolocation.latitude,ymaps.geolocation.longitude],zoom:12});Yapp.user.set({location:ymaps.geolocation});c.controls.add("zoomControl").add("typeSelector");
g=new ymaps.GeoObjectCollection;c.geoObjects.add(g);b.yandexmap=c;return b.trigger("load:yandexmap",b.yandexmap)})})})}})}).call(this);(function(){Yapp.module("Points",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Points Module");return this.router=new Yapp.Points.Router({controller:new Yapp.Points.Controller})})}})}).call(this);(function(){Yapp.module("User",{startWithParent:!1,define:function(){return this.addInitializer(function(){return console.log("initializing User Module")})}})}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function f(){this.constructor=a}for(var b in e)g.call(e,b)&&(a[b]=e[b]);f.prototype=e.prototype;a.prototype=new f;a.__super__=e.prototype;return a};b=window.Yapp;b.Common.PopupRegion=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.el="#popups .scroll-box";e.prototype.initialize=function(){console.log("initializing Yapp.Common.PopupRegion");this.body="body";this.wrapper="#popups";return this.overlay=
"#overlay"};e.prototype.getEl=function(a){var d;d=this;a=$(a);a.click(function(a){if($(a.target).hasClass("scroll-box"))return d.close()});return a};e.prototype.onShow=function(){$(this.body).css("overflow","hidden");$(this.overlay).show();return $(this.wrapper).show()};e.prototype.onClose=function(){$(this.body).css("overflow","initial");$(this.overlay).hide();$(this.wrapper).hide();return b.Common.router.navigate("/")};return e}(Backbone.Marionette.Region)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,d){function e(){this.constructor=a}for(var f in d)c.call(d,f)&&(a[f]=d[f]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a};Yapp.Common.PopupView=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Common.PopupView")};d.prototype.id="p-common";d.prototype.className="popup";d.prototype.onBeforeRender=function(){return console.log("before render PopupView")};
d.prototype.modelEvents={change:"render"};d.prototype.templateHelpers=function(){return{user:Yapp.user.toJSON()}};return d}(Marionette.ItemView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function f(){this.constructor=a}for(var b in e)g.call(e,b)&&(a[b]=e[b]);f.prototype=e.prototype;a.prototype=new f;a.__super__=e.prototype;return a};b=window.Yapp;b.Points.Point=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){return console.log("initializing Yapp.Points.Point")};e.prototype.idAttribute="unid";e.prototype.urlRoot=function(){return b.API_BASE_URL+"/points/"};
e.prototype.defaults=function(){return{priority:0,name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};e.prototype.validate=function(a,e){var d;d=[];""===a.name&&d.push("name");""===a.address&&d.push("address");""===a.longitude&&d.push("longitude");""===a.latitude&&d.push("latitude");""===a.description&&d.push("description");(!a.imgs||0===a.imgs.length)&&d.push("photos");(!a.tags||0===a.tags.length)&&d.push("tags");if(0<d.length)return d};e.prototype.search=function(a,d){return b.request("request",
{type:"GET",url:"/points/search/",params:{dropResult:d},data:{s:a},successCallback:this.successSearch})};e.prototype.successSearch=function(a,d){return _.each(a,function(a){return d.append("<li data-point-id="+a.id+">"+a.name+"</li>")})};e.prototype.like=function(a,d,e){return b.request("request",{url:b.API_BASE_URL+"/points/like",type:"POST",context:e,successCallback:d,params:{target:a},data:{id:this.get("id")}})};e.prototype.likePhoto=function(a,d,e,c){return b.request("request",{url:b.API_BASE_URL+
"/photos/like",type:"POST",context:c,successCallback:e,params:{target:a},data:{id:d}})};e.prototype.addCommentPhoto=function(a,d,e,c){return b.request("request",{url:b.API_BASE_URL+"/comments/add",type:"POST",context:c,successCallback:e,data:{photo:a,txt:d}})};e.prototype.removeCommentPhoto=function(a,d,e){return b.request("request",{url:b.API_BASE_URL+"/comments/del",type:"POST",context:e,successCallback:d,params:{commentId:a},data:{id:a}})};e.prototype.addPhoto=function(a,d,e){return b.request("request",
{url:b.API_BASE_URL+("/photos/point/"+this.get("id")+"/add"),type:"POST",context:e,successCallback:d,processData:!1,contentType:!1,params:{id:this.get("id")},data:a})};e.prototype.removePhoto=function(a,d,e){return b.request("request",{url:b.API_BASE_URL+"/photos/del",type:"POST",context:e,successCallback:d,params:{id:a},data:{id:a}})};e.prototype.parse=function(a){_.isArray(a)&&(a=a[0]);return a};return e}(Backbone.Model)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function b(){this.constructor=a}for(var c in e)g.call(e,c)&&(a[c]=e[c]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a};b=window.Yapp;b.Points.Set=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){return console.log("initializing Yapp.Points.Set")};e.prototype.idAttribute="unid";e.prototype.urlRoot=function(){return b.API_BASE_URL+"/collections/"};
e.prototype.defaults=function(){return{name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};e.prototype.validate=function(a,d){var e;e=[];""===a.name&&e.push("name");""===a.address&&e.push("address");""===a.longitude&&e.push("longitude");""===a.latitude&&e.push("latitude");(!a.imgs||0===a.imgs.length)&&e.push("photos");(!a.tags||0===a.tags.length)&&e.push("tags");if(0<e.length)return e};e.prototype.like=function(a,e,d){return b.request("request",{url:b.API_BASE_URL+"/collections/like",
type:"POST",context:d,successCallback:e,params:{target:a},data:{collectionid:this.get("id")}})};e.prototype.parse=function(a){_.isArray(a)&&(a=a[0]);return a};return e}(Backbone.Model)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,d){function e(){this.constructor=a}for(var b in d)c.call(d,b)&&(a[b]=d[b]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a};window.Yapp.User.Profile=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.User.Profile")};d.prototype.defaults={first_name:"",last_name:"",authorized:!1,email:!1,avatar:"",last_state:"pins",
count_liked_objects:0,count_commented_objects:0};return d}(Backbone.Model)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function b(){this.constructor=a}for(var c in e)g.call(e,c)&&(a[c]=e[c]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a};b=window.Yapp;b.Points.PointCollection=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.model=function(a,e){if("point"===a.type_of_item)return new b.Points.Point(a,e);if("set"===a.type_of_item)return new b.Points.Set(a,e)};e.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointCollection")};
e.prototype.comparator=function(a){return-a.get("ypi")};e.prototype.parse=function(a){return a};e.prototype.url=function(){return b.API_BASE_URL+"/api/v1/yapens/"};return e}(Backbone.Collection)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function b(){this.constructor=a}for(var c in e)g.call(e,c)&&(a[c]=e[c]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a};b=window.Yapp;b.Points.MainLayout=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.template=Templates.PointsMainLayout;e.prototype.id="point-layout";e.prototype.regions={panelContainer:"#point-panel",popularContainer:"#tab-popular",newContainer:"#tab-new"};
e.prototype.initialize=function(){console.log("initializing Yapp.Points.MainLayout");return this.pointCollection=new b.Points.PointCollection};e.prototype.onShow=function(){var a=this,a=this;this.panelContainer.show(new b.Points.PointPanelView({model:b.user,content_type:this.options.content_type||"popular"}));"new"===this.options.content_type&&(this.pointCollection.comparator=function(a){return-new Date(a.get("updated"))});console.log("loading points collection");return this.pointCollection.fetch({data:{content:this.options.content_type||
"popular"},success:function(e,d){console.log(["server response: ",d]);if(d.error||d.errors)return console.error(d);a.pointCollection.sort();return a.popularContainer.show(new b.Points.PointListView({collection:a.pointCollection}))}})};return e}(Marionette.Layout)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function b(){this.constructor=a}for(var c in e)g.call(e,c)&&(a[c]=e[c]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a};b=window.Yapp;b.Map.MapView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.template=Templates.MapView;e.prototype.tagName="div";e.prototype.className="map";e.prototype.initialize=function(){console.log("initializing Yapp.Map.MapView");this.user=
b.user;return this.listenTo(b.Map,"load:yandexmap",this.setMap)};e.prototype.events={"click .a-toggle":"toggleMap"};e.prototype.toggleMap=function(a){a.preventDefault();return b.execute("toggleMap")};e.prototype.setMap=function(a){this.map=a;return this.map.events.add("actionend",this.changeMap,this)};e.prototype.changeMap=function(a){var e=this;a=this.map.getCenter();return ymaps.geocode(a,{results:1}).then(function(a){a=a.geoObjects.get(0).properties.get("text").split(", ").slice(0,3);a=_.object(["country",
"region","city"],a);return e.user.set({location:a})})};return e}(Marionette.ItemView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,e){function b(){this.constructor=a}for(var c in e)g.call(e,c)&&(a[c]=e[c]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a};b=window.Yapp;b.Common.AuthPopupView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){return console.log("initialize AuthPopupView")};e.prototype.template=Templates.AuthPopupView;e.prototype.events=function(){return{"click .p-close":"hidePopup"}};
e.prototype.hidePopup=function(){return b.popup.close()};return e}(b.Common.PopupView)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,d){function e(){this.constructor=a}for(var b in d)c.call(d,b)&&(a[b]=d[b]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a};window.Yapp.Common.FooterView=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Common.FooterView")};d.prototype.template=Templates.FooterView;d.prototype.events={"click .a-toggle":"toggleFooter"};
d.prototype.modelEvents={change:"render"};d.prototype.toggleFooter=function(a){a.preventDefault();return $("body").toggleClass("hide-footer")};return d}(Marionette.ItemView)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,d){function e(){this.constructor=a}for(var b in d)c.call(d,b)&&(a[b]=d[b]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a};Yapp.Common.HeaderView=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){console.log("initializing Yapp.Common.HeaderView");this.multisearchDropdownTemplate=Templates.MultisearchDropdown;return this.labelTemplate=Templates.LabelTemplate};
d.prototype.template=Templates.HeaderView;d.prototype.ui={labelFields:".label-fields",dropSearch:".drop-search",clearInput:".clear-input",searchInput:".text-field",labelAdd:".label-add",removeLAbel:".remove-label"};d.prototype.events={"click .drop-add-head, .auth, a-login":"showAuthPopup","click .item-label":"addLabel","click .remove-label":"removeLabel","click .label-add":"focusInput","click .label-fields":"focusLabels","click .clear-input":"clearSearchInput","click #multisearchForm input[type=submit]":"submitSearch",
"submit @multisearchForm":"submitSearch","keydown .text-field input":"keyupInput"};d.prototype.modelEvents={change:"render"};d.prototype.showAuthPopup=function(a){if(!this.model.get("authorized"))return a.preventDefault(),a.stopPropagation(),Yapp.vent.trigger("user:notauthorized")};d.prototype.addLabel=function(a){a.preventDefault();a=$(a.currentTarget);a={id:a.data("id"),name:a.data("name"),type:a.data("type")};switch(a.type){case "tags":this.ui.labelFields.children(".label-add").before(this.labelTemplate(a));
break;case "place":return;case "user":this.ui.labelFields.children(".label-user").remove(),this.ui.labelFields.children(".label-add").before(this.labelTemplate(a))}return this.hideDropdown()};d.prototype.removeLabel=function(a){a.preventDefault();a.stopPropagation();$(a.currentTarget).parent().remove();return this.ui.searchInput.children().focus()};d.prototype.focusInput=function(a){a.preventDefault();a.stopPropagation();this.ui.labelAdd.hide();this.setWidthInput();this.ui.searchInput.show();return this.ui.searchInput.children().val("").focus()};
d.prototype.focusLabels=function(a){if($(a.target).hasClass("label-fields"))return this.focusInput(a)};d.prototype.clearSearchInput=function(a){a.preventDefault();$(a.currentTarget);return this.ui.labelFields.children(".label-name, .label-place, .label-user, .label-tags, .label-new").remove()};d.prototype.submitSearch=function(a){a.preventDefault();a.stopPropagation();return console.log(a)};d.prototype.hideDropdown=function(a){$(window).unbind("resize",$.proxy(this.setHeightSearchMenu,this));this.ui.dropSearch.hide();
this.ui.dropSearch.find("li").removeClass("selected");this.ui.searchInput.hide();return this.ui.labelAdd.show()};d.prototype.showDropdown=function(a){_.isEmpty(_.flatten(a))&&(a={empty:!0});$(window).bind("resize",$.proxy(this.setHeightSearchMenu,this));this.setWidthInput();this.ui.dropSearch.html(this.multisearchDropdownTemplate(a));this.ui.dropSearch.show();return this.setHeightSearchMenu()};d.prototype.keyupInput=function(a){var d=this;this.onKeyDownSpecial(a);return this.delay(function(){var b;
38!==a.which&&40!==a.which&&13!==a.which&&27!==a.which&&8!==a.which&&(b=d.ui.searchInput.children().val())&&d.search(b,d.showDropdown,d)},500)};d.prototype.onKeyDownSpecial=function(a){switch(a.which){case 8:if(""===this.ui.searchInput.children().val())return this.ui.labelFields.children(".label:visible").last().hide();break;case 13:a.preventDefault();a.stopPropagation();$(".selected",this.ui.dropSearch).length?$(".selected a",this.ui.dropSearch).click():this.ui.searchInput.children().val()&&(a={type:"name",
id:0,name:this.ui.searchInput.children().val()},this.ui.labelFields.children(".label-name").remove(),this.ui.labelFields.children(".label-add").before(this.labelTemplate(a)));this.hideDropdown();break;case 27:a.preventDefault();a.stopPropagation();this.hideDropdown();break;case 38:a.preventDefault();a.stopPropagation();this.selectDropLi(-1);break;case 40:a.preventDefault(),a.stopPropagation(),this.selectDropLi(1)}};d.prototype.selectDropLi=function(a){var d,b;b=$("li:visible:has(a)",this.ui.dropSearch).filter(function(){return!0});
if(b.filter(".selected").length){d=b.index(b.filter(".selected"));if(d<b.length-1){if(1===a)return b.filter(".selected:first").removeClass("selected"),b.eq(d+1).addClass("selected").focus();b.filter(".selected:first").removeClass("selected");return b.eq(d-1).addClass("selected").focus()}b.filter(".selected:first").removeClass("selected");return 1===a?b.eq(0).addClass("selected").focus():b.eq(d-1).addClass("selected").focus()}return 1===a?b.eq(0).addClass("selected").focus():b.last().addClass("selected").focus()};
d.prototype.setWidthInput=function(){var a,b,d;b=this.ui.labelFields.width()-6;a=d=0;this.ui.labelFields.children(".label:visible").each(function(b){b=$(this).offset();b.top!==a&&(a=b.top,d=0);return d+=$(this).outerWidth(!0)});return this.ui.searchInput.width(b-d-4)};d.prototype.setHeightSearchMenu=function(){var a,b,d,c;b=this.ui.dropSearch;b.css("height","auto");a=b.outerHeight();d=b.offset().top-$(window).scrollTop();c=$(window).height();return c<a+d+60?b.height(c-d-60):b.css("height","auto")};
d.prototype.delay=function(){var a;a=0;return function(b,d){clearTimeout(a);a=setTimeout(b,d)}}();d.prototype.search=function(a,b,d){return Yapp.request("request",{url:Yapp.API_BASE_URL+"/api/v1/search",type:"GET",context:d,successCallback:b,data:{s:a}})};return d}(Marionette.ItemView)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,b){function e(){this.constructor=a}for(var f in b)c.call(b,f)&&(a[f]=b[f]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};window.Yapp.Common.StubView=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Common.StubView")};d.prototype.modelEvents={change:"render"};return d}(Marionette.ItemView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointAddView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){console.log("initialize PointAddView");this.model=new b.Points.Point;this.model.on("invalid",this.showError,this);this.model.on("valid",this.savePoint,
this);b.request("request",{url:"/tags/list",context:this,successCallback:this.setLabels,data:{content:"popular"}});return this.listenTo(b.Map,"load:yandexmap",this.onInitMap)};e.prototype.template=Templates.PointAddView;e.prototype.ui={form:"#pointAddForm",addButton:"#a-add-point",inputName:"input[name=name]",inputAddress:"input[name=address]",inputDescription:"input[name=description]",inputTags:"input[name=tags]",inputPhotos:"input[name=img]",photoList:"#item-photo-list",photoProgress:".photo-loading",
requireLabels:".require-labels",otherLabels:".other-labels",selectedLabels:".selected-labels",placePhotos:".place-photos"};e.prototype.events=function(){return{"click .p-close":"hidePopup","keyup #add-new-place-address":"searchLocation","change #p-add-place-name, #add-new-place-address, #add-new-place-description":"setValue","focus .drop-filter input:text":"showDropList","blur .drop-filter input:text":"hideDropList","mousedown .drop-results > li":"addFromList","click #a-add-point":"validatePoint",
"click .require-labels .label":"addRequireLabel","click .other-labels .label":"addOtherLabel","click .remove-label":"removeLabel","click .clear-selected":"clearLabels","click .selected-labels":"showInput","change .load-photo input:file":"loadImage","click .remove-photo":"removePhoto"}};e.prototype.hidePopup=function(){return b.popup.close()};e.prototype.onRender=function(){this.ui.placePhotos.data("slider",b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");return this.photoSlider.init({root:this.ui.placePhotos,
visible:6})};e.prototype.onInitMap=function(a){var b,d;this.map=a;d=this;this.popupMap=new ymaps.Map("popup-map-place",{center:a.getCenter(),zoom:11});this.popupMap.controls.add("zoomControl");b={};return this.popupMap.events.add("click",function(a){d.popupMap.geoObjects.remove(b);a=a.get("coordPosition");d.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return d.popupMap.geoObjects.remove(a),!1});b=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",
iconImageSize:[32,36],iconImageOffset:[-16,-38]});d.popupMap.geoObjects.add(b);ymaps.geocode(a).then(function(a){var b;b=!0;a.geoObjects.each(function(a){b&&$("#add-new-place-address").val(a.properties.get("metaDataProperty.GeocoderMetaData.text"));return b=!1});return d.$el.find("#add-new-place-address").change()});d.popupMap.setCenter(a,14,{checkZoomRange:!0,duration:1E3});return d.model.set({longitude:a[1],latitude:a[0]},{silent:!0})})};e.prototype.setLabels=function(a){this.model.set("requireLabels",
a.filter(function(a){return 0===a.level}));return this.model.set("additionalLabels",a.filter(function(a){return 1===a.level}))};e.prototype.addRequireLabel=function(a){this.ui.inputTags.parent().hide();this.ui.requireLabels.append(this.ui.selectedLabels.find(".label-require"));this.ui.selectedLabels.prepend(a.target);return this.model.get("tags").push({id:$(a.target).data("label-id"),name:$(a.target).text(),"class":"require"})};e.prototype.addOtherLabel=function(a){this.ui.inputTags.parent().hide();
this.ui.selectedLabels.prepend(a.target);return this.model.get("tags").push({id:$(a.target).data("label-id"),name:$(a.target).text(),"class":"other"})};e.prototype.removeLabel=function(a){var b;a.preventDefault();b=$(a.target).parent();b.hasClass("label-require")?this.ui.requireLabels.append(b):this.ui.otherLabels.append(b);0===this.ui.selectedLabels.find(".label").length&&this.ui.inputTags.parent().show();a=this.model.get("tags");return this.model.set("tags",a.filter(function(a){return a.id!==b.data("label-id")}))};
e.prototype.clearLabels=function(a){a.preventDefault();this.ui.requireLabels.append(this.ui.selectedLabels.find(".label-require"));this.ui.otherLabels.append(this.ui.selectedLabels.find(".label-other"));this.ui.inputTags.parent().show();return this.model.set("tags",[],{silent:!0})};e.prototype.showInput=function(a){a.preventDefault();this.ui.inputTags.parent().show();return this.ui.inputTags.focus()};e.prototype.loadImage=function(a){var b;a.preventDefault();b=this;if(0!==a.currentTarget.files.length)return this.ui.form.ajaxSubmit({url:"/photos/add",
type:"POST",dataType:"json",clearForm:!1,success:function(a){b.model.get("imgs").push(a[0]);b.ui.photoList.html(Templates.ProgressImage(b.model.toJSON()));b.ui.photoProgress.hide();console.log(b.photoSlider);return b.photoSlider.reinit()},beforeSend:function(a){return b.ui.photoProgress.show()},uploadProgress:function(a,d,e,c){b.ui.photoProgress.find(".value").css("width",c+"%");return b.ui.photoProgress.find(".progress-count").text(c+" %")}})};e.prototype.removePhoto=function(a){a.preventDefault();
return console.log(a.target)};e.prototype.setValue=function(a){var b;b=$.trim($(a.currentTarget).val());a=$(a.currentTarget).attr("data-key");return this.model.set(a,b,{silent:!0})};e.prototype.searchName=function(a){var b;b=$.trim($(a.currentTarget).val());a.preventDefault();if(0<b.length)return a=$(a.currentTarget).closest(".drop-filter").find(".drop-results"),a.find("li").remove(),this.model.search(b,a)};e.prototype.searchLocation=function(a){var b;a.preventDefault();a=$(a.currentTarget);if(0<
a.val().length)return b=a.closest(".drop-filter").find(".drop-results"),ymaps.geocode(a.val(),{boundedBy:this.map.getBounds(),strictBounds:!1}).then(function(a){var d;d=[];b.find("li").remove();a.geoObjects.each(function(a){var b,e,c,f;c=a.properties;f=c.get("text");e=c.get("name");b=c.get("description");c=$.map(c.get("metaDataProperty.PSearchObjectMetaData")&&c.get("metaDataProperty.PSearchObjectMetaData.Tags")||[],function(a){return a.tag});a=a.geometry.getCoordinates();return d.push({name:f||[e,
b].concat(c).filter(Boolean).join(", "),coords:JSON.stringify(a)})});return _.each(d,function(a){return b.append("<li data-coords='"+a.coords+"'>"+a.name+"</li>")})})};e.prototype.showDropList=function(a){return $(a.currentTarget).closest(".drop-filter").find(".drop-results").show()};e.prototype.hideDropList=function(a){$(a.currentTarget).closest(".drop-filter").find(".drop-results").hide().css("z-index",20);return $(a.currentTarget).closest(".input-line").css("z-index",1)};e.prototype.addFromList=
function(a){var b,d,e,c;b=$(a.currentTarget).text();$(a.currentTarget).closest(".drop-filter").find("input:text").val(b).change();a=$(a.currentTarget).data("coords");if(!_.isEmpty(a))return c=this,this.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return c.popupMap.geoObjects.remove(a),!1}),e=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",iconImageSize:[32,36],iconImageOffset:[-16,-38]}),d=a[1],b=a[0],this.popupMap.setCenter(a,14,
{checkZoomRange:!0,duration:1E3}),this.model.set({longitude:d,latitude:b},{silent:!0}),this.popupMap.geoObjects.add(e)};e.prototype.validatePoint=function(a){a.preventDefault();this.model.set();if(this.model.isValid())return this.$el.find("[data-key]").removeClass("validation-error"),this.model.trigger("valid")};e.prototype.savePoint=function(){return b.request("request",{url:"/points/add",context:this,successCallback:this.successSave,type:"POST",data:{name:this.model.get("name"),address:this.model.get("address"),
description:this.model.get("description"),"tags[]":_.pluck(this.model.get("tags"),"id"),"imgs[]":_.pluck(this.model.get("imgs"),"id"),longitude:this.model.get("longitude"),latitude:this.model.get("latitude"),ypi:0}})};e.prototype.showError=function(a,b){var d,e,c,g;this.$el.find("[data-key]").removeClass("validation-error");g=[];e=0;for(c=b.length;e<c;e++)d=b[e],g.push(this.$el.find("[data-key="+d+"]").addClass("validation-error"));return g};e.prototype.successSave=function(){b.popup.close();return console.log("success")};
return e}(b.Common.PopupView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointDetailView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){console.log("initialize PointDetailView");this.bigPhotoTemplate=Templates.BigPhoto;return this.user=b.user};e.prototype.template=Templates.PointDetailView;
e.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos",commentArea:".toggleArea textarea"}};e.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto","click .bp-photo .a-like":"likePhoto","click #big-photo > .bp-photo":"nextPhoto","click #right-panel .a-like":"like","click #commentForm textarea":"focusCommentTextarea","click .a-remove-comment":"removeComment",
"submit #commentForm":"submitCommentForm","change #addPhotoForm input:file":"addPhoto","click .remove-photo":"removePhoto"}};e.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON()}};e.prototype.onRender=function(){this.ui.placePhotos.data("slider",b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.$el.find("[data-toggle=tooltip]").tooltip();
this.showPhoto();this.photoSlider.init({root:this.ui.placePhotos,visible:4});return this.renderSocial()};e.prototype.renderSocial=function(){void 0!==window.FB&&FB.XFBML.parse();if(void 0!==window.VK)return VK.Widgets.Like("vk_like_point",{type:"mini",pageTitle:this.model.get("name"),pageDescription:this.model.get("description"),pageImage:this.model.get("imgs")[0].thumbnail104x104,text:"\u042f\u0441\u0435\u043d\u041f\u0443\u0442\u044c \u0437\u043d\u0430\u0435\u0442 \u0432\u0441\u0435 - "+this.model.get("name")},
1E3+this.model.get("id"))};e.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};e.prototype.showPhoto=function(a){var d,c;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),a=$(a.currentTarget),
c=a.data("photo-id"),d=_.find(this.model.get("imgs"),function(a){return a.id===c})):this.options.photoId?(c=parseInt(this.options.photoId,10),d=_.find(this.model.get("imgs"),function(a){return a.id===c})):(d=this.model.get("imgs")[0],c=d.id);a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===c});$(a).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(d,{user:this.user.toJSON()})));this.ui.bigPhoto.find("[data-toggle=tooltip]").tooltip();this.options.photoId=
c;return b.Points.router.navigate($(a).children().attr("href"))};e.prototype.nextPhoto=function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")?this.photoSlider.move(1):this.photoSlider.next.is(":visible")&&this.photoSlider.reinit();this.options.photoId=a;return this.showPhoto()};e.prototype.focusCommentTextarea=function(a){a.preventDefault();
return $(a.currentTarget).parent().addClass("focus")};e.prototype.unfocusCommentTextarea=function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");return a.val("")};e.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};e.prototype.likePhoto=function(a){var b;a.preventDefault();a.stopPropagation();a=$(a.currentTarget);b=a.data("photo-id");return this.model.likePhoto(a,b,this.successLikePhoto,this)};e.prototype.submitCommentForm=
function(a){var b;a.preventDefault();$(a.currentTarget);if(b=this.$("textarea").val())return a=this.$("textarea").data("photo-id"),this.model.addCommentPhoto(a,b,this.successAddComment,this)};e.prototype.removeComment=function(a){a.preventDefault();a=$(a.currentTarget).parents(".item-comment").data("comment-id");return this.model.removeCommentPhoto(a,this.successRemoveComment,this)};e.prototype.addPhoto=function(a){a.preventDefault();$(a.currentTarget);a=$("#addPhotoForm")[0];a=new FormData(a);return this.model.addPhoto(a,
this.successAddPhoto,this)};e.prototype.removePhoto=function(a){a.preventDefault();a.stopPropagation();a=$(a.currentTarget).parents(".item-photo").data("photo-id");return this.model.removePhoto(a,this.successRemovePhoto,this)};e.prototype.successLike=function(a,b){var d,c,e;e=this;c=this.model.get("likeusers");if(b.hasClass("marked"))return d=_.find(c,function(a){return a.id===e.user.id}),d=_.indexOf(c,d),c.splice(d,1),this.model.set({likeusers:c,likes_count:this.model.get("likes_count")-1}),this.user.set("count_liked_objects",
this.user.get("count_liked_objects")-1);c.push(this.user);this.model.set({likesers:c,likes_count:this.model.get("likes_count")+1});return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};e.prototype.successLikePhoto=function(a,b){var d,c,e,g,r,u,h;u=a[0];h=this;c=this.model.get("imgs");d=_.find(c,function(a){return a.id===u.id});g=_.indexOf(c,d);c.splice(g,1);r=d.likeusers;b.hasClass("marked")?(e=_.find(r,function(a){return a.id===h.user.id}),e=_.indexOf(r,e),r.splice(e,
1),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1)):(r.push(this.user),this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1));d.likeusers=r;c.splice(g,0,d);this.model.set("imgs",c);this.options.photoId=d.id;return this.model.trigger("change")};e.prototype.successAddComment=function(a){var b;b=this.$("textarea").data("photo-id");_.find(this.model.get("imgs"),function(a){return a.id===b}).comments.push(_.extend(a[0],{author:this.user.toJSON()}));this.user.set("count_commented_objects",
this.user.get("count_commented_objects")+1);return this.model.trigger("change")};e.prototype.successRemoveComment=function(a,b){var d,c,e,g;g=this.$("textarea").data("photo-id");e=_.find(this.model.get("imgs"),function(a){return a.id===g});c=e.comments;d=_.find(c,function(a){return a.id===b});d=_.indexOf(c,d);c.splice(d,1);e.comments=c;this.user.set("count_commented_objects",this.user.get("count_commented_objects")-1);return this.model.trigger("change")};e.prototype.successAddPhoto=function(a){var b;
b=this.model.get("imgs");b.push(a[0]);this.model.set("imgs",b);return this.model.trigger("change")};e.prototype.successRemovePhoto=function(a,b){var d,c;c=this.model.get("imgs");d=_.find(c,function(a){return a.id===b});d=_.indexOf(c,d);c.splice(d,1);this.model.set("imgs",c);this.options.photoId=c[0].id;return this.model.trigger("change")};return e}(b.Common.PopupView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointItemView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.tagName="article";e.prototype.className="item";e.prototype.template=Templates.PointItemView;e.prototype.initialize=function(){console.log("initializing Yapp.Points.PointItemView");
return this.user=b.user};e.prototype.modelEvents={change:"render"};e.prototype.templateHelpers=function(){return{user:this.user.toJSON()}};e.prototype.onBeforeRender=function(){return"collection"===this.model.get("type")?this.$el.addClass("item-collection"):this.$el.addClass("item-place")};e.prototype.events={"click .photo .a-like":"like","click .photo .a-collection":"addToCollection","click .yp-title":"toggleYpInfo","click .yp-info":"toggleYpInfo"};e.prototype.ui={ypInfo:".yp-info",ypTitle:".yp-title"};
e.prototype.like=function(a){if(this.user.get("authorized"))return a.preventDefault(),a=$(a.currentTarget),this.model.like(a,this.successLike,this);b.vent.trigger("user:notauthorized")};e.prototype.successLike=function(a,b){var d,c,e;e=this;c=this.model.get("likeusers");if(b.hasClass("marked"))return d=_.find(c,function(a){return a.id===e.user.id}),d=_.indexOf(c,d),c.splice(d,1),this.model.set("likeusers",c),this.model.set("likes_count",this.model.get("likes_count")-1),this.user.set("count_liked_objects",
this.user.get("count_liked_objects")-1);c.push(this.user);this.model.set("likes_count",this.model.get("likes_count")+1);this.model.set("likesers",c);return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};e.prototype.addToCollection=function(a){if(this.user.get("authorized"))return a.preventDefault(),$(a.currentTarget);b.vent.trigger("user:notauthorized")};e.prototype.toggleYpInfo=function(a){this.ui.ypInfo.toggle();return this.ui.ypTitle.toggle()};return e}(Marionette.ItemView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointListView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.template=Templates.PointListView;e.prototype.className="items";e.prototype.itemView=b.Points.PointItemView;e.prototype.emptyView=b.Points.PointEmptyView;e.prototype.initialize=
function(){console.log("initializing Yapp.Points.PointListView");_.bindAll(this,"loadResults");return this.infiniScroll=new Backbone.InfiniScroll(this.collection,{success:this.loadResults,scrollOffset:350,includePage:!0})};e.prototype.onRender=function(){return $(window).trigger("scroll")};e.prototype.onShow=function(){var a;this.$el.find("[data-toggle=tooltip]").tooltip();a=241*Math.floor(this.$el.width()/241);this.$el.css("width",a);this.$el.masonry({itemSelector:".item",columnWidth:241});return this.$el.masonry("reload")};
e.prototype.loadResults=function(a,b){return this.onShow()};return e}(Marionette.CompositeView)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,b){function e(){this.constructor=a}for(var f in b)c.call(b,f)&&(a[f]=b[f]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};window.Yapp.Points.PointPanelView=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointPanelView")};d.prototype.template=Templates.PointPanelView;d.prototype.modelEvents={change:"render"};
d.prototype.templateHelpers=function(){return{active:this.options.content_type||"popular"}};return d}(Marionette.ItemView)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.SetDetailView=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){var a;console.log("initialize SetDetailView");this.bigPhotoTemplate=Templates.BigPhoto;this.user=b.user;a=parseInt(this.options.pointId,10);
return this.activePoint=_.find(this.model.get("points"),function(b){return b.id===a})||this.model.get("points")[0]};e.prototype.template=Templates.SetDetailView;e.prototype.className="popup p-collection";e.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos"}};e.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto","click #big-photo > .bp-photo":"nextPhoto",
"click li.choose_place > a":"choosePlace","click .stp-like":"like"}};e.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON(),activePoint:this.activePoint}};e.prototype.onRender=function(){this.ui.placePhotos.data("slider",b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.$el.find("[data-toggle=tooltip]").tooltip();this.showPhoto();return this.photoSlider.init({root:this.ui.placePhotos,
visible:4})};e.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};e.prototype.showPhoto=function(a,d){var c,e;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),c=$(a.currentTarget),d=c.data("photo-id"),
e=_.find(this.activePoint.imgs,function(a){return a.id===d})):d?(d=parseInt(d,10),e=_.find(this.activePoint.imgs,function(a){return a.id===d})):this.options.photoId?(d=parseInt(this.options.photoId,10),e=_.find(this.activePoint.imgs,function(a){return a.id===d}),this.options.photoId=!1):(d=parseInt(this.options.photoId,10),e=_.find(this.activePoint.imgs,function(a){return a.id===d}),e=this.activePoint.imgs[0],d=e.id);c=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===d});$(c).addClass("current");
this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(e,{user:this.user.toJSON()})));return b.Points.router.navigate($(c).children().attr("href"))};e.prototype.nextPhoto=function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")?this.photoSlider.move(1):this.photoSlider.next.is(":visible")&&this.photoSlider.reinit();return this.showPhoto(null,
a)};e.prototype.choosePlace=function(a){var b;a.preventDefault();b=$(a.currentTarget).data("id");this.activePoint=_.find(this.model.get("points"),function(a){return a.id===b});return this.model.trigger("change")};e.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};e.prototype.successLike=function(a,b){var d,c,e;e=this;c=this.model.get("likeusers");if(b.hasClass("marked"))return d=_.find(c,function(a){return a.id===e.user.id}),d=_.indexOf(c,
d),c.splice(d,1),this.model.set({likeusers:c,likes_count:this.model.get("likes_count")-1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1);c.push(this.user);this.model.set({likesers:c,likes_count:this.model.get("likes_count")+1});return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};return e}(b.Common.PopupView)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,b){function e(){this.constructor=a}for(var f in b)c.call(b,f)&&(a[f]=b[f]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};window.Yapp.Common.Router=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Common.Router")};d.prototype.appRoutes={user:"something"};return d}(Marionette.AppRouter)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,b){function e(){this.constructor=a}for(var f in b)c.call(b,f)&&(a[f]=b[f]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};window.Yapp.Map.Router=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Map.Router")};d.prototype.appRoutes={map:"showMap"};return d}(Marionette.AppRouter)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,b){function e(){this.constructor=a}for(var f in b)c.call(b,f)&&(a[f]=b[f]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};window.Yapp.Points.Router=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Points.Router")};d.prototype.appRoutes={"":"showContent",popular:"showPopular","new":"showNew","point/add":"addPoint",
"point/:id":"showPointDetail","set/:id":"showSetDetail","set/:id/point/:id":"showSetPhoto","set/:id/point/:point_id/photo/:photo_id":"showSetPhoto","point/:id/photo/:photo_id":"showPointPhoto"};return d}(Marionette.AppRouter)}).call(this);
(function(){var b,c={}.hasOwnProperty,g=function(a,b){function e(){this.constructor=a}for(var f in b)c.call(b,f)&&(a[f]=b[f]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};window.Yapp.Common.Controller=function(a){function d(){return b=d.__super__.constructor.apply(this,arguments)}g(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Common.Controller")};d.prototype.something=function(){};return d}(Marionette.Controller)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Map.Controller=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){console.log("initializing Yapp.Map.Controller");return b.map.show(new b.Map.MapView)};e.prototype.showMap=function(){return b.execute("toggleMap",
"open")};return e}(Marionette.Controller)}).call(this);
(function(){var b,c,g={}.hasOwnProperty,a=function(a,b){function c(){this.constructor=a}for(var l in b)g.call(b,l)&&(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.Controller=function(d){function e(){return c=e.__super__.constructor.apply(this,arguments)}a(e,d);e.prototype.initialize=function(){return console.log("initializing Yapp.Points.Controller")};e.prototype.showContent=function(a){console.log("Show content "+a+" in Points module");
b.popup.close();this.layout=new b.Points.MainLayout({content_type:a});return b.content.show(this.layout)};e.prototype.showPopular=function(){return this.showContent("popular")};e.prototype.showNew=function(){return this.showContent("new")};e.prototype.addPoint=function(){return b.popup.show(new b.Points.PointAddView({id:"p-add-place"}))};e.prototype.showPointDetail=function(a,c){return(new b.Points.Point({unid:a})).fetch({success:function(a,d){return b.popup.show(new b.Points.PointDetailView({model:a,
photoId:c}))}})};e.prototype.showSetDetail=function(a,c,d){return(new b.Points.Set({unid:a})).fetch({success:function(a,e){return b.popup.show(new b.Points.SetDetailView({model:a,pointId:c,photoId:d}))}})};e.prototype.showPointPhoto=function(a,b){this.showContent();return this.showPointDetail(a,b)};e.prototype.showSetPhoto=function(a,b,c){this.showContent();return this.showSetDetail(a,b,c)};return e}(Marionette.Controller)}).call(this);
(function(){var b;b=window.Yapp;b.addInitializer(function(){console.log("application initializing");this.addRegions({header:"#header",map:"#yandex-map",content:"#content",footer:"#footer",popup:b.Common.PopupRegion});this.commands.setHandler("toggleMap",function(c){b.map.$el.toggleClass("map-opened");$("#wrap").toggleClass("map-opened");c&&(b.map.$el.addClass("map-opened"),$("#wrap").addClass("map-opened"));c="\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443"===b.map.$el.find(".a-toggle").html()?
"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443";return b.map.$el.find(".a-toggle").html(c)});return this.reqres.setHandler("request",function(c){var g;g=b.API_BASE_URL+c.url;g=c.url;console.log([""+c.type+" request to "+g+" with data:",c.data]);return $.ajax({url:g,type:c.type,dataType:c.dataType||"json",processData:c.processData,contentType:c.contentType,data:c.data,success:function(a){var b;
console.log(["response from API: ",a]);if(c.successCallback)return b=[a],_.each(c.params,function(a){return b.push(a)}),c.successCallback.apply(c.context,b)}})})});b.on("start",function(){console.log("starting application");this.user=new b.User.Profile(USER);this.runApplication();return $(document).on("click","a.nonav",function(b){var g,a;g=$(this).attr("href");a=this.protocol+"//";if(g&&g.slice(0,a.length)!==a&&0!==g.indexOf("javascript:"))return b.preventDefault(),b.stopPropagation(),Backbone.history.navigate(g,
!0)})});b.runApplication=function(){this.Common.start();"pins"===this.user.get("last_state")?(this.Points.start(),this.Map.start()):(this.Map.start(),this.Points.start());this.vent.on("user:notauthorized",function(){return b.popup.show(new b.Common.AuthPopupView)});this.vent.on("logout",function(){return window.location.replace("/")});return Backbone.history.start({pushState:!0})};b.start()}).call(this);
