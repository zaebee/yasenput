/*

 Lo-Dash 1.3.1 (Custom Build) lodash.com/license
 Build: `lodash modern -o ./dist/lodash.js`
 Underscore.js 1.4.4 underscorejs.org/LICENSE
*/
"object"!==typeof JSON&&(JSON={});
(function(){function c(a){return 10>a?"0"+a:a}function g(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var c=d[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function h(d,c){var b,e,t,l,m=f,n,q=c[d];q&&("object"===typeof q&&"function"===typeof q.toJSON)&&(q=q.toJSON(d));"function"===typeof s&&(q=s.call(c,d,q));switch(typeof q){case "string":return g(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);
case "object":if(!q)return"null";f+=a;n=[];if("[object Array]"===Object.prototype.toString.apply(q)){l=q.length;for(b=0;b<l;b+=1)n[b]=h(b,q)||"null";t=0===n.length?"[]":f?"[\n"+f+n.join(",\n"+f)+"\n"+m+"]":"["+n.join(",")+"]";f=m;return t}if(s&&"object"===typeof s){l=s.length;for(b=0;b<l;b+=1)"string"===typeof s[b]&&(e=s[b],(t=h(e,q))&&n.push(g(e)+(f?": ":":")+t))}else for(e in q)Object.prototype.hasOwnProperty.call(q,e)&&(t=h(e,q))&&n.push(g(e)+(f?": ":":")+t);t=0===n.length?"{}":f?"{\n"+f+n.join(",\n"+
f)+"\n"+m+"}":"{"+n.join(",")+"}";f=m;return t}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,a,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;"function"!==typeof JSON.stringify&&(JSON.stringify=function(d,c,b){var e;a=f="";if("number"===typeof b)for(e=0;e<b;e+=1)a+=" ";else"string"===typeof b&&(a=b);if((s=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return h("",{"":d})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function c(a,b){var m,e,f=a[b];if(f&&"object"===typeof f)for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&(e=c(f,m),void 0!==e?f[m]=e:delete f[m]);return d.call(a,b,f)}var b;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+a+")"),"function"===typeof d?c({"":b},""):b;throw new SyntaxError("JSON.parse");})})();
(function(c,g){function h(a,d,r){if(-1===r.indexOf("%"))return r;a=a.style;var c=a.width,b;return a.width=r,b=d.width,a.width=c,b}function e(a,d,r){var c="height"!==d,b=c?a.offsetWidth:a.offsetHeight,m=c?"Left":"Top",e=c?"Right":"Bottom",c=z(a),f=parseFloat(c["padding"+m])||0,g=parseFloat(c["padding"+e])||0,k=parseFloat(c["border"+m+"Width"])||0,s=parseFloat(c["border"+e+"Width"])||0,m=c["margin"+m],e=c["margin"+e];l||(m=h(a,c,m),e=h(a,c,e));m=parseFloat(m)||0;e=parseFloat(e)||0;if(0<b)r?b+=m+e:b-=
f+g+k+s;else{b=c[d];if(0>b||null===b)b=a.style[d]||0;b=parseFloat(b)||0;r&&(b+=f+g+m+e+k+s)}return b}function b(a,d,b){a.addEventListener?a.addEventListener(d,b,!1):a.attachEvent&&(a["e"+d+b]=b,a[d+b]=function(){a["e"+d+b](c.event)},a.attachEvent("on"+d,a[d+b]))}function f(a,d){if(a){this.element=a;this.options={};for(var c in f.defaults)this.options[c]=f.defaults[c];for(c in d)this.options[c]=d[c];this._create();this.build()}}"use strict";var a=c.document,d="classList"in a.createElement("div"),s=
d?function(a,d){return a.classList.contains(d)}:function(a,d){return RegExp("(^|\\s+)"+d+"(\\s+|$)").test(a.className)},k=d?function(a,d){a.classList.add(d)}:function(a,d){s(a,d)||(a.className=a.className+" "+d)},u=d?function(a,d){a.classList.remove(d)}:function(a,d){a.className=a.className.replace(RegExp("(^|\\s+)"+d+"(\\s+|$)")," ")},w=a.defaultView,z=w&&w.getComputedStyle?function(a){return w.getComputedStyle(a,null)}:function(a){return a.currentStyle},t=a.getElementsByTagName("body")[0],d=a.createElement("div"),
a=t||a.createElement("body");d.style.marginTop="1%";a.appendChild(d);var l="1%"!==z(d).marginTop;a.removeChild(d);var m=["position","height"];f.defaults={isResizable:!0,gutterWidth:0,isRTL:!1,isFitWidth:!1};f.prototype={_getBricks:function(a){for(var d,c=0,b=a.length;c<b;c++)d=a[c],d.style.position="absolute",k(d,"masonry-brick"),this.bricks.push(d)},_create:function(){this.reloadItems();var a=this.element.style;this._originalStyle={};for(var d=0,r=m.length;d<r;d++){var e=m[d];this._originalStyle[e]=
a[e]||""}this.element.style.position="relative";this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=z(this.element);d=this.options.isRTL?"paddingRight":"paddingLeft";this.offset.y=parseFloat(a.paddingTop)||0;this.offset.x=parseFloat(a[d])||0;this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var f=this;setTimeout(function(){k(f.element,"masonry")});this.options.isResizable&&b(c,"resize",function(){f._handleResize()})},build:function(a){this._getColumns();
this._reLayout(a)},_getColumns:function(){var a=e(this.options.isFitWidth?this.element.parentNode:this.element,"width");this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||e(this.bricks[0],"width",!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},reloadItems:function(){this.bricks=[];this._getBricks(this.element.children)},_reLayout:function(a){var d=this.cols;for(this.colYs=
[];d--;)this.colYs.push(0);this.layout(this.bricks,a)},layout:function(a,d){if(a&&a.length){for(var c,b,m,f,g,k,s=0,h=a.length;s<h;s++)if(c=a[s],1===c.nodeType){b=Math.ceil(e(c,"width",!0)/this.columnWidth);b=Math.min(b,this.cols);if(1===b)k=this.colYs;else{m=this.cols+1-b;k=[];for(g=0;g<m;g++)f=this.colYs.slice(g,g+b),k[g]=Math.max.apply(Math,f)}m=Math.min.apply(Math,k);b=0;for(g=k.length;b<g&&k[b]!==m;b++);c.style.top=m+this.offset.y+"px";c.style[this.horizontalDirection]=this.columnWidth*b+this.offset.x+
"px";c=m+e(c,"height",!0);k=this.cols+1-g;for(g=0;g<k;g++)this.colYs[b+g]=c}this.element.style.height=Math.max.apply(Math,this.colYs)+"px";if(this.options.isFitWidth){h=0;for(s=this.cols;--s&&0===this.colYs[s];)h++;this.element.style.width=(this.cols-h)*this.columnWidth-this.options.gutterWidth+"px"}d&&d.call(a)}},_handleResize:function(){var a=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(function(){a.resize();a._resizeTimeout=null},100)},resize:function(){var a=
this.cols;this._getColumns();(this.isFluid||this.cols!==a)&&this._reLayout()},reload:function(a){this.reloadItems();this.build(a)},appended:function(a,d,c){var b=this,m=function(){b._appended(a,c)};if(d){d=e(this.element,"height")+"px";for(var f=0,g=a.length;f<g;f++)a[f].style.top=d;setTimeout(m,1)}else m()},_appended:function(a,d){this._getBricks(a);this.layout(a,d)},destroy:function(){for(var a,d=0,b=this.bricks.length;d<b;d++)a=this.bricks[d],a.style.position="",a.style.top="",a.style.left="",
u(a,"masonry-brick");a=this.element.style;b=m.length;for(d=0;d<b;d++){var e=m[d];a[e]=this._originalStyle[e]}u(this.element,"masonry");this.resizeHandler&&(d=c,b=this.resizeHandler,d.removeEventListener?d.removeEventListener("resize",b,!1):d.detachEvent&&(d.detachEvent("onresize",d["resize"+b]),d["resize"+b]=null,d["eresize"+b]=null))}};f.getWH=e;c.Masonry=f})(window);
(function(c){function g(a){var d=a.data;a.isDefaultPrevented()||(a.preventDefault(),c(this).ajaxSubmit(d))}function h(a){var d=a.target,b=c(d);if(!b.is(":submit,input:image")){d=b.closest(":submit");if(0===d.length)return;d=d[0]}var e=this;e.clk=d;"image"==d.type&&(void 0!==a.offsetX?(e.clk_x=a.offsetX,e.clk_y=a.offsetY):"function"==typeof c.fn.offset?(b=b.offset(),e.clk_x=a.pageX-b.left,e.clk_y=a.pageY-b.top):(e.clk_x=a.pageX-d.offsetLeft,e.clk_y=a.pageY-d.offsetTop));setTimeout(function(){e.clk=
e.clk_x=e.clk_y=null},100)}function e(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var b,f;b=void 0!==c("<input type='file'/>").get(0).files;f=void 0!==window.FormData;c.fn.ajaxSubmit=function(a){function d(a){a=c.param(a).split("&");var d=a.length,b={},m,e;for(m=0;m<d;m++)e=a[m].split("="),b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);
return b}function g(b){for(var m=new FormData,e=0;e<b.length;e++)m.append(b[e].name,b[e].value);if(a.extraData){b=d(a.extraData);for(var r in b)b.hasOwnProperty(r)&&m.append(r,b[r])}a.data=null;r=c.extend(!0,{},c.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});a.uploadProgress&&(r.xhr=function(){var d=jQuery.ajaxSettings.xhr();d.upload&&(d.upload.onprogress=function(d){var b=0,c=d.loaded||d.position,m=d.total;d.lengthComputable&&(b=Math.ceil(100*(c/m)));a.uploadProgress(d,
c,m,b)});return d});r.data=null;var f=r.beforeSend;r.beforeSend=function(a,d){d.data=m;f&&f.call(this,a,d)};return c.ajax(r)}function k(d){function b(){function a(){try{var d=(s.contentWindow?s.contentWindow.document:s.contentDocument?s.contentDocument:s.document).readyState;e("state = "+d);d&&"uninitialized"==d.toLowerCase()&&setTimeout(a,50)}catch(b){e("Server abort: ",b," (",b.name,")"),m(na),G&&clearTimeout(G),G=void 0}}var d=z.attr("target"),f=z.attr("action");r.setAttribute("target",q);h||r.setAttribute("method",
"POST");f!=n.url&&r.setAttribute("action",n.url);!n.skipEncodingOverride&&(!h||/post/i.test(h))&&z.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});n.timeout&&(G=setTimeout(function(){y=!0;m(w)},n.timeout));var A=[];try{if(n.extraData)for(var g in n.extraData)n.extraData.hasOwnProperty(g)&&(c.isPlainObject(n.extraData[g])&&n.extraData[g].hasOwnProperty("name")&&n.extraData[g].hasOwnProperty("value")?A.push(c('<input type="hidden" name="'+n.extraData[g].name+'">').attr("value",
n.extraData[g].value).appendTo(r)[0]):A.push(c('<input type="hidden" name="'+g+'">').attr("value",n.extraData[g]).appendTo(r)[0]));n.iframeTarget||(k.appendTo("body"),s.attachEvent?s.attachEvent("onload",m):s.addEventListener("load",m,!1));setTimeout(a,15);r.submit()}finally{r.setAttribute("action",f),d?r.setAttribute("target",d):z.removeAttr("target"),c(A).remove()}}function m(a){if(!x.aborted&&!ca){try{C=s.contentWindow?s.contentWindow.document:s.contentDocument?s.contentDocument:s.document}catch(d){e("cannot access response document: ",
d),a=na}if(a===w&&x)x.abort("timeout"),B.reject(x,"timeout");else if(a==na&&x)x.abort("server abort"),B.reject(x,"error","server abort");else if(C&&C.location.href!=n.iframeSrc||y){s.detachEvent?s.detachEvent("onload",m):s.removeEventListener("load",m,!1);a="success";var b;try{if(y)throw"timeout";var r="xml"==n.dataType||C.XMLDocument||c.isXMLDoc(C);e("isXml="+r);if(!r&&(window.opera&&(null===C.body||!C.body.innerHTML))&&--da){e("requeing onLoad callback, DOM not available");setTimeout(m,250);return}var f=
C.body?C.body:C.documentElement;x.responseText=f?f.innerHTML:null;x.responseXML=C.XMLDocument?C.XMLDocument:C;r&&(n.dataType="xml");x.getResponseHeader=function(a){return{"content-type":n.dataType}[a]};f&&(x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText);var A=(n.dataType||"").toLowerCase(),q=/(json|script|text)/.test(A);if(q||n.textarea){var h=C.getElementsByTagName("textarea")[0];if(h)x.responseText=h.value,x.status=Number(h.getAttribute("status"))||
x.status,x.statusText=h.getAttribute("statusText")||x.statusText;else if(q){var u=C.getElementsByTagName("pre")[0],l=C.getElementsByTagName("body")[0];u?x.responseText=u.textContent?u.textContent:u.innerText:l&&(x.responseText=l.textContent?l.textContent:l.innerText)}}else"xml"==A&&(!x.responseXML&&x.responseText)&&(x.responseXML=ea(x.responseText));try{xa=ya(x,A,n)}catch(t){a="parsererror",x.error=b=t||a}}catch(ba){e("error caught: ",ba),a="error",x.error=b=ba||a}x.aborted&&(e("upload aborted"),
a=null);x.status&&(a=200<=x.status&&300>x.status||304===x.status?"success":"error");"success"===a?(n.success&&n.success.call(n.context,xa,"success",x),B.resolve(x.responseText,"success",x),g&&c.event.trigger("ajaxSuccess",[x,n])):a&&(void 0===b&&(b=x.statusText),n.error&&n.error.call(n.context,x,a,b),B.reject(x,"error",b),g&&c.event.trigger("ajaxError",[x,n,b]));g&&c.event.trigger("ajaxComplete",[x,n]);g&&!--c.active&&c.event.trigger("ajaxStop");n.complete&&n.complete.call(n.context,x,a);ca=!0;n.timeout&&
clearTimeout(G);setTimeout(function(){n.iframeTarget||k.remove();x.responseXML=null},100)}}}var r=z[0],f,n,g,q,k,s,x,t,y,G;t=!!c.fn.prop;var B=c.Deferred();if(c(":input[name=submit],:input[id=submit]",r).length)return alert('Error: Form elements must not have name or id of "submit".'),B.reject(),B;if(d)for(f=0;f<l.length;f++)d=c(l[f]),t?d.prop("disabled",!1):d.removeAttr("disabled");n=c.extend(!0,{},c.ajaxSettings,a);n.context=n.context||n;q="jqFormIO"+(new Date).getTime();n.iframeTarget?(k=c(n.iframeTarget),
(d=k.attr("name"))?q=d:k.attr("name",q)):(k=c('<iframe name="'+q+'" src="'+n.iframeSrc+'" />'),k.css({position:"absolute",top:"-1000px",left:"-1000px"}));s=k[0];x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var d="timeout"===a?"timeout":"aborted";e("aborting upload... "+d);this.aborted=1;if(s.contentWindow.document.execCommand)try{s.contentWindow.document.execCommand("Stop")}catch(b){}k.attr("src",
n.iframeSrc);x.error=d;n.error&&n.error.call(n.context,x,d,a);g&&c.event.trigger("ajaxError",[x,n,d]);n.complete&&n.complete.call(n.context,x,d)}};(g=n.global)&&0===c.active++&&c.event.trigger("ajaxStart");g&&c.event.trigger("ajaxSend",[x,n]);if(n.beforeSend&&!1===n.beforeSend.call(n.context,x,n))return n.global&&c.active--,B.reject(),B;if(x.aborted)return B.reject(),B;if(t=r.clk)if((d=t.name)&&!t.disabled)n.extraData=n.extraData||{},n.extraData[d]=t.value,"image"==t.type&&(n.extraData[d+".x"]=r.clk_x,
n.extraData[d+".y"]=r.clk_y);var w=1,na=2;t=c("meta[name=csrf-token]").attr("content");if((d=c("meta[name=csrf-param]").attr("content"))&&t)n.extraData=n.extraData||{},n.extraData[d]=t;n.forceSync?b():setTimeout(b,10);var xa,C,da=50,ca,ea=c.parseXML||function(a,d){window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a)):d=(new DOMParser).parseFromString(a,"text/xml");return d&&d.documentElement&&"parsererror"!=d.documentElement.nodeName?d:null},ga=c.parseJSON||function(a){return window.eval("("+
a+")")},ya=function(a,d,b){var m=a.getResponseHeader("content-type")||"",r="xml"===d||!d&&0<=m.indexOf("xml");a=r?a.responseXML:a.responseText;r&&"parsererror"===a.documentElement.nodeName&&c.error&&c.error("parsererror");b&&b.dataFilter&&(a=b.dataFilter(a,d));"string"===typeof a&&("json"===d||!d&&0<=m.indexOf("json")?a=ga(a):("script"===d||!d&&0<=m.indexOf("javascript"))&&c.globalEval(a));return a};return B}if(!this.length)return e("ajaxSubmit: skipping submit process - no element selected"),this;
var h,w,z=this;"function"==typeof a&&(a={success:a});h=this.attr("method");w=this.attr("action");(w=(w="string"===typeof w?c.trim(w):"")||window.location.href||"")&&(w=(w.match(/^([^#]+)/)||[])[1]);a=c.extend(!0,{url:w,success:c.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);w={};this.trigger("form-pre-serialize",[this,a,w]);if(w.veto)return e("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&
!1===a.beforeSerialize(this,a))return e("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var t=a.traditional;void 0===t&&(t=c.ajaxSettings.traditional);var l=[],m,n=this.formToArray(a.semantic,l);a.data&&(a.extraData=a.data,m=c.param(a.data,t));if(a.beforeSubmit&&!1===a.beforeSubmit(n,this,a))return e("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[n,this,a,w]);if(w.veto)return e("ajaxSubmit: submit vetoed via form-submit-validate trigger"),
this;w=c.param(n,t);m&&(w=w?w+"&"+m:m);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+w,a.data=null):a.data=w;var q=[];a.resetForm&&q.push(function(){z.resetForm()});a.clearForm&&q.push(function(){z.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var r=a.success||function(){};q.push(function(d){var b=a.replaceTarget?"replaceWith":"html";c(a.target)[b](d).each(r,arguments)})}else a.success&&q.push(a.success);a.success=function(d,b,c){for(var m=a.context||this,r=0,e=q.length;r<
e;r++)q[r].apply(m,[d,b,c||z,z])};m=0<c("input:file:enabled[value]",this).length;w="multipart/form-data"==z.attr("enctype")||"multipart/form-data"==z.attr("encoding");t=b&&f;e("fileAPI :"+t);var x;!1!==a.iframe&&(a.iframe||(m||w)&&!t)?a.closeKeepAlive?c.get(a.closeKeepAlive,function(){x=k(n)}):x=k(n):x=(m||w)&&t?g(n):c.ajax(a);z.removeData("jqxhr").data("jqxhr",x);for(m=0;m<l.length;m++)l[m]=null;this.trigger("form-submit-notify",[this,a]);return this};c.fn.ajaxForm=function(a){a=a||{};a.delegation=
a.delegation&&c.isFunction(c.fn.on);if(!a.delegation&&0===this.length){var d=this.selector,b=this.context;if(!c.isReady&&d)return e("DOM not ready, queuing ajaxForm"),c(function(){c(d,b).ajaxForm(a)}),this;e("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return a.delegation?(c(document).off("submit.form-plugin",this.selector,g).off("click.form-plugin",this.selector,h).on("submit.form-plugin",this.selector,a,g).on("click.form-plugin",this.selector,a,h),
this):this.ajaxFormUnbind().bind("submit.form-plugin",a,g).bind("click.form-plugin",a,h)};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(a,d){var e=[];if(0===this.length)return e;var f=this[0],g=a?f.getElementsByTagName("*"):f.elements;if(!g)return e;var h,z,t,l,m,n;h=0;for(n=g.length;h<n;h++)if(m=g[h],t=m.name)if(a&&f.clk&&"image"==m.type)!m.disabled&&f.clk==m&&(e.push({name:t,value:c(m).val(),type:m.type}),e.push({name:t+".x",
value:f.clk_x},{name:t+".y",value:f.clk_y}));else if((l=c.fieldValue(m,!0))&&l.constructor==Array){d&&d.push(m);z=0;for(m=l.length;z<m;z++)e.push({name:t,value:l[z]})}else if(b&&"file"==m.type&&!m.disabled)if(d&&d.push(m),l=m.files,l.length)for(z=0;z<l.length;z++)e.push({name:t,value:l[z],type:m.type});else e.push({name:t,value:"",type:m.type});else null!==l&&"undefined"!=typeof l&&(d&&d.push(m),e.push({name:t,value:l,type:m.type,required:m.required}));if(!a&&f.clk&&(g=c(f.clk),h=g[0],(t=h.name)&&
!h.disabled&&"image"==h.type))e.push({name:t,value:g.val()}),e.push({name:t+".x",value:f.clk_x},{name:t+".y",value:f.clk_y});return e};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var d=[];this.each(function(){var b=this.name;if(b){var e=c.fieldValue(this,a);if(e&&e.constructor==Array)for(var f=0,g=e.length;f<g;f++)d.push({name:b,value:e[f]});else null!==e&&"undefined"!=typeof e&&d.push({name:this.name,value:e})}});return c.param(d)};c.fn.fieldValue=
function(a){for(var d=[],b=0,e=this.length;b<e;b++){var f=c.fieldValue(this[b],a);null===f||("undefined"==typeof f||f.constructor==Array&&!f.length)||(f.constructor==Array?c.merge(d,f):d.push(f))}return d};c.fieldValue=function(a,d){var b=a.name,e=a.type,f=a.tagName.toLowerCase();void 0===d&&(d=!0);if(d&&(!b||a.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!a.checked||("submit"==e||"image"==e)&&a.form&&a.form.clk!=a||"select"==f&&-1==a.selectedIndex))return null;if("select"==f){var g=
a.selectedIndex;if(0>g)return null;for(var b=[],f=a.options,h=(e="select-one"==e)?g+1:f.length,g=e?g:0;g<h;g++){var t=f[g];if(t.selected){var l=t.value;l||(l=t.attributes&&t.attributes.value&&!t.attributes.value.specified?t.text:t.value);if(e)return l;b.push(l)}}return b}return c(a).val()};c.fn.clearForm=function(a){return this.each(function(){c("input,select,textarea",this).clearFields(a)})};c.fn.clearFields=c.fn.clearInputs=function(a){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var b=this.type,e=this.tagName.toLowerCase();if(d.test(b)||"textarea"==e)this.value="";else if("checkbox"==b||"radio"==b)this.checked=!1;else if("select"==e)this.selectedIndex=-1;else if(a&&(!0===a&&/hidden/.test(b)||"string"==typeof a&&c(this).is(a)))this.value=""})};c.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};c.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=
!a})};c.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var d=this.type;"checkbox"==d||"radio"==d?this.checked=a:"option"==this.tagName.toLowerCase()&&(d=c(this).parent("select"),a&&(d[0]&&"select-one"==d[0].type)&&d.find("option").selected(!1),this.selected=a)})};c.fn.ajaxSubmit.debug=!1})(jQuery);
!function(c){var g=function(c,b){this.init("tooltip",c,b)};g.prototype={constructor:g,init:function(e,b,f){var a;this.type=e;this.$element=c(b);this.options=this.getOptions(f);this.enabled=!0;b=this.options.trigger.split(" ");for(f=b.length;f--;)if(a=b[f],"click"==a)this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this));else"manual"!=a&&(e="hover"==a?"mouseenter":"focus",a="hover"==a?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,c.proxy(this.enter,
this)),this.$element.on(a+"."+this.type,this.options.selector,c.proxy(this.leave,this)));this.options.selector?this._options=c.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){e=c.extend({},c.fn[this.type].defaults,this.$element.data(),e);e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay});return e},enter:function(e){var b=c.fn[this.type].defaults,f={},a;this._options&&c.each(this._options,function(a,c){b[a]!=c&&(f[a]=c)},this);a=
c(e.currentTarget)[this.type](f).data(this.type);if(!a.options.delay||!a.options.delay.show)return a.show();clearTimeout(this.timeout);a.hoverState="in";this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)},leave:function(e){var b=c(e.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!b.options.delay||!b.options.delay.hide)return b.hide();b.hoverState="out";this.timeout=setTimeout(function(){"out"==b.hoverState&&
b.hide()},b.options.delay.hide)},show:function(){var e,b,f,a,d;b=c.Event("show");if(this.hasContent()&&this.enabled&&(this.$element.trigger(b),!b.isDefaultPrevented())){e=this.tip();this.setContent();this.options.animation&&e.addClass("fade");a="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement;e.detach().css({top:0,left:0,display:"block"});this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);b=
this.getPosition();f=e[0].offsetWidth;e=e[0].offsetHeight;switch(a){case "bottom":d={top:b.top+b.height,left:b.left+b.width/2-f/2};break;case "top":d={top:b.top-e,left:b.left+b.width/2-f/2};break;case "left":d={top:b.top+b.height/2-e/2,left:b.left-f};break;case "right":d={top:b.top+b.height/2-e/2,left:b.left+b.width}}this.applyPlacement(d,a);this.$element.trigger("shown")}},applyPlacement:function(c,b){var f=this.tip(),a=f[0].offsetWidth,d=f[0].offsetHeight,g,h,u;f.offset(c).addClass(b).addClass("in");
g=f[0].offsetWidth;h=f[0].offsetHeight;"top"==b&&h!=d&&(c.top=c.top+d-h,u=!0);"bottom"==b||"top"==b?(d=0,0>c.left&&(d=-2*c.left,c.left=0,f.offset(c),g=f[0].offsetWidth),this.replaceArrow(d-a+g,g,"left")):this.replaceArrow(h-d,h,"top");u&&f.offset(c)},replaceArrow:function(c,b,f){this.arrow().css(f,c?50*(1-c/b)+"%":"")},setContent:function(){var c=this.tip(),b=this.getTitle();c.find(".tooltip-inner")[this.options.html?"html":"text"](b);c.removeClass("fade in top bottom left right")},hide:function(){function e(){var a=
setTimeout(function(){b.off(c.support.transition.end).detach()},500);b.one(c.support.transition.end,function(){clearTimeout(a);b.detach()})}var b=this.tip(),f=c.Event("hide");this.$element.trigger(f);if(!f.isDefaultPrevented())return b.removeClass("in"),c.support.transition&&this.$tip.hasClass("fade")?e():b.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var c=this.$element;if(c.attr("title")||"string"!=typeof c.attr("data-original-title"))c.attr("data-original-title",c.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return c.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var c=this.$element,b=this.options;return c.attr("data-original-title")||("function"==typeof b.title?b.title.call(c[0]):b.title)},tip:function(){return this.$tip=this.$tip||c(this.options.template)},arrow:function(){return this.$arrow=
this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){e=e?c(e.currentTarget)[this.type](this._options).data(this.type):this;e.tip().hasClass("in")?e.hide():e.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var h=c.fn.tooltip;
c.fn.tooltip=function(e){return this.each(function(){var b=c(this),f=b.data("tooltip"),a="object"==typeof e&&e;f||b.data("tooltip",f=new g(this,a));if("string"==typeof e)f[e]()})};c.fn.tooltip.Constructor=g;c.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};c.fn.tooltip.noConflict=function(){c.fn.tooltip=h;return this}}(window.jQuery);
!function(c){var g=function(e){this.element=c(e)};g.prototype={constructor:g,show:function(){var e=this.element,b=e.closest("ul:not(.dropdown-menu)"),f=e.attr("data-target"),a,d;f||(f=(f=e.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));e.parent("li").hasClass("active")||(a=b.find(".active:last a")[0],d=c.Event("show",{relatedTarget:a}),e.trigger(d),d.isDefaultPrevented()||(f=c(f),this.activate(e.parent("li"),b),this.activate(f,f.parent(),function(){e.trigger({type:"shown",relatedTarget:a})})))},activate:function(e,
b,f){function a(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");e.addClass("active");g?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade");e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active");f&&f()}var d=b.find("> .active"),g=f&&c.support.transition&&d.hasClass("fade");g?d.one(c.support.transition.end,a):a();d.removeClass("in")}};var h=c.fn.tab;c.fn.tab=function(e){return this.each(function(){var b=c(this),f=b.data("tab");f||b.data("tab",
f=new g(this));if("string"==typeof e)f[e]()})};c.fn.tab.Constructor=g;c.fn.tab.noConflict=function(){c.fn.tab=h;return this};c(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();c(this).tab("show")})}(window.jQuery);var Handlebars={};
(function(c,g){c.VERSION="1.0.0-rc.4";c.COMPILER_REVISION=3;c.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:">= 1.0.0-rc.4"};c.helpers={};c.partials={};var h=Object.prototype.toString;c.registerHelper=function(a,d,b){if("[object Object]"===h.call(a)){if(b||d)throw new c.Exception("Arg not supported with multiple helpers");c.Utils.extend(this.helpers,a)}else b&&(d.not=b),this.helpers[a]=d};c.registerPartial=function(a,d){"[object Object]"===h.call(a)?c.Utils.extend(this.partials,a):this.partials[a]=
d};c.registerHelper("helperMissing",function(a){if(2===arguments.length)return g;throw Error("Could not find property '"+a+"'");});c.registerHelper("blockHelperMissing",function(a,d){var b=d.inverse||function(){},e=d.fn,f=h.call(a);"[object Function]"===f&&(a=a.call(this));return!0===a?e(this):!1===a||null==a?b(this):"[object Array]"===f?0<a.length?c.helpers.each(a,d):b(this):e(a)});c.K=function(){};c.createFrame=Object.create||function(a){c.K.prototype=a;a=new c.K;c.K.prototype=null;return a};c.logger=
{DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{"0":"debug",1:"info",2:"warn",3:"error"},log:function(a,d){if(c.logger.level<=a){var b=c.logger.methodMap[a];"undefined"!==typeof console&&console[b]&&console[b].call(console,d)}}};c.log=function(a,d){c.logger.log(a,d)};c.registerHelper("each",function(a,d){var b=d.fn,e=d.inverse,f=0,g="",A;d.data&&(A=c.createFrame(d.data));if(a&&"object"===typeof a)if(a instanceof Array)for(var h=a.length;f<h;f++)A&&(A.index=f),g+=b(a[f],{data:A});else for(h in a)a.hasOwnProperty(h)&&
(A&&(A.key=h),g+=b(a[h],{data:A}),f++);0===f&&(g=e(this));return g});c.registerHelper("if",function(a,d){"[object Function]"===h.call(a)&&(a=a.call(this));return!a||c.Utils.isEmpty(a)?d.inverse(this):d.fn(this)});c.registerHelper("unless",function(a,d){return c.helpers["if"].call(this,a,{fn:d.inverse,inverse:d.fn})});c.registerHelper("with",function(a,d){if(!c.Utils.isEmpty(a))return d.fn(a)});c.registerHelper("log",function(a,d){var b=d.data&&null!=d.data.level?parseInt(d.data.level,10):1;c.log(b,
a)});var e=function(){function a(){this.yy={}}var d={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,
pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,
2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(a,d,b,c,e,f,m){a=f.length-1;switch(e){case 1:return f[a-1];case 2:this.$=new c.ProgramNode([],f[a]);break;case 3:this.$=new c.ProgramNode(f[a-2],f[a]);break;case 4:this.$=new c.ProgramNode(f[a-1],[]);break;case 5:this.$=new c.ProgramNode(f[a]);break;case 6:this.$=new c.ProgramNode([],[]);break;case 7:this.$=new c.ProgramNode([]);break;case 8:this.$=
[f[a]];break;case 9:f[a-1].push(f[a]);this.$=f[a-1];break;case 10:this.$=new c.BlockNode(f[a-2],f[a-1].inverse,f[a-1],f[a]);break;case 11:this.$=new c.BlockNode(f[a-2],f[a-1],f[a-1].inverse,f[a]);break;case 12:this.$=f[a];break;case 13:this.$=f[a];break;case 14:this.$=new c.ContentNode(f[a]);break;case 15:this.$=new c.CommentNode(f[a]);break;case 16:this.$=new c.MustacheNode(f[a-1][0],f[a-1][1]);break;case 17:this.$=new c.MustacheNode(f[a-1][0],f[a-1][1]);break;case 18:this.$=f[a-1];break;case 19:this.$=
new c.MustacheNode(f[a-1][0],f[a-1][1]);break;case 20:this.$=new c.MustacheNode(f[a-1][0],f[a-1][1],!0);break;case 21:this.$=new c.PartialNode(f[a-1]);break;case 22:this.$=new c.PartialNode(f[a-2],f[a-1]);break;case 24:this.$=[[f[a-2]].concat(f[a-1]),f[a]];break;case 25:this.$=[[f[a-1]].concat(f[a]),null];break;case 26:this.$=[[f[a-1]],f[a]];break;case 27:this.$=[[f[a]],null];break;case 28:this.$=[[new c.DataNode(f[a])],null];break;case 29:f[a-1].push(f[a]);this.$=f[a-1];break;case 30:this.$=[f[a]];
break;case 31:this.$=f[a];break;case 32:this.$=new c.StringNode(f[a]);break;case 33:this.$=new c.IntegerNode(f[a]);break;case 34:this.$=new c.BooleanNode(f[a]);break;case 35:this.$=new c.DataNode(f[a]);break;case 36:this.$=new c.HashNode(f[a]);break;case 37:f[a-1].push(f[a]);this.$=f[a-1];break;case 38:this.$=[f[a]];break;case 39:this.$=[f[a-2],f[a]];break;case 40:this.$=[f[a-2],new c.StringNode(f[a])];break;case 41:this.$=[f[a-2],new c.IntegerNode(f[a])];break;case 42:this.$=[f[a-2],new c.BooleanNode(f[a])];
break;case 43:this.$=[f[a-2],new c.DataNode(f[a])];break;case 44:this.$=new c.PartialNameNode(f[a]);break;case 45:this.$=new c.IdNode(f[a]);break;case 46:f[a-2].push(f[a]);this.$=f[a-2];break;case 47:this.$=[f[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,
11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],
19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,
14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,
34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},
{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,
35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,
20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],
22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(a,d){throw Error(a);},parse:function(a){var d=[0],b=[null],c=[],f=this.table,e="",m=0,n=0,g=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==
typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;c.push(a);var h=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var q,k,s,u,y={},l,B;;){s=d[d.length-1];if(this.defaultActions[s])u=this.defaultActions[s];else{if(null===q||"undefined"==typeof q)q=void 0,q=this.lexer.lex()||1,"number"!==typeof q&&(q=this.symbols_[q]||q);u=f[s]&&f[s][q]}if("undefined"===typeof u||!u.length||!u[0]){var t="";if(!g){B=[];
for(l in f[s])this.terminals_[l]&&2<l&&B.push("'"+this.terminals_[l]+"'");t=this.lexer.showPosition?"Parse error on line "+(m+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+B.join(", ")+", got '"+(this.terminals_[q]||q)+"'":"Parse error on line "+(m+1)+": Unexpected "+(1==q?"end of input":"'"+(this.terminals_[q]||q)+"'");this.parseError(t,{text:this.lexer.match,token:this.terminals_[q]||q,line:this.lexer.yylineno,loc:a,expected:B})}}if(u[0]instanceof Array&&1<u.length)throw Error("Parse Error: multiple actions possible at state: "+
s+", token: "+q);switch(u[0]){case 1:d.push(q);b.push(this.lexer.yytext);c.push(this.lexer.yylloc);d.push(u[1]);q=null;k?(q=k,k=null):(n=this.lexer.yyleng,e=this.lexer.yytext,m=this.lexer.yylineno,a=this.lexer.yylloc,0<g&&g--);break;case 2:B=this.productions_[u[1]][1];y.$=b[b.length-B];y._$={first_line:c[c.length-(B||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(B||1)].first_column,last_column:c[c.length-1].last_column};h&&(y._$.range=[c[c.length-(B||1)].range[0],c[c.length-
1].range[1]]);s=this.performAction.call(y,e,n,m,this.yy,u[1],b,c);if("undefined"!==typeof s)return s;B&&(d=d.slice(0,-2*B),b=b.slice(0,-1*B),c=c.slice(0,-1*B));d.push(this.productions_[u[1]][0]);b.push(y.$);c.push(y._$);u=f[d[d.length-2]][d[d.length-1]];d.push(u);break;case 3:return!0}}return!0}},b=function(){return{EOF:1,parseError:function(a,d){if(this.yy.parser)this.yy.parser.parseError(a,d);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=
this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);
return a},unput:function(a){var d=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-d-1);this.offset-=d;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var c=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?
(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-d};this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-d]);return this},more:function(){this._more=!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,
20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),d=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+d+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,d,b;this._more||(this.match=this.yytext="");for(var c=this._currentRules(),f=0;f<c.length;f++)if((d=this._input.match(this.rules[c[f]]))&&(!a||d[0].length>a[0].length))if(a=d,b=f,!this.options.flex)break;if(a){if(d=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=
d.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,
this,c[b],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-
1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,d,b,c){switch(b){case 0:return d.yytext="\\",14;case 1:"\\"!==d.yytext.slice(-1)&&this.begin("mu");"\\"===d.yytext.slice(-1)&&(d.yytext=d.yytext.substr(0,d.yyleng-1),this.begin("emu"));if(d.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==d.yytext.slice(-1)&&this.popState(),"\\"===d.yytext.slice(-1)&&(d.yytext=d.yytext.substr(0,
d.yyleng-1)),14;case 4:return d.yytext=d.yytext.substr(0,d.yyleng-4),this.popState(),15;case 5:return this.begin("par"),24;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 23;case 12:this.popState();this.begin("com");break;case 13:return d.yytext=d.yytext.substr(3,d.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 36;case 16:return 35;case 17:return 35;case 18:return 39;case 20:return this.popState(),18;case 21:return this.popState(),
18;case 22:return d.yytext=d.yytext.substr(1,d.yyleng-2).replace(/\\"/g,'"'),30;case 23:return d.yytext=d.yytext.substr(1,d.yyleng-2).replace(/\\'/g,"'"),30;case 24:return d.yytext=d.yytext.substr(1),28;case 25:return 32;case 26:return 32;case 27:return 31;case 28:return 35;case 29:return d.yytext=d.yytext.substr(1,d.yyleng-2),35;case 30:return"INVALID";case 32:return this.popState(),37;case 33:return 5}},rules:[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,
/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$:\-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$\-\/]+)/,/^(?:$)/],
conditions:{mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,33],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},par:{rules:[31,32],inclusive:!1},INITIAL:{rules:[0,1,2,33],inclusive:!0}}}}();d.lexer=b;a.prototype=d;d.Parser=a;return new a}();c.Parser=e;c.parse=function(a){if(a.constructor===c.AST.ProgramNode)return a;c.Parser.yy=c.AST;return c.Parser.parse(a)};c.AST={};c.AST.ProgramNode=function(a,d){this.type="program";this.statements=a;
d&&(this.inverse=new c.AST.ProgramNode(d))};c.AST.MustacheNode=function(a,d,b){this.type="mustache";this.escaped=!b;this.hash=d;b=this.id=a[0];a=this.params=a.slice(1);this.isHelper=(this.eligibleHelper=b.isSimple)&&(a.length||d)};c.AST.PartialNode=function(a,d){this.type="partial";this.partialName=a;this.context=d};c.AST.BlockNode=function(a,d,b,f){var e=a.id;if(e.original!==f.original)throw new c.Exception(e.original+" doesn't match "+f.original);this.type="block";this.mustache=a;this.program=d;
if((this.inverse=b)&&!this.program)this.isInverse=!0};c.AST.ContentNode=function(a){this.type="content";this.string=a};c.AST.HashNode=function(a){this.type="hash";this.pairs=a};c.AST.IdNode=function(a){this.type="ID";this.original=a.join(".");for(var d=[],b=0,f=0,e=a.length;f<e;f++){var g=a[f];if(".."===g||"."===g||"this"===g){if(0<d.length)throw new c.Exception("Invalid path: "+this.original);".."===g?b++:this.isScoped=!0}else d.push(g)}this.parts=d;this.string=d.join(".");this.depth=b;this.isSimple=
1===a.length&&!this.isScoped&&0===b;this.stringModeValue=this.string};c.AST.PartialNameNode=function(a){this.type="PARTIAL_NAME";this.name=a};c.AST.DataNode=function(a){this.type="DATA";this.id=a};c.AST.StringNode=function(a){this.type="STRING";this.stringModeValue=this.string=a};c.AST.IntegerNode=function(a){this.type="INTEGER";this.integer=a;this.stringModeValue=Number(a)};c.AST.BooleanNode=function(a){this.type="BOOLEAN";this.bool=a;this.stringModeValue="true"===a};c.AST.CommentNode=function(a){this.type=
"comment";this.comment=a};var b="description fileName lineNumber message name number stack".split(" ");c.Exception=function(a){for(var d=Error.prototype.constructor.apply(this,arguments),c=0;c<b.length;c++)this[b[c]]=d[b[c]]};c.Exception.prototype=Error();c.SafeString=function(a){this.string=a};c.SafeString.prototype.toString=function(){return this.string.toString()};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,d=/[&<>"'`]/,s=function(a){return f[a]||
"&amp;"};c.Utils={extend:function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])},escapeExpression:function(b){if(b instanceof c.SafeString)return b.toString();if(null==b||!1===b)return"";b=b.toString();return!d.test(b)?b:b.replace(a,s)},isEmpty:function(a){return!a&&0!==a?!0:"[object Array]"===h.call(a)&&0===a.length?!0:!1}};var k=c.Compiler=function(){},u=c.JavaScriptCompiler=function(){};k.prototype={compiler:k,disassemble:function(){for(var a=this.opcodes,d,b=[],c,f,e=0,g=a.length;e<g;e++)if(d=
a[e],"DECLARE"===d.opcode)b.push("DECLARE "+d.name+"="+d.value);else{c=[];for(var h=0;h<d.args.length;h++)f=d.args[h],"string"===typeof f&&(f='"'+f.replace("\n","\\n")+'"'),c.push(f);b.push(d.opcode+" "+c.join(" "))}return b.join("\n")},equals:function(a){var d=this.opcodes.length;if(a.opcodes.length!==d)return!1;for(var b=0;b<d;b++){var c=this.opcodes[b],f=a.opcodes[b];if(c.opcode!==f.opcode||c.args.length!==f.args.length)return!1;for(var e=0;e<c.args.length;e++)if(c.args[e]!==f.args[e])return!1}d=
this.children.length;if(a.children.length!==d)return!1;for(b=0;b<d;b++)if(!this.children[b].equals(a.children[b]))return!1;return!0},guid:0,compile:function(a,d){this.children=[];this.depths={list:[]};this.options=d;var b=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(b)for(var c in b)this.options.knownHelpers[c]=b[c];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){a=
a.statements;var d;this.opcodes=[];for(var b=0,c=a.length;b<c;b++)d=a[b],this[d.type](d);this.isSimple=1===c;this.depths.list=this.depths.list.sort(function(a,d){return a-d});return this},compileProgram:function(a){a=(new this.compiler).compile(a,this.options);var d=this.guid++,b;this.usePartial=this.usePartial||a.usePartial;this.children[d]=a;for(var c=0,f=a.depths.list.length;c<f;c++)b=a.depths.list[c],2>b||this.addDepth(b-1);return d},block:function(a){var d=a.mustache,b=a.program;a=a.inverse;
b&&(b=this.compileProgram(b));a&&(a=this.compileProgram(a));var c=this.classifyMustache(d);"helper"===c?this.helperMustache(d,b,a):"simple"===c?(this.simpleMustache(d),this.opcode("pushProgram",b),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(d,b,a),this.opcode("pushProgram",b),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(a){a=a.pairs;var d,b;this.opcode("pushHash");
for(var c=0,f=a.length;c<f;c++)d=a[c],b=d[1],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this.accept(b),this.opcode("assignToHash",d[0]);this.opcode("popHash")},partial:function(a){var d=a.partialName;this.usePartial=!0;a.context?this.ID(a.context):this.opcode("push","depth0");this.opcode("invokePartial",d.name);this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},
mustache:function(a){var d=this.options,b=this.classifyMustache(a);"simple"===b?this.simpleMustache(a):"helper"===b?this.helperMustache(a):this.ambiguousMustache(a);a.escaped&&!d.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(a,d,b){a=a.id;var c=a.parts[0],f=null!=d||null!=b;this.opcode("getContext",a.depth);this.opcode("pushProgram",d);this.opcode("pushProgram",b);this.opcode("invokeAmbiguous",c,f)},simpleMustache:function(a){a=a.id;"DATA"===a.type?this.DATA(a):
a.parts.length?this.ID(a):(this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperMustache:function(a,d,b){d=this.setupFullMustacheParams(a,d,b);a=a.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",d.length,a);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+a);this.opcode("invokeHelper",d.length,a)}},ID:function(a){this.addDepth(a.depth);
this.opcode("getContext",a.depth);a.parts[0]?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var d=1,b=a.parts.length;d<b;d++)this.opcode("lookup",a.parts[d])},DATA:function(a){this.options.data=!0;this.opcode("lookupData",a.id)},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,
1)})},declare:function(a,d){this.opcodes.push({opcode:"DECLARE",name:a,value:d})},addDepth:function(a){if(isNaN(a))throw Error("EWOT");0!==a&&!this.depths[a]&&(this.depths[a]=!0,this.depths.list.push(a))},classifyMustache:function(a){var d=a.isHelper,b=a.eligibleHelper,c=this.options;b&&!d&&(c.knownHelpers[a.id.parts[0]]?d=!0:c.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var d=a.length,b;d--;)if(b=a[d],this.options.stringParams)b.depth&&this.addDepth(b.depth),
this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type);else this[b.type](b)},setupMustacheParams:function(a){var d=a.params;this.pushParams(d);a.hash?this.hash(a.hash):this.opcode("emptyHash");return d},setupFullMustacheParams:function(a,d,b){var c=a.params;this.pushParams(c);this.opcode("pushProgram",d);this.opcode("pushProgram",b);a.hash?this.hash(a.hash):this.opcode("emptyHash");return c}};var w=function(a){this.value=a};u.prototype={nameLookup:function(a,
d){return/^[0-9]+$/.test(d)?a+"["+d+"]":u.isValidJavaScriptVariableName(d)?a+"."+d:a+"['"+d+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,d,b,f){this.environment=a;this.options=d||{};c.log(c.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=
!!b;this.context=b||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(a,d);a=a.opcodes;this.i=0;for(l=a.length;this.i<l;this.i++)d=a[this.i],"DECLARE"===d.opcode?this[d.name]=d.value:this[d.opcode].apply(this,d.args);return this.createFunctionContext(f)},nextOpcode:function(){return this.environment.opcodes[this.i+1]},eat:function(){this.i+=1},preamble:function(){var a=
[];if(this.isChild)a.push("");else{var d=this.namespace,b="helpers = helpers || "+d+".helpers;";this.environment.usePartial&&(b=b+" partials = partials || "+d+".partials;");this.options.data&&(b+=" data = data || {};");a.push(b)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=a},createFunctionContext:function(a){var d=this.stackVars.concat(this.registers.list);0<d.length&&(this.source[1]=this.source[1]+", "+d.join(", "));if(!this.isChild)for(var b in this.context.aliases)this.source[1]=
this.source[1]+", "+b+"="+this.context.aliases[b];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.source.push("return buffer;");d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];b=0;for(var f=this.environment.depths.list.length;b<f;b++)d.push("depth"+this.environment.depths.list[b]);b=this.mergeSource();this.isChild||(f=c.COMPILER_REVISION,
b="this.compilerInfo = ["+f+",'"+c.REVISION_CHANGES[f]+"'];\n"+b);if(a)return d.push(b),Function.apply(this,d);a="function "+(this.name||"")+"("+d.join(",")+") {\n  "+b+"}";c.log(c.logger.DEBUG,a+"\n\n");return a},mergeSource:function(){for(var a="",d,b=0,c=this.source.length;b<c;b++){var f=this.source[b];f.appendToBuffer?d=d?d+"\n    + "+f.content:f.content:(d&&(a+="buffer += "+d+";\n  ",d=g),a+=f+"\n  ")}return a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var a=["depth0"];this.setupParams(0,a);this.replaceStack(function(d){a.splice(1,0,d);return"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var d=this.topStack();a.splice(1,0,d);a[a.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+d+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},
append:function(){this.flushInline();var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }");this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+
this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(d){return d+" == null || "+d+" === false ? "+d+" : "+this.nameLookup(d,a,"context")})},lookupData:function(a){this.push(this.nameLookup("data",a,"data"))},pushStringParam:function(a,
d){this.pushStackLiteral("depth"+this.lastContext);this.pushString(d);"string"===typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=g;this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes",
"{"+a.types.join(",")+"}"));this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){this.inlineStack.push(a);return a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,d){this.context.aliases.helperMissing="helpers.helperMissing";var b=this.lastHelper=this.setupHelper(a,d,!0);this.push(b.name);
this.replaceStack(function(a){return a+" ? "+a+".call("+b.callParams+") : helperMissing.call("+b.helperMissingParams+")"})},invokeKnownHelper:function(a,d){var b=this.setupHelper(a,d);this.push(b.name+".call("+b.callParams+")")},invokeAmbiguous:function(a,d){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var b=this.setupHelper(0,a,d),c=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=this.nameLookup("depth"+this.lastContext,a,"context"),e=this.nextStack();this.source.push("if ("+
e+" = "+c+") { "+e+" = "+e+".call("+b.callParams+"); }");this.source.push("else { "+e+" = "+f+"; "+e+" = typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e+"; }")},invokePartial:function(a){a=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&a.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+a.join(", ")+")")},assignToHash:function(a){var d=this.popStack(),b,c;this.options.stringParams&&(c=this.popStack(),
b=this.popStack());var f=this.hash;b&&f.contexts.push("'"+a+"': "+b);c&&f.types.push("'"+a+"': "+c);f.values.push("'"+a+"': ("+d+")")},compiler:u,compileChildren:function(a,d){for(var b=a.children,c,f,e=0,g=b.length;e<g;e++){c=b[e];f=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=f.compile(c,d,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},
matchExistingProgram:function(a){for(var d=0,b=this.context.environments.length;d<b;d++){var c=this.context.environments[d];if(c&&c.equals(a))return d}},programExpression:function(a){this.context.aliases.self="this";if(null==a)return"self.noop";var d=this.environment.children[a];a=d.depths.list;for(var b=[d.index,d.name,"data"],c=0,f=a.length;c<f;c++)d=a[c],1===d?b.push("depth0"):b.push("depth"+(d-1));return(0===a.length?"self.program(":"self.programWithDepth(")+b.join(", ")+")"},register:function(a,
d){this.useRegister(a);this.source.push(a+" = "+d+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new w(a))},pushStack:function(a){this.flushInline();var d=this.incrStack();a&&this.source.push(d+" = "+a+";");this.compileStack.push(d);return d},replaceStack:function(a){var d="",b=this.isInline(),c;b?(c=this.popStack(!0),c instanceof w?c=c.value:(d=this.stackSlot?this.topStackName():this.incrStack(),d=
"("+this.push(d)+" = "+c+"),",c=this.topStack())):c=this.topStack();a=a.call(this,c);b?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+d+a+")")):(/^stack/.test(c)||(c=this.nextStack()),this.source.push(c+" = ("+d+a+");"));return c},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},
flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var d=0,b=a.length;d<b;d++){var c=a[d];c instanceof w?this.compileStack.push(c):this.pushStack(c)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var d=this.isInline(),b=(d?this.inlineStack:this.compileStack).pop();if(!a&&b instanceof w)return b.value;d||this.stackSlot--;return b},topStack:function(a){var d=this.isInline()?this.inlineStack:this.compileStack,d=d[d.length-1];return!a&&d instanceof
w?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,d,b){var c=[];this.setupParams(a,c,b);a=this.nameLookup("helpers",d,"helper");return{params:c,name:a,callParams:["depth0"].concat(c).join(", "),helperMissingParams:b&&["depth0",this.quotedString(d)].concat(c).join(", ")}},setupParams:function(a,d,b){var c=[],f=[],e=[],g,h;c.push("hash:"+
this.popStack());g=this.popStack();if((h=this.popStack())||g)h||(this.context.aliases.self="this",h="self.noop"),g||(this.context.aliases.self="this",g="self.noop"),c.push("inverse:"+g),c.push("fn:"+h);for(h=0;h<a;h++)g=this.popStack(),d.push(g),this.options.stringParams&&(e.push(this.popStack()),f.push(this.popStack()));this.options.stringParams&&(c.push("contexts:["+f.join(",")+"]"),c.push("types:["+e.join(",")+"]"),c.push("hashContexts:hashContexts"),c.push("hashTypes:hashTypes"));this.options.data&&
c.push("data:data");c="{"+c.join(",")+"}";b?(this.register("options",c),d.push("options")):d.push(c);return d.join(", ")}};for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
z=u.RESERVED_WORDS={},t=0,l=e.length;t<l;t++)z[e[t]]=!0;u.isValidJavaScriptVariableName=function(a){return!u.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1};c.precompile=function(a,d){if(null==a||"string"!==typeof a&&a.constructor!==c.AST.ProgramNode)throw new c.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);d=d||{};"data"in d||(d.data=!0);var b=c.parse(a),b=(new k).compile(b,d);return(new u).compile(b,d)};c.compile=function(a,d){if(null==
a||"string"!==typeof a&&a.constructor!==c.AST.ProgramNode)throw new c.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);d=d||{};"data"in d||(d.data=!0);var b;return function(f,e){if(!b){var h=c.parse(a),h=(new k).compile(h,d),h=(new u).compile(h,d,g,!0);b=c.template(h)}return b.call(this,f,e)}};c.VM={template:function(a){var d={escapeExpression:c.Utils.escapeExpression,invokePartial:c.VM.invokePartial,programs:[],program:function(a,d,b){var f=this.programs[a];
b?f=c.VM.program(a,d,b):f||(f=this.programs[a]=c.VM.program(a,d));return f},programWithDepth:c.VM.programWithDepth,noop:c.VM.noop,compilerInfo:null};return function(b,f){f=f||{};var e=a.call(d,c,b,f.helpers,f.partials,f.data),g=d.compilerInfo||[],h=g[0]||1,k=c.COMPILER_REVISION;if(h!==k){if(h<k)throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c.REVISION_CHANGES[k]+") or downgrade your runtime to an older version ("+
c.REVISION_CHANGES[h]+").";throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+").";}return e}},programWithDepth:function(a,d,b){var c=Array.prototype.slice.call(arguments,3),f=function(a,f){f=f||{};return d.apply(this,[a,f.data||b].concat(c))};f.program=a;f.depth=c.length;return f},program:function(a,d,b){var c=function(a,c){c=c||{};return d(a,c.data||b)};c.program=a;c.depth=0;return c},noop:function(){return""},
invokePartial:function(a,d,b,f,e,h){f={helpers:f,partials:e,data:h};if(a===g)throw new c.Exception("The partial "+d+" could not be found");if(a instanceof Function)return a(b,f);if(c.compile)return e[d]=c.compile(a,{data:h!==g}),e[d](b,f);throw new c.Exception("The partial "+d+" could not be compiled when running in runtime-only mode");}};c.template=c.VM.template})(Handlebars);
!function(c){function g(a,d,b){b=(b||0)-1;for(var c=a.length;++b<c;)if(a[b]===d)return b;return-1}function h(a,d){var b=typeof d;if(a=a.k,"boolean"==b||d==n)return a[d];"number"!=b&&"string"!=b&&(b="object");var c="number"==b?d:v+d;return a=a[b]||(a[b]={}),"object"==b?a[c]&&-1<g(a[c],d)?0:-1:a[c]?0:-1}function e(a){var d=this.k,b=typeof a;if("boolean"==b||a==n)d[a]=m;else{"number"!=b&&"string"!=b&&(b="object");var c="number"==b?a:v+a,f=d[b]||(d[b]={});"object"==b?(f[c]||(f[c]=[])).push(a)==this.b.length&&
(d[b]=q):f[c]=m}}function b(a){return a.charCodeAt(0)}function f(a,d){var b=a.m,c=d.m;if(a=a.l,d=d.l,a!==d){if(a>d||"undefined"==typeof a)return 1;if(a<d||"undefined"==typeof d)return-1}return b<c?-1:1}function a(a){var d=-1,b=a.length,c=k();c["false"]=c["null"]=c["true"]=c.undefined=q;var f=k();f.b=a;f.k=c;for(f.push=e;++d<b;)f.push(a[d]);return!1===c.object?(w(f),n):f}function d(a){return"\\"+Na[a]}function s(){return r.pop()||[]}function k(){return x.pop()||{b:n,k:n,l:n,"false":q,m:0,leading:q,
maxWait:0,"null":q,number:n,object:n,push:n,string:n,trailing:q,"true":q,undefined:q,n:n}}function u(a){a.length=0;r.length<K&&r.push(a)}function w(a){var d=a.k;d&&w(d);a.b=a.k=a.l=a.object=a.number=a.string=a.n=n;x.length<K&&x.push(a)}function z(a,d,b){d||(d=0);"undefined"==typeof b&&(b=a?a.length:0);var c=-1;b=b-d||0;for(var f=Array(0>b?0:b);++c<b;)f[c]=a[d+c];return f}function t(e){function r(a){if(!a||H.call(a)!=W)return q;var d=a.valueOf,b="function"==typeof d&&(b=pa(d))&&pa(b);return b?a==b||
pa(a)==b:Cb(a)}function x(a,d,b){if(!a||!L[typeof a])return a;d=d&&"undefined"==typeof b?d:p.createCallback(d,b);for(var c=-1,f=L[typeof a]&&M(a),e=f?f.length:0;++c<e&&(b=f[c],!1!==d(a[b],b,a)););return a}function K(a,d,b){var c;if(!a||!L[typeof a])return a;d=d&&"undefined"==typeof b?d:p.createCallback(d,b);for(c in a)if(!1===d(a[c],c,a))break;return a}function Q(a,d,b){var c,f=a,e=f;if(!f)return e;for(var g=arguments,h=0,r="number"==typeof b?2:g.length;++h<r;)if((f=g[h])&&L[typeof f])for(var k=-1,
y=L[typeof f]&&M(f),s=y?y.length:0;++k<s;)c=y[k],"undefined"==typeof e[c]&&(e[c]=f[c]);return e}function X(a,d,b){var c,f=a,e=f;if(!f)return e;var g=arguments,h=0,r="number"==typeof b?2:g.length;if(3<r&&"function"==typeof g[r-2])var k=p.createCallback(g[--r-1],g[r--],2);else 2<r&&"function"==typeof g[r-1]&&(k=g[--r]);for(;++h<r;)if((f=g[h])&&L[typeof f])for(var y=-1,s=L[typeof f]&&M(f),A=s?s.length:0;++y<A;)c=s[y],e[c]=k?k(e[c],f[c]):f[c];return e}function Na(a){var d,b=[];if(!a||!L[typeof a])return b;
for(d in a)F.call(a,d)&&b.push(d);return b}function p(a){return a&&"object"==typeof a&&!N(a)&&F.call(a,"__wrapped__")?a:new qa(a)}function qa(a){this.__wrapped__=a}function za(a,d,b,c){function f(){var c=arguments,k=g?this:d;return e||(a=d[h]),b.length&&(c=c.length?(c=E.call(c),r?c.concat(b):b.concat(c)):b),this instanceof f?(k=R(a.prototype)?Aa(a.prototype):{},c=a.apply(k,c),R(c)?c:k):a.apply(k,c)}var e=Z(a),g=!b,h=d;if(g){var r=c;b=d}else if(!e){if(!c)throw new Db;d=a}return f}function Eb(a){return fb[a]}
function ra(){var a=(a=p.indexOf)===gb?g:a;return a}function hb(a){return function(d,b,c,f){return"boolean"!=typeof b&&b!=n&&(f=c,c=f&&f[b]===d?l:b,b=q),c!=n&&(c=p.createCallback(c,f)),a(d,b,c,f)}}function Cb(a){var d,b;return a&&H.call(a)==W&&(d=a.constructor,!Z(d)||d instanceof d)?(K(a,function(a,d){b=d}),b===l||F.call(a,b)):q}function Fb(a){return Gb[a]}function Pa(a,d,b,c,f,e){var g=a;if("boolean"!=typeof d&&d!=n&&(c=b,b=d,d=q),"function"==typeof b){if(b="undefined"==typeof c?b:p.createCallback(b,
c,1),g=b(g),"undefined"!=typeof g)return g;g=a}if(c=R(g)){var h=H.call(g);if(!P[h])return g;var r=N(g)}if(!c||!d)return c?r?z(g):X({},g):g;switch(c=U[h],h){case ea:case ga:return new c(+g);case ma:case ha:return new c(g);case oa:return c(g.source,wa.exec(g))}h=!f;f||(f=s());e||(e=s());for(var k=f.length;k--;)if(f[k]==a)return e[k];return g=r?c(g.length):{},r&&(F.call(a,"index")&&(g.index=a.index),F.call(a,"input")&&(g.input=a.input)),f.push(a),e.push(g),(r?D:x)(a,function(a,c){g[c]=Pa(a,d,b,l,f,e)}),
h&&(u(f),u(e)),g}function Ba(a){var d=[];return K(a,function(a,b){Z(a)&&d.push(b)}),d.sort()}function ib(a){for(var d=-1,b=M(a),c=b.length,f={};++d<c;){var e=b[d];f[a[e]]=e}return f}function ia(a,d,b,c,f,e){var g=b===A;if("function"==typeof b&&!g){b=p.createCallback(b,c,2);var h=b(a,d);if("undefined"!=typeof h)return!!h}if(a===d)return 0!==a||1/a==1/d;var r=typeof a,k=typeof d;if(a===a&&(!a||"function"!=r&&"object"!=r)&&(!d||"function"!=k&&"object"!=k))return q;if(a==n||d==n)return a===d;if(k=H.call(a),
r=H.call(d),k==da&&(k=W),r==da&&(r=W),k!=r)return q;switch(k){case ea:case ga:return+a==+d;case ma:return a!=+a?d!=+d:0==a?1/a==1/d:a==+d;case oa:case ha:return a==V(d)}if(r=k==ca,!r){if(F.call(a,"__wrapped__")||F.call(d,"__wrapped__"))return ia(a.__wrapped__||a,d.__wrapped__||d,b,c,f,e);if(k!=W)return q;var k=a.constructor,y=d.constructor;if(k!=y&&(!Z(k)||!(k instanceof k&&Z(y)&&y instanceof y)))return q}y=!f;f||(f=s());e||(e=s());for(k=f.length;k--;)if(f[k]==a)return e[k]==d;var l=0,h=m;if(f.push(a),
e.push(d),r){if(k=a.length,l=d.length,h=l==a.length,!h&&!g)return h;for(;l--;)if(r=k,y=d[l],g)for(;r--&&!(h=ia(a[r],y,b,c,f,e)););else if(!(h=ia(a[l],y,b,c,f,e)))break;return h}return K(d,function(d,g,r){return F.call(r,g)?(l++,h=F.call(a,g)&&ia(a[g],d,b,c,f,e)):void 0}),h&&!g&&K(a,function(a,d,b){return F.call(b,d)?h=-1<--l:void 0}),y&&(u(f),u(e)),h}function Z(a){return"function"==typeof a}function R(a){return!(!a||!L[typeof a])}function jb(a){return"number"==typeof a||H.call(a)==ma}function sa(a){return"string"==
typeof a||H.call(a)==ha}function kb(a,d,b){var c=arguments,f=0,e=2;if(!R(a))return a;if(b===A)var g=c[3],h=c[4],k=c[5];else{var y=m,h=s(),k=s();"number"!=typeof b&&(e=c.length);3<e&&"function"==typeof c[e-2]?g=p.createCallback(c[--e-1],c[e--],2):2<e&&"function"==typeof c[e-1]&&(g=c[--e])}for(;++f<e;)(N(c[f])?D:x)(c[f],function(d,b){var c,f,e=d,y=a[b];if(d&&((f=N(d))||r(d))){for(e=h.length;e--;)if(c=h[e]==d){y=k[e];break}if(!c){var s;g&&(e=g(y,d),s="undefined"!=typeof e)&&(y=e);s||(y=f?N(y)?y:[]:r(y)?
y:{});h.push(d);k.push(y);s||(y=kb(y,d,A,g,h,k))}}else g&&(e=g(y,d),"undefined"==typeof e&&(e=d)),"undefined"!=typeof e&&(y=e);a[b]=y});return y&&(u(h),u(k)),a}function Qa(a){for(var d=-1,b=M(a),c=b.length,f=I(c);++d<c;)f[d]=a[b[d]];return f}function lb(a,d,b){var c=-1,f=ra(),e=a?a.length:0,g=q;return b=(0>b?S(0,e+b):b)||0,e&&"number"==typeof e?g=-1<(sa(a)?a.indexOf(d,b):f(a,d,b)):x(a,function(a){return++c<b?void 0:!(g=a===d)}),g}function mb(a,d,b){var c=m;d=p.createCallback(d,b);b=-1;var f=a?a.length:
0;if("number"==typeof f)for(;++b<f&&(c=!!d(a[b],b,a)););else x(a,function(a,b,f){return c=!!d(a,b,f)});return c}function Ca(a,d,b){var c=[];d=p.createCallback(d,b);b=-1;var f=a?a.length:0;if("number"==typeof f)for(;++b<f;){var e=a[b];d(e,b,a)&&c.push(e)}else x(a,function(a,b,f){d(a,b,f)&&c.push(a)});return c}function Ra(a,d,b){d=p.createCallback(d,b);b=-1;var c=a?a.length:0;if("number"!=typeof c){var f;return x(a,function(a,b,c){return d(a,b,c)?(f=a,q):void 0}),f}for(;++b<c;){var e=a[b];if(d(e,b,
a))return e}}function D(a,d,b){var c=-1,f=a?a.length:0;if(d=d&&"undefined"==typeof b?d:p.createCallback(d,b),"number"==typeof f)for(;++c<f&&!1!==d(a[c],c,a););else x(a,d);return a}function Sa(a,d,b){var c=-1,f=a?a.length:0;if(d=p.createCallback(d,b),"number"==typeof f)for(var e=I(f);++c<f;)e[c]=d(a[c],c,a);else e=[],x(a,function(a,b,f){e[++c]=d(a,b,f)});return e}function nb(a,d,c){var f=-1/0,e=f;if(!d&&N(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h>e&&(e=h)}}else d=!d&&sa(a)?b:p.createCallback(d,
c),D(a,function(a,b,c){b=d(a,b,c);b>f&&(f=b,e=a)});return e}function Ta(a,d){var b=-1,c=a?a.length:0;if("number"==typeof c)for(var f=I(c);++b<c;)f[b]=a[b][d];return f||Sa(a,d)}function Ua(a,d,b,c){if(!a)return b;var f=3>arguments.length;d=p.createCallback(d,c,4);var e=-1,g=a.length;if("number"==typeof g)for(f&&(b=a[++e]);++e<g;)b=d(b,a[e],e,a);else x(a,function(a,c,e){b=f?(f=q,a):d(b,a,c,e)});return b}function ob(a,d,b,c){var f=a?a.length:0,e=3>arguments.length;if("number"!=typeof f)var g=M(a),f=
g.length;return d=p.createCallback(d,c,4),D(a,function(c,h,r){h=g?g[--f]:--f;b=e?(e=q,a[h]):d(b,a[h],h,r)}),b}function pb(a,d,b){var c;d=p.createCallback(d,b);b=-1;var f=a?a.length:0;if("number"==typeof f)for(;++b<f&&!(c=d(a[b],b,a)););else x(a,function(a,b,f){return!(c=d(a,b,f))});return!!c}function qb(d){var b=-1,c=ra(),f=d?d.length:0,e=ja.apply(J,E.call(arguments,1)),r=[],k=f>=la&&c===g;if(k){var y=a(e);y?(c=h,e=y):k=q}for(;++b<f;)y=d[b],0>c(e,y)&&r.push(y);return k&&w(e),r}function Va(a,d,b){if(a){var c=
0,f=a.length;if("number"!=typeof d&&d!=n){var e=-1;for(d=p.createCallback(d,b);++e<f&&d(a[e],e,a);)c++}else if(c=d,c==n||b)return a[0];return z(a,0,Da(S(0,c),f))}}function gb(a,d,b){if("number"==typeof b){var c=a?a.length:0;b=0>b?S(0,c+b):b||0}else if(b)return b=rb(a,d),a[b]===d?b:-1;return a?g(a,d,b):-1}function Wa(a,d,b){if("number"!=typeof d&&d!=n){var c=0,f=-1,e=a?a.length:0;for(d=p.createCallback(d,b);++f<e&&d(a[f],f,a);)c++}else c=d==n||b?1:S(0,d);return z(a,c)}function rb(a,d,b,c){var f=0,
e=a?a.length:f;b=b?p.createCallback(b,c,1):Xa;for(d=b(d);f<e;)c=f+e>>>1,b(a[c])<d?f=c+1:e=c;return f}function sb(a){for(var d=-1,b=a?nb(Ta(a,"length")):0,c=I(0>b?0:b);++d<b;)c[d]=Ta(a,d);return c}function tb(a,d){for(var b=-1,c=a?a.length:0,f={};++b<c;){var e=a[b];d?f[e]=d[b]:f[e[0]]=e[1]}return f}function Ya(a,d){return ub.fastBind||aa&&2<arguments.length?aa.call.apply(aa,arguments):za(a,d,E.call(arguments,2))}function vb(a,d,b){function c(){Ea(A);Ea(u);k=0;A=u=n}function f(){var d=l&&(!G||1<k);
c();d&&(!1!==s&&(y=new Fa),h=a.apply(r,g))}function e(){c();(l||s!==d)&&(y=new Fa,h=a.apply(r,g))}var g,h,r,k=0,y=0,s=q,A=n,u=n,l=m;if(d=S(0,d||0),b===m)var G=m,l=q;else R(b)&&(G=b.leading,s="maxWait"in b&&S(d,b.maxWait||0),l="trailing"in b?b.trailing:l);return function(){if(g=arguments,r=this,k++,Ea(u),!1===s)G&&2>k&&(h=a.apply(r,g));else{var b=new Fa;!A&&!G&&(y=b);var c=s-(b-y);0<c?A||(A=Ga(e,c)):(Ea(A),A=n,y=b,h=a.apply(r,g))}return d!==s&&(u=Ga(f,d)),h}}function wb(a){var d=E.call(arguments,1);
return Ga(function(){a.apply(l,d)},1)}function Xa(a){return a}function xb(a){D(Ba(a),function(d){var b=p[d]=a[d];p.prototype[d]=function(){var a=this.__wrapped__,d=[a];return Ha.apply(d,arguments),d=b.apply(p,d),a&&"object"==typeof a&&a===d?this:new qa(d)}})}function yb(){return this.__wrapped__}e=e?Y.defaults(c.Object(),e,Y.pick(c,C)):c;var I=e.Array,Za=e.Boolean,Fa=e.Date,$a=e.Function,T=e.Math,Hb=e.Number,ta=e.Object,ab=e.RegExp,V=e.String,Db=e.TypeError,J=[],bb=ta.prototype,Ib=e._,ka=ab("^"+V(bb.valueOf).replace(/[.*+?^${}()|[\]\\]/g,
"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Jb=T.ceil,Ea=e.clearTimeout,ja=J.concat,zb=T.floor,Kb=$a.prototype.toString,pa=ka.test(pa=ta.getPrototypeOf)&&pa,F=bb.hasOwnProperty,Ha=J.push,Ia=e.setImmediate,Ga=e.setTimeout,H=bb.toString,aa=ka.test(aa=H.bind)&&aa,Aa=ka.test(Aa=ta.create)&&Aa,cb=ka.test(cb=I.isArray)&&cb,Lb=e.isFinite,Mb=e.isNaN,Ja=ka.test(Ja=ta.keys)&&Ja,S=T.max,Da=T.min,db=e.parseInt,Ab=T.random,E=J.slice,T=ka.test(e.attachEvent),T=aa&&!/\n|true/.test(aa+T),U={};U[ca]=I;U[ea]=
Za;U[ga]=Fa;U[ya]=$a;U[W]=ta;U[ma]=Hb;U[oa]=ab;U[ha]=V;qa.prototype=p.prototype;var ub=p.support={};ub.fastBind=aa&&!T;p.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:fa,variable:"",imports:{_:p}};var N=cb,M=Ja?function(a){return R(a)?Ja(a):[]}:Na,fb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gb=ib(fb),Za=hb(function Bb(a,d,b){for(var c=-1,f=a?a.length:0,e=[];++c<f;){var g=a[c];b&&(g=b(g,c,a));N(g)?Ha.apply(e,d?g:Bb(g)):e.push(g)}return e}),eb=
hb(function(d,b,c){var f=-1,e=ra(),r=d?d.length:0,k=[],y=!b&&r>=la&&e===g,A=c||y?s():k;if(y){var l=a(A);l?(e=h,A=l):(y=q,A=c?A:(u(A),k))}for(;++f<r;){var l=d[f],m=c?c(l,f,d):l;(b?!f||A[A.length-1]!==m:0>e(A,m))&&((c||y)&&A.push(m),k.push(l))}return y?(u(A.b),w(A)):c&&u(A),k});return T&&Oa&&"function"==typeof Ia&&(wb=Ya(Ia,e)),Ia=8==db(G+"08")?db:function(a,d){return db(sa(a)?a.replace(B,""):a,d||0)},p.after=function(a,d){return 1>a?d():function(){return 1>--a?d.apply(this,arguments):void 0}},p.assign=
X,p.at=function(a){for(var d=-1,b=ja.apply(J,E.call(arguments,1)),c=b.length,f=I(c);++d<c;)f[d]=a[b[d]];return f},p.bind=Ya,p.bindAll=function(a){for(var d=1<arguments.length?ja.apply(J,E.call(arguments,1)):Ba(a),b=-1,c=d.length;++b<c;){var f=d[b];a[f]=Ya(a[f],a)}return a},p.bindKey=function(a,d){return za(a,d,E.call(arguments,2),A)},p.compact=function(a){for(var d=-1,b=a?a.length:0,c=[];++d<b;){var f=a[d];f&&c.push(f)}return c},p.compose=function(){var a=arguments;return function(){for(var d=arguments,
b=a.length;b--;)d=[a[b].apply(this,d)];return d[0]}},p.countBy=function(a,d,b){var c={};return d=p.createCallback(d,b),D(a,function(a,b,f){b=V(d(a,b,f));F.call(c,b)?c[b]++:c[b]=1}),c},p.createCallback=function(a,d,b){if(a==n)return Xa;var c=typeof a;if("function"!=c){if("object"!=c)return function(d){return d[a]};var f=M(a);return function(d){for(var b=f.length,c=q;b--&&(c=ia(d[f[b]],a[f[b]],A)););return c}}return"undefined"==typeof d||y&&!y.test(Kb.call(a))?a:1===b?function(b){return a.call(d,b)}:
2===b?function(b,c){return a.call(d,b,c)}:4===b?function(b,c,f,e){return a.call(d,b,c,f,e)}:function(b,c,f){return a.call(d,b,c,f)}},p.debounce=vb,p.defaults=Q,p.defer=wb,p.delay=function(a,d){var b=E.call(arguments,2);return Ga(function(){a.apply(l,b)},d)},p.difference=qb,p.filter=Ca,p.flatten=Za,p.forEach=D,p.forIn=K,p.forOwn=x,p.functions=Ba,p.groupBy=function(a,d,b){var c={};return d=p.createCallback(d,b),D(a,function(a,b,f){b=V(d(a,b,f));(F.call(c,b)?c[b]:c[b]=[]).push(a)}),c},p.initial=function(a,
d,b){if(!a)return[];var c=0,f=a.length;if("number"!=typeof d&&d!=n){var e=f;for(d=p.createCallback(d,b);e--&&d(a[e],e,a);)c++}else c=d==n||b?1:d||c;return z(a,0,Da(S(0,f-c),f))},p.intersection=function(d){for(var b=arguments,c=b.length,f=-1,e=s(),r=-1,k=ra(),y=d?d.length:0,A=[],l=s();++f<c;){var m=b[f];e[f]=k===g&&(m?m.length:0)>=la&&a(f?b[f]:l)}a:for(;++r<y;){var n=e[0],m=d[r];if(0>(n?h(n,m):k(l,m))){f=c;for((n||l).push(m);--f;)if(n=e[f],0>(n?h(n,m):k(b[f],m)))continue a;A.push(m)}}for(;c--;)(n=
e[c])&&w(n);return u(e),u(l),A},p.invert=ib,p.invoke=function(a,d){var b=E.call(arguments,2),c=-1,f="function"==typeof d,e=a?a.length:0,g=I("number"==typeof e?e:0);return D(a,function(a){g[++c]=(f?d:a[d]).apply(a,b)}),g},p.keys=M,p.map=Sa,p.max=nb,p.memoize=function(a,d){function b(){var c=b.cache,f=v+(d?d.apply(this,arguments):arguments[0]);return F.call(c,f)?c[f]:c[f]=a.apply(this,arguments)}return b.cache={},b},p.merge=kb,p.min=function(a,d,c){var f=1/0,e=f;if(!d&&N(a)){c=-1;for(var g=a.length;++c<
g;){var h=a[c];h<e&&(e=h)}}else d=!d&&sa(a)?b:p.createCallback(d,c),D(a,function(a,b,c){b=d(a,b,c);b<f&&(f=b,e=a)});return e},p.omit=function(a,d,b){var c=ra(),f="function"==typeof d,e={};if(f)d=p.createCallback(d,b);else var g=ja.apply(J,E.call(arguments,1));return K(a,function(a,b,h){(f?!d(a,b,h):0>c(g,b))&&(e[b]=a)}),e},p.once=function(a){var d,b;return function(){return d?b:(d=m,b=a.apply(this,arguments),a=n,b)}},p.pairs=function(a){for(var d=-1,b=M(a),c=b.length,f=I(c);++d<c;){var e=b[d];f[d]=
[e,a[e]]}return f},p.partial=function(a){return za(a,E.call(arguments,1))},p.partialRight=function(a){return za(a,E.call(arguments,1),n,A)},p.pick=function(a,d,b){var c={};if("function"!=typeof d)for(var f=-1,e=ja.apply(J,E.call(arguments,1)),g=R(a)?e.length:0;++f<g;){var h=e[f];h in a&&(c[h]=a[h])}else d=p.createCallback(d,b),K(a,function(a,b,f){d(a,b,f)&&(c[b]=a)});return c},p.pluck=Ta,p.range=function(a,d,b){a=+a||0;b=+b||1;d==n&&(d=a,a=0);var c=-1;d=S(0,Jb((d-a)/b));for(var f=I(d);++c<d;)f[c]=
a,a+=b;return f},p.reject=function(a,d,b){return d=p.createCallback(d,b),Ca(a,function(a,b,c){return!d(a,b,c)})},p.rest=Wa,p.shuffle=function(a){var d=-1,b=a?a.length:0,c=I("number"==typeof b?b:0);return D(a,function(a){var b=zb(Ab()*(++d+1));c[d]=c[b];c[b]=a}),c},p.sortBy=function(a,d,b){var c=-1,e=a?a.length:0,g=I("number"==typeof e?e:0);d=p.createCallback(d,b);D(a,function(a,b,f){var e=g[++c]=k();e.l=d(a,b,f);e.m=c;e.n=a});e=g.length;for(g.sort(f);e--;)a=g[e],g[e]=a.n,w(a);return g},p.tap=function(a,
d){return d(a),a},p.throttle=function(a,d,b){var c=m,f=m;return!1===b?c=q:R(b)&&(c="leading"in b?b.leading:c,f="trailing"in b?b.trailing:f),b=k(),b.leading=c,b.maxWait=d,b.trailing=f,a=vb(a,d,b),w(b),a},p.times=function(a,d,b){a=-1<(a=+a)?a:0;var c=-1,f=I(a);for(d=p.createCallback(d,b,1);++c<a;)f[c]=d(c);return f},p.toArray=function(a){return a&&"number"==typeof a.length?z(a):Qa(a)},p.transform=function(a,d,b,c){var f=N(a);return d=p.createCallback(d,c,4),b==n&&(f?b=[]:(c=a&&a.constructor,b=R(c&&
c.prototype)?Aa(c&&c.prototype):{})),(f?D:x)(a,function(a,c,f){return d(b,a,c,f)}),b},p.union=function(a){return N(a)||(arguments[0]=a?E.call(a):J),eb(ja.apply(J,arguments))},p.uniq=eb,p.unzip=sb,p.values=Qa,p.where=Ca,p.without=function(a){return qb(a,E.call(arguments,1))},p.wrap=function(a,d){return function(){var b=[a];return Ha.apply(b,arguments),d.apply(this,b)}},p.zip=function(a){return a?sb(arguments):[]},p.zipObject=tb,p.collect=Sa,p.drop=Wa,p.each=D,p.extend=X,p.methods=Ba,p.object=tb,p.select=
Ca,p.tail=Wa,p.unique=eb,xb(p),p.chain=p,p.prototype.chain=function(){return this},p.clone=Pa,p.cloneDeep=function(a,d,b){return Pa(a,m,d,b)},p.contains=lb,p.escape=function(a){return a==n?"":V(a).replace(na,Eb)},p.every=mb,p.find=Ra,p.findIndex=function(a,d,b){var c=-1,f=a?a.length:0;for(d=p.createCallback(d,b);++c<f;)if(d(a[c],c,a))return c;return-1},p.findKey=function(a,d,b){var c;return d=p.createCallback(d,b),x(a,function(a,b,f){return d(a,b,f)?(c=b,q):void 0}),c},p.has=function(a,d){return a?
F.call(a,d):q},p.identity=Xa,p.indexOf=gb,p.isArguments=function(a){return H.call(a)==da},p.isArray=N,p.isBoolean=function(a){return a===m||!1===a||H.call(a)==ea},p.isDate=function(a){return a?"object"==typeof a&&H.call(a)==ga:q},p.isElement=function(a){return a?1===a.nodeType:q},p.isEmpty=function(a){var d=m;if(!a)return d;var b=H.call(a),c=a.length;return b==ca||b==ha||b==da||b==W&&"number"==typeof c&&Z(a.splice)?!c:(x(a,function(){return d=q}),d)},p.isEqual=ia,p.isFinite=function(a){return Lb(a)&&
!Mb(parseFloat(a))},p.isFunction=Z,p.isNaN=function(a){return jb(a)&&a!=+a},p.isNull=function(a){return a===n},p.isNumber=jb,p.isObject=R,p.isPlainObject=r,p.isRegExp=function(a){return a?"object"==typeof a&&H.call(a)==oa:q},p.isString=sa,p.isUndefined=function(a){return"undefined"==typeof a},p.lastIndexOf=function(a,d,b){var c=a?a.length:0;for("number"==typeof b&&(c=(0>b?S(0,c+b):Da(b,c-1))+1);c--;)if(a[c]===d)return c;return-1},p.mixin=xb,p.noConflict=function(){return e._=Ib,this},p.parseInt=Ia,
p.random=function(a,d){a==n&&d==n&&(d=1);a=+a||0;d==n?(d=a,a=0):d=+d||0;var b=Ab();return a%1||d%1?a+Da(b*(d-a+parseFloat("1e-"+((b+"").length-1))),d):a+zb(b*(d-a+1))},p.reduce=Ua,p.reduceRight=ob,p.result=function(a,d){var b=a?a[d]:l;return Z(b)?a[d]():b},p.runInContext=t,p.size=function(a){var d=a?a.length:0;return"number"==typeof d?d:M(a).length},p.some=pb,p.sortedIndex=rb,p.template=function(a,b,c){var f=p.templateSettings;a||(a="");c=Q({},c,f);var e,g=Q({},c.imports,f.imports),f=M(g),g=Qa(g),
h=0,r=c.interpolate||va,k="__p+='",r=ab((c.escape||va).source+"|"+r.source+"|"+(r===fa?Ma:va).source+"|"+(c.evaluate||va).source+"|$","g");a.replace(r,function(b,c,f,g,r,y){return f||(f=g),k+=a.slice(h,y).replace(xa,d),c&&(k+="'+__e("+c+")+'"),r&&(e=m,k+="';"+r+";__p+='"),f&&(k+="'+((__t=("+f+"))==null?'':__t)+'"),h=y+b.length,b});k+="';\n";(r=c=c.variable)||(c="obj",k="with("+c+"){"+k+"}");k=(e?k.replace(O,""):k).replace(ua,"$1").replace(Ka,"$1;");k="function("+c+"){"+(r?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+
(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+k+"return __p}";try{var y=$a(f,"return "+k).apply(l,g)}catch(A){throw A.source=k,A;}return b?y(b):(y.source=k,y)},p.unescape=function(a){return a==n?"":V(a).replace(La,Fb)},p.uniqueId=function(a){var d=++ba;return V(a==n?"":a)+d},p.all=mb,p.any=pb,p.detect=Ra,p.findWhere=Ra,p.foldl=Ua,p.foldr=ob,p.include=lb,p.inject=Ua,x(p,function(a,d){p.prototype[d]||(p.prototype[d]=function(){var d=[this.__wrapped__];return Ha.apply(d,
arguments),a.apply(p,d)})}),p.first=Va,p.last=function(a,d,b){if(a){var c=0,f=a.length;if("number"!=typeof d&&d!=n){var e=f;for(d=p.createCallback(d,b);e--&&d(a[e],e,a);)c++}else if(c=d,c==n||b)return a[f-1];return z(a,S(0,f-c))}},p.take=Va,p.head=Va,x(p,function(a,d){p.prototype[d]||(p.prototype[d]=function(d,b){var c=a(this.__wrapped__,d,b);return d==n||b&&"function"!=typeof d?c:new qa(c)})}),p.VERSION="1.3.1",p.prototype.toString=function(){return V(this.__wrapped__)},p.prototype.value=yb,p.prototype.valueOf=
yb,D(["join","pop","shift"],function(a){var d=J[a];p.prototype[a]=function(){return d.apply(this.__wrapped__,arguments)}}),D(["push","reverse","sort","unshift"],function(a){var d=J[a];p.prototype[a]=function(){return d.apply(this.__wrapped__,arguments),this}}),D(["concat","slice","splice"],function(a){var d=J[a];p.prototype[a]=function(){return new qa(d.apply(this.__wrapped__,arguments))}}),p}var l,m=!0,n=null,q=!1,r=[],x=[],ba=0,A={},v=+new Date+"",la=75,K=40,O=/\b__p\+='';/g,ua=/\b(__p\+=)''\+/g,
Ka=/(__e\(.*?\)|\b__t\))\+'';/g,La=/&(?:amp|lt|gt|quot|#39);/g,Ma=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wa=/\w*$/,fa=/<%=([\s\S]+?)%>/g,y=(y=/\bthis\b/)&&y.test(t)&&y,G=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",B=RegExp("^["+G+"]*0+(?=.$)"),va=/($^)/,na=/[&<>"']/g,xa=/['\n\r\t\u2028\u2029\\]/g,C="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),
da="[object Arguments]",ca="[object Array]",ea="[object Boolean]",ga="[object Date]",ya="[object Function]",ma="[object Number]",W="[object Object]",oa="[object RegExp]",ha="[object String]",P={};P[ya]=q;P[da]=P[ca]=P[ea]=P[ga]=P[ma]=P[W]=P[oa]=P[ha]=m;var L={"boolean":q,"function":m,object:m,number:q,string:q,undefined:q},Na={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},X=L[typeof exports]&&exports,Oa=L[typeof module]&&module&&module.exports==X&&module,Q=L[typeof global]&&
global;!Q||Q.global!==Q&&Q.window!==Q||(c=Q);var Y=t();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(c._=Y,define(function(){return Y})):X&&!X.nodeType?Oa?(Oa.exports=Y)._=Y:X._=Y:c._=Y}(this);
(function(){var c=this,g=c.Backbone,h=[],e=h.push,b=h.slice,f=h.splice,a;a="undefined"!==typeof exports?exports:c.Backbone={};a.VERSION="1.0.0";var d=c._;!d&&"undefined"!==typeof require&&(d=require("underscore"));a.$=c.jQuery||c.Zepto||c.ender||c.$;a.noConflict=function(){c.Backbone=g;return this};a.emulateHTTP=!1;a.emulateJSON=!1;var s=a.Events={on:function(a,d,b){if(!u(this,"on",a,[d,b])||!d)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:d,context:b,
ctx:b||this});return this},once:function(a,b,c){if(!u(this,"once",a,[b,c])||!b)return this;var f=this,e=d.once(function(){f.off(a,e);b.apply(this,arguments)});e._callback=b;return this.on(a,e,c)},off:function(a,b,c){var f,e,g,h,r,k,A,s;if(!this._events||!u(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:d.keys(this._events);r=0;for(k=h.length;r<k;r++)if(a=h[r],g=this._events[a]){this._events[a]=f=[];if(b||c){A=0;for(s=g.length;A<s;A++)e=g[A],(b&&b!==e.callback&&b!==
e.callback._callback||c&&c!==e.context)&&f.push(e)}f.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var d=b.call(arguments,1);if(!u(this,"trigger",a,d))return this;var c=this._events[a],f=this._events.all;c&&w(c,d);f&&w(f,arguments);return this},stopListening:function(a,d,b){var c=this._listeners;if(!c)return this;var f=!d&&!b;"object"===typeof d&&(b=this);a&&((c={})[a._listenerId]=a);for(var e in c)c[e].off(d,b,this),f&&delete this._listeners[e];return this}},
k=/\s+/,u=function(a,d,b,c){if(!b)return!0;if("object"===typeof b){for(var f in b)a[d].apply(a,[f,b[f]].concat(c));return!1}if(k.test(b)){b=b.split(k);f=0;for(var e=b.length;f<e;f++)a[d].apply(a,[b[f]].concat(c));return!1}return!0},w=function(a,d){var b,c=-1,f=a.length,e=d[0],g=d[1],h=d[2];switch(d.length){case 0:for(;++c<f;)(b=a[c]).callback.call(b.ctx);break;case 1:for(;++c<f;)(b=a[c]).callback.call(b.ctx,e);break;case 2:for(;++c<f;)(b=a[c]).callback.call(b.ctx,e,g);break;case 3:for(;++c<f;)(b=
a[c]).callback.call(b.ctx,e,g,h);break;default:for(;++c<f;)(b=a[c]).callback.apply(b.ctx,d)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){s[b]=function(b,c,f){var e=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=d.uniqueId("l"));e[g]=b;"object"===typeof c&&(f=this);b[a](c,f,this);return this}});s.bind=s.on;s.unbind=s.off;d.extend(a,s);var z=a.Model=function(a,b){var c,f=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};d.extend(this,d.pick(b,t));b.parse&&
(f=this.parse(f,b)||{});if(c=d.result(this,"defaults"))f=d.defaults({},f,c);this.set(f,b);this.changed={};this.initialize.apply(this,arguments)},t=["url","urlRoot","collection"];d.extend(z.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return d.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=
this.get(a)},set:function(a,b,c){var f,e,g,h,r,k,A;if(null==a)return this;"object"===typeof a?(e=a,c=b):(e={})[a]=b;c||(c={});if(!this._validate(e,c))return!1;g=c.unset;h=c.silent;a=[];r=this._changing;this._changing=!0;r||(this._previousAttributes=d.clone(this.attributes),this.changed={});A=this.attributes;k=this._previousAttributes;this.idAttribute in e&&(this.id=e[this.idAttribute]);for(f in e)b=e[f],d.isEqual(A[f],b)||a.push(f),d.isEqual(k[f],b)?delete this.changed[f]:this.changed[f]=b,g?delete A[f]:
A[f]=b;if(!h){a.length&&(this._pending=!0);b=0;for(f=a.length;b<f;b++)this.trigger("change:"+a[b],this,A[a[b]],c)}if(r)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,
a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,c=!1,f=this._changing?this._previousAttributes:this.attributes,e;for(e in a)if(!d.isEqual(f[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,
a),a))return!1;c&&c(b,d,a);b.trigger("sync",b,d,a)};fa(this,a);return this.sync("read",this,a)},save:function(a,b,c){var f,e=this.attributes;null==a||"object"===typeof a?(f=a,c=b):(f={})[a]=b;if(f&&(!c||!c.wait)&&!this.set(f,c))return!1;c=d.extend({validate:!0},c);if(!this._validate(f,c))return!1;f&&c.wait&&(this.attributes=d.extend({},e,f));void 0===c.parse&&(c.parse=!0);var g=this,h=c.success;c.success=function(a){g.attributes=e;var b=g.parse(a,c);c.wait&&(b=d.extend(f||{},b));if(d.isObject(b)&&
!g.set(b,c))return!1;h&&h(g,a,c);g.trigger("sync",g,a,c)};fa(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=f);a=this.sync(a,this,c);f&&c.wait&&(this.attributes=e);return a},destroy:function(a){a=a?d.clone(a):{};var b=this,c=a.success,f=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&f();c&&c(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;fa(this,a);var e=this.sync("delete",this,a);a.wait||
f();return e},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||wa();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,d){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},d.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=d.extend({},this.attributes,a);var c=this.validationError=
this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,d.extend(b||{},{validationError:c}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){z.prototype[a]=function(){var c=b.call(arguments);c.unshift(this.attributes);return d[a].apply(d,c)}});var l=a.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,
d.extend({silent:!0},b))},m={add:!0,remove:!0,merge:!0},n={add:!0,merge:!1,remove:!1};d.extend(l.prototype,s,{model:z,initialize:function(){},toJSON:function(a){return this.map(function(d){return d.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.defaults(b||{},n))},remove:function(a,b){a=d.isArray(a)?a.slice():[a];b||(b={});var c,f,e,g;c=0;for(f=a.length;c<f;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],e=this.indexOf(g),
this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=d.defaults(b||{},m);b.parse&&(a=this.parse(a,b));d.isArray(a)||(a=a?[a]:[]);var c,g,h,r,k,A=b.at,s=this.comparator&&null==A&&!1!==b.sort,u=d.isString(this.comparator)?this.comparator:null,l=[],n=[],q={};c=0;for(g=a.length;c<g;c++)if(h=this._prepareModel(a[c],b))(r=this.get(h))?(b.remove&&(q[r.cid]=!0),b.merge&&(r.set(h.attributes,b),s&&(!k&&r.hasChanged(u))&&
(k=!0))):b.add&&(l.push(h),h.on("all",this._onModelEvent,this),this._byId[h.cid]=h,null!=h.id&&(this._byId[h.id]=h));if(b.remove){c=0;for(g=this.length;c<g;++c)q[(h=this.models[c]).cid]||n.push(h);n.length&&this.remove(n,b)}l.length&&(s&&(k=!0),this.length+=l.length,null!=A?f.apply(this.models,[A,0].concat(l)):e.apply(this.models,l));k&&this.sort({silent:!0});if(b.silent)return this;c=0;for(g=l.length;c<g;c++)(h=l[c]).trigger("add",h,this,b);k&&this.trigger("sort",this,b);return this},reset:function(a,
b){b||(b={});for(var c=0,f=this.models.length;c<f;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:this.length},b));return a},pop:function(a){var d=this.at(this.length-1);this.remove(d,a);return d},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:0},b));return a},shift:function(a){var d=
this.at(0);this.remove(d,a);return d},slice:function(a,d){return this.models.slice(a,d)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(d){for(var b in a)if(a[b]!==d.get(b))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||
1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var f=d.isFunction(b)?b:function(a){return a.get(b)};return d.sortedIndex(this.models,a,f,c)},pluck:function(a){return d.invoke(this.models,"get",a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":
"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};fa(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,f=b.success;b.success=function(d){b.wait&&c.add(a,b);f&&f(a,d,b)};a.save(null,b);return a},parse:function(a,d){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,d){if(a instanceof z)return a.collection||
(a.collection=this),a;d||(d={});d.collection=this;var b=new this.model(a,d);return!b._validate(a,d)?(this.trigger("invalid",this,a,d),!1):b},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,d,b,c){("add"===a||"remove"===a)&&b!==this||("destroy"===a&&this.remove(d,c),d&&a==="change:"+d.idAttribute&&(delete this._byId[d.previous(d.idAttribute)],null!=d.id&&(this._byId[d.id]=d)),this.trigger.apply(this,arguments))}});
d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){l.prototype[a]=function(){var c=b.call(arguments);c.unshift(this.models);return d[a].apply(d,c)}});d.each(["groupBy","countBy","sortBy"],function(a){l.prototype[a]=function(b,c){var f=d.isFunction(b)?b:function(a){return a.get(b)};
return d[a](this.models,f,c)}});var h=a.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},q=/^(\S+)\s*(.*)$/,r="model collection el id attributes className tagName events".split(" ");d.extend(h.prototype,s,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(d,
b){this.$el&&this.undelegateEvents();this.$el=d instanceof a.$?d:a.$(d);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||(c=this[a[b]]);if(c){var f=b.match(q),e=f[1],f=f[2],c=d.bind(c,this),e=e+(".delegateEvents"+this.cid);if(""===f)this.$el.on(e,c);else this.$el.on(e,f,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+
this.cid);return this},_configure:function(a){this.options&&(a=d.extend({},d.result(this,"options"),a));d.extend(this,d.pick(a,r));this.options=a},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var b=d.extend({},d.result(this,"attributes"));this.id&&(b.id=d.result(this,"id"));this.className&&(b["class"]=d.result(this,"className"));b=a.$("<"+d.result(this,"tagName")+">").attr(b);this.setElement(b,!1)}}});a.sync=function(b,c,f){var e=x[b];d.defaults(f||(f={}),{emulateHTTP:a.emulateHTTP,
emulateJSON:a.emulateJSON});var g={type:e,dataType:"json"};f.url||(g.url=d.result(c,"url")||wa());if(null==f.data&&c&&("create"===b||"update"===b||"patch"===b))g.contentType="application/json",g.data=JSON.stringify(f.attrs||c.toJSON(f));f.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(f.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){g.type="POST";f.emulateJSON&&(g.data._method=e);var h=f.beforeSend;f.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
e);if(h)return h.apply(this,arguments)}}"GET"!==g.type&&!f.emulateJSON&&(g.processData=!1);if("PATCH"===g.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};b=f.xhr=a.ajax(d.extend(g,f));c.trigger("request",c,b,f);return b};var x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var ba=a.Router=function(a){a||(a={});a.routes&&
(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,la=/\*\w+/g,K=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(ba.prototype,s,{initialize:function(){},route:function(b,c,f){d.isRegExp(b)||(b=this._routeToRegExp(b));d.isFunction(c)&&(f=c,c="");f||(f=this[c]);var e=this;a.history.route(b,function(d){d=e._extractParameters(b,d);f&&f.apply(e,d);e.trigger.apply(e,["route:"+c].concat(d));e.trigger("route",c,d);a.history.trigger("route",e,c,d)});return this},
navigate:function(d,b){a.history.navigate(d,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(K,"\\$&").replace(A,"(?:$1)?").replace(v,function(a,d){return d?a:"([^/]+)"}).replace(la,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a){return a?decodeURIComponent(a):null})}});
var O=a.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},ua=/^[#\/]|\s+$/g,Ka=/^\/+|\/+$/g,La=/msie [\w.]+/,Ma=/\/$/;O.started=!1;d.extend(O.prototype,s,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,d){if(null==a)if(this._hasPushState||!this._wantsHashChange||d){a=this.location.pathname;var b=this.root.replace(Ma,"");a.indexOf(b)||
(a=a.substr(b.length))}else a=this.getHash();return a.replace(ua,"")},start:function(b){if(O.started)throw Error("Backbone.history has already been started");O.started=!0;this.options=d.extend({},{root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);b=this.getFragment();var c=document.documentMode,c=La.exec(navigator.userAgent.toLowerCase())&&
(!c||7>=c);this.root=("/"+this.root+"/").replace(Ka,"/");c&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b));if(this._hasPushState)a.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!c)a.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=b;b=this.location;c=b.pathname.replace(/[^\/]$/,
"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!c)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&c&&b.hash)&&(this.fragment=this.getHash().replace(ua,""),this.history.replaceState({},document.title,this.root+this.fragment+b.search));if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",
this.checkUrl);clearInterval(this._checkUrlInterval);O.started=!1},route:function(a,d){this.handlers.unshift({route:a,callback:d})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},
navigate:function(a,d){if(!O.started)return!1;if(!d||!0===d)d={trigger:d};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var b=this.root+a;if(this._hasPushState)this.history[d.replace?"replaceState":"pushState"]({},document.title,b);else if(this._wantsHashChange)this._updateHash(this.location,a,d.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(d.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,d.replace));else return this.location.assign(b);
d.trigger&&this.loadUrl(a)}},_updateHash:function(a,d,b){b?(b=a.href.replace(/(javascript:|#).*$/,""),a.replace(b+"#"+d)):a.hash="#"+d}});a.history=new O;z.extend=l.extend=ba.extend=h.extend=O.extend=function(a,b){var c=this,f;f=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};d.extend(f,c,b);var e=function(){this.constructor=f};e.prototype=c.prototype;f.prototype=new e;a&&d.extend(f.prototype,a);f.__super__=c.prototype;return f};var wa=function(){throw Error('A "url" property or function must be specified');
},fa=function(a,d){var b=d.error;d.error=function(c){b&&b(a,c,d);a.trigger("error",a,c,d)}}}).call(this);
Backbone.ChildViewContainer=function(c,g){var h=function(c){this._views={};this._indexByModel={};this._indexByCollection={};this._indexByCustom={};this._updateLength();this._addInitialViews(c)};g.extend(h.prototype,{add:function(c,b){var f=c.cid;this._views[f]=c;c.model&&(this._indexByModel[c.model.cid]=f);c.collection&&(this._indexByCollection[c.collection.cid]=f);b&&(this._indexByCustom[b]=f);this._updateLength()},findByModel:function(c){return this.findByCid(this._indexByModel[c.cid])},findByCollection:function(c){return this.findByCid(this._indexByCollection[c.cid])},
findByCustom:function(c){return this.findByCid(this._indexByCustom[c])},findByIndex:function(c){return g.values(this._views)[c]},findByCid:function(c){return this._views[c]},remove:function(c){var b=c.cid;c.model&&delete this._indexByModel[c.model.cid];c.collection&&delete this._indexByCollection[c.collection.cid];var f,a;for(a in this._indexByCustom)if(this._indexByCustom.hasOwnProperty(a)&&this._indexByCustom[a]===b){f=a;break}f&&delete this._indexByCustom[f];delete this._views[b];this._updateLength()},
call:function(c,b){b=Array.prototype.slice.call(arguments,1);this.apply(c,b)},apply:function(c,b){b=b||[];g.each(this._views,function(f){g.isFunction(f[c])&&f[c].apply(f,b)})},_updateLength:function(){this.length=g.size(this._views)},_addInitialViews:function(c){if(c){var b,f,a=c.length;for(f=0;a>f;f++)b=c[f],this.add(b)}}});return g.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(c){h.prototype[c]=function(){var b=[g.values(this._views)].concat(g.toArray(arguments));return g[c].apply(g,b)}}),h}(Backbone,_);
Backbone.Wreqr=function(c,g,h){g={};return g.Handlers=function(c,b){var f=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&this.initialize(a)};return f.extend=c.Model.extend,b.extend(f.prototype,c.Events,{setHandlers:function(a){b.each(a,function(a,c){var f=null;b.isObject(a)&&!b.isFunction(a)&&(f=a.context,a=a.callback);this.setHandler(c,a,f)},this)},setHandler:function(a,d,b){this._wreqrHandlers[a]={callback:d,context:b};this.trigger("handler:add",a,d,b)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var d=this._wreqrHandlers[a];if(!d)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return d.callback.apply(d.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),f}(c,h),g.CommandStorage=function(){var e=function(b){this.options=b;this._commands={};h.isFunction(this.initialize)&&this.initialize(b)};return h.extend(e.prototype,c.Events,{getCommands:function(b){var c=
this._commands[b];return c||(c={command:b,instances:[]},this._commands[b]=c),c},addCommand:function(b,c){this.getCommands(b).instances.push(c)},clearCommands:function(b){this.getCommands(b).instances=[]}}),e}(),g.Commands=function(c){return c.Handlers.extend({storageType:c.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var f=Array.prototype.slice.call(arguments);c.Handlers.prototype.constructor.apply(this,
f)},execute:function(b,c){b=arguments[0];c=Array.prototype.slice.call(arguments,1);this.hasHandler(b)?this.getHandler(b).apply(this,c):this.storage.addCommand(b,c)},_executeCommands:function(b,c,a){var d=this.storage.getCommands(b);h.each(d.instances,function(d){c.apply(a,d)});this.storage.clearCommands(b)},_initializeStorage:function(b){b=b.storageType||this.storageType;this.storage=h.isFunction(b)?new b:b}})}(g),g.RequestResponse=function(c){return c.Handlers.extend({request:function(){var b=arguments[0],
c=Array.prototype.slice.call(arguments,1);return this.getHandler(b).apply(this,c)}})}(g),g.EventAggregator=function(c,b){var f=function(){};return f.extend=c.Model.extend,b.extend(f.prototype,c.Events),f}(c,h),g}(Backbone,Backbone.Marionette,_);
var Marionette=function(c,g,h){function e(a,d){var b=Error(a);throw b.name=d||"Error",b;}var b={};g.Marionette=b;b.$=g.$;var f=Array.prototype.slice;return b.extend=g.Model.extend,b.getOption=function(a,d){if(a&&d)return a.options&&d in a.options&&void 0!==a.options[d]?a.options[d]:a[d]},b.triggerMethod=function(){function a(a,d,b){return b.toUpperCase()}var d=/(^|:)(\w)/gi;return function(b){var c=this["on"+b.replace(d,a)];return this.trigger.apply(this,arguments),h.isFunction(c)?c.apply(this,h.tail(arguments)):
void 0}}(),b.MonitorDOMRefresh=function(){function a(a){a._isShown&&a._isRendered&&h.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(d){d.listenTo(d,"show",function(){d._isShown=!0;a(d)});d.listenTo(d,"render",function(){d._isRendered=!0;a(d)})}}(),function(a){function d(a,d,b,c){c=c.split(/\s+/);h.each(c,function(c){var f=a[c];f||e("Method '"+c+"' was configured as an event handler, but does not exist.");a.listenTo(d,b,f,a)})}function b(a,d,c,f){a.listenTo(d,c,f,a)}function c(a,
d,b,f){f=f.split(/\s+/);h.each(f,function(c){a.stopListening(d,b,a[c],a)})}function f(a,d,b,c){a.stopListening(d,b,c,a)}function g(a,d,b,c,f){d&&b&&(h.isFunction(b)&&(b=b.call(a)),h.each(b,function(b,e){h.isFunction(b)?c(a,d,e,b):f(a,d,e,b)}))}a.bindEntityEvents=function(a,c,f){g(a,c,f,b,d)};a.unbindEntityEvents=function(a,b,d){g(a,b,d,f,c)}}(b),b.Callbacks=function(){this._deferred=b.$.Deferred();this._callbacks=[]},h.extend(b.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b});
this._deferred.done(function(c,f){b&&(c=b);a.call(c,f)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=b.$.Deferred();this._callbacks=[];h.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),b.Controller=function(a){this.triggerMethod=b.triggerMethod;this.options=a||{};h.isFunction(this.initialize)&&this.initialize(this.options)},b.Controller.extend=b.extend,h.extend(b.Controller.prototype,g.Events,{close:function(){this.stopListening();this.triggerMethod("close");
this.unbind()}}),b.Region=function(a){if(this.options=a||{},this.el=b.getOption(this,"el"),!this.el){var d=Error("An 'el' must be specified for a region.");throw d.name="NoElError",d;}this.initialize&&(d=Array.prototype.slice.apply(arguments),this.initialize.apply(this,d))},h.extend(b.Region,{buildRegion:function(a,b){var c="string"==typeof a,f="string"==typeof a.selector,e=void 0===a.regionType,g="function"==typeof a;if(!g&&!c&&!f)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");
var z,t;c&&(z=a);a.selector&&(z=a.selector);g&&(t=a);!g&&e&&(t=b);a.regionType&&(t=a.regionType);c=new t({el:z});return a.parentEl&&(c.getEl=function(b){var d=a.parentEl;return h.isFunction(d)&&(d=d()),d.find(b)}),c}}),h.extend(b.Region.prototype,g.Events,{show:function(a){this.ensureEl();var d=a.isClosed||h.isUndefined(a.$el),c=a!==this.currentView;c&&this.close();a.render();(c||d)&&this.open(a);this.currentView=a;b.triggerMethod.call(this,"show",a);b.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&
0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return b.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),b.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}}),b.Region.extend=b.extend,b.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions=
{};a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return h.each(a,function(a,c){"string"==typeof a&&(a={selector:a});a.selector&&(a=h.defaults({},a,b));var f=this.addRegion(c,a);d[c]=f},this),d},addRegion:function(b,d){var c,f=h.isObject(d),e=h.isString(d),g=!!d.selector;return c=e||f&&g?a.Region.buildRegion(d,a.Region):h.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,c),this.triggerMethod("region:add",b,c),c},get:function(a){return this._regions[a]},
removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){h.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){h.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",
a,b)},_setLength:function(){this.length=h.size(this._regions)}});return h.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){b.prototype[a]=function(){var b=[h.values(this._regions)].concat(h.toArray(arguments));return h[a].apply(h,b)}}),b}(b),b.TemplateCache=function(a){this.templateId=a},h.extend(b.TemplateCache,{templateCaches:{},get:function(a){var d=this.templateCaches[a];
return d||(d=new b.TemplateCache(a),this.templateCaches[a]=d),d.load()},clear:function(){var a,b=f.call(arguments),c=b.length;if(0<c)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),h.extend(b.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var d=b.$(a).html();return d&&0!==d.length||
e("Could not find template: '"+a+"'","NoTemplateError"),d},compileTemplate:function(a){return h.template(a)}}),b.Renderer={render:function(a,d){if(!a){var c=Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c;}return c="function"==typeof a?a:b.TemplateCache.get(a),c(d)}},b.View=g.View.extend({constructor:function(){h.bindAll(this,"render");var a=Array.prototype.slice.apply(arguments);g.View.prototype.constructor.apply(this,a);b.MonitorDOMRefresh(this);
this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:b.triggerMethod,getTemplate:function(){return b.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var b=this.templateHelpers;return h.isFunction(b)&&(b=b.call(this)),h.extend(a,b)},configureTriggers:function(){if(this.triggers){var a={},b=h.result(this,"triggers");return h.each(b,function(b,d){a[d]=function(a){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();this.triggerMethod(b,{view:this,
model:this.model,collection:this.collection})}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a);b.bindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.bindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;h.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();h.extend(b,a,c);g.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);
g.View.prototype.undelegateEvents.apply(this,a);b.unbindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.unbindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=h.result(this,"_uiBindings");
this.ui={};h.each(h.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&(h.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),b.ItemView=b.View.extend({serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=
this.serializeData(),a=this.mixinTemplateHelpers(a),d=this.getTemplate(),a=b.Renderer.render(d,a);return this.$el.html(a),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),b.View.prototype.close.apply(this,f.call(arguments)),this.triggerMethod("item:closed"))}}),b.CollectionView=b.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage();
b.View.prototype.constructor.apply(this,f.call(arguments));this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){b.triggerMethod.call(a,
"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView()},
showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=b.getOption(this,"emptyView");if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var d=new g.Model;this.addItemView(d,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var a=b.getOption(this,"itemView");return a||e("An `itemView` must be specified","NoItemViewError"),
a},addItemView:function(a,d,c){var f=b.getOption(this,"itemViewOptions");h.isFunction(f)&&(f=f.call(this,a,c));a=this.buildItemView(a,d,f);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,c);this._isShown&&b.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var d=b.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=f.call(arguments);c[0]=d+
":"+c[0];c.splice(1,0,a);b.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render();this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=h.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==
this.collection.length||this.showEmptyView()},appendHtml:function(a,b){a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new g.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),b.View.prototype.close.apply(this,f.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}}),b.CompositeView=b.CollectionView.extend({_initialEvents:function(){this.collection&&
(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var a=b.getOption(this,"itemView")||this.constructor;return a||e("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();
this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(b.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a),d=this.getTemplate();return b.Renderer.render(d,
a)},appendHtml:function(a,b){this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;a.itemViewContainer?(b=h.result(a,"itemViewContainer"),b=a.$(b),0>=b.length&&e("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b,b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),b.Layout=b.ItemView.extend({regionType:b.Region,
constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);b.ItemView.call(this,a)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return b.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);b.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c=
{};return c[a]=b,this.addRegions(c)[a]},addRegions:function(a){return this.regions=h.extend(this.regions||{},a),this._buildRegions(a)},removeRegion:function(a){return this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this;return this.regionManager.addRegions(a,{parentEl:function(){return b.$el}})},_initializeRegions:function(a){this._initRegionManager();a=h.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();
this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new b.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}}),b.AppRouter=g.Router.extend({constructor:function(a){if(g.Router.prototype.constructor.apply(this,f.call(arguments)),this.options=a,this.appRoutes){var d=b.getOption(this,
"controller");this.processAppRoutes(d,this.appRoutes)}},processAppRoutes:function(a,b){var c=h.keys(b).reverse();h.each(c,function(c){var f=b[c],e=a[f];if(!e)throw Error("Method '"+f+"' was not found on the controller");this.route(c,f,h.bind(e,a))},this)}}),b.Application=function(a){this._initRegionManager();this._initCallbacks=new b.Callbacks;this.vent=new g.Wreqr.EventAggregator;this.commands=new g.Wreqr.Commands;this.reqres=new g.Wreqr.RequestResponse;this.submodules={};h.extend(this,a);this.triggerMethod=
b.triggerMethod},h.extend(b.Application.prototype,g.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},
addRegions:function(a){return this._regionManager.addRegions(a)},removeRegion:function(a){this._regionManager.removeRegion(a)},module:function(){var a=f.call(arguments);return a.unshift(this),b.Module.create.apply(b.Module,a)},_initRegionManager:function(){this._regionManager=new b.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),b.Application.extend=b.extend,b.Module=function(a,
d){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=d;this.startWithParent=!0;this.triggerMethod=b.triggerMethod},h.extend(b.Module.prototype,g.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(h.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=
!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,b.triggerMethod.call(this,"before:stop"),h.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),b.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var c=h.flatten([this,this.app,g,b,b.$,h,d]);a.apply(this,c)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=
new b.Callbacks;this._finalizerCallbacks=new b.Callbacks}}),h.extend(b.Module,{create:function(a,b,c){var e=a,g=f.call(arguments);g.splice(0,3);b=b.split(".");var w=[];return w[b.length-1]=c,h.each(b,function(b,d){var c=e;e=this._getModule(c,b,a);this._addModuleDefinition(c,e,w[d],g)},this),e},_getModule:function(a,d,c){var f=a[d];return f||(f=new b.Module(d,c),a[d]=f,a.submodules[d]=f),f},_addModuleDefinition:function(a,b,c,f){var e,g;h.isFunction(c)?(e=c,g=!0):h.isObject(c)?(e=c.define,g=c.startWithParent):
g=!0;e&&b.addDefinition(e,f);b.startWithParent=b.startWithParent&&g;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),b}(this,Backbone,_);
(function(){Backbone.InfiniScroll=function(c,g){function h(b){b={};b[e.options.pageSizeParam]=e.options.pageSize;e.options.includePage&&(b.p=a+1);return b}g=g||{};var e={},b,f,a,d,s=0;d=c.length||25;e.collection=c;e.options=_.defaults(g,{success:function(){},error:function(){},onFetch:function(){},target:$(window),extraParams:{},pageSizeParam:"page_size",pageSize:d,scrollOffset:100,remove:!1,strict:!1,includePage:!1});e.destroy=function(){b.off("scroll",e.watchScroll)};e.enableFetch=function(){f=
!0};e.disableFetch=function(){f=!1};e.onFetch=function(){e.options.onFetch()};e.fetchSuccess=function(b,d){e.options.strict&&b.length>=(a+1)*e.options.pageSize||!e.options.strict&&0<d.length?(e.enableFetch(),a+=1):e.disableFetch();e.options.success(b,d)};e.fetchError=function(a,b){e.enableFetch();e.options.error(a,b)};e.watchScroll=function(a){a=b.scrollTop()+b.height();var d=b.get(0).scrollHeight;d||(d=$(document).height());if(a>=d-e.options.scrollOffset&&f&&s<=a){d=e.collection.last();if(!d)return;
e.onFetch();e.disableFetch();e.collection.fetch({success:e.fetchSuccess,error:e.fetchError,remove:e.options.remove,data:$.extend(h(d),e.options.extraParams)})}s=a};b=$(e.options.target);f=!0;a=1;b.on("scroll",e.watchScroll);return e}})();(function(){window.DEBUG=!1}).call(this);
(function(){var c;window.Yapp=new Marionette.Application;window.Yapp.API_BASE_URL="/api";window.Yapp.API_BASE_URL="";window.Yapp.YA_MAP_URL="http://api-maps.yandex.ru/2.0-stable/?load=package.full&lang=ru-RU&wizard=constructor";window.Yapp.DEBUG=void 0!==window.DEBUG?window.DEBUG:!0;jQuery(document).ajaxSend(function(c,h,e){var b;c=function(b){var a,d,c,e,g,h;a=null;if(document.cookie&&""!==document.cookie){d=document.cookie.split(";");e=function(d){d=jQuery.trim(d);if(d.substring(0,b.length+1)===
b+"=")return a=decodeURIComponent(d.substring(b.length+1))};g=0;for(h=d.length;g<h;g++)c=d[g],e(c)}return a};b=function(b){var a,d;a=document.location.host;d=document.location.protocol;a="//"+a;d+=a;return b===d||b.slice(0,d.length+1)===d+"/"||b===a||b.slice(0,a.length+1)===a+"/"||!/^(\/\/|http:|https:).*/.test(b)};if(!/^(GET|HEAD|OPTIONS|TRACE)$/.test(e.type.toUpperCase())&&b(e.url))return h.setRequestHeader("X-CSRFToken",c("csrftoken"))});c="undefined"===typeof window.console?{}:window.console;
if(!window.Yapp.DEBUG||"undefined"===typeof c.log)c.log=c.error=c.info=c.debug=c.warn=c.trace=c.dir=c.dirxml=c.group=c.groupEnd=c.time=c.timeEnd=c.assert=c.profile=function(){}}).call(this);this.Templates=this.Templates||{};this.Templates.AuthPopupView=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div class="p-top">\n  <h3>\u0412\u0445\u043e\u0434</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <div class="social-auth">\x3c!-- sa- social auth --\x3e\n    <a href="/login/vkontakte-oauth2" class="sa-vk"></a>\n    <a class="sa-fb" style="opacity: 0.2"></a>\n    <a class="sa-tw" style="opacity: 0.2"></a>\n    <a class="sa-ok" style="opacity: 0.2"></a>\n    <a class="sa-mm" style="opacity: 0.2"></a>\n    <a class="sa-ya" style="opacity: 0.2"></a>\n  </div>\n</div>\n'});
this.Templates.BigPhoto=Handlebars.template(function(c,g,h,e,b){function f(a,b){return'\n        <a href="#" class="a-remove-comment" data-toggle="tooltip" title="\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n        '}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var a,d=this.escapeExpression,s=this,k=h.helperMissing;c='<div class="bp-photo" data-photo-id="';(e=h.id)?e=e.call(g,{hash:{},data:b}):(e=g.id,e="function"===
typeof e?e.apply(g):e);c+=d(e)+'">\n  <img src="';(e=h.thumbnail560)?e=e.call(g,{hash:{},data:b}):(e=g.thumbnail560,e="function"===typeof e?e.apply(g):e);c+=d(e)+'" alt="" class="main-photo">\n\n  <div class="bp-add-like">\n    <img src="/media/'+d((e=(e=g.author,null==e||!1===e?e:e.avatar),"function"===typeof e?e.apply(g):e))+'" alt="" width="22" height="22" class="avatar">\n    <span class="bp-name">'+d((e=(e=g.author,null==e||!1===e?e:e.first_name),"function"===typeof e?e.apply(g):e))+" "+d((e=
(e=g.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(g):e))+'</span>\n\n    <a href="#" class="a-like ';a={hash:{},inverse:s.noop,fn:s.program(1,function(a,b){return"marked"},b),data:b};if((a=(e=h.ifBelong,e?e.call(g,g.user,g.likeusers,a):k.call(g,"ifBelong",g.user,g.likeusers,a)))||0===a)c+=a;c+='" data-photo-id="';(a=h.id)?a=a.call(g,{hash:{},data:b}):(a=g.id,a="function"===typeof a?a.apply(g):a);c+=d(a)+'"></a>\n    <span class="count-like">';(a=h.likes_count)?a=a.call(g,{hash:{},
data:b}):(a=g.likes_count,a="function"===typeof a?a.apply(g):a);c+=d(a)+'</span>\n  </div>\n</div>\n\n<div class="bp-comments">\n  <div class="toggle-block a-toggle-up">\n    <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 <span>&darr;</span></a>\n\n    ';if((a=h.each.call(g,g.comments,{hash:{},inverse:s.noop,fn:s.programWithDepth(3,function(a,b,c){var e,g,m;e='\n    <div class="item-comment" data-comment-id="';(g=h.id)?g=g.call(a,
{hash:{},data:b}):(g=a.id,g="function"===typeof g?g.apply(a):g);e+=d(g)+'">\n      <img src="/media/'+d((g=(g=a.author,null==g||!1===g?g:g.avatar),"function"===typeof g?g.apply(a):g))+'" alt="" width="29" height="30" class="avatar">\n\n      <div class="comment-body">\n        <div class="comment-author">'+d((g=(g=a.author,null==g||!1===g?g:g.first_name),"function"===typeof g?g.apply(a):g))+" "+d((g=(g=a.author,null==g||!1===g?g:g.last_name),"function"===typeof g?g.apply(a):g))+"</div>\n        <p>";
(m=h.txt)?m=m.call(a,{hash:{},data:b}):(m=a.txt,m="function"===typeof m?m.apply(a):m);e+=d(m)+'</p>\n        <div class="comment-date">';(m=h.created)?m=m.call(a,{hash:{},data:b}):(m=a.created,m="function"===typeof m?m.apply(a):m);e+=d(m)+'</div>\n      </div>\n\n      <div class="action">\n        <a href="#" class="a-complaint-comment" data-toggle="tooltip" title="\u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n        ';
b={hash:{},inverse:s.noop,fn:s.program(4,f,b),data:b};if((m=(g=h.ifEquals,g?g.call(a,(g=a.author,null==g||!1===g?g:g.id),(g=c.user,null==g||!1===g?g:g.id),b):k.call(a,"ifEquals",(g=a.author,null==g||!1===g?g:g.id),(g=c.user,null==g||!1===g?g:g.id),b)))||0===m)e+=m;return e+"\n      </div>\n    </div>\n    "},b,g),data:b}))||0===a)c+=a;c+='\n\n    \x3c!-- hidden comments will be here --\x3e\n    <div class="hidden-content"></div>\n\n    ';if((a=h["if"].call(g,(e=g.user,null==e||!1===e?e:e.authorized),
{hash:{},inverse:s.noop,fn:s.program(6,function(a,b){var c,f;c=""+('\n    <div class="add-comment">\n      <form action="#" id="commentForm">\n        <div class="ac-block">\n          <img src="'+d((f=(f=a.user,null==f||!1===f?f:f.avatar),"function"===typeof f?f.apply(a):f))+'" alt="" width="29" height="30" class="avatar">\n          <div class="ac-body">\n            <div class="toggle-area">\n              <textarea data-photo-id="');(f=h.id)?f=f.call(a,{hash:{},data:b}):(f=a.id,f="function"===
typeof f?f.apply(a):f);return c+=d(f)+'" rows="3" cols="40" placeholder="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"></textarea>\n              <input type="submit" value="">\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\x3c!-- end .add-comment --\x3e\n    '},b),data:b}))||0===a)c+=a;return c+"\n\n  </div>\x3c!-- end .toggle-block a-toggle-up --\x3e\n</div>\x3c!-- end .bp-comments --\x3e\n"});
this.Templates.FooterView=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<footer id="footer">\n  <div class="f-body">\n    <a href="#" class="a-toggle" title="\u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c">&nbsp;</a>\n\n    <ul>\n      <li><a href="#" class="aboutProject nonav">\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435</a></li>\n      <li><a href="#" class="contacts nonav">\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b</a></li>\n      <li><a href="#">\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435</a></li>\n    </ul>\n\n    <div class="apps">\n      <a href="#" class="app-android">&nbsp;</a>\n      <a href="#" class="app-store">&nbsp;</a>\n    </div>\n\n    <div class="share">\n      <div id="vk_like"></div>\n      <div class="fb-like" data-href="http://yasenput.ru" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n    </div>\n\n    <div class="f-social">\n      <a href="http://vk.com/yasenput" target="_blank" class="a-vk">&nbsp;</a>\n      <a href="http://www.facebook.com/yasenput" target="_blank" class="a-fb">&nbsp;</a>\n    </div>\n  </div>\n</footer>\n'});
this.Templates.HeaderView=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var f,a=this.escapeExpression;c='<div class="wrap">\n  <div class="logo">\u044f\u0441\u0435\u043d \u043f\u0443\u0442\u044c</div>\n\n  <div class="head-search">\n    <div class="search">\n      <form action="#" id="multisearchForm">\n        <input type="submit" value="\u041d\u0430\u0439\u0442\u0438">\n\n        <div class="label-fields">\n          ';if((e=h["if"].call(g,
(f=g.location,null==f||!1===f?f:f.country),{hash:{},inverse:this.noop,fn:this.program(1,function(b,c){var f,e;return f=""+('\n          <div class="label label-place">\n            '+a((e=(e=b.location,null==e||!1===e?e:e.country),"function"===typeof e?e.apply(b):e))+'\n            <button class="remove-label"></button>\n          </div>\n          ')},b),data:b}))||0===e)c+=e;c+="\n\n          ";if((e=h["if"].call(g,(f=g.location,null==f||!1===f?f:f.region),{hash:{},inverse:this.noop,fn:this.program(3,
function(b,c){var f,e;return f=""+('\n          <div class="label label-place">\n            '+a((e=(e=b.location,null==e||!1===e?e:e.region),"function"===typeof e?e.apply(b):e))+'\n            <button class="remove-label"></button>\n          </div>\n          ')},b),data:b}))||0===e)c+=e;c+="\n\n          ";if((e=h["if"].call(g,(f=g.location,null==f||!1===f?f:f.city),{hash:{},inverse:this.noop,fn:this.program(5,function(b,c){var f,e;return f=""+('\n          <div class="label label-place">\n            '+
a((e=(e=b.location,null==e||!1===e?e:e.city),"function"===typeof e?e.apply(b):e))+'\n            <button class="remove-label"></button>\n          </div>\n          ')},b),data:b}))||0===e)c+=e;c+='\n          <div class="label label-add">\n            \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c\n            <span>+</span>\n          </div>\n\n          <span class="text-field"><input type="text"></span>\n        </div>\n        <button type="button" class="clear-input"></button>\n      </form>\n\n      <div class="drop-search" style="display:none;"></div>\n    </div>\n  </div>\n\n  <div class="head-nav">\n    <div>\n      <ul>\n        <li class="head-nav-current-item">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</li>\n        <li><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n        <li><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n        <li><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n        <li><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="add-block-head">\n    <i class="ico-add"></i>\n\n    <div>\n      <div class="drop-add-head">\n        <a href="/point/add" class="nonav" data-target="p-add-place">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</a>\n        \x3c!--<a href="/event/add" data-target="p-add-event">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435</a>--\x3e\n      </div>\n    </div>\n  </div>\n\n  ';
if((e=h["if"].call(g,g.authorized,{hash:{},inverse:this.program(9,function(a,b){return'\n    <div class="auth">\n      <img src="/static/images/guest.png" alt="" class="avatar" width="29" height="30">\n      <div class="user-body">\n        <span href="#" class="a-login">\u0412\u0445\u043e\u0434</span>\n      </div>\n    </div>\n  '},b),fn:this.program(7,function(b,c){var f,e;f='\n    <div class="auth user">\n      <img src="';(e=h.avatar)?e=e.call(b,{hash:{},data:c}):(e=b.avatar,e="function"===typeof e?
e.apply(b):e);f+=a(e)+'" alt="" class="avatar" width="29" height="30">\n      <div class="user-body">\n        <div class="user-name">';(e=h.first_name)?e=e.call(b,{hash:{},data:c}):(e=b.first_name,e="function"===typeof e?e.apply(b):e);f+=a(e)+" ";(e=h.last_name)?e=e.call(b,{hash:{},data:c}):(e=b.last_name,e="function"===typeof e?e.apply(b):e);f+=a(e)+'<div class="drop-logout"><a href="/logout/" class="a-logout">\u0412\u044b\u0445\u043e\u0434</a></div></div>\n        <div class="user-likes">\n          <span class="ico ico-like-small"></span>\n          ';
(e=h.count_liked_objects)?e=e.call(b,{hash:{},data:c}):(e=b.count_liked_objects,e="function"===typeof e?e.apply(b):e);f+=a(e)+'\n          <span class="ico ico-comment-small"></span>\n          ';(e=h.count_commented_objects)?e=e.call(b,{hash:{},data:c}):(e=b.count_commented_objects,e="function"===typeof e?e.apply(b):e);return f+=a(e)+"\n        </div>\n      </div>\n    </div>\n  "},b),data:b}))||0===e)c+=e;return c+"\n</div>\n\n"});
this.Templates.LabelTemplate=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var f=this.escapeExpression;c='<div class="label label-';(e=h.type)?e=e.call(g,{hash:{},data:b}):(e=g.type,e="function"===typeof e?e.apply(g):e);c+=f(e)+'" data-id="';(e=h.id)?e=e.call(g,{hash:{},data:b}):(e=g.id,e="function"===typeof e?e.apply(g):e);c+=f(e)+'" data-type="';(e=h.type)?e=e.call(g,{hash:{},data:b}):(e=g.type,e="function"===typeof e?e.apply(g):e);c+=f(e)+
'">\n  ';(e=h.name)?e=e.call(g,{hash:{},data:b}):(e=g.name,e="function"===typeof e?e.apply(g):e);return c+=f(e)+'\n  <button class="remove-label"></button>\n</div>\n'});this.Templates.MapView=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div id="mainmap" style="width: 100%; height: 477px;"></div>\n\n<div class="m-ico-group"></div>\n\n<div class="toggle-bottom">\n  <a href="#" class="a-toggle">\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n</div>\n'});
this.Templates.MultisearchDropdown=Handlebars.template(function(c,g,h,e,b){function f(b,d){var c,f;c='\n    <li class="item-label" data-name="';(f=h.name)?f=f.call(b,{hash:{},data:d}):(f=b.name,f=typeof f===t?f.apply(b):f);c+=z(f)+'" data-id="';(f=h.id)?f=f.call(b,{hash:{},data:d}):(f=b.id,f=typeof f===t?f.apply(b):f);c+=z(f)+'" data-type="name">\n      ';if((f=h["if"].call(b,b.address,{hash:{},inverse:l.program(10,s,d),fn:l.program(7,a,d),data:d}))||0===f)c+=f;return c+"\n    </li>\n    "}function a(a,
b){var c,f;c='\n        <a class="nonav" href="/point/';(f=h.id)?f=f.call(a,{hash:{},data:b}):(f=a.id,f=typeof f===t?f.apply(a):f);c+=z(f)+'">';(f=h.name)?f=f.call(a,{hash:{},data:b}):(f=a.name,f=typeof f===t?f.apply(a):f);c+=z(f)+" <i>";if((f=h["if"].call(a,a.address,{hash:{},inverse:l.noop,fn:l.program(8,d,b),data:b}))||0===f)c+=f;return c+"</i></a>\n      "}function d(a,b){var c,d;d={hash:{},data:b};return z((c=h.splitAddr,c?c.call(a,a.address,",",d):w.call(a,"splitAddr",a.address,",",d)))}function s(a,
b){var c,d;c='\n        <a class="nonav" href="/set/';(d=h.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===t?d.apply(a):d);c+=z(d)+'">';(d=h.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===t?d.apply(a):d);return c+=z(d)+"</a>\n      "}function k(a,b){var d,c;d='\n      <li class="item-label" data-name="';(c=h.name)?c=c.call(a,{hash:{},data:b}):(c=a.name,c=typeof c===t?c.apply(a):c);d+=z(c)+'" data-id="';(c=h.id)?c=c.call(a,{hash:{},data:b}):(c=a.id,c=typeof c===t?c.apply(a):c);d+=
z(c)+'" data-type="tags"><a href="#">';(c=h.name)?c=c.call(a,{hash:{},data:b}):(c=a.name,c=typeof c===t?c.apply(a):c);return d+=z(c)+"</a></li>\n    "}function u(a,b){var c,d;c='\n    <li class="item-label" data-name="';(d=h.first_name)?d=d.call(a,{hash:{},data:b}):(d=a.first_name,d=typeof d===t?d.apply(a):d);c+=z(d)+" ";(d=h.last_name)?d=d.call(a,{hash:{},data:b}):(d=a.last_name,d=typeof d===t?d.apply(a):d);c+=z(d)+'" data-id="';(d=h.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===t?d.apply(a):
d);c+=z(d)+'" data-type="user">\n      <a href="#">';(d=h.first_name)?d=d.call(a,{hash:{},data:b}):(d=a.first_name,d=typeof d===t?d.apply(a):d);c+=z(d)+" ";(d=h.last_name)?d=d.call(a,{hash:{},data:b}):(d=a.last_name,d=typeof d===t?d.apply(a):d);return c+=z(d)+"</a>\n    </li>\n    "}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var w=h.helperMissing,z=this.escapeExpression,t="function",l=this;c='<button type="button"  class="toggle-panel"></button>\n\n<div class="inner-wrap">\n\x3c!--\n  <ul class="item item-place">\n    <li class="item-title">\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f <sup>15</sup></li>\n    ';
if((e=h.each.call(g,g.points,{hash:{},inverse:l.noop,fn:l.program(1,function(a,b){return"\n    "},b),data:b}))||0===e)c+=e;c+="\n  </ul>\n--\x3e\n\n";if((e=h["if"].call(g,g.empty,{hash:{},inverse:l.noop,fn:l.program(3,function(a,b){return'\n  <ul class="item">\n    <li class="drop-not-found">\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e</li>\n  </ul>\n'},b),data:b}))||0===e)c+=e;c+="\n\n";if((e=h["if"].call(g,g.points,{hash:{},inverse:l.noop,fn:l.program(5,
function(a,b){var d,c;d=""+('\n  <ul class="item item-name">\n    <li class="item-title">\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 <sup>'+z((c=(c=a.points,null==c||!1===c?c:c.length),typeof c===t?c.apply(a):c))+"</sup></li>\n    ");if((c=h.each.call(a,a.points,{hash:{},inverse:l.noop,fn:l.program(6,f,b),data:b}))||0===c)d+=c;return d+"\n  </ul>\n"},b),data:b}))||0===e)c+=e;c+="\n\n";if((e=h["if"].call(g,g.tags,{hash:{},inverse:l.noop,fn:l.program(12,function(a,b){var d,c;d=""+('\n  <ul class="item item-labels">\n    <li class="item-title">\u041c\u0435\u0442\u043a\u0438 <sup>'+
z((c=(c=a.tags,null==c||!1===c?c:c.length),typeof c===t?c.apply(a):c))+"</sup></li>\n    ");if((c=h.each.call(a,a.tags,{hash:{},inverse:l.noop,fn:l.program(13,k,b),data:b}))||0===c)d+=c;return d+"\n  </ul>\n"},b),data:b}))||0===e)c+=e;c+="\n\n";if((e=h["if"].call(g,g.users,{hash:{},inverse:l.noop,fn:l.program(15,function(a,b){var c,d;c=""+('\n  <ul class="item item-users">\n    <li class="item-title">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <sup>'+z((d=(d=a.users,null==
d||!1===d?d:d.length),typeof d===t?d.apply(a):d))+"</sup></li>\n    ");if((d=h.each.call(a,a.users,{hash:{},inverse:l.noop,fn:l.program(16,u,b),data:b}))||0===d)c+=d;return c+"\n  </ul>\n"},b),data:b}))||0===e)c+=e;return c+"\n</div>\n"});
this.Templates.PointAddView=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var f=this.escapeExpression,a=h.helperMissing;c='<div class="p-top">\n  <h3>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="clearfix p-body">\n  <form action="#" id="pointAddForm" enctype="multipart/form-data" method="POST">\n    <div class="fr w-385">\n      <div class="map-block">\n        <div id="popup-map-place" style="width:385px; height:305px"></div>\n\n        <div class="drop-filter">\n          <input name="address" type="text" placeholder="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043c\u0435\u0441\u0442\u0430..." class="input-map-txt" data-key="address" autocomplete="off" id="add-new-place-address" value="';(e=
h.address)?e=e.call(g,{hash:{},data:b}):(e=g.address,e="function"===typeof e?e.apply(g):e);c+=f(e)+'">\n          <ul class="drop-results"></ul>\n        </div>\n        <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b..." class="input-map-coords">\n\n      </div>\n    </div>\n\n    <div class="fl w-385">\n      <div class="input-line">\n        <div class="required">*</div>\n\n        \x3c!--<div class="drop-filter">--\x3e\n          <input name="name" type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430..." id="p-add-place-name" data-key="name" autocomplete="off" class="search-matches">\n          <ul class="drop-results"></ul>\n        \x3c!--</div>--\x3e\n      </div>\n\n      <div class="input-line">\n        <div class="required">*</div>\n\n        <textarea  name="description" data-key="description" rows="4" cols="33" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430..." class="input-place-desc" id="add-new-place-description" value="';
(e=h.description)?e=e.call(g,{hash:{},data:b}):(e=g.description,e="function"===typeof e?e.apply(g):e);c+=f(e)+'"></textarea>\n      </div>\n\n      <div class="add-place-choose-type-place">\n        <h4>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043c\u0435\u0441\u0442\u0430:</h4>\n\n        <div class="clearfix ctp-labels">\n          ';if((e=h.each.call(g,g.requireLabels,{hash:{},inverse:this.noop,fn:this.program(1,function(b,c){var e,g,w;e='\n            <div class="ctp-item-label">\n              <div class="placemark" data-label-id="';
(g=h.id)?g=g.call(b,{hash:{},data:c}):(g=b.id,g="function"===typeof g?g.apply(b):g);e+=f(g)+'">\n                \x3c!--<span class="m-ico m-dostoprimechatelnost"></span>--\x3e\n                <img src="/media/';(g=h.icons)?g=g.call(b,{hash:{},data:c}):(g=b.icons,g="function"===typeof g?g.apply(b):g);e+=f(g)+'">\n              </div>\n              <span class="ctp-item-title">';w={hash:{},data:c};return e+=f((g=h.addShy,g?g.call(b,b.name,w):a.call(b,"addShy",b.name,w)))+"</span>\n            </div>\n          "},
b),data:b}))||0===e)c+=e;c+='\n        </div>\n\n        <div class="clearfix ctp-more-labels">\n          <div class="input-line">\n            <div class="drop-filter select-labels">\n              <div class="p-labels drop-labels">\n                <div class="clearfix selected-labels">\n                  <div class="label label-add">\n                    \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u0442\u043a\u0443\n                    <span>+</span>\n                  </div>\n\n                  <span class="text-field"><input type="text"></span>\n                </div>\n\n                <input type="button" value=" " class="clear-selected">\n\n                <ul class="drop-labels-field"></ul>\n              </div>\n            </div>\n          </div>\n\n          <div class="labels-field">\n            ';
if((e=h.each.call(g,g.additionalLabels,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;c='\n            <div class="label label-place" data-label-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);c+=f(e)+'">';(e=h.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e="function"===typeof e?e.apply(a):e);return c+=f(e)+"</div>\n            "},b),data:b}))||0===e)c+=e;c+='\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="clear"></div>\n\n    <div class="clearfix place-photos">\n      <h4>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043a \u043c\u0435\u0441\u0442\u0443:</h4>\n\n      <div class="item-photo load-photo">\n        <input name="img" type="file">\n      </div>\n\n      <span class="photos-prev"></span>\n      <span class="photos-next"></span>\n\n      <div class="photos-gallery">\n        <ul id="item-photo-list">\n          ';
if((e=h.each.call(g,g.imgs,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,e;c='\n            <li>\n              <div class="item-photo">\n                <img src="';(e=h.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a.thumbnail104x104,e="function"===typeof e?e.apply(a):e);return c+=f(e)+'" alt="" width="104" height="104">\n                <button class="remove-photo"></button>\n\n                <i class="ico-main-photo"></i>\n                <div class="txt-tooltip">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u044b\u043c</div>\n              </div>\n            </li>\n          '},
b),data:b}))||0===e)c+=e;return c+'\n        </ul>\n\n        <div class="item-photo photo-loading" style="display:none;">\n          <div class="load-status">\n            <div class="progress-loading">\n              <div style="width: 0%;" class="value"></div>\n            </div>\n            <span class="progress-count">0%</span>\n          </div>\n        </div>\n\n      </div>\n    </div>\x3c!-- end .place-photos --\x3e\n\n    <footer class="p-footer">\n      <div class="input-line submit-line">\n          <input type="submit" value="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e" class="fr a-btn" id="a-add-point">\n\n        <label class="fr custom-checkbox checked">\n          <input type="checkbox" checked>\n          \u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0437\u044c\u044f\u043c\n        </label>\n\n        <small class="required-desc">\u041f\u043e\u043b\u044f \u0441\u043e \u0437\u043d\u0430\u0447\u043a\u043e\u043c * \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</small>\n      </div>\n    </footer>\n  </form>\n</div>\n'});
this.Templates.PointDetailView=Handlebars.template(function(c,g,h,e,b){function f(a,b){return'\n                        <button type="button" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e" class="remove-photo"></button>\n                      '}function a(a,b){return'\n                        <button type="button" title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0444\u043e\u0442\u043e" class="complaint-photo"></button>\n                      '}
function d(a,b){var c,d;c='\n        <div class="label label-place">';(d=h.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===m?d.apply(a):d);return c+=n(d)+"</div>\n        "}function s(a,b){return'\n  <a href="#" class="a-btn a-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n  '}function k(a,b){return"marked"}function u(a,b){return'<i class="ico-wifi"></i>'}function w(a,b){return'<i class="ico-disabled"></i>'}function z(a,b){return'<i class="ico-p"></i>'}
function t(a,b){return'<i class="ico-wc"></i>'}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var l,m="function",n=this.escapeExpression,q=this,r=h.helperMissing;c='<div class="clearfix p-body">\n<header>\n  \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n\n  \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n\n  <h2><a href="#" class="a-place-name">';(e=h.name)?e=e.call(g,
{hash:{},data:b}):(e=g.name,e=typeof e===m?e.apply(g):e);c+=n(e)+'</a></h2>\n  <small>\u0423\u0432\u0438\u0434\u0435\u043b</small>\n  <a href="#">'+n((e=(e=g.author,null==e||!1===e?e:e.first_name),typeof e===m?e.apply(g):e))+" "+n((e=(e=g.author,null==e||!1===e?e:e.last_name),typeof e===m?e.apply(g):e))+'</a>\n  <div class="addr">';(l=h.address)?l=l.call(g,{hash:{},data:b}):(l=g.address,l=typeof l===m?l.apply(g):l);c+=n(l)+'</div>\n\n  <div class="p-place-desc">\n    ';(l=h.headDescription)?l=l.call(g,
{hash:{},data:b}):(l=g.headDescription,l=typeof l===m?l.apply(g):l);c+=n(l);if((l=h["if"].call(g,g.tailDescription,{hash:{},inverse:q.noop,fn:q.program(1,function(a,b){var c,d;c='<span class="hellip">&hellip;</span><span class="hidden more-desc">';(d=h.tailDescription)?d=d.call(a,{hash:{},data:b}):(d=a.tailDescription,d=typeof d===m?d.apply(a):d);return c+=n(d)+'<br></span><a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>'},b),data:b}))||0===l)c+=l;c+='\n  </div>\n\n  <div class="stats">\n    <span>\n      <span class="ico-want-small"></span>\n      ';
(l=h.beens_count)?l=l.call(g,{hash:{},data:b}):(l=g.beens_count,l=typeof l===m?l.apply(g):l);c+=n(l)+'\n    </span>\n\n    <span>\n      <span class="ico-like-small"></span>\n      ';(l=h.likes_count)?l=l.call(g,{hash:{},data:b}):(l=g.likes_count,l=typeof l===m?l.apply(g):l);c+=n(l)+'\n    </span>\n\n    <span>\n      <span class="ico-comment-small"></span>\n      ';(l=h.comments_count)?l=l.call(g,{hash:{},data:b}):(l=g.comments_count,l=typeof l===m?l.apply(g):l);c+=n(l)+'\n    </span>\n\n    <span>\n      <span class="ico-star-small"></span>\n      ';
(l=h.collections_count)?l=l.call(g,{hash:{},data:b}):(l=g.collections_count,l=typeof l===m?l.apply(g):l);c+=n(l)+'\n    </span>\n\n    <span>\n      <span class="ico-vote-small"></span>\n      ';(l=h.reviewusersplus)?l=l.call(g,{hash:{},data:b}):(l=g.reviewusersplus,l=typeof l===m?l.apply(g):l);c+=n(l)+"/";(l=h.reviewusersminus)?l=l.call(g,{hash:{},data:b}):(l=g.reviewusersminus,l=typeof l===m?l.apply(g):l);c+=n(l)+'\n    </span>\n  </div>\n</header>\n\n<div class="wide-box">\n  <ul class="p-tabs">\n    <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n    <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n    \x3c!--\n    <li><a href="#tab-desc" data-toggle="tab">\u041e \u043c\u0435\u0441\u0442\u0435</a></li>\n    <li><a href="#tab-events" data-toggle="tab">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n    --\x3e\n\n    <li><div class="shadow"></div></li>\n  </ul>\n\n  <div class="tabs-content">\n    <div id="tab-photo" class="tab-pane active">\n      <ul class="tabs-inside">\x3c!-- tp- tab photo --\x3e\n        <li class="active"><a href="#tp-tab-pop" data-toggle="tab">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435</a></li>\n        <li><a href="#tp-tab-my" data-toggle="tab">\u043d\u043e\u0432\u044b\u0435</a></li>\n        <li><a href="#tp-tab-new" data-toggle="tab">\u043c\u043e\u0438</a></li>\n      </ul>\n\n      <div class="tabs-content">\n        <div class="toggle-block">\n          <div class="clearfix p-gallery">\n            <div class="clearfix place-photos">\n              <div class="photos-gallery">\n                <ul>\n                  ';
if((l=h.each.call(g,g.imgs,{hash:{},inverse:q.noop,fn:q.programWithDepth(3,function(b,c,d){var e,g,k;e='\n                  <li>\n                    <div class="item-photo selected" data-photo-id="';(g=h.id)?g=g.call(b,{hash:{},data:c}):(g=b.id,g=typeof g===m?g.apply(b):g);e+=n(g)+'">\n                      <a href="/point/'+n((g=d.id,typeof g===m?g.apply(b):g))+"/photo/";(k=h.id)?k=k.call(b,{hash:{},data:c}):(k=b.id,k=typeof k===m?k.apply(b):k);e+=n(k)+'">\n                        <img src="';(k=
h.thumbnail104x104)?k=k.call(b,{hash:{},data:c}):(k=b.thumbnail104x104,k=typeof k===m?k.apply(b):k);e+=n(k)+'" alt="" width="104" height="104">\n                      </a>\n\n                      ';c={hash:{},inverse:q.program(6,a,c),fn:q.program(4,f,c),data:c};if((k=(g=h.ifEquals,g?g.call(b,(g=b.author,null==g||!1===g?g:g.id),(g=d.user,null==g||!1===g?g:g.id),c):r.call(b,"ifEquals",(g=b.author,null==g||!1===g?g:g.id),(g=d.user,null==g||!1===g?g:g.id),c)))||0===k)e+=k;return e+"\n                    </div>\n                  </li>\n                  "},
b,g),data:b}))||0===l)c+=l;c+='\n                </ul>\n              </div>\n              <div class="item-photo load-photo">\n                <form id="addPhotoForm" action="" method="POST" enctype="multipart/form-data">\n                  <input name="img" type="file">\n                </form>\n              </div>\n\n              \x3c!--\n              <div class="item-photo load-photo">\n                <input type="file">\n              </div>\n              --\x3e\n\n              <span class="photos-next"></span>\n              <span class="photos-prev"></span>\n            </div>\n\n            <div id="big-photo"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div id="tab-map" class="tab-pane">\n      <div class="map">\n        <div id="popup-map" style="width:560px; height:510px"></div>\n\n        <div class="m-ico-group">\n          <a href="#">\n            <span class="m-ico m-hotel"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-cafe"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-restoran"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-turism"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-azs"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-active-rest"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-sto"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-commerc"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-hunting"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-events"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-shop"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-fishing"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-monument"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-church"></span>\n          </a>\n        </div>\n\n      </div>\n    </div>\n\n    \x3c!--\n    <div id="tab-desc" class="tab-pane">\n      <div class="tab-desc">\n        <div class="clearfix place-features-group">\n          ';
if((l=h["if"].call(g,g.wifi,{hash:{},inverse:q.noop,fn:q.program(8,function(a,b){return'\n          <label class="custom-checkbox checked">\n            <input type="checkbox" value="" checked>\n            Wi-Fi\n          </label>\n          '},b),data:b}))||0===l)c+=l;c+="\n\n          ";if((l=h["if"].call(g,g.parking,{hash:{},inverse:q.noop,fn:q.program(10,function(a,b){return'\n          <label class="custom-checkbox">\n            <input type="checkbox" value="">\n            \u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430\n          </label>\n          '},
b),data:b}))||0===l)c+=l;c+="\n\n          ";if((l=h["if"].call(g,g.invalid,{hash:{},inverse:q.noop,fn:q.program(12,function(a,b){return'\n          <label class="custom-checkbox">\n            <input type="checkbox" value="">\n            \u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0438\u043d\u0432\u0430\u043b\u0438\u0434\u043e\u0432\n          </label>\n          '},b),data:b}))||0===l)c+=l;c+='\n        </div>\n\n        <div class="mode">\n          <h4 class="title-block">\n            <a href="#" class="a-remove-mode" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c" data-toggle="tooltip"></a>\n            <a href="#" class="a-edit-mode" title="\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c" data-toggle="tooltip"></a>\n            \u0420\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b\n          </h4>\n\n          <textarea rows="7" cols="60" id="mode-field" readonly>\n          \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a - \u0441 8:00 \u0434\u043e 17:00\n          \u0412\u0442\u043e\u0440\u043d\u0438\u043a - \u0441 8:00 \u0434\u043e 17:00\n          \u0421\u0440\u0435\u0434\u0430 - \u0441 8:00 \u0434\u043e 17:00\n          \u0427\u0435\u0442\u0432\u0435\u0440\u0433 - \u0441 8:00 \u0434\u043e 17:00\n          \u041f\u044f\u0442\u043d\u0438\u0446\u0430 - \u0441 8:00 \u0434\u043e 17:00\n          \u0421\u0443\u0431\u0431\u043e\u0442\u0430 - \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439\n          \u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u0438\u0435 - \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439</textarea>\n        </div>\n\n        <div class="add-new-section">\n          <h4 class="title-block">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b</h4>\n\n          <div class="add-new-section-body">\n            <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b..">\n            <textarea cols="50" rows="4" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435..."></textarea>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div id="tab-events" class="tab-pane">\n      <div class="calendar">\n        <select id="c-year-2">\n          <option value="1">2013</option>\n          <option value="2">2012</option>\n          <option value="3">2011</option>\n          <option value="4">2010</option>\n        </select>\n\n        <select id="c-month-2">\n          <option value="1">\u042f\u043d\u0432\u0430\u0440\u044c</option>\n          <option value="2">\u0424\u0435\u0432\u0440\u0430\u043b\u044c</option>\n          <option value="3">\u041c\u0430\u0440\u0442</option>\n          <option value="4">\u0410\u043f\u0440\u0435\u043b\u044c</option>\n          <option value="5">\u041c\u0430\u0439</option>\n          <option value="6">\u0418\u044e\u043d\u044c</option>\n          <option value="7">\u0418\u044e\u043b\u044c</option>\n          <option value="8">\u0410\u0432\u0433\u0443\u0441\u0442</option>\n          <option value="9">\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c</option>\n          <option value="10">\u041e\u043a\u0442\u044f\u0431\u0440\u044c</option>\n          <option value="11">\u041d\u043e\u044f\u0431\u0440\u044c</option>\n          <option value="12">\u0414\u0435\u043a\u0430\u0431\u0440\u044c</option>\n        </select>\n\n        <ul class="c-days">\n          <li><a href="#">1</a></li>\n          <li><a href="#">2</a></li>\n          <li><a href="#">3</a></li>\n          <li><a href="#" class="active">4</a></li>\n          <li><a href="#">5</a></li>\n          <li><a href="#">6</a></li>\n          <li><a href="#">7</a></li>\n          <li><span>8</span></li>\n          <li><span>9</span></li>\n          <li><a href="#">10</a></li>\n          <li><a href="#">11</a></li>\n          <li><a href="#">12</a></li>\n          <li><a href="#">13</a></li>\n          <li><a href="#">14</a></li>\n          <li><a href="#">15</a></li>\n          <li><a href="#">16</a></li>\n          <li><a href="#">17</a></li>\n          <li><span>18</span></li>\n          <li><a href="#">19</a></li>\n          <li><a href="#">20</a></li>\n          <li><a href="#">21</a></li>\n          <li><a href="#">22</a></li>\n          <li><a href="#">23</a></li>\n          <li><a href="#">24</a></li>\n          <li><a href="#">25</a></li>\n          <li><a href="#">26</a></li>\n          <li><a href="#">27</a></li>\n          <li><a href="#">28</a></li>\n          <li><a href="#">29</a></li>\n          <li><a href="#">30</a></li>\n          <li><span>31</span></li>\n          <li><a href="#"></a></li>\n        </ul>\n      </div>\n\n      <div class="toggle-block">\n        <ul class="event-list">\n          <li>\n            <a href="#" class="fl photo">\n              <img src="temp/img-1.jpg" alt="">\n            </a>\n\n            <div class="body">\n              <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n              <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n              <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n              <div class="stats">\n                <span>\n                  <span class="ico-want-small"></span>\n                  15\n                </span>\n\n                <span>\n                  <span class="ico-like-small"></span>\n                  23\n                </span>\n\n                <span>\n                  <span class="ico-comment-small"></span>\n                  2\n                </span>\n              </div>\n\n              <div class="short-desc">\n                <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                <div class="body">\n                  <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                  <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n                </div>\n              </div>\n            </div>\n          </li>\n\n          <li class="even">\n            <a href="#" class="fl photo">\n              <img src="temp/img-2.jpg" alt="">\n            </a>\n\n            <div class="body">\n              <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n              <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n              <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n              <div class="stats">\n                <span>\n                  <span class="ico-want-small"></span>\n                  15\n                </span>\n\n                <span>\n                  <span class="ico-like-small"></span>\n                  23\n                </span>\n\n                <span>\n                  <span class="ico-comment-small"></span>\n                  2\n                </span>\n              </div>\n\n              <div class="short-desc">\n                <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                <div class="body">\n                  <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                  <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n                </div>\n              </div>\n            </div>\n          </li>\n        </ul>\n\n        <div class="hidden-content">\n          <ul class="event-list">\n            <li>\n              <a href="#" class="fl photo">\n                <img src="temp/img-1.jpg" alt="">\n              </a>\n\n              <div class="body">\n                <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n                <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n                <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n                <div class="stats">\n                  <span>\n                    <span class="ico-want-small"></span>\n                    15\n                  </span>\n\n                  <span>\n                    <span class="ico-like-small"></span>\n                    23\n                  </span>\n\n                  <span>\n                    <span class="ico-comment-small"></span>\n                    2\n                  </span>\n                </div>\n\n                <div class="short-desc">\n                  <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                  <div class="body">\n                    <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                    <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n\n        <a href="#" class="a-toggle">\u0432\u0441\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f <span>&darr;</span></a>\n      </div>\n\n      <a href="#" class="btn btn-event"><b>+</b> \u0421\u043e\u0431\u044b\u0442\u0438\u0435</a>\n    </div>\n    --\x3e\n  </div>\n\n  <div class="tabs-content p-common-content">\n    \x3c!--\n    <section class="p-block event-labels">\n      <h4 class="title-block">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0441 \u044d\u0442\u0438\u043c \u043c\u0435\u0441\u0442\u043e\u043c</h4>\n\n      <menu class="p-nav-collection">\n        <a href="#" class="prev">&larr; \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435</a>\n        <a href="#" class="next">\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 &rarr;</a>\n      </menu>\n\n      <div class="clearfix body">\n        <div class="scroll-photos">\n          <ul class="ul-collection-list">\n            <li>\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n\n            <li>\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n\n              <div class="ucl-item">\n                <div class="photo">\n                  <div class="yasen-info">\n                    <div class="yp-info">\n                      <i class="yp-like"></i><small>12</small>\n                    </div>\n                  </div>\n\n                  <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n                </div>\n\n                <ul class="photo-preview">\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n\n                  <li>\n                    <a href="#">\n                      <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                    </a>\n                  </li>\n                </ul>\n\n                <div class="body">\n                  <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n                  <div class="collection-short-desc">\n                    <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                    <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </section>\n    --\x3e\n\n    \x3c!--\n    <section class="p-block peoples">\n      <h4 class="title-block">\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0445\u043e\u0442\u044f\u0442 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c</h4>\n\n      <div class="clearfix toggle-block">\n        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n\n        <div class="clearfix hidden-content">\n          <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n        </div>\n\n        <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <span>&darr;</span></a>\n      </div>\n    </section>\n    --\x3e\n\n    ';
if((l=h["if"].call(g,g.tags,{hash:{},inverse:q.noop,fn:q.program(14,function(a,b){var c,f;c='\n    <section class="p-block event-labels">\n      <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n      <div class="body">\n        ';if((f=h.each.call(a,a.tags,{hash:{},inverse:q.noop,fn:q.program(15,d,b),data:b}))||0===f)c+=f;return c+"\n      </div>\n    </section>\n    "},b),data:b}))||0===l)c+=l;c+="\n  </div>\n</div>\n\n</div>\n\n";if((l=h["if"].call(g,(e=g.user,null==e||!1===e?e:e.authorized),
{hash:{},inverse:q.noop,fn:q.program(17,function(a,b){var c,d,f;c='\n<aside id="right-panel">\n  <a href="#" class="a-btn a-add-collection">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n  <a href="#" class="a-btn a-add-path">\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n  ';f={hash:{},inverse:q.noop,fn:q.program(18,s,b),data:b};if((f=(d=h.ifEquals,d?d.call(a,(d=a.author,null==d||!1===d?d:d.id),(d=a.user,null==d||!1===d?d:d.id),f):r.call(a,
"ifEquals",(d=a.author,null==d||!1===d?d:d.id),(d=a.user,null==d||!1===d?d:d.id),f)))||0===f)c+=f;c+='\n\n  <div class="small-icons">\n    <a href="#" class="a-like ';f={hash:{},inverse:q.noop,fn:q.program(20,k,b),data:b};if((f=(d=h.ifBelong,d?d.call(a,a.user,a.likeusers,f):r.call(a,"ifBelong",a.user,a.likeusers,f)))||0===f)c+=f;c+='" data-placement="bottom" data-original-title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip"></a>\n    <a href="#" class="a-complaint" data-placement="bottom" data-original-title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043c\u0435\u0441\u0442\u043e" data-toggle="tooltip"></a>\n  </div>\n\n  <div class="aside-social">\n    <div class="share">\n      <div id="vk_like_point"></div>\n      <br>\n      <div class="fb-like" data-href="http://yasenput.ru/point/';
(f=h.id)?f=f.call(a,{hash:{},data:b}):(f=a.id,f=typeof f===m?f.apply(a):f);c+=n(f)+'" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n    </div>\n  </div>\n\n  <div class="small-icons">\n    ';if((f=h["if"].call(a,a.wifi,{hash:{},inverse:q.noop,fn:q.program(22,u,b),data:b}))||0===f)c+=f;if((f=h["if"].call(a,a.invalid,{hash:{},inverse:q.noop,fn:q.program(24,w,b),data:b}))||0===f)c+=f;if((f=h["if"].call(a,a.parking,{hash:{},inverse:q.noop,
fn:q.program(26,z,b),data:b}))||0===f)c+=f;if((f=h["if"].call(a,a.wc,{hash:{},inverse:q.noop,fn:q.program(28,t,b),data:b}))||0===f)c+=f;return c+"\n  </div>\n</aside>\n"},b),data:b}))||0===l)c+=l;return c+"\n"});
this.Templates.PointItemView=Handlebars.template(function(c,g,h,e,b){function f(a,b){return"marked"}function a(a,b){var c,d;return c=""+('\n        <img src="'+m((d=(d=(d=(d=(d=a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207),typeof d===l?d.apply(a):d))+'" alt="" width="207" height="'+m((d=(d=(d=(d=(d=a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207_height),typeof d===
l?d.apply(a):d))+'">\n      ')}function d(a,b){return'\n        <img src="/static/images/collection_logo.png" alt="" width="65" height="52">\n      '}function s(a,b){var d,c;return d=""+('\n      <li>\n        <a href="#">\n          <img src="'+m((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===l?c.apply(a):c))+'" alt="" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="'+
m((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[1]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===l?c.apply(a):c))+'" alt="" width="65" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="'+m((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[2]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===l?c.apply(a):c))+'" alt="" width="65" height="52">\n        </a>\n      </li>\n    ')}
function k(a,b){var c,d,f;c="\n      ";if((f=h["if"].call(a,(d=a.points,null==d||!1===d?d:d[1]),{hash:{},inverse:n.program(13,w,b),fn:n.program(11,u,b),data:b}))||0===f)c+=f;return c+"\n    "}function u(a,b){var c,d;return c=""+('\n        <li>\n          <a href="#">\n            <img src="'+m((d=(d=(d=(d=(d=a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail65x52),typeof d===l?d.apply(a):d))+'" alt="" width="65" height="52">\n          </a>\n        </li>\n\n        <li>\n          <a href="#">\n            <img src="'+
m((d=(d=(d=(d=(d=a.points,null==d||!1===d?d:d[1]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail135x52),typeof d===l?d.apply(a):d))+'" alt="" width="135" height="52">\n          </a>\n        </li>\n      ')}function w(a,b){var d,c,f;d="\n        ";if((f=h["if"].call(a,(c=a.points,null==c||!1===c?c:c[0]),{hash:{},inverse:n.noop,fn:n.program(14,z,b),data:b}))||0===f)d+=f;return d+"\n      "}function z(a,b){var d,c;return d=""+('\n          <li>\n            <a href="#">\n              <img src="'+
m((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail205x52),typeof c===l?c.apply(a):c))+'" alt="" width="205" height="52">\n            </a>\n          </li>\n        ')}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};c="";var t,l="function",m=this.escapeExpression,n=this,q=h.helperMissing;e={hash:{},inverse:n.noop,fn:n.program(1,function(b,c){var e,g,v;e='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';
v={hash:{},inverse:n.noop,fn:n.program(2,f,c),data:c};if((v=(g=h.ifBelong,g?g.call(b,b.user,b.likeusers,v):q.call(b,"ifBelong",b.user,b.likeusers,v)))||0===v)e+=v;e+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n\n    <div class="yasen-info">\n      <span class="yp-title">';(v=h.ypi)?v=v.call(b,{hash:{},data:c}):(v=b.ypi,v=typeof v===l?v.apply(b):v);e+=m(v)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';
(v=h.likes_count)?v=v.call(b,{hash:{},data:c}):(v=b.likes_count,v=typeof v===l?v.apply(b):v);e+=m(v)+'</small>\n        <i class="yp-marked"></i><small>';(v=h.collections_count)?v=v.call(b,{hash:{},data:c}):(v=b.collections_count,v=typeof v===l?v.apply(b):v);e+=m(v)+'</small>\n        <i class="yp-place"></i><small>';(v=h.beens_count)?v=v.call(b,{hash:{},data:c}):(v=b.beens_count,v=typeof v===l?v.apply(b):v);e+=m(v)+'</small>\n        <i class="yp-star"></i><small>+';(v=h.reviewusersplus)?v=v.call(b,
{hash:{},data:c}):(v=b.reviewusersplus,v=typeof v===l?v.apply(b):v);e+=m(v)+"/-";(v=h.reviewusersminus)?v=v.call(b,{hash:{},data:c}):(v=b.reviewusersminus,v=typeof v===l?v.apply(b):v);e+=m(v)+'</small>\n      </div>\n    </div>\n\n    <a href="/set/';(v=h.id)?v=v.call(b,{hash:{},data:c}):(v=b.id,v=typeof v===l?v.apply(b):v);e+=m(v)+'" class="a-photo nonav">\n      ';if((v=h["if"].call(b,(g=(g=(g=b.points,null==g||!1===g?g:g[0]),null==g||!1===g?g:g.imgs),null==g||!1===g?g:g[0]),{hash:{},inverse:n.program(6,
d,c),fn:n.program(4,a,c),data:c}))||0===v)e+=v;e+='\n    </a>\n  </div>\n\n  <ul class="photo-preview a-photo nonav">\n    ';if((v=h["if"].call(b,(g=b.points,null==g||!1===g?g:g[2]),{hash:{},inverse:n.program(10,k,c),fn:n.program(8,s,c),data:c}))||0===v)e+=v;e+='\n  </ul>\n  <div class="body author-point">\n    <img src="/media/'+m((g=(g=b.author,null==g||!1===g?g:g.avatar),typeof g===l?g.apply(b):g))+'" alt="" class="avatar" width="29" height="30">\n\n      <h3>';(v=h.name)?v=v.call(b,{hash:{},data:c}):
(v=b.name,v=typeof v===l?v.apply(b):v);return e+=m(v)+"</h3>\n      <p>\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043b "+m((g=(g=b.author,null==g||!1===g?g:g.first_name),typeof g===l?g.apply(b):g))+" "+m((g=(g=b.author,null==g||!1===g?g:g.last_name),typeof g===l?g.apply(b):g))+"</p>\n  </div>\n"},b),data:b};if((e=(t=h.ifEquals,t?t.call(g,g.type_of_item,"set",e):q.call(g,"ifEquals",g.type_of_item,"set",e)))||0===e)c+=e;c+="\n\n";e={hash:{},inverse:n.noop,
fn:n.program(16,function(a,b){var c,d,e;c='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';e={hash:{},inverse:n.noop,fn:n.program(2,f,b),data:b};if((e=(d=h.ifBelong,d?d.call(a,a.user,a.likeusers,e):q.call(a,"ifBelong",a.user,a.likeusers,e)))||0===e)c+=e;c+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n    <a href="#" class="a-collection nonav" title="\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e" data-toggle="tooltip" data-placement="bottom">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n\n    <div class="yasen-info">\n      <span class="yp-title">';
(e=h.ypi)?e=e.call(a,{hash:{},data:b}):(e=a.ypi,e=typeof e===l?e.apply(a):e);c+=m(e)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';(e=h.likes_count)?e=e.call(a,{hash:{},data:b}):(e=a.likes_count,e=typeof e===l?e.apply(a):e);c+=m(e)+'</small>\n        <i class="yp-marked"></i><small>';(e=h.collections_count)?e=e.call(a,{hash:{},data:b}):(e=a.collections_count,e=typeof e===l?e.apply(a):e);c+=m(e)+'</small>\n        <i class="yp-place"></i><small>';
(e=h.beens_count)?e=e.call(a,{hash:{},data:b}):(e=a.beens_count,e=typeof e===l?e.apply(a):e);c+=m(e)+'</small>\n        <i class="yp-star"></i><small>+';(e=h.reviewusersplus)?e=e.call(a,{hash:{},data:b}):(e=a.reviewusersplus,e=typeof e===l?e.apply(a):e);c+=m(e)+"/-";(e=h.reviewusersminus)?e=e.call(a,{hash:{},data:b}):(e=a.reviewusersminus,e=typeof e===l?e.apply(a):e);c+=m(e)+'</small>\n      </div>\n    </div>\n\n    <a href="/point/';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===l?e.apply(a):
e);c+=m(e)+'" class="a-photo nonav">\n      <img src="'+m((d=(d=(d=a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207),typeof d===l?d.apply(a):d))+'" alt="" width="207" height="'+m((d=(d=(d=a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207_height),typeof d===l?d.apply(a):d))+'">\n    </a>\n  </div>\n\n  <div class="body">\n      <img src="/media/'+m((d=(d=a.author,null==d||!1===d?d:d.avatar),typeof d===l?d.apply(a):d))+'" alt="" class="avatar" width="29" height="30">\n    <h3>';
(e=h.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===l?e.apply(a):e);c+=m(e)+"</h3>\n    <p>";(e=h.address)?e=e.call(a,{hash:{},data:b}):(e=a.address,e=typeof e===l?e.apply(a):e);return c+=m(e)+"</p>\n  </div>\n"},b),data:b};if((e=(t=h.ifEquals,t?t.call(g,g.type_of_item,"point",e):q.call(g,"ifEquals",g.type_of_item,"point",e)))||0===e)c+=e;return c+"\n"});this.Templates.PointListView=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];return""});
this.Templates.PointPanelView=Handlebars.template(function(c,g,h,e,b){function f(a,b){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var a,d;e=h.helperMissing;c='<menu class="tabs">\n  <a href="/popular" data-target="tab-popular" class="';d={hash:{},inverse:this.noop,fn:this.program(1,f,b),data:b};if((d=(a=h.ifEquals,a?a.call(g,g.active,"popular",d):e.call(g,"ifEquals",g.active,"popular",d)))||0===d)c+=d;c+=' nonav menu-item">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435</a>\n  <a href="/new" data-target="tab-new" class="';
d={hash:{},inverse:this.noop,fn:this.program(1,f,b),data:b};if((d=(a=h.ifEquals,a?a.call(g,g.active,"new",d):e.call(g,"ifEquals",g.active,"new",d)))||0===d)c+=d;return c+' nonav menu-item">\u043d\u043e\u0432\u043e\u0435</a>\n</menu>\n'});this.Templates.PointsMainLayout=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<header id="point-panel" class="clearfix top-panel"></header>\n\n<div id="point-content" class="content tabs-content">\n  <section id="tab-popular"></section>\n  <section id="tab-new"></section>\n</div>\n'});
this.Templates.ProgressImage=Handlebars.template(function(c,g,h,e,b){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};c="";var f=this.escapeExpression;if((g=h.each.call(g,g.imgs,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n  <li>\n    <div class="item-photo">\n      <img src="';(e=h.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a.thumbnail104x104,e="function"===typeof e?e.apply(a):e);return c+=f(e)+'" alt="" width="104" height="104">\n      <button class="remove-photo"></button>\n\n      <i class="ico-main-photo"></i>\n      <div class="txt-tooltip">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u044b\u043c</div>\n    </div>\n  </li>\n'},
b),data:b}))||0===g)c+=g;return c+"\n"});
this.Templates.SetDetailView=Handlebars.template(function(c,g,h,e,b){function f(a,b){return'\n      \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n    '}function a(a,b){return"marked"}function d(a,b){return'<a href="#" class="a-btn stp-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'}function s(a,b){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||c.helpers;b=b||{};var k,
u=this.escapeExpression,w=this,z=h.helperMissing;c='<div class="clearfix p-body">\n  <header>\n    ';if((e=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:w.noop,fn:w.program(1,f,b),data:b}))||0===e)c+=e;c+='\n      \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n      <h2>'+u((k=(k=g.activePoint,null==k||!1===k?k:k.name),"function"===typeof k?k.apply(g):k))+'</h2>\n      <small>\u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0441\u044f</small> <a href="#">'+
u((k=(k=(k=g.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.first_name),"function"===typeof k?k.apply(g):k))+" "+u((k=(k=(k=g.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.last_name),"function"===typeof k?k.apply(g):k))+'</a>\n\n      <div class="addr">'+u((k=(k=g.activePoint,null==k||!1===k?k:k.address),"function"===typeof k?k.apply(g):k))+'</div>\n\n      <div class="stats">\n        <span>\n          <span class="ico-like-small"></span>\n          '+u((k=(k=g.activePoint,
null==k||!1===k?k:k.likes_count),"function"===typeof k?k.apply(g):k))+'\n        </span>\n\n        <span>\n          <span class="ico-comment-small"></span>\n          '+u((k=(k=g.activePoint,null==k||!1===k?k:k.comments),"function"===typeof k?k.apply(g):k))+'\n        </span>\n      </div>\n  </header>\n\n  <div class="wide-box">\n    <ul class="p-tabs">\n      <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n      <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n      <li><a href="#tab-desc" data-toggle="tab">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435</a></li>\n\n      <li><div class="shadow"></div></li>\n    </ul>\n\n    <div class="tabs-content">\n\n      <div id="tab-photo" class="tab-pane active">\n        <div class="tabs-content">\n          <div class="toggle-block">\n            <div class="clearfix p-gallery">\n              <div class="clearfix place-photos">\n                <div class="photos-gallery">\n                  <ul>\n                    ';
if((e=h.each.call(g,(k=g.activePoint,null==k||!1===k?k:k.imgs),{hash:{},inverse:w.noop,fn:w.programWithDepth(3,function(a,b,c){var d,f,e;d=""+('\n                    <li>\n                      <div class="item-photo" data-set-id="'+u((f=c.id,"function"===typeof f?f.apply(a):f))+'" data-photo-id="');(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);d+=u(e)+'">\n                        <a href="/set/'+u((f=c.id,"function"===typeof f?f.apply(a):f))+"/point/"+u((f=(f=
c.activePoint,null==f||!1===f?f:f.id),"function"===typeof f?f.apply(a):f))+"/photo/";(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);d+=u(e)+'">\n                          <img src="';(e=h.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a.thumbnail104x104,e="function"===typeof e?e.apply(a):e);return d+=u(e)+'" alt="" width="104" height="104">\n                        </a>\n                          <button class="remove-photo"></button>\n                          <button class="complaint-photo"></button>\n                      </div>\n                    </li>\n                    '},
b,g),data:b}))||0===e)c+=e;c+='\n                  </ul>\n                </div>\n\n                <div class="item-photo load-photo">\n                  <form id="addImageForm" action="" method="POST" enctype="multipart/form-data">\n                    <input name="img" type="file">\n                  </form>\n                </div>\n\n                <span class="photos-next"></span>\n                <span class="photos-prev"></span>\n              </div>\n\n              <div id="big-photo"></div>\x3c!-- end #big-photo --\x3e\n\n            </div>\n          </div>\n        </div>\n      </div>\x3c!-- end #tab-photo --\x3e\n\n      <div id="tab-map" class="tab-pane">\n        <div class="map">\n            <div id="popup-map-1" style="width:560px; height:510px"></div>\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043d\u0430\u0447\u0430\u043b\u043e) --\x3e\n\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043a\u043e\u043d\u0435\u0446) --\x3e\n            <div class="m-ico-group">\n                <a href="#">\n                    <span class="m-ico m-hotel"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-cafe"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-restoran"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-turism"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-azs"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-active-rest"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-sto"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-commerc"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-hunting"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-events"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-shop"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-fishing"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-monument"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-church"></span>\n                </a>\n            </div>\n\n        </div>\n\n        <div id="near-objects">\n          <h4 class="title-block">\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u043d\u0438\u0446\u044b</h4>\n\n          <ol>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043e\u0434\u0438\u043d</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0434\u0432\u0430</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0438</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0447\u0435\u0442\u044b\u0440\u0435</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043f\u044f\u0442\u044c</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n          </ol>\n        </div>\n\n      </div>\x3c!-- end #tab-map --\x3e\n\n      <div id="tab-desc" class="tab-pane">\n        <div class="toggle-block">\n          <ul class="ul-desc"></ul>\n          <div class="hidden-content">\n            <ul class="ul-desc"></ul>\n          </div>\n\n          <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f <span>&darr;</span></a>\n        </div>\n\n        <div class="add-comment">\n          <form action="#">\n            <div class="ac-block">\n              <img src="'+
u((k=(k=g.user,null==k||!1===k?k:k.avatar),"function"===typeof k?k.apply(g):k))+'" alt="" width="29" height="30" class="avatar">\n\n              <div class="ac-body">\n                <div class="toggle-area">\n                  <textarea rows="3" cols="40"></textarea>\n                  <input type="submit" value=" ">\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\x3c!-- end #tab-desc --\x3e\n\n      <div class="tabs-content p-common-content" style="display: none">\n        <section class="p-block peoples">\n          <h4 class="title-block">\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0445\u043e\u0442\u044f\u0442 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c</h4>\n          <div class="clearfix toggle-block">\n            <div class="clearfix hidden-content"></div>\n            <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <span>&darr;</span></a>\n          </div>\n        </section>\n\n        <section class="p-block event-labels">\n            <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n            <div class="body">\n              ';
if((e=h.each.call(g,(k=g.activePoint,null==k||!1===k?k:k.tags),{hash:{},inverse:w.noop,fn:w.program(5,function(a,b){var c,d;c='\n                <div class="label">';(d=h.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d="function"===typeof d?d.apply(a):d);return c+=u(d)+"</div>\n              "},b),data:b}))||0===e)c+=e;c+="\n            </div>\n        </section>\n      </div>\x3c!-- end .tabs-content --\x3e\n    </div>\n  </div>\n\n  <footer>\n    ";if((e=h["if"].call(g,(k=g.user,null==k||!1===k?
k:k.authorized),{hash:{},inverse:w.noop,fn:w.program(1,f,b),data:b}))||0===e)c+=e;c+='\n  </footer>\n</div>\x3c!-- end .cleatfix-body --\x3e\n\n<header id="c-top-panel">\n  <div class="inner-wrap">\n    <aside class="stp-buttons">\n    ';if((e=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:w.noop,fn:w.program(7,function(b,c){var f,e,g;f='\n      <div class="c-buttons">\n        <a href="#" class="a-btn stp-like ';g={hash:{},inverse:w.noop,fn:w.program(8,a,c),data:c};if((g=
(e=h.ifBelong,e?e.call(b,b.user,b.likeusers,g):z.call(b,"ifBelong",b.user,b.likeusers,g)))||0===g)f+=g;f+='">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</a>\n        ';g={hash:{},inverse:w.noop,fn:w.program(10,d,c),data:c};if((g=(e=h.ifEquals,e?e.call(b,(e=b.author,null==e||!1===e?e:e.id),(e=b.user,null==e||!1===e?e:e.id),g):z.call(b,"ifEquals",(e=b.author,null==e||!1===e?e:e.id),(e=b.user,null==e||!1===e?e:e.id),g)))||0===g)f+=g;return f+"\n      </div>\n    "},b),data:b}))||0===e)c+=e;c+='\n      <div class="c-edit-buttons">\n        \x3c!--<a href="#" class="a-btn stp-remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>--\x3e\n        <a href="#" class="a-btn stp-save">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</a>\n      </div>\n    </aside>\n\n    <div class="ctp-head">\n      <h1>';
(e=h.name)?e=e.call(g,{hash:{},data:b}):(e=g.name,e="function"===typeof e?e.apply(g):e);c+=u(e)+"</h1>\n      ";e={hash:{},inverse:w.program(14,function(a,b){var c,d;return c=""+('\n        \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\n        <a href="#">'+u((d=(d=a.author,null==d||!1===d?d:d.first_name),"function"===typeof d?d.apply(a):d))+" "+u((d=(d=a.author,null==d||!1===d?d:d.last_name),"function"===typeof d?d.apply(a):d))+"</a>\n      ")},
b),fn:w.program(12,function(a,b){return"\n      "},b),data:b};if((e=(k=h.ifEquals,k?k.call(g,g.author,"new",e):z.call(g,"ifEquals",g.author,"new",e)))||0===e)c+=e;c+='\n    </div>\n\n    <div class="ctp-content">\n      ';(e=h.headDescription)?e=e.call(g,{hash:{},data:b}):(e=g.headDescription,e="function"===typeof e?e.apply(g):e);c+=u(e)+"\n      ";if((e=h["if"].call(g,g.tailDescription,{hash:{},inverse:w.noop,fn:w.program(16,function(a,b){var c,d;c='\n        <span class="hellip">\u2026</span>\n        <span class="hidden more-desc">';
(d=h.tailDescription)?d=d.call(a,{hash:{},data:b}):(d=a.tailDescription,d="function"===typeof d?d.apply(a):d);return c+=u(d)+'</span>\n        <a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>\n      '},b),data:b}))||0===e)c+=e;c+='\n    </div>\n\n    <div class="c-edit-inputs">\n      <input type="text" value="';(e=h.name)?e=e.call(g,{hash:{},data:b}):(e=g.name,e="function"===typeof e?e.apply(g):e);c+=u(e)+'">\n      <input type="text" value="';(e=h.description)?
e=e.call(g,{hash:{},data:b}):(e=g.description,e="function"===typeof e?e.apply(g):e);c+=u(e)+'">\n    </div>\n  </div>\n</header>\n\n<aside id="c-left-panel">\n  <div class="aside-content">\n    <div class="aside-viewport">\n      <ol id="ol-collection">\n        ';if((e=h.each.call(g,g.points,{hash:{},inverse:w.noop,fn:w.programWithDepth(18,function(a,b,d){var c,f,e;c='\n        <li class="choose_place ';e={hash:{},inverse:w.noop,fn:w.program(19,s,b),data:b};if((e=(f=h.ifEquals,f?f.call(a,a.id,(f=
d.activePoint,null==f||!1===f?f:f.id),e):z.call(a,"ifEquals",a.id,(f=d.activePoint,null==f||!1===f?f:f.id),e)))||0===e)c+=e;c+='" data-placemark-id="placemark-1">\n          <a href="/set/'+u((f=d.id,"function"===typeof f?f.apply(a):f))+"/point/";(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);c+=u(e)+'" class="choose_place_a" data-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);c+=u(e)+'">';(e=h.name)?e=e.call(a,{hash:{},
data:b}):(e=a.name,e="function"===typeof e?e.apply(a):e);return c+=u(e)+'</a>\n            <button type="button" class="remove-collection"></button>\n          </li>\n        '},b,g),data:b}))||0===e)c+=e;return c+'\n      </ol>\n    </div>\n\n    <a href="#" class="clp-up"></a> \x3c!-- clp- collection left panel  --\x3e\n    <a href="#" class="clp-down"></a>\n  </div>\n</aside>\n'});
(function(){Handlebars.registerHelper("ifEquals",function(c,g,h){return(null!=c?c.toString():void 0)===(null!=g?g.toString():void 0)?h.fn(this):h.inverse(this)});Handlebars.registerHelper("ifBelong",function(c,g,h){var e,b,f,a;if(void 0===g)return!1;f=0;for(a=g.length;f<a;f++)b=g[f],b.id===c.id&&(e=!0);return e?h.fn(this):h.inverse(this)});Handlebars.registerHelper("dateFormat",function(c,g){var h;return window.dateFormat?(h=g.hash.format||"MMM Do, YYYY",(new Date(c)).format(h)):c});Handlebars.registerHelper("eachKey",
function(c,g){var h,e,b,f;e="";c=c.toString().substring(1,c.length-1).split(",");b=0;for(f=c.length;b<f;b++)h=c[b],e+=g.fn(h.trim());return e});Handlebars.registerHelper("splitAddr",function(c,g,h){c=c.split(g);return c[2]});Handlebars.registerHelper("addShy",function(c,g){var h,e;if(_.contains(c," "))return c;h=c.slice(0,10);e=c.slice(10);return new Handlebars.SafeString(""+h+"&shy;"+e)})}).call(this);
(function(){Yapp.module("Common",{startWithParent:!1,define:function(){this.addInitializer(function(){console.log("initializing Common Module");this.router=new Yapp.Common.Router({controller:new Yapp.Common.Controller});Yapp.header.show(new Yapp.Common.HeaderView({model:Yapp.user}));return Yapp.footer.show(new Yapp.Common.FooterView)});return this.sliderPhotos={flag:null,countHidden:0,afterMove:function(c){if(0===c)this.prev.addClass("disabled"),this.next.removeClass("disabled");else if(c===$("li",
this.slider).length-this.p.visible)this.prev.removeClass("disabled"),this.next.addClass("disabled");else return this.prev.removeClass("disabled"),this.next.removeClass("disabled")},move:function(c){var g;g=this;g.countHidden+=1*c;return g.slider.animate({left:-(g.slider.find("li:eq(1)").outerWidth(!0)*g.countHidden)},function(){g.flag=null;return g.afterMove(g.countHidden)})},init:function(c){var g;g=this;g.p=c;g.prev=$(".photos-prev",c.root);g.next=$(".photos-next",c.root);g.slider=$("ul",c.root);
g.countHidden=0;g.slider.animate({left:0},300);$("li",c.root).length<=c.visible?(g.prev.hide(),g.next.hide()):(g.prev.show(),g.next.show());g.next.unbind("click.SliderPhotos").bind("click.SliderPhotos",function(){if(g.flag||$(this).hasClass("disabled"))return!1;g.flag=!0;g.move(1);return!1}).removeClass("disabled");return g.prev.unbind("click.SliderPhotos").bind("click.SliderPhotos",function(){if(g.flag||$(this).hasClass("disabled"))return!1;g.flag=!0;g.move(-1);return!1}).addClass("disabled")},reinit:function(c){return this.init(c||
this.p)}}}})}).call(this);
(function(){Yapp.module("Map",{startWithParent:!1,define:function(){return this.addInitializer(function(){var c=this;console.log("initializing Map Module");this.router=new Yapp.Map.Router({controller:new Yapp.Map.Controller});return $.getScript(Yapp.YA_MAP_URL,function(){return ymaps.ready(function(){var g,h;console.log("Init Yandex map");g=new ymaps.Map("mainmap",{center:[ymaps.geolocation.latitude,ymaps.geolocation.longitude],zoom:12});Yapp.user.set({location:ymaps.geolocation});g.controls.add("zoomControl").add("typeSelector");
h=new ymaps.GeoObjectCollection;g.geoObjects.add(h);c.yandexmap=g;return c.trigger("load:yandexmap",c.yandexmap)})})})}})}).call(this);(function(){Yapp.module("Points",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Points Module");return this.router=new Yapp.Points.Router({controller:new Yapp.Points.Controller})})}})}).call(this);(function(){Yapp.module("User",{startWithParent:!1,define:function(){return this.addInitializer(function(){return console.log("initializing User Module")})}})}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Common.PopupRegion=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.el="#popups .scroll-box";f.prototype.initialize=function(){console.log("initializing Yapp.Common.PopupRegion");this.body="body";this.wrapper="#popups";return this.overlay=
"#overlay"};f.prototype.getEl=function(a){var b;b=this;a=$(a);a.click(function(a){if($(a.target).hasClass("scroll-box"))return b.close()});return a};f.prototype.onShow=function(){$(this.body).css("overflow","hidden");$(this.overlay).show();return $(this.wrapper).show()};f.prototype.onClose=function(){$(this.body).css("overflow","initial");$(this.overlay).hide();$(this.wrapper).hide();return c.Common.router.navigate("/")};return f}(Backbone.Marionette.Region)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};Yapp.Common.PopupView=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Common.PopupView")};b.prototype.id="p-common";b.prototype.className="popup";b.prototype.onBeforeRender=function(){return console.log("before render PopupView")};
b.prototype.modelEvents={change:"render"};b.prototype.templateHelpers=function(){return{user:Yapp.user.toJSON()}};return b}(Marionette.ItemView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.Point=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){return console.log("initializing Yapp.Points.Point")};f.prototype.idAttribute="unid";f.prototype.urlRoot=function(){return c.API_BASE_URL+"/points/"};
f.prototype.defaults=function(){return{priority:0,name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};f.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.address&&c.push("address");""===a.longitude&&c.push("longitude");""===a.latitude&&c.push("latitude");""===a.description&&c.push("description");(!a.imgs||0===a.imgs.length)&&c.push("photos");(!a.tags||0===a.tags.length)&&c.push("tags");if(0<c.length)return c};f.prototype.search=function(a,b){return c.request("request",
{type:"GET",url:"/points/search/",params:{dropResult:b},data:{s:a},successCallback:this.successSearch})};f.prototype.successSearch=function(a,b){return _.each(a,function(a){return b.append("<li data-point-id="+a.id+">"+a.name+"</li>")})};f.prototype.like=function(a,b,f){return c.request("request",{url:c.API_BASE_URL+"/points/like",type:"POST",context:f,successCallback:b,params:{target:a},data:{id:this.get("id")}})};f.prototype.likePhoto=function(a,b,f,e){return c.request("request",{url:c.API_BASE_URL+
"/photos/like",type:"POST",context:e,successCallback:f,params:{target:a},data:{id:b}})};f.prototype.addCommentPhoto=function(a,b,f,e){return c.request("request",{url:c.API_BASE_URL+"/comments/add",type:"POST",context:e,successCallback:f,data:{photo:a,txt:b}})};f.prototype.removeCommentPhoto=function(a,b,f){return c.request("request",{url:c.API_BASE_URL+"/comments/del",type:"POST",context:f,successCallback:b,params:{commentId:a},data:{id:a}})};f.prototype.addPhoto=function(a,b,f){return c.request("request",
{url:c.API_BASE_URL+("/photos/point/"+this.get("id")+"/add"),type:"POST",context:f,successCallback:b,processData:!1,contentType:!1,params:{id:this.get("id")},data:a})};f.prototype.removePhoto=function(a,b,f){return c.request("request",{url:c.API_BASE_URL+"/photos/del",type:"POST",context:f,successCallback:b,params:{id:a},data:{id:a}})};f.prototype.parse=function(a){_.isArray(a)&&(a=a[0]);return a};return f}(Backbone.Model)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.Set=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){return console.log("initializing Yapp.Points.Set")};f.prototype.idAttribute="unid";f.prototype.urlRoot=function(){return c.API_BASE_URL+"/collections/"};
f.prototype.defaults=function(){return{name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};f.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.address&&c.push("address");""===a.longitude&&c.push("longitude");""===a.latitude&&c.push("latitude");(!a.imgs||0===a.imgs.length)&&c.push("photos");(!a.tags||0===a.tags.length)&&c.push("tags");if(0<c.length)return c};f.prototype.like=function(a,b,f){return c.request("request",{url:c.API_BASE_URL+"/collections/like",
type:"POST",context:f,successCallback:b,params:{target:a},data:{collectionid:this.get("id")}})};f.prototype.parse=function(a){_.isArray(a)&&(a=a[0]);return a};return f}(Backbone.Model)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.User.Profile=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.User.Profile")};b.prototype.defaults={first_name:"",last_name:"",authorized:!1,email:!1,avatar:"",last_state:"pins",
count_liked_objects:0,count_commented_objects:0};return b}(Backbone.Model)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.PointCollection=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.model=function(a,b){if("point"===a.type_of_item)return new c.Points.Point(a,b);if("set"===a.type_of_item)return new c.Points.Set(a,b)};f.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointCollection")};
f.prototype.comparator=function(a){return-a.get("ypi")};f.prototype.parse=function(a){return a};f.prototype.url=function(){return c.API_BASE_URL+"/api/v1/yapens/"};return f}(Backbone.Collection)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.MainLayout=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.template=Templates.PointsMainLayout;f.prototype.id="point-layout";f.prototype.regions={panelContainer:"#point-panel",popularContainer:"#tab-popular",newContainer:"#tab-new"};
f.prototype.initialize=function(){console.log("initializing Yapp.Points.MainLayout");return this.pointCollection=new c.Points.PointCollection};f.prototype.onShow=function(){var a,b=this;a=this.options.content_type;this.panelContainer.show(new c.Points.PointPanelView({model:c.user,content_type:a}));console.log("loading points collection");return this.pointCollection.fetch({data:{content:this.options.content_type||"popular"},success:function(f,e){console.log(["server response: ",e]);return e.error||
e.errors?console.error(e):b.popularContainer.show(new c.Points.PointListView({collection:b.pointCollection,content_type:a}))}})};return f}(Marionette.Layout)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Map.MapView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.template=Templates.MapView;f.prototype.tagName="div";f.prototype.className="map";f.prototype.initialize=function(){console.log("initializing Yapp.Map.MapView");this.user=
c.user;return this.listenTo(c.Map,"load:yandexmap",this.setMap)};f.prototype.events={"click .a-toggle":"toggleMap"};f.prototype.toggleMap=function(a){a.preventDefault();return c.execute("toggleMap")};f.prototype.setMap=function(a){this.map=a;return this.map.events.add("actionend",this.changeMap,this)};f.prototype.changeMap=function(a){var b=this;a=this.map.getCenter();return ymaps.geocode(a,{results:1}).then(function(a){a=a.geoObjects.get(0).properties.get("text").split(", ").slice(0,3);a=_.object(["country",
"region","city"],a);return b.user.set({location:a})})};return f}(Marionette.ItemView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Common.AuthPopupView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){return console.log("initialize AuthPopupView")};f.prototype.template=Templates.AuthPopupView;f.prototype.events=function(){return{"click .p-close":"hidePopup"}};
f.prototype.hidePopup=function(){return c.popup.close()};return f}(c.Common.PopupView)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Common.FooterView=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Common.FooterView")};b.prototype.template=Templates.FooterView;b.prototype.events={"click .a-toggle":"toggleFooter"};
b.prototype.modelEvents={change:"render"};b.prototype.toggleFooter=function(b){b.preventDefault();return $("body").toggleClass("hide-footer")};return b}(Marionette.ItemView)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};Yapp.Common.HeaderView=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){console.log("initializing Yapp.Common.HeaderView");this.multisearchDropdownTemplate=Templates.MultisearchDropdown;return this.labelTemplate=Templates.LabelTemplate};
b.prototype.template=Templates.HeaderView;b.prototype.ui={labelFields:".label-fields",dropSearch:".drop-search",clearInput:".clear-input",searchInput:".text-field",labelAdd:".label-add",removeLAbel:".remove-label"};b.prototype.events={"click .drop-add-head, .auth, a-login":"showAuthPopup","click .item-label":"addLabel","click .remove-label":"removeLabel","click .label-add":"focusInput","click .label-fields":"focusLabels","click .clear-input":"clearSearchInput","click #multisearchForm input[type=submit]":"submitSearch",
"submit @multisearchForm":"submitSearch","keydown .text-field input":"keyupInput"};b.prototype.modelEvents={change:"render"};b.prototype.showAuthPopup=function(b){if(!this.model.get("authorized"))return b.preventDefault(),b.stopPropagation(),Yapp.vent.trigger("user:notauthorized")};b.prototype.addLabel=function(b){b.preventDefault();b=$(b.currentTarget);b={id:b.data("id"),name:b.data("name"),type:b.data("type")};switch(b.type){case "tags":this.ui.labelFields.children(".label-add").before(this.labelTemplate(b));
break;case "place":return;case "user":this.ui.labelFields.children(".label-user").remove(),this.ui.labelFields.children(".label-add").before(this.labelTemplate(b))}return this.hideDropdown()};b.prototype.removeLabel=function(b){b.preventDefault();b.stopPropagation();$(b.currentTarget).parent().remove();return this.ui.searchInput.children().focus()};b.prototype.focusInput=function(b){b.preventDefault();b.stopPropagation();this.ui.labelAdd.hide();this.setWidthInput();this.ui.searchInput.show();return this.ui.searchInput.children().val("").focus()};
b.prototype.focusLabels=function(b){if($(b.target).hasClass("label-fields"))return this.focusInput(b)};b.prototype.clearSearchInput=function(b){b.preventDefault();$(b.currentTarget);return this.ui.labelFields.children(".label-name, .label-place, .label-user, .label-tags, .label-new").remove()};b.prototype.submitSearch=function(b){b.preventDefault();b.stopPropagation();return console.log(b)};b.prototype.hideDropdown=function(b){$(window).unbind("resize",$.proxy(this.setHeightSearchMenu,this));this.ui.dropSearch.hide();
this.ui.dropSearch.find("li").removeClass("selected");this.ui.searchInput.hide();return this.ui.labelAdd.show()};b.prototype.showDropdown=function(b){_.isEmpty(_.flatten(b))&&(b={empty:!0});$(window).bind("resize",$.proxy(this.setHeightSearchMenu,this));this.setWidthInput();this.ui.dropSearch.html(this.multisearchDropdownTemplate(b));this.ui.dropSearch.show();return this.setHeightSearchMenu()};b.prototype.keyupInput=function(b){var a=this;this.onKeyDownSpecial(b);return this.delay(function(){var c;
38!==b.which&&40!==b.which&&13!==b.which&&27!==b.which&&8!==b.which&&(c=a.ui.searchInput.children().val())&&a.search(c,a.showDropdown,a)},500)};b.prototype.onKeyDownSpecial=function(b){switch(b.which){case 8:if(""===this.ui.searchInput.children().val())return this.ui.labelFields.children(".label:visible").last().hide();break;case 13:b.preventDefault();b.stopPropagation();$(".selected",this.ui.dropSearch).length?$(".selected a",this.ui.dropSearch).click():this.ui.searchInput.children().val()&&(b={type:"name",
id:0,name:this.ui.searchInput.children().val()},this.ui.labelFields.children(".label-name").remove(),this.ui.labelFields.children(".label-add").before(this.labelTemplate(b)));this.hideDropdown();break;case 27:b.preventDefault();b.stopPropagation();this.hideDropdown();break;case 38:b.preventDefault();b.stopPropagation();this.selectDropLi(-1);break;case 40:b.preventDefault(),b.stopPropagation(),this.selectDropLi(1)}};b.prototype.selectDropLi=function(b){var a,c;c=$("li:visible:has(a)",this.ui.dropSearch).filter(function(){return!0});
if(c.filter(".selected").length){a=c.index(c.filter(".selected"));if(a<c.length-1){if(1===b)return c.filter(".selected:first").removeClass("selected"),c.eq(a+1).addClass("selected").focus();c.filter(".selected:first").removeClass("selected");return c.eq(a-1).addClass("selected").focus()}c.filter(".selected:first").removeClass("selected");return 1===b?c.eq(0).addClass("selected").focus():c.eq(a-1).addClass("selected").focus()}return 1===b?c.eq(0).addClass("selected").focus():c.last().addClass("selected").focus()};
b.prototype.setWidthInput=function(){var b,a,c;a=this.ui.labelFields.width()-6;b=c=0;this.ui.labelFields.children(".label:visible").each(function(a){a=$(this).offset();a.top!==b&&(b=a.top,c=0);return c+=$(this).outerWidth(!0)});return this.ui.searchInput.width(a-c-4)};b.prototype.setHeightSearchMenu=function(){var b,a,c,e;a=this.ui.dropSearch;a.css("height","auto");b=a.outerHeight();c=a.offset().top-$(window).scrollTop();e=$(window).height();return e<b+c+60?a.height(e-c-60):a.css("height","auto")};
b.prototype.delay=function(){var b;b=0;return function(a,c){clearTimeout(b);b=setTimeout(a,c)}}();b.prototype.search=function(b,a,c){return Yapp.request("request",{url:Yapp.API_BASE_URL+"/api/v1/search",type:"GET",context:c,successCallback:a,data:{s:b}})};return b}(Marionette.ItemView)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Common.StubView=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Common.StubView")};b.prototype.modelEvents={change:"render"};return b}(Marionette.ItemView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.PointAddView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){console.log("initialize PointAddView");this.model=new c.Points.Point;this.model.on("invalid",this.showError,this);this.model.on("valid",this.savePoint,
this);c.request("request",{url:"/tags/list",context:this,successCallback:this.setLabels,data:{content:"popular"}});return this.listenTo(c.Map,"load:yandexmap",this.onInitMap)};f.prototype.template=Templates.PointAddView;f.prototype.ui={form:"#pointAddForm",addButton:"#a-add-point",inputName:"input[name=name]",inputAddress:"input[name=address]",inputDescription:"input[name=description]",inputTags:"input[name=tags]",inputPhotos:"input[name=img]",photoList:"#item-photo-list",photoProgress:".photo-loading",
requireLabels:".require-labels",otherLabels:".other-labels",selectedLabels:".selected-labels",placePhotos:".place-photos"};f.prototype.events=function(){return{"click .p-close":"hidePopup","keyup #add-new-place-address":"searchLocation","change #p-add-place-name, #add-new-place-address, #add-new-place-description":"setValue","focus .drop-filter input:text":"showDropList","blur .drop-filter input:text":"hideDropList","mousedown .drop-results > li":"addFromList","click #a-add-point":"validatePoint",
"click .require-labels .label":"addRequireLabel","click .other-labels .label":"addOtherLabel","click .remove-label":"removeLabel","click .clear-selected":"clearLabels","click .selected-labels":"showInput","change .load-photo input:file":"loadImage","click .remove-photo":"removePhoto"}};f.prototype.hidePopup=function(){return c.popup.close()};f.prototype.onRender=function(){this.ui.placePhotos.data("slider",c.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");return this.photoSlider.init({root:this.ui.placePhotos,
visible:6})};f.prototype.onInitMap=function(a){var b,c;this.map=a;c=this;this.popupMap=new ymaps.Map("popup-map-place",{center:a.getCenter(),zoom:11});this.popupMap.controls.add("zoomControl");b={};return this.popupMap.events.add("click",function(a){c.popupMap.geoObjects.remove(b);a=a.get("coordPosition");c.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return c.popupMap.geoObjects.remove(a),!1});b=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",
iconImageSize:[32,36],iconImageOffset:[-16,-38]});c.popupMap.geoObjects.add(b);ymaps.geocode(a).then(function(a){var b;b=!0;a.geoObjects.each(function(a){b&&$("#add-new-place-address").val(a.properties.get("metaDataProperty.GeocoderMetaData.text"));return b=!1});return c.$el.find("#add-new-place-address").change()});c.popupMap.setCenter(a,14,{checkZoomRange:!0,duration:1E3});return c.model.set({longitude:a[1],latitude:a[0]},{silent:!0})})};f.prototype.setLabels=function(a){this.model.set("requireLabels",
a.filter(function(a){return 0===a.level}));return this.model.set("additionalLabels",a.filter(function(a){return 1===a.level}))};f.prototype.addRequireLabel=function(a){this.ui.inputTags.parent().hide();this.ui.requireLabels.append(this.ui.selectedLabels.find(".label-require"));this.ui.selectedLabels.prepend(a.target);return this.model.get("tags").push({id:$(a.target).data("label-id"),name:$(a.target).text(),"class":"require"})};f.prototype.addOtherLabel=function(a){this.ui.inputTags.parent().hide();
this.ui.selectedLabels.prepend(a.target);return this.model.get("tags").push({id:$(a.target).data("label-id"),name:$(a.target).text(),"class":"other"})};f.prototype.removeLabel=function(a){var b;a.preventDefault();b=$(a.target).parent();b.hasClass("label-require")?this.ui.requireLabels.append(b):this.ui.otherLabels.append(b);0===this.ui.selectedLabels.find(".label").length&&this.ui.inputTags.parent().show();a=this.model.get("tags");return this.model.set("tags",a.filter(function(a){return a.id!==b.data("label-id")}))};
f.prototype.clearLabels=function(a){a.preventDefault();this.ui.requireLabels.append(this.ui.selectedLabels.find(".label-require"));this.ui.otherLabels.append(this.ui.selectedLabels.find(".label-other"));this.ui.inputTags.parent().show();return this.model.set("tags",[],{silent:!0})};f.prototype.showInput=function(a){a.preventDefault();this.ui.inputTags.parent().show();return this.ui.inputTags.focus()};f.prototype.loadImage=function(a){var b;a.preventDefault();b=this;if(0!==a.currentTarget.files.length)return this.ui.form.ajaxSubmit({url:"/photos/add",
type:"POST",dataType:"json",clearForm:!1,success:function(a){b.model.get("imgs").push(a[0]);b.ui.photoList.html(Templates.ProgressImage(b.model.toJSON()));b.ui.photoProgress.hide();console.log(b.photoSlider);return b.photoSlider.reinit()},beforeSend:function(a){return b.ui.photoProgress.show()},uploadProgress:function(a,c,e,f){b.ui.photoProgress.find(".value").css("width",f+"%");return b.ui.photoProgress.find(".progress-count").text(f+" %")}})};f.prototype.removePhoto=function(a){a.preventDefault();
return console.log(a.target)};f.prototype.setValue=function(a){var b;b=$.trim($(a.currentTarget).val());a=$(a.currentTarget).attr("data-key");return this.model.set(a,b,{silent:!0})};f.prototype.searchName=function(a){var b;b=$.trim($(a.currentTarget).val());a.preventDefault();if(0<b.length)return a=$(a.currentTarget).closest(".drop-filter").find(".drop-results"),a.find("li").remove(),this.model.search(b,a)};f.prototype.searchLocation=function(a){var b;a.preventDefault();a=$(a.currentTarget);if(0<
a.val().length)return b=a.closest(".drop-filter").find(".drop-results"),ymaps.geocode(a.val(),{boundedBy:this.map.getBounds(),strictBounds:!1}).then(function(a){var c;c=[];b.find("li").remove();a.geoObjects.each(function(a){var b,d,e,f;e=a.properties;f=e.get("text");d=e.get("name");b=e.get("description");e=$.map(e.get("metaDataProperty.PSearchObjectMetaData")&&e.get("metaDataProperty.PSearchObjectMetaData.Tags")||[],function(a){return a.tag});a=a.geometry.getCoordinates();return c.push({name:f||[d,
b].concat(e).filter(Boolean).join(", "),coords:JSON.stringify(a)})});return _.each(c,function(a){return b.append("<li data-coords='"+a.coords+"'>"+a.name+"</li>")})})};f.prototype.showDropList=function(a){return $(a.currentTarget).closest(".drop-filter").find(".drop-results").show()};f.prototype.hideDropList=function(a){$(a.currentTarget).closest(".drop-filter").find(".drop-results").hide().css("z-index",20);return $(a.currentTarget).closest(".input-line").css("z-index",1)};f.prototype.addFromList=
function(a){var b,c,e,f;b=$(a.currentTarget).text();$(a.currentTarget).closest(".drop-filter").find("input:text").val(b).change();a=$(a.currentTarget).data("coords");if(!_.isEmpty(a))return f=this,this.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return f.popupMap.geoObjects.remove(a),!1}),e=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",iconImageSize:[32,36],iconImageOffset:[-16,-38]}),c=a[1],b=a[0],this.popupMap.setCenter(a,14,
{checkZoomRange:!0,duration:1E3}),this.model.set({longitude:c,latitude:b},{silent:!0}),this.popupMap.geoObjects.add(e)};f.prototype.validatePoint=function(a){a.preventDefault();this.model.set();if(this.model.isValid())return this.$el.find("[data-key]").removeClass("validation-error"),this.model.trigger("valid")};f.prototype.savePoint=function(){return c.request("request",{url:"/points/add",context:this,successCallback:this.successSave,type:"POST",data:{name:this.model.get("name"),address:this.model.get("address"),
description:this.model.get("description"),"tags[]":_.pluck(this.model.get("tags"),"id"),"imgs[]":_.pluck(this.model.get("imgs"),"id"),longitude:this.model.get("longitude"),latitude:this.model.get("latitude"),ypi:0}})};f.prototype.showError=function(a,b){var c,e,f,g;this.$el.find("[data-key]").removeClass("validation-error");g=[];e=0;for(f=b.length;e<f;e++)c=b[e],g.push(this.$el.find("[data-key="+c+"]").addClass("validation-error"));return g};f.prototype.successSave=function(){c.popup.close();return console.log("success")};
return f}(c.Common.PopupView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.PointDetailView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){console.log("initialize PointDetailView");this.bigPhotoTemplate=Templates.BigPhoto;return this.user=c.user};f.prototype.template=Templates.PointDetailView;
f.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos",commentArea:".toggleArea textarea",map:".map"}};f.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto","click .bp-photo .a-like":"likePhoto","click #big-photo > .bp-photo":"nextPhoto","click #right-panel .a-like":"like","click #commentForm textarea":"focusCommentTextarea",
"click .a-remove-comment":"removeComment","submit #commentForm":"submitCommentForm","change #addPhotoForm input:file":"addPhoto","click .remove-photo":"removePhoto","click a[href=#tab-map]":"renderMap"}};f.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON()}};f.prototype.onRender=function(){this.$el.find("[data-toggle=tooltip]").tooltip();this.ui.placePhotos.data("slider",
c.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.showPhoto();this.photoSlider.init({root:this.ui.placePhotos,visible:4});return this.renderSocial()};f.prototype.renderSocial=function(){void 0!==window.FB&&FB.XFBML.parse();if(void 0!==window.VK)return VK.Widgets.Like("vk_like_point",{type:"mini",pageTitle:this.model.get("name"),pageDescription:this.model.get("description"),pageImage:this.model.get("imgs")[0].thumbnail104x104,text:"\u042f\u0441\u0435\u043d\u041f\u0443\u0442\u044c \u0437\u043d\u0430\u0435\u0442 \u0432\u0441\u0435 - "+
this.model.get("name")},1E3+this.model.get("id"))};f.prototype.renderMap=function(a){var b,c;if(!this.map)return this.ui.map.height(500),a=[this.model.get("latitude"),this.model.get("longitude")],b=null!=(c=this.model.get("icon"))?c:"/media/icons/place-none.png",this.map=new ymaps.Map("popup-map",{center:a,zoom:14}),c=new ymaps.Placemark(a,{id:this.model.get("id")},{iconImageHref:b,iconImageSize:[32,36],iconImageOffset:[-16,-38]}),this.map.geoObjects.add(c)};f.prototype.moreDescription=function(a){var b;
a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};f.prototype.showPhoto=function(a){var b,e;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),a=$(a.currentTarget),e=a.data("photo-id"),b=_.find(this.model.get("imgs"),function(a){return a.id===
e})):this.options.photoId?(e=parseInt(this.options.photoId,10),b=_.find(this.model.get("imgs"),function(a){return a.id===e})):(b=this.model.get("imgs")[0],e=b.id);a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===e});$(a).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(b,{user:this.user.toJSON()})));this.ui.bigPhoto.find("[data-toggle=tooltip]").tooltip();this.options.photoId=e;return c.Points.router.navigate($(a).children().attr("href"))};f.prototype.nextPhoto=
function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")&&!this.photoSlider.next.hasClass("disabled")?this.photoSlider.move(1):a||this.photoSlider.reinit();this.options.photoId=a;return this.showPhoto()};f.prototype.focusCommentTextarea=function(a){a.preventDefault();return $(a.currentTarget).parent().addClass("focus")};f.prototype.unfocusCommentTextarea=
function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");return a.val("")};f.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};f.prototype.likePhoto=function(a){var b;a.preventDefault();a.stopPropagation();a=$(a.currentTarget);b=a.data("photo-id");return this.model.likePhoto(a,b,this.successLikePhoto,this)};f.prototype.submitCommentForm=function(a){var b;a.preventDefault();$(a.currentTarget);if(b=this.$("textarea").val())return a=
this.$("textarea").data("photo-id"),this.model.addCommentPhoto(a,b,this.successAddComment,this)};f.prototype.removeComment=function(a){a.preventDefault();a=$(a.currentTarget).parents(".item-comment").data("comment-id");return this.model.removeCommentPhoto(a,this.successRemoveComment,this)};f.prototype.addPhoto=function(a){a.preventDefault();$(a.currentTarget);a=$("#addPhotoForm")[0];a=new FormData(a);return this.model.addPhoto(a,this.successAddPhoto,this)};f.prototype.removePhoto=function(a){a.preventDefault();
a.stopPropagation();a=$(a.currentTarget).parents(".item-photo").data("photo-id");return this.model.removePhoto(a,this.successRemovePhoto,this)};f.prototype.successLike=function(a,b){var c,e,f;f=this;e=this.model.get("likeusers");if(b.hasClass("marked"))return c=_.find(e,function(a){return a.id===f.user.id}),c=_.indexOf(e,c),e.splice(c,1),this.model.set({likeusers:e,likes_count:this.model.get("likes_count")-1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1);e.push(this.user);
this.model.set({likesers:e,likes_count:this.model.get("likes_count")+1});return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};f.prototype.successLikePhoto=function(a,b){var c,e,f,g,h,t,l;t=a[0];l=this;e=this.model.get("imgs");c=_.find(e,function(a){return a.id===t.id});g=_.indexOf(e,c);e.splice(g,1);h=c.likeusers;b.hasClass("marked")?(f=_.find(h,function(a){return a.id===l.user.id}),f=_.indexOf(h,f),h.splice(f,1),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-
1)):(h.push(this.user),this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1));c.likeusers=h;e.splice(g,0,c);this.model.set("imgs",e);this.options.photoId=c.id;return this.model.trigger("change")};f.prototype.successAddComment=function(a){var b;b=this.$("textarea").data("photo-id");_.find(this.model.get("imgs"),function(a){return a.id===b}).comments.push(_.extend(a[0],{author:this.user.toJSON()}));this.user.set("count_commented_objects",this.user.get("count_commented_objects")+
1);return this.model.trigger("change")};f.prototype.successRemoveComment=function(a,b){var c,e,f,g;g=this.$("textarea").data("photo-id");f=_.find(this.model.get("imgs"),function(a){return a.id===g});e=f.comments;c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,1);f.comments=e;this.user.set("count_commented_objects",this.user.get("count_commented_objects")-1);return this.model.trigger("change")};f.prototype.successAddPhoto=function(a){var b;b=this.model.get("imgs");b.push(a[0]);
this.model.set("imgs",b);return this.model.trigger("change")};f.prototype.successRemovePhoto=function(a,b){var c,e;e=this.model.get("imgs");c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,1);this.model.set("imgs",e);this.options.photoId=e[0].id;return this.model.trigger("change")};return f}(c.Common.PopupView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.PointItemView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.tagName="article";f.prototype.className="item";f.prototype.template=Templates.PointItemView;f.prototype.initialize=function(){console.log("initializing Yapp.Points.PointItemView");
return this.user=c.user};f.prototype.modelEvents={change:"render"};f.prototype.templateHelpers=function(){return{user:this.user.toJSON()}};f.prototype.onBeforeRender=function(){return"collection"===this.model.get("type")?this.$el.addClass("item-collection"):this.$el.addClass("item-place")};f.prototype.events={"click .photo .a-like":"like","click .photo .a-collection":"addToCollection","click .yp-title":"toggleYpInfo","click .yp-info":"toggleYpInfo"};f.prototype.ui={ypInfo:".yp-info",ypTitle:".yp-title"};
f.prototype.like=function(a){if(this.user.get("authorized"))return a.preventDefault(),a=$(a.currentTarget),this.model.like(a,this.successLike,this);c.vent.trigger("user:notauthorized")};f.prototype.successLike=function(a,b){var c,e,f;f=this;e=this.model.get("likeusers");if(b.hasClass("marked"))return c=_.find(e,function(a){return a.id===f.user.id}),c=_.indexOf(e,c),e.splice(c,1),this.model.set("likeusers",e),this.model.set("likes_count",this.model.get("likes_count")-1),this.user.set("count_liked_objects",
this.user.get("count_liked_objects")-1);e.push(this.user);this.model.set("likes_count",this.model.get("likes_count")+1);this.model.set("likesers",e);return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};f.prototype.addToCollection=function(a){if(this.user.get("authorized"))return a.preventDefault(),$(a.currentTarget);c.vent.trigger("user:notauthorized")};f.prototype.toggleYpInfo=function(a){this.ui.ypInfo.toggle();return this.ui.ypTitle.toggle()};return f}(Marionette.ItemView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.PointListView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.template=Templates.PointListView;f.prototype.className="items";f.prototype.id="items";f.prototype.itemView=c.Points.PointItemView;f.prototype.emptyView=c.Points.PointEmptyView;
f.prototype.initialize=function(){console.log("initializing Yapp.Points.PointListView");_.bindAll(this,"loadResults");return this.infiniScroll=new Backbone.InfiniScroll(this.collection,{success:this.loadResults,scrollOffset:350,includePage:!0,extraParams:{content:this.options.content_type}})};f.prototype.onRender=function(){return $(window).trigger("scroll")};f.prototype.onClose=function(){return this.infiniScroll.destroy()};f.prototype.onShow=function(){this.$el.find("[data-toggle=tooltip]").tooltip();
return this.wall=new Masonry(this.el,{columnWidth:241,isFitWidth:!0})};f.prototype.loadResults=function(a,b){return this.onShow()};return f}(Marionette.CompositeView)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Points.PointPanelView=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointPanelView")};b.prototype.template=Templates.PointPanelView;b.prototype.modelEvents={change:"render"};
b.prototype.templateHelpers=function(){return{active:this.options.content_type||"popular"}};return b}(Marionette.ItemView)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.SetDetailView=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){var a;console.log("initialize SetDetailView");this.bigPhotoTemplate=Templates.BigPhoto;this.user=c.user;a=parseInt(this.options.pointId,10);
return this.activePoint=_.find(this.model.get("points"),function(b){return b.id===a})||this.model.get("points")[0]};f.prototype.template=Templates.SetDetailView;f.prototype.className="popup p-collection";f.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos"}};f.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto","click #big-photo > .bp-photo":"nextPhoto",
"click li.choose_place > a":"choosePlace","click .stp-like":"like"}};f.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON(),activePoint:this.activePoint}};f.prototype.onRender=function(){this.ui.placePhotos.data("slider",c.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.$el.find("[data-toggle=tooltip]").tooltip();this.showPhoto();return this.photoSlider.init({root:this.ui.placePhotos,
visible:4})};f.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};f.prototype.showPhoto=function(a,b){var e,f;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),e=$(a.currentTarget),b=e.data("photo-id"),
f=_.find(this.activePoint.imgs,function(a){return a.id===b})):b?(b=parseInt(b,10),f=_.find(this.activePoint.imgs,function(a){return a.id===b})):this.options.photoId?(b=parseInt(this.options.photoId,10),f=_.find(this.activePoint.imgs,function(a){return a.id===b}),this.options.photoId=!1):(b=parseInt(this.options.photoId,10),f=_.find(this.activePoint.imgs,function(a){return a.id===b}),f=this.activePoint.imgs[0],b=f.id);e=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});$(e).addClass("current");
this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(f,{user:this.user.toJSON()})));return c.Points.router.navigate($(e).children().attr("href"))};f.prototype.nextPhoto=function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")?this.photoSlider.move(1):this.photoSlider.next.is(":visible")&&this.photoSlider.reinit();return this.showPhoto(null,
a)};f.prototype.choosePlace=function(a){var b;a.preventDefault();b=$(a.currentTarget).data("id");this.activePoint=_.find(this.model.get("points"),function(a){return a.id===b});return this.model.trigger("change")};f.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};f.prototype.successLike=function(a,b){var c,e,f;f=this;e=this.model.get("likeusers");if(b.hasClass("marked"))return c=_.find(e,function(a){return a.id===f.user.id}),c=_.indexOf(e,
c),e.splice(c,1),this.model.set({likeusers:e,likes_count:this.model.get("likes_count")-1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1);e.push(this.user);this.model.set({likesers:e,likes_count:this.model.get("likes_count")+1});return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};return f}(c.Common.PopupView)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Common.Router=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Common.Router")};b.prototype.appRoutes={user:"something"};return b}(Marionette.AppRouter)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Map.Router=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Map.Router")};b.prototype.appRoutes={map:"showMap"};return b}(Marionette.AppRouter)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Points.Router=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Points.Router")};b.prototype.appRoutes={"":"showContent",popular:"showPopular","new":"showNew","point/add":"addPoint",
"point/:id":"showPointDetail","set/:id":"showSetDetail","set/:id/point/:id":"showSetPhoto","set/:id/point/:point_id/photo/:photo_id":"showSetPhoto","point/:id/photo/:photo_id":"showPointPhoto"};return b}(Marionette.AppRouter)}).call(this);
(function(){var c,g={}.hasOwnProperty,h=function(c,b){function f(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);f.prototype=b.prototype;c.prototype=new f;c.__super__=b.prototype;return c};window.Yapp.Common.Controller=function(e){function b(){return c=b.__super__.constructor.apply(this,arguments)}h(b,e);b.prototype.initialize=function(){return console.log("initializing Yapp.Common.Controller")};b.prototype.something=function(){};return b}(Marionette.Controller)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Map.Controller=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){console.log("initializing Yapp.Map.Controller");return c.map.show(new c.Map.MapView)};f.prototype.showMap=function(){return c.execute("toggleMap",
"open")};return f}(Marionette.Controller)}).call(this);
(function(){var c,g,h={}.hasOwnProperty,e=function(b,c){function a(){this.constructor=b}for(var d in c)h.call(c,d)&&(b[d]=c[d]);a.prototype=c.prototype;b.prototype=new a;b.__super__=c.prototype;return b};c=window.Yapp;c.Points.Controller=function(b){function f(){return g=f.__super__.constructor.apply(this,arguments)}e(f,b);f.prototype.initialize=function(){return console.log("initializing Yapp.Points.Controller")};f.prototype.showContent=function(a){a=a||"popular";console.log("Show content "+a+" in Points module");
c.popup.close();this.layout=new c.Points.MainLayout({content_type:a});return c.content.show(this.layout)};f.prototype.showPopular=function(){this.layout.options.content_type="popular";return c.content.show(this.layout)};f.prototype.showNew=function(){this.layout.options.content_type="new";return c.content.show(this.layout)};f.prototype.addPoint=function(){return c.popup.show(new c.Points.PointAddView({id:"p-add-place"}))};f.prototype.showPointDetail=function(a,b){return(new c.Points.Point({unid:a})).fetch({success:function(a,
e){return c.popup.show(new c.Points.PointDetailView({model:a,photoId:b}))}})};f.prototype.showSetDetail=function(a,b,e){return(new c.Points.Set({unid:a})).fetch({success:function(a,f){return c.popup.show(new c.Points.SetDetailView({model:a,pointId:b,photoId:e}))}})};f.prototype.showPointPhoto=function(a,b){this.showContent();return this.showPointDetail(a,b)};f.prototype.showSetPhoto=function(a,b,c){this.showContent();return this.showSetDetail(a,b,c)};return f}(Marionette.Controller)}).call(this);
(function(){var c;c=window.Yapp;c.addInitializer(function(){console.log("application initializing");this.addRegions({header:"#header",map:"#yandex-map",content:"#content",footer:"#footer",popup:c.Common.PopupRegion});this.commands.setHandler("toggleMap",function(g){c.map.$el.toggleClass("map-opened");$("#wrap").toggleClass("map-opened");g&&(c.map.$el.addClass("map-opened"),$("#wrap").addClass("map-opened"));g="\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443"===c.map.$el.find(".a-toggle").html()?
"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443";return c.map.$el.find(".a-toggle").html(g)});return this.reqres.setHandler("request",function(g){var h;h=c.API_BASE_URL+g.url;h=g.url;console.log([""+g.type+" request to "+h+" with data:",g.data]);return $.ajax({url:h,type:g.type,dataType:g.dataType||"json",processData:g.processData,contentType:g.contentType,data:g.data,success:function(c){var b;
console.log(["response from API: ",c]);if(g.successCallback)return b=[c],_.each(g.params,function(c){return b.push(c)}),g.successCallback.apply(g.context,b)}})})});c.on("start",function(){console.log("starting application");this.user=new c.User.Profile(USER);this.runApplication();return $(document).on("click","a.nonav",function(c){var h,e;h=$(this).attr("href");e=this.protocol+"//";if(h&&h.slice(0,e.length)!==e&&0!==h.indexOf("javascript:"))return c.preventDefault(),c.stopPropagation(),Backbone.history.navigate(h,
!0)})});c.runApplication=function(){this.Common.start();"pins"===this.user.get("last_state")?(this.Points.start(),this.Map.start()):(this.Map.start(),this.Points.start());this.vent.on("user:notauthorized",function(){return c.popup.show(new c.Common.AuthPopupView)});this.vent.on("logout",function(){return window.location.replace("/")});return Backbone.history.start({pushState:!0})};c.start()}).call(this);
