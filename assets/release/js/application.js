(function(){var b;window.Yapp=new Marionette.Application;window.Yapp.API_BASE_URL="/api";window.Yapp.API_BASE_URL="";window.Yapp.YA_MAP_URL="http://api-maps.yandex.ru/2.0-stable/?load=package.full&lang=ru-RU&wizard=constructor";window.Yapp.DEBUG=!1;jQuery(document).ajaxSend(function(b,g,c){var a;b=function(d){var f,c,b,h,a,e;f=null;if(document.cookie&&""!==document.cookie){c=document.cookie.split(";");h=function(c){c=jQuery.trim(c);if(c.substring(0,d.length+1)===d+"=")return f=decodeURIComponent(c.substring(d.length+
1))};a=0;for(e=c.length;a<e;a++)b=c[a],h(b)}return f};a=function(d){var f,c;f=document.location.host;c=document.location.protocol;f="//"+f;c+=f;return d===c||d.slice(0,c.length+1)===c+"/"||d===f||d.slice(0,f.length+1)===f+"/"||!/^(\/\/|http:|https:).*/.test(d)};if(!/^(GET|HEAD|OPTIONS|TRACE)$/.test(c.type.toUpperCase())&&a(c.url))return g.setRequestHeader("X-CSRFToken",b("csrftoken"))});b="undefined"===typeof window.console?{}:window.console;if(!window.Yapp.DEBUG||"undefined"===typeof b.log)b.log=
b.error=b.info=b.debug=b.warn=b.trace=b.dir=b.dirxml=b.group=b.groupEnd=b.time=b.timeEnd=b.assert=b.profile=function(){}}).call(this);this.Templates=this.Templates||{};
this.Templates.BigPhoto=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};var d=this.escapeExpression;b='<div class="bp-photo" data-photo-id="';(c=g.id)?c=c.call(e,{hash:{},data:a}):(c=e.id,c="function"===typeof c?c.apply(e):c);b+=d(c)+'">\n  <img src="';(c=g.thumbnail560)?c=c.call(e,{hash:{},data:a}):(c=e.thumbnail560,c="function"===typeof c?c.apply(e):c);b+=d(c)+'" alt="">\n\n  <div class="bp-add-like">\n    <img src="/media/'+d((c=(c=e.author,
null==c||!1===c?c:c.avatar),"function"===typeof c?c.apply(e):c))+'" alt="" width="22" height="22" class="avatar">\n    <span class="bp-name">'+d((c=(c=e.author,null==c||!1===c?c:c.first_name),"function"===typeof c?c.apply(e):c))+" "+d((c=(c=e.author,null==c||!1===c?c:c.last_name),"function"===typeof c?c.apply(e):c))+'</span>\n    <a href="#" class="a-like"></a>\n  </div>\n</div>\n\n<div class="bp-comments">\n  <div class="toggle-block a-toggle-up">\n    ';if((e=g.each.call(e,e.comments,{hash:{},inverse:this.noop,
fn:this.program(1,function(f,c){var b,h;b='\n    <div class="item-comment" data-comment-id="';(h=g.id)?h=h.call(f,{hash:{},data:c}):(h=f.id,h="function"===typeof h?h.apply(f):h);b+=d(h)+'">\n      <img src="/media/'+d((h=(h=f.author,null==h||!1===h?h:h.avatar),"function"===typeof h?h.apply(f):h))+'" alt="" width="29" height="30" class="avatar">\n\n      <div class="comment-body">\n        <div class="comment-author">'+d((h=(h=f.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(f):
h))+" "+d((h=(h=f.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(f):h))+"</div>\n        <p>";(h=g.txt)?h=h.call(f,{hash:{},data:c}):(h=f.txt,h="function"===typeof h?h.apply(f):h);b+=d(h)+'</p>\n        <div class="comment-date">';(h=g.created)?h=h.call(f,{hash:{},data:c}):(h=f.created,h="function"===typeof h?h.apply(f):h);return b+=d(h)+'</div>\n      </div>\n\n      <div class="action">\n        \x3c!--  <a href="#" class="a-complaint-comment" data-tooltip="\u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a> --\x3e\n      </div>\n    </div>\n    '},
a),data:a}))||0===e)b+=e;return b+'\n\n    <div class="add-comment">\n      <form action="#">\n        <div class="ac-block">\n          <img src="/media/avatar/f3984dc5a78d4473b82b1e1b3a9a56df.jpeg" alt="" width="29" height="30" class="avatar">\n          <div class="ac-body">\n            <div class="toggle-area">\n              <textarea rows="3" cols="40" placeholder="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"></textarea>\n              <input type="submit" value="">\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\x3c!-- end .add-comment --\x3e\n\n  </div>\x3c!-- end .toggle-block a-toggle-up --\x3e\n</div>\x3c!-- end .bp-comments --\x3e\n'});
this.Templates.FooterView=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<a href="#" class="a-toggle" title="\u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c">&nbsp;</a>\n<div class="f-body">\n    <ul>\n        <li><a href="#" class="aboutProject nonav">\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435</a></li>\n        <li><a href="#" class="contacts nonav">\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b</a></li>\n        <li><a href="#">\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435</a></li>\n    </ul>\n\n    <div class="apps">\n        <a href="#" class="app-android">&nbsp;</a>\n        <a href="#" class="app-store">&nbsp;</a>\n    </div>\n\n    <div class="share">\n        <div id="vk_like"></div>\n        <div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n    </div>\n\n    <div class="f-social">\n        <a href="http://vk.com/yasenput" target="_blank" class="a-vk">&nbsp;</a>\n        <a href="http://www.facebook.com/yasenput" target="_blank" class="a-fb">&nbsp;</a>\n    </div>\n</div>\n'});
this.Templates.HeaderView=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};var d,f=this.escapeExpression;b='<div class="wrap">\n    <a href="/" class="logo">\u044f\u0441\u0435\u043d \u043f\u0443\u0442\u044c</a>\n\n    <nav>\n        <ul class="nav">\n            <li class="item-places active">\n                <a href="#">\u041c\u0435\u0441\u0442\u0430</a>\n            </li>\n\n            <li class="item-want">\n              ';if((c=g["if"].call(e,
e.authorized,{hash:{},inverse:this.program(3,function(f,d){return'\n                <a href="/login/vkontakte-oauth2" class="a-enter">\u0412\u0445\u043e\u0434</a>\n              '},a),fn:this.program(1,function(f,d){return'\n                <a href="/logout/" class="a-enter">\u0412\u044b\u0445\u043e\u0434</a>\n              '},a),data:a}))||0===c)b+=c;b+="\n            </li>\n        </ul>\n    </nav>\n\n    ";if((c=g["if"].call(e,e.authorized,{hash:{},inverse:this.noop,fn:this.program(5,function(d,
c){var b,a;b=""+('\n      <div class="auth user" data-user-id="'+f((a=(a=d.user,null==a||!1===a?a:a.id),"function"===typeof a?a.apply(d):a))+'">\n        <img src="');(a=g.avatar)?a=a.call(d,{hash:{},data:c}):(a=d.avatar,a="function"===typeof a?a.apply(d):a);b+=f(a)+'" alt="" class="avatar" width="30" height="30">\n        <div class="user-body">\n          <div class="user-name"><a href="#">';(a=g.first_name)?a=a.call(d,{hash:{},data:c}):(a=d.first_name,a="function"===typeof a?a.apply(d):a);b+=f(a)+
" ";(a=g.last_name)?a=a.call(d,{hash:{},data:c}):(a=d.last_name,a="function"===typeof a?a.apply(d):a);b+=f(a)+'</a></div>\n          <div class="user-likes">\n            <span class="ico ico-like-small"></span>\n            ';(a=g.count_liked_objects)?a=a.call(d,{hash:{},data:c}):(a=d.count_liked_objects,a="function"===typeof a?a.apply(d):a);b+=f(a)+'\n            <span class="ico ico-comment-small"></span>\n            ';(a=g.count_commented_objects)?a=a.call(d,{hash:{},data:c}):(a=d.count_commented_objects,
a="function"===typeof a?a.apply(d):a);return b+=f(a)+"\n          </div>\n        </div>\n      </div>\n    "},a),data:a}))||0===c)b+=c;b+='\n\n    <div class="search">\n        <form action="#">\n            <input type="submit" value="\u041d\u0430\u0439\u0442\u0438">\n\n            <div class="label-fields">\n              ';if((d=g["if"].call(e,(c=e.location,null==c||!1===c?c:c.country),{hash:{},inverse:this.noop,fn:this.program(7,function(d,c){var a,b;return a=""+('\n              <div class="label label-place">\n                '+
f((b=(b=d.location,null==b||!1===b?b:b.country),"function"===typeof b?b.apply(d):b))+'\n                <button class="remove-label"></button>\n              </div>\n              ')},a),data:a}))||0===d)b+=d;b+="\n\n              ";if((d=g["if"].call(e,(c=e.location,null==c||!1===c?c:c.region),{hash:{},inverse:this.noop,fn:this.program(9,function(d,c){var a,b;return a=""+('\n              <div class="label label-place">\n                '+f((b=(b=d.location,null==b||!1===b?b:b.region),"function"===
typeof b?b.apply(d):b))+'\n                <button class="remove-label"></button>\n              </div>\n              ')},a),data:a}))||0===d)b+=d;b+="\n\n              ";if((d=g["if"].call(e,(c=e.location,null==c||!1===c?c:c.city),{hash:{},inverse:this.noop,fn:this.program(11,function(d,c){var a,b;return a=""+('\n              <div class="label label-place">\n                '+f((b=(b=d.location,null==b||!1===b?b:b.city),"function"===typeof b?b.apply(d):b))+'\n                <button class="remove-label"></button>\n              </div>\n              ')},
a),data:a}))||0===d)b+=d;return b+'\n\n              <div class="label label-add">\n                \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c\n                <span>+</span>\n              </div>\n              <span class="text-field"><input type="text" id="multisearch-text" autocomplete="off" onInput=\'update_multisearch()\'></span>\n            </div>\n\n            <button type="button" class="clear-input"></button>\n        </form>\n\n        <div class="drop-search">\n            <button class="toggle-panel"></button>\n\n            <div class="inner-wrap">\n                <ul class="item item-place" id="multisearch-places">\n                    <li class="item-title">\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f <sup></sup></li>\n                </ul>\n                <ul class="item item-name" id="multisearch-points">\n                    <li class="item-title">\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 <sup></sup></li>\n                </ul>\n                <ul class="item item-labels" id="multisearch-tags">\n                    <li class="item-title">\u041c\u0435\u0442\u043a\u0438 <sup></sup></li>\n                </ul>\n                <ul class="item item-users" id="multisearch-users">\n                    <li class="item-title">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <sup></sup></li>\n                </ul>\n            </div>\n\n        </div>\n    </div>\n</div>\n'});
this.Templates.MapView=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div id="mainmap" style="width: 100%; height: 477px;"></div>\n\n<div class="m-ico-group"></div>\n\n<div class="toggle-bottom">\n  <a href="#" class="a-toggle">\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n</div>\n'});
this.Templates.PointAddView=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};var d=this.escapeExpression;b='<div class="p-top">\n    <h3>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</h3>\n    <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="clearfix p-body">\n    <form action="" id="pointAddForm" enctype="multipart/form-data" method="POST">\n        <div class="input-line" style="z-index: 4;">\n            <div class="required">*</div>\n            <div class="drop-filter">\n              <input name="address" type="text" data-key="address" autocomplete="off" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 (\u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0440\u0430\u0439\u043e\u043d, \u043d\u0430\u0441\u0435\u043b\u0451\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442)" id="add-new-place-address" value="';
(c=g.address)?c=c.call(e,{hash:{},data:a}):(c=e.address,c="function"===typeof c?c.apply(e):c);b+=d(c)+'">\n                <ul class="drop-results">\n                </ul>\n            </div>\n        </div>\n\n        <div class="input-line" style="z-index: 1;">\n            <div class="required">*</div>\n\n            <div class="drop-filter">\n\n              <input name="name" id="p-add-place-name" type="text" class="search-matches" data-key="name" autocomplete="off" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430" value="';
(c=g.name)?c=c.call(e,{hash:{},data:a}):(c=e.name,c="function"===typeof c?c.apply(e):c);b+=d(c)+'">\n\n                <ul class="drop-results"></ul>\n            </div>\n        </div>\n\n        <div class="input-line" style="z-index: 1;">\n            <div class="required"></div>\n\n            <div class="drop-filter">\n              <input name="description" type="text" data-key="description" maxlength="60" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 (\u043d\u0435 \u0431\u043e\u043b\u0435\u0435 60 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432) ..." class="input-place-desc" id="add-new-place-description" value="';
(c=g.description)?c=c.call(e,{hash:{},data:a}):(c=e.description,c="function"===typeof c?c.apply(e):c);b+=d(c)+'">\n            </div>\n        </div>\n\n        <div class="wide-box">\n            <ul class="clearfix p-tabs">\n              <li class="active"><a href="#tab-photos-place" data-toggle="tab" _data-target="tab-photos-place" class="active">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438</a></li>\n              <li><a href="#tab-map-place" data-toggle="tab" _data-target="tab-map-place">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n              \x3c!--<li><a href="#tab-reviews-place" data-toggle="tab" _data-target="tab-reviews-place">\u041e\u0442\u0437\u044b\u0432\u044b</a></li>--\x3e\n              <li><div class="shadow"></div></li>\n            </ul>\n\n            <div class="tabs-content">\n                <div id="tab-photos-place" data-key="photos" class="tab-pane active">\n                  <div class="clearfix p-photos">\n\n                    <div id="item-photo-list">\n                      ';
if((c=g.each.call(e,e.imgs,{hash:{},inverse:this.noop,fn:this.program(1,function(f,c){var a,b;a='\n                      <div class="item-photo" data-photo-id="';(b=g.id)?b=b.call(f,{hash:{},data:c}):(b=f.id,b="function"===typeof b?b.apply(f):b);a+=d(b)+'">\n                        <a href="';(b=g.thumbnail560)?b=b.call(f,{hash:{},data:c}):(b=f.thumbnail560,b="function"===typeof b?b.apply(f):b);a+=d(b)+'">\n                          <img src="';(b=g.thumbnail130x130)?b=b.call(f,{hash:{},data:c}):
(b=f.thumbnail130x130,b="function"===typeof b?b.apply(f):b);return a+=d(b)+'" alt="" width="130" height="130">\n                        </a>\n                        <button type="button" class="remove-photo"></button>\n                      </div>\n                      '},a),data:a}))||0===c)b+=c;b+='\n                    </div>\n\n                    <div class="item-photo photo-loading" style="display:none;">\n                      <div class="load-status">\n                        <div class="progress-loading">\n                          <div style="width: 0%;" class="value"></div>\n                        </div>\n                        <span class="progress-count">0%</span>\n                      </div>\n                    </div>\n\n                    <div class="item-photo load-photo">\n                      <input name="img" type="file" id="inputImage" >\n                    </div>\n                  </div>\n                </div>\x3c!-- end #tab-photos-place --\x3e\n\n                <div id="tab-map-place" class="tab-pane">\n                  <div id="popup-map-place" style="width:560px; height:510px"></div>\n                </div>\x3c!-- end #tab-map-place --\x3e\n\n                <div id="tab-reviews-place" class="tab-pane">\n                  <div class="add-comment">\n                    <div class="ac-block">\n                      <img src="'+
d((c=(c=(c=(c=e.user,null==c||!1===c?c:c.person),null==c||!1===c?c:c.avatar),null==c||!1===c?c:c.url),"function"===typeof c?c.apply(e):c))+'" alt="" width="29" height="30" class="avatar">\n\n                      <div class="ac-body">\n                        <div class="toggle-area">\n                          <textarea rows="3" cols="40" placeholder="\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043e\u0442\u0437\u044b\u0432"></textarea>\n                        </div>\n                        <div class="align-r review-buttons">\n                          <a href="#" class="r-positive" data-status="+">\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0437\u044b\u0432</a>\n                          <a href="#" class="r-negative" data-status="-">\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0437\u044b\u0432</a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\x3c!-- end #tab-reviews-place --\x3e\n\n                <div class="clear"></div>\n            </div>\n        </div>\n\n        <div class="input-line">\n          <section class="clearfix pop-labels" data-key="tags">\n            <h4>\u0427\u0442\u043e \u044d\u0442\u043e \u0437\u0430 \u043c\u0435\u0441\u0442\u043e?</h4>\n\n            <div class="require-labels">\n              ';
if((c=g.each.call(e,e.requireLabels,{hash:{},inverse:this.noop,fn:this.program(3,function(f,b){var c,a;c='\n              <div class="label label-require" data-label-id="';(a=g.id)?a=a.call(f,{hash:{},data:b}):(a=f.id,a="function"===typeof a?a.apply(f):a);c+=d(a)+'" >';(a=g.name)?a=a.call(f,{hash:{},data:b}):(a=f.name,a="function"===typeof a?a.apply(f):a);return c+=d(a)+'\n                <button class="remove-label"></button>\n              </div>\n              '},a),data:a}))||0===c)b+=c;b+='\n            </div>\n          </section>\n        </div>\n\n        <div class="input-line" style="z-index: 1;">\n          <div class="drop-filter select-labels">\n            <div class="p-labels drop-labels">\n              <div class="clearfix selected-labels" style="">\n\n                ';
if((c=g.each.call(e,e.tags,{hash:{},inverse:this.noop,fn:this.program(5,function(f,b){var a,c;a='\n                <div class="label label-';(c=g["class"])?c=c.call(f,{hash:{},data:b}):(c=f["class"],c="function"===typeof c?c.apply(f):c);a+=d(c)+'" data-label-id="';(c=g.id)?c=c.call(f,{hash:{},data:b}):(c=f.id,c="function"===typeof c?c.apply(f):c);a+=d(c)+'" >';(c=g.name)?c=c.call(f,{hash:{},data:b}):(c=f.name,c="function"===typeof c?c.apply(f):c);return a+=d(c)+'\n                  <button class="remove-label"></button>\n                </div>\n                '},
a),data:a}))||0===c)b+=c;b+='\n\n                <span class="text-field" style="display: inline;"><input name="tags" type="text" placeholder="\u041f\u043e\u0438\u0441\u043a \u043c\u0435\u0442\u043e\u043a ..."></span>\n              </div>\n              <input type="button" value=" " class="clear-selected">\n            </div>\n          </div>\n        </div>\n\n        <div class="input-line">\n          <section class="clearfix pop-labels" data-key="tags">\n            <h4>\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u043c\u0435\u0442\u043a\u0438:</h4>\n\n            <div class="other-labels">\n              ';
if((c=g.each.call(e,e.additionalLabels,{hash:{},inverse:this.noop,fn:this.program(7,function(f,c){var a,b;a='\n              <div class="label label-other" data-label-id="';(b=g.id)?b=b.call(f,{hash:{},data:c}):(b=f.id,b="function"===typeof b?b.apply(f):b);a+=d(b)+'" >';(b=g.name)?b=b.call(f,{hash:{},data:c}):(b=f.name,b="function"===typeof b?b.apply(f):b);return a+=d(b)+'\n                <button class="remove-label"></button>\n              </div>\n              '},a),data:a}))||0===c)b+=c;return b+
'\n            </div>\n          </section>\n        </div>\n\n        <div class="input-line submit-line">\n          <input type="submit" value="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c" class="a-btn" id="a-add-point">\n\n            <small class="required-desc">\u041f\u043e\u043b\u044f \u0441\u043e \u0437\u043d\u0430\u0447\u043a\u043e\u043c * \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</small>\n        </div>\n    </form>\n</div>\n'});
this.Templates.PointDetailView=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};var d,f=this.escapeExpression;b='<div class="clearfix p-body">\n  <header>\n    \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n    \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n\n    <h2><a href="#" class="a-place-name">';(c=g.name)?c=c.call(e,{hash:{},
data:a}):(c=e.name,c="function"===typeof c?c.apply(e):c);b+=f(c)+'</a>\n      <small>\u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0441\u044f</small> <a href="#">'+f((c=(c=e.author,null==c||!1===c?c:c.first_name),"function"===typeof c?c.apply(e):c))+" "+f((c=(c=e.author,null==c||!1===c?c:c.last_name),"function"===typeof c?c.apply(e):c))+'</a>\n    </h2>\n\n    <div class="addr">';(d=g.address)?d=d.call(e,{hash:{},data:a}):(d=e.address,d="function"===typeof d?d.apply(e):d);b+=f(d)+'</div>\n\n    <div class="p-place-desc">\n      ';
(d=g.headDescription)?d=d.call(e,{hash:{},data:a}):(d=e.headDescription,d="function"===typeof d?d.apply(e):d);b+=f(d)+"\n      ";if((d=g["if"].call(e,e.tailDescription,{hash:{},inverse:this.noop,fn:this.program(1,function(c,d){var b,a;b='\n        <span class="hellip">\u2026</span>\n        <span class="hidden more-desc">';(a=g.tailDescription)?a=a.call(c,{hash:{},data:d}):(a=c.tailDescription,a="function"===typeof a?a.apply(c):a);return b+=f(a)+'</span>\n        <a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>\n      '},
a),data:a}))||0===d)b+=d;b+='\n    </div>\n\n    <div class="stats">\n      <span>\n        <span class="ico-like-small"></span>\n        ';(d=g.likes_count)?d=d.call(e,{hash:{},data:a}):(d=e.likes_count,d="function"===typeof d?d.apply(e):d);b+=f(d)+'\n      </span>\n      <span>\n        <span class="ico-star-small"></span>\n        ';(d=g.collections_count)?d=d.call(e,{hash:{},data:a}):(d=e.collections_count,d="function"===typeof d?d.apply(e):d);b+=f(d)+'\n      </span>\n      <span>\n        <span class="ico-want-small"></span>\n        ';
(d=g.beens_count)?d=d.call(e,{hash:{},data:a}):(d=e.beens_count,d="function"===typeof d?d.apply(e):d);b+=f(d)+'\n      </span>\n      <span>\n        <span class="ico-vote-small"></span>\n        ';(d=g.reviewusersplus)?d=d.call(e,{hash:{},data:a}):(d=e.reviewusersplus,d="function"===typeof d?d.apply(e):d);b+=f(d)+"/";(d=g.reviewusersminus)?d=d.call(e,{hash:{},data:a}):(d=e.reviewusersminus,d="function"===typeof d?d.apply(e):d);b+=f(d)+'\n      </span>\n    </div>\n  </header>\n\n  <div class="wide-box">\n    <ul class="p-tabs">\n      <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n      <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n      <li><div class="shadow"></div></li>\n    </ul>\n\n    <div class="tabs-content">\n      <div id="tab-photo" class="tab-pane active">\n\n        <div class="tabs-content">\n          <div class="';
if((d=g["if"].call(e,e.hiddenImages,{hash:{},inverse:this.noop,fn:this.program(3,function(f,c){return"toggle-block"},a),data:a}))||0===d)b+=d;b+='" id="tp-tab-pop">\n            <div class="clearfix p-gallery">\n\n              <span class="upward-photos">\n                ';if((d=g.each.call(e,e.topImages,{hash:{},inverse:this.noop,fn:this.programWithDepth(5,function(c,b,d){var a,e;a='\n                  <div class="item-photo just-redraw-big" data-photo-id="';(e=g.id)?e=e.call(c,{hash:{},data:b}):
(e=c.id,e="function"===typeof e?e.apply(c):e);a+=f(e)+'">\n                    <a class="" href="/point/'+f((e=d.id,"function"===typeof e?e.apply(c):e))+"/photo/";(d=g.id)?d=d.call(c,{hash:{},data:b}):(d=c.id,d="function"===typeof d?d.apply(c):d);a+=f(d)+'" _href="';(d=g.thumbnail560)?d=d.call(c,{hash:{},data:b}):(d=c.thumbnail560,d="function"===typeof d?d.apply(c):d);a+=f(d)+'">\n                      <img src="';(d=g.thumbnail130x130)?d=d.call(c,{hash:{},data:b}):(d=c.thumbnail130x130,d="function"===
typeof d?d.apply(c):d);return a+=f(d)+'" alt="" width="130" height="130">\n                    </a>\n                  </div>\n                '},a,e),data:a}))||0===d)b+=d;b+='\n              </span>\n\n              <div id="big-photo"></div>\x3c!-- end #big-photo --\x3e\n\n              <span class="downward-photos">\n                ';if((d=g.each.call(e,e.bottomImages,{hash:{},inverse:this.noop,fn:this.programWithDepth(7,function(d,c,a){var b,e;b='\n                  <div class="item-photo just-redraw-big" data-photo-id="';
(e=g.id)?e=e.call(d,{hash:{},data:c}):(e=d.id,e="function"===typeof e?e.apply(d):e);b+=f(e)+'">\n                    <a class="" href="/detailpoint/'+f((e=a.id,"function"===typeof e?e.apply(d):e))+"/photo_";(a=g.id)?a=a.call(d,{hash:{},data:c}):(a=d.id,a="function"===typeof a?a.apply(d):a);b+=f(a)+'" _href="';(a=g.thumbnail560)?a=a.call(d,{hash:{},data:c}):(a=d.thumbnail560,a="function"===typeof a?a.apply(d):a);b+=f(a)+'">\n                      <img src="';(a=g.thumbnail130x130)?a=a.call(d,{hash:{},
data:c}):(a=d.thumbnail130x130,a="function"===typeof a?a.apply(d):a);return b+=f(a)+'" alt="" width="130" height="130">\n                    </a>\n                  </div>\n                '},a,e),data:a}))||0===d)b+=d;b+="\n              </span>\n            </div>\x3c!-- end .p-gallery--\x3e\n\n            ";if((d=g["if"].call(e,e.hiddenImages,{hash:{},inverse:this.noop,fn:this.program(9,function(d,a){return'\n              <a href="#" class="a-toggle photos">\u0415\u0449\u0451 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 <span>\u2193</span></a>\n            '},
a),data:a}))||0===d)b+=d;b+='\n          </div>\n        </div>\n      </div>\x3c!-- end #tab-photo --\x3e\n\n      <div id="tab-map" class="tab-pane">\n        <div class="map">\n          <div id="popup-map-1" style="width:560px; height:510px"></div>\n\n          <div class="m-ico-group">\n            <a href="#">\n              <span class="m-ico m-turism" data-tag-id="1"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-hunting" data-tag-id="2"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-fishing" data-tag-id="3"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-active-rest" data-tag-id="4"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-hotel" data-tag-id="5"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-shop" data-tag-id="6"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-cafe" data-tag-id="7"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-restoran" data-tag-id="8"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-azs" data-tag-id="9"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico m-sto" data-tag-id="10"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico " data-tag-id="85"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico " data-tag-id="86"></span>\n            </a>\n\n            <a href="#">\n              <span class="m-ico " data-tag-id="87"></span>\n            </a>\n          </div>\n        </div>\x3c!-- end .map --\x3e\n\n        <div id="near-objects">\n          <h4 class="title-block">\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0442\u043e\u0447\u043a\u0438</h4>\n          <ol></ol>\n        </div>\n      </div>\x3c!-- end #tab-map --\x3e\n\n          <div id="tab-desc" style="display: none;">\n              <div class="tab-desc">\n                  <div class="toggle-block a-toggle-up">\n                      <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043e\u0442\u0437\u044b\u0432\u044b <span>\u2193</span></a>\n\n                      <ul class="ul-desc">\n                      </ul>\n\n                      <div class="hidden-content">\n                          <ul class="ul-desc">\n                          </ul>\n                      </div>\n                  </div>\n\n                  <div class="add-comment">\n                      <div class="ac-block">\n                        <img alt="" width="29" height="30" class="avatar" data-author="\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432">\n\n                          <div class="ac-body">\n                              <div class="toggle-area">\n                                  <textarea rows="3" cols="40">\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043e\u0442\u0437\u044b\u0432</textarea>\n                              </div>\n\n                              <div class="align-r review-buttons">\n                                  <a href="#" class="r-positive" data-status="+">\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0437\u044b\u0432</a><a href="#" class="r-negative" data-status="-">\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0437\u044b\u0432</a>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n\n      </div>\n\n      <div class="tabs-content p-common-content">\n        <section class="p-block event-labels">\n          <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n          ';
if((d=g.each.call(e,e.tags,{hash:{},inverse:this.noop,fn:this.program(11,function(d,a){var c,b;c='\n          <div class="label">';(b=g.name)?b=b.call(d,{hash:{},data:a}):(b=d.name,b="function"===typeof b?b.apply(d):b);return c+=f(b)+"</div>\n          "},a),data:a}))||0===d)b+=d;b+='\n\n          <div class="body"></div>\n        </section>\n      </div>\n  </div>\n\n</div>\n\n';if((d=g["if"].call(e,(c=e.user,null==c||!1===c?c:c.authorized),{hash:{},inverse:this.noop,fn:this.program(13,function(d,
a){return'\n<aside id="right-panel">\n  <div class="small-icons">\n    <a href="#" class="a-btn a-btn-like">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</a>\n    <a href="#" class="a-btn a-add-collection">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n    <a href="#" class="a-btn a-btn-share">\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</a>\n    <a href="#" class="a-btn a-btn-complaint">\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f</a>\n    \x3c!--<a href="#" class="a-like" data-tooltip="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n    <a href="#" class="a-complaint" data-tooltip="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043c\u0435\u0441\u0442\u043e"></a>--\x3e\n  </div>\n\n  <div class="aside-social"></div>\n  <div class="small-icons"></div>\n</aside>\n'},
a),data:a}))||0===d)b+=d;return b+"\n"});
this.Templates.PointItemView=Handlebars.template(function(b,e,g,c,a){function d(d,a){var c,b,e;c='\n  <ul class="photo-preview a-photo nonav">\n    ';if((e=g["if"].call(d,(b=d.allpoints,null==b||!1===b?b:b[3]),{hash:{},inverse:k.program(16,v,a),fn:k.program(3,f,a),data:a}))||0===e)c+=e;return c+"\n  </ul>\n  "}function f(d,a){var c,b,f;c='\n      <li>\n        <a href="#">\n          <img src="';if((f=g["if"].call(d,(b=d.allpoints,null==b||!1===b?b:b[1]),{hash:{},inverse:k.program(6,r,a),fn:k.program(4,
n,a),data:a}))||0===f)c+=f;c+='" alt="" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="';if((f=g["if"].call(d,(b=d.allpoints,null==b||!1===b?b:b[2]),{hash:{},inverse:k.program(10,t,a),fn:k.program(8,h,a),data:a}))||0===f)c+=f;c+='" alt="" width="65" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="';if((f=g["if"].call(d,(b=d.allpoints,null==b||!1===b?b:b[3]),{hash:{},inverse:k.program(14,s,a),fn:k.program(12,
u,a),data:a}))||0===f)c+=f;return c+'" alt="" width="65" height="52">\n        </a>\n      </li>\n    '}function n(d,a){var b,c;return b=""+(" "+l((c=(c=(c=(c=(c=d.allpoints,null==c||!1===c?c:c[1]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===m?c.apply(d):c))+" ")}function r(c,d){return" /static/mages/collection_logo.png"}function h(c,d){var a,b;return a=""+(" "+l((b=(b=(b=(b=(b=c.allpoints,null==b||!1===b?b:b[2]),null==b||!1===b?b:b.imgs),null==
b||!1===b?b:b[0]),null==b||!1===b?b:b.thumbnail65x52),typeof b===m?b.apply(c):b))+" ")}function t(c,b){return" /staticimages/collection_logo.png "}function u(c,b){var d,a;return d=""+(" "+l((a=(a=(a=(a=(a=c.allpoints,null==a||!1===a?a:a[3]),null==a||!1===a?a:a.imgs),null==a||!1===a?a:a[0]),null==a||!1===a?a:a.thumbnail65x52),typeof a===m?a.apply(c):a))+" ")}function s(a,c){return" /static/images/collection_logo.png "}function v(a,c){var b,d,f;b="\n      ";if((f=g["if"].call(a,(d=a.allpoints,null==
d||!1===d?d:d[2]),{hash:{},inverse:k.program(20,w,c),fn:k.program(17,x,c),data:c}))||0===f)b+=f;return b+"\n    "}function x(a,c){var b,d,f;b='\n        <li>\n          <a href="#">\n            <img src="';if((f=g["if"].call(a,(d=a.allpoints,null==d||!1===d?d:d[1]),{hash:{},inverse:k.program(14,s,c),fn:k.program(4,n,c),data:c}))||0===f)b+=f;b+='" alt="" width="65" height="52">\n          </a>\n        </li>\n\n        <li>\n          <a href="#">\n            <img src="';if((f=g["if"].call(a,(d=
a.allpoints,null==d||!1===d?d:d[2]),{hash:{},inverse:k.program(14,s,c),fn:k.program(18,y,c),data:c}))||0===f)b+=f;return b+'" alt="" width="135" height="52">\n          </a>\n        </li>\n      '}function y(c,a){var b,d;return b=""+(" "+l((d=(d=(d=(d=(d=c.allpoints,null==d||!1===d?d:d[2]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail135x52),typeof d===m?d.apply(c):d))+" ")}function w(d,c){var b,a,f;b='\n        <li>\n          <a href="#">\n            <img src="';
if((f=g["if"].call(d,(a=d.allpoints,null==a||!1===a?a:a[1]),{hash:{},inverse:k.program(14,s,c),fn:k.program(21,z,c),data:c}))||0===f)b+=f;return b+'" alt="" width="205" height="52">\n          </a>\n        </li>\n      '}function z(d,c){var a,b;return a=""+(" "+l((b=(b=(b=(b=(b=d.allpoints,null==b||!1===b?b:b[1]),null==b||!1===b?b:b.imgs),null==b||!1===b?b:b[0]),null==b||!1===b?b:b.thumbnail205x52),typeof b===m?b.apply(d):b))+" ")}function A(b,d){return" author-point"}function B(b,d){var c,a;return c=
""+('\n      <img src="/media/'+l((a=(a=b.author,null==a||!1===a?a:a.avatar),typeof a===m?a.apply(b):a))+'" alt="" class="avatar" width="29" height="30">\n    ')}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};b="";var q,p,m="function",l=this.escapeExpression,k=this;c=g.helperMissing;p={hash:{},inverse:k.noop,fn:k.program(1,function(b,a){var c,f,e;c='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n\n    <a href="/set/';
(f=g.id)?f=f.call(b,{hash:{},data:a}):(f=b.id,f=typeof f===m?f.apply(b):f);c+=l(f)+'" class="a-photo nonav">\n      <img src="'+l((f=(f=(f=(f=(f=b.allpoints,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.imgs),null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail207),typeof f===m?f.apply(b):f))+'" alt="" width="207" height="'+l((f=(f=(f=(f=(f=b.allpoints,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.imgs),null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail207_height),typeof f===m?f.apply(b):f))+'">\n    </a>\n  </div>\n\n  ';
if((e=g["if"].call(b,b.allpoints,{hash:{},inverse:k.noop,fn:k.program(2,d,a),data:a}))||0===e)c+=e;c+='\n  <div class="body author-point">\n    <img src="/media/'+l((f=(f=b.author,null==f||!1===f?f:f.avatar),typeof f===m?f.apply(b):f))+'" alt="" class="avatar" width="29" height="30">\n\n      \x3c!--<p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f</p>--\x3e\n      <h3>';(e=g.name)?e=e.call(b,{hash:{},data:a}):(e=b.name,e=typeof e===m?e.apply(b):e);return c+=l(e)+"</h3>\n      <p>\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043b "+
l((f=(f=b.author,null==f||!1===f?f:f.first_name),typeof f===m?f.apply(b):f))+" "+l((f=(f=b.author,null==f||!1===f?f:f.last_name),typeof f===m?f.apply(b):f))+"</p>\n  </div>\n"},a),data:a};if((p=(q=g.ifEquals,q?q.call(e,e.type,"collection",p):c.call(e,"ifEquals",e.type,"collection",p)))||0===p)b+=p;b+="\n\n";p={hash:{},inverse:k.noop,fn:k.program(23,function(b,f){var d,a;d='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok" title="\u043c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n    <a href="#" class="a-collection nonav" title="\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e" data-toggle="tooltip" data-placement="bottom">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n    <a href="#" class="a-share-new a-share-new-ok enter" title="\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f" data-toggle="tooltip" data-placement="bottom"></a>\n    <div class="yasen-info">\n      <span class="yp-title">';
(a=g.ypi)?a=a.call(b,{hash:{},data:f}):(a=b.ypi,a=typeof a===m?a.apply(b):a);d+=l(a)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';(a=g.likes_count)?a=a.call(b,{hash:{},data:f}):(a=b.likes_count,a=typeof a===m?a.apply(b):a);d+=l(a)+'</small>\n        <i class="yp-marked"></i><small>';(a=g.collections_count)?a=a.call(b,{hash:{},data:f}):(a=b.collections_count,a=typeof a===m?a.apply(b):a);d+=l(a)+'</small>\n        <i class="yp-place"></i><small>';
(a=g.beens_count)?a=a.call(b,{hash:{},data:f}):(a=b.beens_count,a=typeof a===m?a.apply(b):a);d+=l(a)+'</small>\n        <i class="yp-star"></i><small>+';(a=g.reviewusersplus)?a=a.call(b,{hash:{},data:f}):(a=b.reviewusersplus,a=typeof a===m?a.apply(b):a);d+=l(a)+"/-";(a=g.reviewusersminus)?a=a.call(b,{hash:{},data:f}):(a=b.reviewusersminus,a=typeof a===m?a.apply(b):a);d+=l(a)+'</small>\n      </div>\n    </div>\n    <a href="/point/';(a=g.id)?a=a.call(b,{hash:{},data:f}):(a=b.id,a=typeof a===m?a.apply(b):
a);d+=l(a)+'" class="a-photo nonav">\n      <img src="'+l((a=(a=(a=b.imgs,null==a||!1===a?a:a[0]),null==a||!1===a?a:a.thumbnail207),typeof a===m?a.apply(b):a))+'" lt="" width="207" height="'+l((a=(a=(a=b.imgs,null==a||!1===a?a:a[0]),null==a||!1===a?a:a.thumbnail207_height),typeof a===m?a.apply(b):a))+'">\n    </a>\n  </div>\n\n  <div class="alert-added">\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0440\u0430\u0437\u0434\u0435\u043b &laquo;\u0425\u043e\u0447\u0443 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c&raquo;</div>\n\n  <div class="body';
if((a=g["if"].call(b,b.id_point,{hash:{},inverse:k.noop,fn:k.program(24,A,f),data:f}))||0===a)d+=a;d+='">\n    ';if((a=g["if"].call(b,b.id_point,{hash:{},inverse:k.noop,fn:k.program(26,B,f),data:f}))||0===a)d+=a;d+="\n    <h3>";(a=g.name)?a=a.call(b,{hash:{},data:f}):(a=b.name,a=typeof a===m?a.apply(b):a);d+=l(a)+"</h3>\n    <p>";(a=g.address)?a=a.call(b,{hash:{},data:f}):(a=b.address,a=typeof a===m?a.apply(b):a);return d+=l(a)+'</p>\n  </div>\n\n  <div class="comments">\n      <ul>\n      </ul>\n  </div>\n'},
a),data:a};if((p=(q=g.ifEquals,q?q.call(e,e.type,"point",p):c.call(e,"ifEquals",e.type,"point",p)))||0===p)b+=p;return b+"\n"});this.Templates.PointListView=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];return""});
this.Templates.PointPanelView=Handlebars.template(function(b,e,g,c,a){function d(a,b){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};b="";var f,n=g.helperMissing;if((c=g["if"].call(e,e.authorized,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return'\n<a href="/point/add" class="fr btn btn-place btn-place-ok nonav"><b>+</b> \u041c\u0435\u0441\u0442\u043e</a>\n'},a),data:a}))||0===c)b+=c;b+='\n<menu class="tabs">\n  <a href="/popular" data-target="tab-popular" class="';
f={hash:{},inverse:this.noop,fn:this.program(3,d,a),data:a};if((f=(c=g.ifEquals,c?c.call(e,e.active,"popular",f):n.call(e,"ifEquals",e.active,"popular",f)))||0===f)b+=f;b+=' nonav menu-item">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435</a>\n  <a href="/new" data-target="tab-new" class="';f={hash:{},inverse:this.noop,fn:this.program(3,d,a),data:a};if((f=(c=g.ifEquals,c?c.call(e,e.active,"new",f):n.call(e,"ifEquals",e.active,"new",f)))||0===f)b+=f;return b+' nonav menu-item">\u043d\u043e\u0432\u043e\u0435</a>\n</menu>\n'});
this.Templates.PointsMainLayout=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<header id="point-panel" class="clearfix top-panel"></header>\n\n<div id="point-content" class="content tabs-content">\n  <section id="tab-popular"></section>\n  <section id="tab-new"></section>\n</div>\n'});this.Templates.PopupAuth=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div class="p-top">\n  <h3>\u0412\u0445\u043e\u0434</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <div class="social-auth">\x3c!-- sa- social auth --\x3e\n    <a href="/login/vkontakte-oauth2" class="sa-vk"></a>\n    <a class="sa-fb" style="opacity: 0.2"></a>\n    <a class="sa-tw" style="opacity: 0.2"></a>\n    <a class="sa-ok" style="opacity: 0.2"></a>\n    <a class="sa-mm" style="opacity: 0.2"></a>\n    <a class="sa-ya" style="opacity: 0.2"></a>\n  </div>\n</div>\n'});
this.Templates.ProgressImage=Handlebars.template(function(b,e,g,c,a){this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};b="";var d=this.escapeExpression;if((e=g.each.call(e,e.imgs,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n<div class="item-photo" data-photo-id="';(e=g.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);c+=d(e)+'">\n  <a href="';(e=g.thumbnail560)?e=e.call(a,{hash:{},data:b}):(e=a.thumbnail560,e="function"===typeof e?
e.apply(a):e);c+=d(e)+'">\n    <img src="';(e=g.thumbnail130x130)?e=e.call(a,{hash:{},data:b}):(e=a.thumbnail130x130,e="function"===typeof e?e.apply(a):e);return c+=d(e)+'" alt="" width="130" height="130">\n  </a>\n  <button type="button" class="remove-photo"></button>\n</div>\n'},a),data:a}))||0===e)b+=e;return b+"\n"});
this.Templates.SetDetailView=Handlebars.template(function(b,e,g,c,a){function d(a,b){return'<a href="#" class="a-btn stp-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'}this.compilerInfo=[3,">= 1.0.0-rc.4"];g=g||b.helpers;a=a||{};var f,n=this,r=g.helperMissing,h=this.escapeExpression;b='\x3c!--<div class="popup p-collection" id="p-common">--\x3e\n    <div class="clearfix p-body">\n    <header>\n      ';if((c=g["if"].call(e,(f=e.user,null==f||!1===f?f:f.authorized),
{hash:{},inverse:n.noop,fn:n.program(1,function(a,b){return'\n        \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n      '},a),data:a}))||0===c)b+=c;b+='\n        \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n        <h2><%- name1 %></h2><% if(allpoints[fir].point) {  %>\n            <small>\u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0441\u044f</small> <a href="#"><%- allpoints[fir].author.first_name %> <%- allpoints[fir].author.last_name %></a>\n        <% } %>\n            \n        <div class="addr">'+
h((f=(f=(f=e.allpoints,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.address),"function"===typeof f?f.apply(e):f))+'</div>\n\n        <div class="stats">\n          <span>\n            <span class="ico-like-small"></span>\n            ';(c=g.likes_count)?c=c.call(e,{hash:{},data:a}):(c=e.likes_count,c="function"===typeof c?c.apply(e):c);b+=h(c)+'\n          </span>\n\n          <span>\n            <span class="ico-comment-small"></span>\n            '+h((f=(f=(f=e.allpoints,null==f||!1===f?f:f[0]),
null==f||!1===f?f:f.comments),"function"===typeof f?f.apply(e):f))+'\n          </span>\n        </div>\n    </header>\n\n    <div class="wide-box">\n        <div class="p-tabs">\n            <a href="#" data-target="tab-photo" class="active">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a>\n            <a href="#" data-target="tab-map">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a>\n            <a href="#" data-target="tab-desc">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435</a>\n\n            <div class="shadow"></div>\n        </div>\n\n        <div class="tabs-content">\n        <div id="tab-photo">\n            \x3c!--<div class="tabs-inside"> tp- tab photo\n                <a href="#" data-target="tp-tab-pop" class="active">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435</a>\n                <a href="#" data-target="tp-tab-my">\u043d\u043e\u0432\u044b\u0435</a>\n                <a href="#" data-target="tp-tab-new">\u043c\u043e\u0438</a>\n            </div>--\x3e\n\n            <div class="tabs-content">\n                <div class="toggle-block">\n                    <div class="clearfix p-gallery">\n                        <% _.each(allpoints[fir].imgs, function(itm, index){ %>\n                            <div class="item-photo <% if(index == 0){ print (\'current\') }%>">\n                                <a href="<%= itm.thumbnail560 %>" data-src-big="<%= itm.thumbnail560 %>" data-author="<%- itm.author.first_name %> <%- itm.author.last_name %>" data-count-likes="<%- itm.likeusers %>" data-avatar="';
(c=g.MEDIA_URL)?c=c.call(e,{hash:{},data:a}):(c=e.MEDIA_URL,c="function"===typeof c?c.apply(e):c);b+=h(c)+'<%- itm.author.avatar %>">\n                                    <img src="<%= itm.thumbnail130x130 %>" alt="" width="130" height="130">\n                                </a>\n                                <button class="remove-photo"></button>\n                                <button class="complaint-photo"></button>\n                            </div>\n                        {% if user.is_authenticated %}\n                            <% if(((allpoints[fir].imgs.length < 4) && ((allpoints[fir].imgs.length-1) == index)) || ((allpoints[fir].imgs.length-1) == index)){ %>\n                                <div class="item-photo load-photo">\n                                    <input type="file">\n                                </div>\n                            <% } %>\n                        {% endif %}\n                        <% if(((allpoints[fir].imgs.length < 5) && ((allpoints[fir].imgs.length-1) == index)) || (index == 3)){ %>\n                            <div id="big-photo">\n                            <div class="bp-photo">\n                                <img src="<%= allpoints[fir].imgs[0].thumbnail560 %>" alt="">\n\n                                <div class="bp-add-like">\n                                    <img src="';
(c=g.MEDIA_URL)?c=c.call(e,{hash:{},data:a}):(c=e.MEDIA_URL,c="function"===typeof c?c.apply(e):c);b+=h(c)+'<%- allpoints[fir].imgs[0].author.avatar %>" alt="" width="22" height="22" class="avatar">\n                                    <span class="bp-name"><%- allpoints[fir].imgs[0].author.first_name %> <%- allpoints[fir].imgs[0].author.last_name %></span>\n                                    {% if user.is_authenticated %}\n                                    <a href="#" class="a-like"></a>\n                                    {% endif %}\n                                    <span class="count-like"><%- allpoints[fir].imgs[0].likeusers %></span>\n                                </div>\n                            </div>\n\n                            <div class="bp-comments">\n                                <div class="toggle-block">\n                                    <div  class="item-comment">\n                                        <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                                        <div class="comment-body">\n                                            <div class="comment-author">\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432</div>\n\n                                            <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435, \u0423\u0441\u043f\u0435\u043d\u0441\u043a\u0438\u043c \u0441\u043e\u0431\u043e\u0440\u043e\u043c \u0422\u0440\u043e\u0438\u0446\u0435-\u0421\u0435\u0440\u0433\u0438\u0435\u0432\u043e\u0439 \u043b\u0430\u0432\u0440\u044b \u0438 \u0434\u0440\u0443\u0433\u0438\u043c\u0438. \u0421\u043e\u043e\u0440\u0443\u0436\u0451\u043d \u0432 1568 \u2014 1570 \u0433\u043e\u0434\u0430\u0445 \u043f\u043e \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0435\u043d\u0438\u044e</p>\n\n                                            <div class="comment-date">20.02.2013</div>\n                                        </div>\n\n                                        <div class="action">\n                                            <a href="#" class="a-complaint-comment" data-tooltip="\u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n                                        </div>\n                                    </div>\n\n                                    <div  class="item-comment">\n                                        <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                                        <div class="comment-body">\n                                            <div class="comment-author">\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432</div>\n\n                                            <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435, \u0423\u0441\u043f\u0435\u043d\u0441\u043a\u0438\u043c \u0441\u043e\u0431\u043e\u0440\u043e\u043c \u0422\u0440\u043e\u0438\u0446\u0435-\u0421\u0435\u0440\u0433\u0438\u0435\u0432\u043e\u0439 \u043b\u0430\u0432\u0440\u044b \u0438 \u0434\u0440\u0443\u0433\u0438\u043c\u0438. \u0421\u043e\u043e\u0440\u0443\u0436\u0451\u043d \u0432 1568 \u2014 1570 \u0433\u043e\u0434\u0430\u0445 \u043f\u043e \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0435\u043d\u0438\u044e</p>\n\n                                            <div class="comment-date">20.02.2013</div>\n                                        </div>\n\n                                        <div class="action">\n                                            <a href="#" class="a-remove-comment" data-tooltip="\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n                                        </div>\n                                    </div>\n\n                                    <div class="hidden-content">\n                                        <div  class="item-comment">\n                                            <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                                            <div class="comment-body">\n                                                <div class="comment-author">\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432</div>\n\n                                                <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435, \u0423\u0441\u043f\u0435\u043d\u0441\u043a\u0438\u043c \u0441\u043e\u0431\u043e\u0440\u043e\u043c \u0422\u0440\u043e\u0438\u0446\u0435-\u0421\u0435\u0440\u0433\u0438\u0435\u0432\u043e\u0439 \u043b\u0430\u0432\u0440\u044b \u0438 \u0434\u0440\u0443\u0433\u0438\u043c\u0438. \u0421\u043e\u043e\u0440\u0443\u0436\u0451\u043d \u0432 1568 \u2014 1570 \u0433\u043e\u0434\u0430\u0445 \u043f\u043e \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0435\u043d\u0438\u044e</p>\n\n                                                <div class="comment-date">20.02.2013</div>\n                                            </div>\n\n                                            <div class="action">\n                                                <a href="#" class="a-complaint-comment"></a>\n                                            </div>\n                                        </div>\n\n                                        <div  class="item-comment">\n                                            <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                                            <div class="comment-body">\n                                                <div class="comment-author">\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432</div>\n\n                                                <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435, \u0423\u0441\u043f\u0435\u043d\u0441\u043a\u0438\u043c \u0441\u043e\u0431\u043e\u0440\u043e\u043c \u0422\u0440\u043e\u0438\u0446\u0435-\u0421\u0435\u0440\u0433\u0438\u0435\u0432\u043e\u0439 \u043b\u0430\u0432\u0440\u044b \u0438 \u0434\u0440\u0443\u0433\u0438\u043c\u0438. \u0421\u043e\u043e\u0440\u0443\u0436\u0451\u043d \u0432 1568 \u2014 1570 \u0433\u043e\u0434\u0430\u0445 \u043f\u043e \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0435\u043d\u0438\u044e</p>\n\n                                                <div class="comment-date">20.02.2013</div>\n                                            </div>\n\n                                            <div class="action">\n                                                <a href="#" class="a-complaint-comment" data-tooltip="\u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n                                            </div>\n                                        </div>\n\n                                        <div  class="item-comment">\n                                            <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                                            <div class="comment-body">\n                                                <div class="comment-author">\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432</div>\n\n                                                <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435, \u0423\u0441\u043f\u0435\u043d\u0441\u043a\u0438\u043c \u0441\u043e\u0431\u043e\u0440\u043e\u043c \u0422\u0440\u043e\u0438\u0446\u0435-\u0421\u0435\u0440\u0433\u0438\u0435\u0432\u043e\u0439 \u043b\u0430\u0432\u0440\u044b \u0438 \u0434\u0440\u0443\u0433\u0438\u043c\u0438. \u0421\u043e\u043e\u0440\u0443\u0436\u0451\u043d \u0432 1568 \u2014 1570 \u0433\u043e\u0434\u0430\u0445 \u043f\u043e \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0435\u043d\u0438\u044e</p>\n\n                                                <div class="comment-date">20.02.2013</div>\n                                            </div>\n\n                                            <div class="action">\n                                                <a href="#" class="a-complaint-comment"></a>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class="add-comment">\n                                        <form action="#">\n                                            <div class="ac-block">\n                                                <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                                                <div class="ac-body">\n                                                    <div class="toggle-area">\n                                                        <textarea rows="3" cols="40"></textarea>\n                                                        <input type="submit" value=" ">\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </form>\n                                    </div>\n\n                                    <a href="#" class="a-toggle comments">\u0435\u0449\u0451 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 <span>&darr;</span></a>\n                                </div>\n                            </div>\n                        </div>\n                        <% } %>\n                        <% }) %>\n                    </div>\n\n                    <a href="#" class="a-toggle photos">\u0435\u0449\u0451 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 <span>&darr;</span></a>\n                </div>\n            </div>\n        </div>\n\n        <div id="tab-map" style="display: none">\n            <div class="map">\n                <div id="popup-map-1" style="width:560px; height:510px"></div>\n                \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043d\u0430\u0447\u0430\u043b\u043e) --\x3e\n\n                \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043a\u043e\u043d\u0435\u0446) --\x3e\n                <div class="m-ico-group">\n                    <a href="#">\n                        <span class="m-ico m-hotel"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-cafe"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-restoran"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-turism"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-azs"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-active-rest"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-sto"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-commerc"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-hunting"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-events"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-shop"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-fishing"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-monument"></span>\n                    </a>\n\n                    <a href="#">\n                        <span class="m-ico m-church"></span>\n                    </a>\n                </div>\n\n            </div>\n\n            <div id="near-objects">\n                <h4 class="title-block">\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u043d\u0438\u0446\u044b</h4>\n\n                <ol>\n                    <li>\n                        <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043e\u0434\u0438\u043d</h5>\n                        <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n                    </li>\n\n                    <li>\n                        <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0434\u0432\u0430</h5>\n                        <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n                    </li>\n\n                    <li>\n                        <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0438</h5>\n                        <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n                    </li>\n\n                    <li>\n                        <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0447\u0435\u0442\u044b\u0440\u0435</h5>\n                        <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n                    </li>\n\n                    <li>\n                        <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043f\u044f\u0442\u044c</h5>\n                        <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n                    </li>\n                </ol>\n            </div>\n\n            \x3c!--<form action="#">\n                <div class="clearfix p-photos">\n                    <div class="item-photo">\n                        <img src="temp/img-130x130.jpg" alt="" width="130" height="130">\n                        <button class="remove-photo"></button>\n                    </div>\n\n                    <div class="item-photo photo-loading">\n                        <img src="temp/img-130x130.jpg" alt="" width="130" height="130">\n                        <button class="remove-photo"></button>\n\n                        <div class="load-status">\n                            <div class="progress-loading">\n                                <div class="value" style="width:33%"></div>\n                            </div>\n                            33%\n                        </div>\n                    </div>\n\n                    <div class="item-photo photo-loading">\n                        <img src="temp/img-130x130.jpg" alt="" width="130" height="130">\n                        <button class="remove-photo"></button>\n\n                        <div class="load-status">\n                            <div class="progress-loading">\n                                <div class="value" style="width:56%"></div>\n                            </div>\n                            56%\n                        </div>\n                    </div>\n\n                    <div class="item-photo load-photo">\n                        <input type="file">\n                    </div>\n                </div>\n            </form>--\x3e\n        </div>\n\n        <div id="tab-desc" style="display: none">\n            <div class="toggle-block">\n                <ul class="ul-desc">\n\n                </ul>\n\n                <div class="hidden-content">\n                    <ul class="ul-desc">\n\n                    </ul>\n                </div>\n\n                <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f <span>&darr;</span></a>\n            </div>\n\n            <div class="add-comment">\n                <form action="#">\n                    <div class="ac-block">\n                        <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n                        <div class="ac-body">\n                            <div class="toggle-area">\n                                <textarea rows="3" cols="40"></textarea>\n                                <input type="submit" value=" ">\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n\n        <div class="tabs-content p-common-content" style="display: none">\n            <section class="p-block peoples">\n                <h4 class="title-block">\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0445\u043e\u0442\u044f\u0442 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u044c</h4>\n\n                <div class="clearfix toggle-block">\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n\n                    <div class="clearfix hidden-content">\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                        <a href="#"><img src="temp/avatar.jpg" alt=""></a>\n                    </div>\n\n                    <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <span>&darr;</span></a>\n                </div>\n            </section>\n\n            <section class="p-block event-labels">\n                <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n                <div class="body">\n                    <% _.each(allpoints[fir].comments, function(itm, index){ %>\n                        <div class="label"><%= itm.name %></div>\n                    <% }) %>\n                </div>\n            </section>\n        </div>\n    </div>\n\n    <footer>\n        {% if user.is_authenticated %}\n            \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n        {% endif %}\n        <div class="stats">\n                                <span>\n                                    <span class="ico-want-small"></span>\n                                    <%- allpoints[fir].visits %>\n                                </span>\n\n                                <span>\n                                    <span class="ico-like-small"></span>\n                                    <%- allpoints[fir].likes %>\n                                </span>\n\n                                <span>\n                                    <span class="ico-comment-small"></span>\n                                    <%- allpoints[fir].comments %>\n                                </span>\n        </div>\n    </footer>\n</div>\n\n<aside id="right-panel">\n    \x3c!--<a href="#" class="a-btn a-add-collection">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n    <a href="#" class="a-btn a-add-path">\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n    <a href="#" class="a-btn a-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>--\x3e\n    \n    \x3c!--<div class="small-icons">\n        <a href="#" class="a-like" data-tooltip="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a><a href="#" class="a-complaint" data-tooltip="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043c\u0435\u0441\u0442\u043e"></a>\n    </div>\n    \n    <div class="aside-social">\n        <img src="temp/social-2.png" alt="">\n    </div>\n    \n    <div class="small-icons">\n        <i class="ico-wifi"></i><i class="ico-disabled"></i><i class="ico-p"></i><i class="ico-wc"></i>\n    </div>--\x3e\n</aside>\n\n<header id="c-top-panel">\n    <div class="inner-wrap">\n        <aside class="stp-buttons">\n        ';
if((c=g["if"].call(e,(f=e.user,null==f||!1===f?f:f.authorized),{hash:{},inverse:n.noop,fn:n.program(3,function(a,b){var f,c,e;f='\n          <div class="c-buttons">\n            <a href="#" class="a-btn stp-like">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</a>\n            ';e={hash:{},inverse:n.noop,fn:n.program(4,d,b),data:b};if((e=(c=g.ifEquals,c?c.call(a,(c=a.author,null==c||!1===c?c:c.id),(c=a.user,null==c||!1===c?c:c.id),e):r.call(a,"ifEquals",(c=a.author,null==c||!1===c?c:c.id),(c=a.user,
null==c||!1===c?c:c.id),e)))||0===e)f+=e;return f+"\n          </div>\n        "},a),data:a}))||0===c)b+=c;b+='\n          <div class="c-edit-buttons">\n            \x3c!--<a href="#" class="a-btn stp-remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>--\x3e\n            <a href="#" class="a-btn stp-save">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</a>\n          </div>\n        </aside>\n        \n        <div class="ctp-head">\n          <h1>';(c=g.name)?c=c.call(e,{hash:{},data:a}):
(c=e.name,c="function"===typeof c?c.apply(e):c);b+=h(c)+"</h1>\n          ";c={hash:{},inverse:n.noop,fn:n.program(6,function(a,b){var c,d;return c=""+('\n            \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\n            <a href="#">'+h((d=(d=a.author,null==d||!1===d?d:d.first_name),"function"===typeof d?d.apply(a):d))+" "+h((d=(d=a.author,null==d||!1===d?d:d.last_name),"function"===typeof d?d.apply(a):d))+"</a>\n          ")},a),data:a};if((c=
(f=g.ifEquals,f?f.call(e,e.author,"new",c):r.call(e,"ifEquals",e.author,"new",c)))||0===c)b+=c;b+='\n        </div>\n        \n        <div class="ctp-content">\n          ';(c=g.headDescription)?c=c.call(e,{hash:{},data:a}):(c=e.headDescription,c="function"===typeof c?c.apply(e):c);b+=h(c)+"\n          ";if((c=g["if"].call(e,e.tailDescription,{hash:{},inverse:n.noop,fn:n.program(8,function(a,b){var d,c;d='\n            <span class="hellip">\u2026</span> \n            <span class="hidden more-desc">';
(c=g.tailDescription)?c=c.call(a,{hash:{},data:b}):(c=a.tailDescription,c="function"===typeof c?c.apply(a):c);return d+=h(c)+'</span>\n            <a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>\n          '},a),data:a}))||0===c)b+=c;b+='\n        </div>\n        \n        <div class="c-edit-inputs">\n          <input type="text" value="';(c=g.name)?c=c.call(e,{hash:{},data:a}):(c=e.name,c="function"===typeof c?c.apply(e):c);b+=h(c)+'">\n          <input type="text" value="';
(c=g.description)?c=c.call(e,{hash:{},data:a}):(c=e.description,c="function"===typeof c?c.apply(e):c);b+=h(c)+'">\n        </div>\n    </div>\n</header>\n\n<aside id="c-left-panel">\n  <div class="aside-content">\n    <div class="aside-viewport">\n      <ol id="ol-collection">\n        ';if((c=g.each.call(e,e.allpoints,{hash:{},inverse:n.noop,fn:n.program(10,function(a,b){var d,c;d='\n          <li class="choose_place" data-placemark-id="placemark-1">\n          <a href="#" class="choose_place_a" data-id="';
(c=g.id)?c=c.call(a,{hash:{},data:b}):(c=a.id,c="function"===typeof c?c.apply(a):c);d+=h(c)+'">';(c=g.name)?c=c.call(a,{hash:{},data:b}):(c=a.name,c="function"===typeof c?c.apply(a):c);return d+=h(c)+'</a>\n            <button type="button" class="remove-collection"></button>\n          </li>\n        '},a),data:a}))||0===c)b+=c;return b+'\n      </ol>\n    </div>\n    \n    <a href="#" class="clp-up"></a> \x3c!-- clp- collection left panel  --\x3e\n    <a href="#" class="clp-down"></a>\n  </div>\n</aside>\n\x3c!--</div>--\x3e\n'});
(function(){Handlebars.registerHelper("ifEquals",function(b,e,g){return(null!=b?b.toString():void 0)===(null!=e?e.toString():void 0)?g.fn(this):g.inverse(this)});Handlebars.registerHelper("ifBelong",function(b,e,g){var c,a,d,f;if(void 0===e)return!1;d=0;for(f=e.length;d<f;d++)a=e[d],a.id===b.id&&(c=!0);return c?g.fn(this):g.inverse(this)});Handlebars.registerHelper("dateFormat",function(b,e){var g;return window.dateFormat?(g=e.hash.format||"MMM Do, YYYY",(new Date(b)).format(g)):b});Handlebars.registerHelper("eachKey",
function(b,e){var g,c,a,d;c="";b=b.toString().substring(1,b.length-1).split(",");a=0;for(d=b.length;a<d;a++)g=b[a],c+=e.fn(g.trim());return c})}).call(this);
(function(){Yapp.module("Common",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Common Module");this.router=new Yapp.Common.Router({controller:new Yapp.Common.Controller});console.log("Show Common.StubView in header region");Yapp.header.show(new Yapp.Common.StubView({model:Yapp.user,template:Templates.HeaderView}));console.log("Show Common.StubView in footer region");return Yapp.footer.show(new Yapp.Common.StubView({model:Yapp.user,template:Templates.FooterView}))})}})}).call(this);
(function(){Yapp.module("Map",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Map Module");this.router=new Yapp.Map.Router({controller:new Yapp.Map.Controller});return $.getScript(Yapp.YA_MAP_URL,function(){return ymaps.ready(function(){var b,e;console.log("Init Yandex map");b=new ymaps.Map("mainmap",{center:[ymaps.geolocation.latitude,ymaps.geolocation.longitude],zoom:12});Yapp.user.set({location:ymaps.geolocation});b.controls.add("zoomControl").add("typeSelector");
e=new ymaps.GeoObjectCollection;b.geoObjects.add(e);return Yapp.myMap=b})})})}})}).call(this);(function(){Yapp.module("Points",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Points Module");return this.router=new Yapp.Points.Router({controller:new Yapp.Points.Controller})})}})}).call(this);(function(){Yapp.module("User",{startWithParent:!1,define:function(){return this.addInitializer(function(){return console.log("initializing User Module")})}})}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Common.PopupRegion=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.el="#popups .scroll-box";d.prototype.initialize=function(){console.log("initializing Yapp.Common.PopupRegion");this.body="body";this.wrapper="#popups";return this.overlay=
"#overlay"};d.prototype.getEl=function(a){var b;b=this;a=$(a);a.click(function(a){if($(a.target).hasClass("scroll-box"))return b.close()});return a};d.prototype.onShow=function(){$(this.body).css("overflow","hidden");$(this.overlay).show();return $(this.wrapper).show()};d.prototype.onClose=function(){$(this.body).css("overflow","initial");$(this.overlay).hide();$(this.wrapper).hide();return b.Common.router.navigate("/")};return d}(Backbone.Marionette.Region)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.Point=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Points.Point")};d.prototype.urlRoot=function(){this.get("type");return b.API_BASE_URL+"/points/"};d.prototype.defaults=
function(){return{name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};d.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.address&&c.push("address");""===a.longitude&&c.push("longitude");""===a.latitude&&c.push("latitude");(!a.imgs||0===a.imgs.length)&&c.push("photos");(!a.tags||0===a.tags.length)&&c.push("tags");if(0<c.length)return c};d.prototype.search=function(a,c){return b.request("request",{type:"GET",url:"/points/search/",params:{dropResult:c},
data:{s:a},successCallback:this.successSearch})};d.prototype.successSearch=function(a,b){return _.each(a,function(a){return b.append("<li data-point-id="+a.id+">"+a.name+"</li>")})};d.prototype.parse=function(a){var b,c;_.isArray(a)&&(a=a[0]);2===a.type_of_item&&(a.type="collection",b=a.points,c=a.points_by_user,a.allpoints=b.concat(c));1===a.type_of_item&&(a.type="point");return a};return d}(Backbone.Model)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.Set=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Points.Set")};d.prototype.urlRoot=function(){this.get("type");return b.API_BASE_URL+"/collections/"};d.prototype.defaults=
function(){return{name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};d.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.address&&c.push("address");""===a.longitude&&c.push("longitude");""===a.latitude&&c.push("latitude");(!a.imgs||0===a.imgs.length)&&c.push("photos");(!a.tags||0===a.tags.length)&&c.push("tags");if(0<c.length)return c};d.prototype.parse=function(a){var b,c;_.isArray(a)&&(a=a[0]);2===a.type_of_item&&(a.type="collection",b=a.points,
c=a.points_by_user,a.allpoints=b.concat(c));1===a.type_of_item&&(a.type="point");return a};return d}(Backbone.Model)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.User.Profile=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.initialize=function(){return console.log("initializing Yapp.User.Profile")};a.prototype.defaults={first_name:"",last_name:"",authorized:!1,email:!1,avatar:"",last_state:"pins",
count_liked_objects:0,count_commented_objects:0};return a}(Backbone.Model)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointCollection=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.model=b.Points.Point;d.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointCollection")};d.prototype.comparator=function(a){return-a.get("ypi")};
d.prototype.parse=function(a){return a.items};d.prototype.url=function(a){return b.API_BASE_URL+("/"+(a||"point")+"s/")};d.prototype.page=1;return d}(Backbone.Collection)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.MainLayout=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.template=Templates.PointsMainLayout;d.prototype.id="point-layout";d.prototype.regions={panelContainer:"#point-panel",popularContainer:"#tab-popular",newContainer:"#tab-new"};
d.prototype.initialize=function(){return console.log("initializing Yapp.Points.MainLayout")};d.prototype.onShow=function(){var a,c;c=this;a=new b.Points.PointCollection;this.panelContainer.show(new b.Points.PointPanelView({model:b.user,content_type:this.options.content_type||"popular"}));"new"===this.options.content_type&&(a.comparator=function(a){return-new Date(a.get("updated"))});console.log("loading points collection");return a.fetch({data:{content:this.options.content_type||"popular"},success:function(d,
e){console.log(["server response: ",e]);if(e.error||e.errors)return console.error(e);a.sort();return c.popularContainer.show(new b.Points.PointListView({collection:a}))}})};return d}(Marionette.Layout)}).call(this);
(function(){var b,e,g,c={}.hasOwnProperty,a=function(a,b){function e(){this.constructor=a}for(var g in b)c.call(b,g)&&(a[g]=b[g]);e.prototype=b.prototype;a.prototype=new e;a.__super__=b.prototype;return a};b=window.Yapp;b.Common.StubView=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}a(c,b);c.prototype.initialize=function(){return console.log("initializing Yapp.Common.StubView")};c.prototype.modelEvents={change:"render"};return c}(Marionette.ItemView);b.Common.PopupView=
function(c){function f(){return g=f.__super__.constructor.apply(this,arguments)}a(f,c);f.prototype.initialize=function(){return console.log("initializing Yapp.Common.PopupView")};f.prototype.id="p-common";f.prototype.className="popup";f.prototype.onBeforeRender=function(){return console.log("before render PopupView")};f.prototype.modelEvents={change:"render"};f.prototype.templateHelpers=function(){return{user:b.user.toJSON()}};return f}(Marionette.ItemView)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Map.MapView=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.template=Templates.MapView;d.prototype.tagName="div";d.prototype.className="map";d.prototype.initialize=function(){return console.log("initializing Yapp.Map.MapView")};d.prototype.events=
{"click .a-toggle":"toggleMap"};d.prototype.toggleMap=function(a){a.preventDefault();return b.execute("toggleMap")};return d}(Marionette.ItemView)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointAddView=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){console.log("initialize PointAddView");this.model=new b.Points.Point;this.model.on("invalid",this.showError,this);this.model.on("valid",this.savePoint,
this);return b.request("request",{url:"/tags/list",context:this,successCallback:this.setLabels,data:{content:"popular"}})};d.prototype.template=Templates.PointAddView;d.prototype.ui={form:"#pointAddForm",addButton:"#a-add-point",inputName:"input[name=name]",inputAddress:"input[name=address]",inputDescription:"input[name=description]",inputTags:"input[name=tags]",inputPhotos:"input[name=img]",photoList:"#item-photo-list",photoProgress:".photo-loading",requireLabels:".require-labels",otherLabels:".other-labels",
selectedLabels:".selected-labels"};d.prototype.events=function(){return{"click .p-close":"hidePopup","focus #add-new-place-address":"openMap","keyup #p-add-place-name":"searchName","keyup #add-new-place-address":"searchLocation","keyup input[name=tags]":"doSearch","change #p-add-place-name, #add-new-place-address, #add-new-place-description":"setValue","focus .input-line input:text":"showDropList","blur .input-line input:text":"hideDropList","mousedown .drop-results > li":"addFromList","click #a-add-point":"validatePoint",
"click .require-labels .label":"addRequireLabel","click .other-labels .label":"addOtherLabel","click .remove-label":"removeLabel","click .clear-selected":"clearLabels","click .selected-labels":"showInput","change .load-photo input:file":"loadImage","click .remove-photo":"removePhoto"}};d.prototype.hidePopup=function(){return b.popup.close()};d.prototype.openMap=function(){return $('a[href="#tab-map-place"]').tab("show")};d.prototype.onInitMap=function(){var a,c;c=this;this.popupMap=new ymaps.Map("popup-map-place",
{center:b.myMap.getCenter(),zoom:11});this.popupMap.controls.add("zoomControl");a={};return this.popupMap.events.add("click",function(b){c.popupMap.geoObjects.remove(a);b=b.get("coordPosition");c.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return c.popupMap.geoObjects.remove(a),!1});a=new ymaps.Placemark(b,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",iconImageSize:[32,36],iconImageOffset:[-16,-38]});c.popupMap.geoObjects.add(a);ymaps.geocode(b).then(function(a){var b;
b=!0;a.geoObjects.each(function(a){b&&$("#add-new-place-address").val(a.properties.get("metaDataProperty.GeocoderMetaData.text"));return b=!1});return c.$el.find("#add-new-place-address").change()});c.popupMap.setCenter(b,14,{checkZoomRange:!0,duration:1E3});return c.model.set({longitude:b[1],latitude:b[0]},{silent:!0})})};d.prototype.setLabels=function(a){this.model.set("requireLabels",a.filter(function(a){return 0===a.level}));this.model.set("additionalLabels",a.filter(function(a){return 1===a.level}));
return this.triggerMethod("init:map")};d.prototype.addRequireLabel=function(a){this.ui.inputTags.parent().hide();this.ui.requireLabels.append(this.ui.selectedLabels.find(".label-require"));this.ui.selectedLabels.prepend(a.target);return this.model.get("tags").push({id:$(a.target).data("label-id"),name:$(a.target).text(),"class":"require"})};d.prototype.addOtherLabel=function(a){this.ui.inputTags.parent().hide();this.ui.selectedLabels.prepend(a.target);return this.model.get("tags").push({id:$(a.target).data("label-id"),
name:$(a.target).text(),"class":"other"})};d.prototype.removeLabel=function(a){var b;a.preventDefault();b=$(a.target).parent();b.hasClass("label-require")?this.ui.requireLabels.append(b):this.ui.otherLabels.append(b);0===this.ui.selectedLabels.find(".label").length&&this.ui.inputTags.parent().show();a=this.model.get("tags");return this.model.set("tags",a.filter(function(a){return a.id!==b.data("label-id")}))};d.prototype.clearLabels=function(a){a.preventDefault();this.ui.requireLabels.append(this.ui.selectedLabels.find(".label-require"));
this.ui.otherLabels.append(this.ui.selectedLabels.find(".label-other"));this.ui.inputTags.parent().show();return this.model.set("tags",[],{silent:!0})};d.prototype.showInput=function(a){a.preventDefault();this.ui.inputTags.parent().show();return this.ui.inputTags.focus()};d.prototype.doSearch=function(a){var b;a.preventDefault();console.log("do Search!");switch(a.which){case 13:a.preventDefault();a.stopPropagation();a=$.trim(this.ui.inputTags.val());b="new_"+_.uniqueId();a={id:b,name:a,"class":"other"};
b=this.model.get("tags");b.push(a);console.log(b);this.model.set("tags",b,{silent:!0});this.ui.selectedLabels.prepend('<div class="label label-other" data-label-id="'+a.id+'" >'+a.name+'\n  <button class="remove-label"></button>\n</div>');this.ui.inputTags.val("");break;default:return""}};d.prototype.loadImage=function(a){var b;a.preventDefault();b=this;if(0!==a.currentTarget.files.length)return this.ui.form.ajaxSubmit({url:"/photos/add",type:"POST",dataType:"json",data:{object_type:12},clearForm:!1,
success:function(a){b.model.get("imgs").push(a[0]);b.ui.photoList.html(Templates.ProgressImage(b.model.toJSON()));return b.ui.photoProgress.hide()},beforeSend:function(a){return b.ui.photoProgress.show()},uploadProgress:function(a,c,d,f){b.ui.photoProgress.find(".value").css("width",f+"%");return b.ui.photoProgress.find(".progress-count").text(f+" %")}})};d.prototype.removePhoto=function(a){a.preventDefault();return console.log(a.target)};d.prototype.setValue=function(a){var b;b=$.trim($(a.currentTarget).val());
a=$(a.currentTarget).attr("data-key");return this.model.set(a,b,{silent:!0})};d.prototype.searchName=function(a){var b;b=$.trim($(a.currentTarget).val());a.preventDefault();if(0<b.length)return a=$(a.currentTarget).closest(".drop-filter").find(".drop-results"),a.find("li").remove(),this.model.search(b,a)};d.prototype.searchLocation=function(a){var c;a.preventDefault();a=a.currentTarget;if(0<$(a).val().length)return c=$(a).closest(".drop-filter").find(".drop-results"),ymaps.geocode($(a).val(),{boundedBy:b.myMap.getBounds(),
strictBounds:!1}).then(function(a){var b;b=[];c.find("li").remove();a.geoObjects.each(function(a){var c,d,f,e;f=a.properties;e=f.get("text");d=f.get("name");c=f.get("description");f=$.map(f.get("metaDataProperty.PSearchObjectMetaData")&&f.get("metaDataProperty.PSearchObjectMetaData.Tags")||[],function(a){return a.tag});a=a.geometry.getCoordinates();return b.push({name:e||[d,c].concat(f).filter(Boolean).join(", "),coords:JSON.stringify(a)})});return _.each(b,function(a){return c.append("<li data-coords='"+
a.coords+"'>"+a.name+"</li>")})})};d.prototype.showDropList=function(a){$(a.currentTarget).closest(".drop-filter").find(".drop-results").show().css("z-index",999);return $(a.currentTarget).closest(".input-line").css("z-index",20)};d.prototype.hideDropList=function(a){$(a.currentTarget).closest(".drop-filter").find(".drop-results").hide().css("z-index",20);return $(a.currentTarget).closest(".input-line").css("z-index",1)};d.prototype.addFromList=function(a){var b,c,d,e;b=$(a.currentTarget).text();
$(a.currentTarget).closest(".drop-filter").find("input:text").val(b).change();a=$(a.currentTarget).data("coords");if(!_.isEmpty(a))return e=this,this.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return e.popupMap.geoObjects.remove(a),!1}),d=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",iconImageSize:[32,36],iconImageOffset:[-16,-38]}),c=a[1],b=a[0],this.popupMap.setCenter(a,14,{checkZoomRange:!0,duration:1E3}),this.model.set({longitude:c,
latitude:b},{silent:!0}),this.popupMap.geoObjects.add(d)};d.prototype.validatePoint=function(a){a.preventDefault();this.model.set();if(this.model.isValid())return this.$el.find("[data-key]").removeClass("validation-error"),this.model.trigger("valid")};d.prototype.savePoint=function(){return b.request("request",{url:"/points/add",context:this,successCallback:this.successSave,type:"POST",data:{name:this.model.get("name"),address:this.model.get("address"),description:this.model.get("description"),"tags[]":_.pluck(this.model.get("tags"),
"id"),"imgs[]":_.pluck(this.model.get("imgs"),"id"),longitude:this.model.get("longitude"),latitude:this.model.get("latitude"),ypi:0}})};d.prototype.showError=function(a,b){var c,d,e,g;this.$el.find("[data-key]").removeClass("validation-error");g=[];d=0;for(e=b.length;d<e;d++)c=b[d],g.push(this.$el.find("[data-key="+c+"]").addClass("validation-error"));return g};d.prototype.successSave=function(){b.popup.close();return console.log("success")};return d}(b.Common.PopupView)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointDetailView=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){console.log("initialize PointDetailView");return this.bigPhotoTemplate=Templates.BigPhoto};d.prototype.template=Templates.PointDetailView;
d.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo"}};d.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .item-photo":"showPhoto","click #big-photo > .bp-photo":"nextPhoto"}};d.prototype.templateHelpers=function(){return{topImages:this.model.get("imgs").slice(0,4),bottomImages:this.model.get("imgs").slice(4,8),hiddenImages:this.model.get("imgs").slice(8),headDescription:this.model.get("description").slice(0,
150),tailDescription:this.model.get("description").slice(150)}};d.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};d.prototype.showPhoto=function(a){var c,d;this.ui.allPhotos.removeClass("current");a?
(a.preventDefault(),a=$(a.currentTarget),d=a.data("photo-id"),c=_.find(this.model.get("imgs"),function(a){return a.id===d})):this.options.photoId?(d=parseInt(this.options.photoId,10),c=_.find(this.model.get("imgs"),function(a){return a.id===d})):(c=this.model.get("imgs")[0],d=c.id);a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===d});$(a).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(c));return b.Points.router.navigate($(a).children().attr("href"))};d.prototype.onShow=
function(){return this.showPhoto()};d.prototype.nextPhoto=function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});a=$(a).next().data("photo-id");this.options.photoId=a;return this.showPhoto()};return d}(b.Common.PopupView)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.Points.PointItemView=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.tagName="article";a.prototype.className="item";a.prototype.template=Templates.PointItemView;a.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointItemView")};
a.prototype.modelEvents={change:"render"};a.prototype.onBeforeRender=function(){return"collection"===this.model.get("type")?this.$el.addClass("item-collection"):this.$el.addClass("item-place")};a.prototype.events={"click .removePoint":"removePlace","click a.removePointConfirm":"removePlaceConfirm"};return a}(Marionette.ItemView)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.PointListView=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.template=Templates.PointListView;d.prototype.className="items";d.prototype.itemView=b.Points.PointItemView;d.prototype.emptyView=b.Points.PointEmptyView;d.prototype.initialize=
function(){console.log("initializing Yapp.Points.PointListView");_.bindAll(this,"loadResults");this.collection.page+=1;return this.infiniScroll=new Backbone.InfiniScroll(this.collection,{success:this.loadResults,strict:!0,scrollOffset:200})};d.prototype.onShow=function(){this.$el.find("[data-toggle=tooltip]").tooltip();this.$el.masonry({itemSelector:".item",columnWidth:241});return this.$el.masonry("reload")};d.prototype.loadResults=function(a,b){this.collection.page+=1;return this.onShow()};return d}(Marionette.CompositeView)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.Points.PointPanelView=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointPanelView")};a.prototype.template=Templates.PointPanelView;a.prototype.modelEvents={change:"render"};
a.prototype.templateHelpers=function(){return{active:this.options.content_type||"popular"}};return a}(Marionette.ItemView)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.SetDetailView=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){console.log("initialize SetDetailView");return this.bigPhotoTemplate=Templates.BigPhoto};d.prototype.template=Templates.SetDetailView;d.prototype.className=
"popup p-collection";d.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo"}};d.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .item-photo":"showPhoto","click #big-photo > .bp-photo":"nextPhoto"}};d.prototype.templateHelpers=function(){return{topImages:this.model.get("imgs").slice(0,4),bottomImages:this.model.get("imgs").slice(4,8),hiddenImages:this.model.get("imgs").slice(8),headDescription:this.model.get("description").slice(0,
150),tailDescription:this.model.get("description").slice(150),user:b.user.toJSON()}};d.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};d.prototype.showPhoto=function(a){var c,d;this.ui.allPhotos.removeClass("current");
a?(a.preventDefault(),a=$(a.currentTarget),d=a.data("photo-id"),c=_.find(this.model.get("imgs"),function(a){return a.id===d})):this.options.photoId?(d=parseInt(this.options.photoId,10),c=_.find(this.model.get("imgs"),function(a){return a.id===d})):(c=this.model.get("imgs")[0],d=c.id);a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===d});$(a).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(c));return b.Points.router.navigate($(a).children().attr("href"))};d.prototype.onShow=
function(){};d.prototype.nextPhoto=function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});a=$(a).next().data("photo-id");this.options.photoId=a;console.log(a);return this.showPhoto()};return d}(b.Common.PopupView)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.Common.Router=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.initialize=function(){return console.log("initializing Yapp.Common.Router")};a.prototype.appRoutes={user:"something"};return a}(Marionette.AppRouter)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.Map.Router=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.initialize=function(){return console.log("initializing Yapp.Map.Router")};a.prototype.appRoutes={map:"showMap"};return a}(Marionette.AppRouter)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.Points.Router=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.initialize=function(){return console.log("initializing Yapp.Points.Router")};a.prototype.appRoutes={"":"showContent",popular:"showPopular","new":"showNew","point/add":"addPoint",
"point/:id":"showPointDetail","set/:id":"showSetDetail","point/:id/photo/:photo_id":"showPointPhoto"};return a}(Marionette.AppRouter)}).call(this);
(function(){var b,e={}.hasOwnProperty,g=function(b,a){function d(){this.constructor=b}for(var f in a)e.call(a,f)&&(b[f]=a[f]);d.prototype=a.prototype;b.prototype=new d;b.__super__=a.prototype;return b};window.Yapp.Common.Controller=function(c){function a(){return b=a.__super__.constructor.apply(this,arguments)}g(a,c);a.prototype.initialize=function(){return console.log("initializing Yapp.Common.Controller")};a.prototype.something=function(){};return a}(Marionette.Controller)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Map.Controller=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){console.log("initializing Yapp.Map.Controller");return b.map.show(new b.Map.MapView)};d.prototype.showMap=function(){return b.execute("toggleMap",
"open")};return d}(Marionette.Controller)}).call(this);
(function(){var b,e,g={}.hasOwnProperty,c=function(a,b){function c(){this.constructor=a}for(var e in b)g.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};b=window.Yapp;b.Points.Controller=function(a){function d(){return e=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){return console.log("initializing Yapp.Points.Controller")};d.prototype.showContent=function(a){console.log("Show content "+a+" in Points module");
b.popup.close();this.layout=new b.Points.MainLayout({content_type:a});return b.content.show(this.layout)};d.prototype.showPopular=function(){return this.showContent("popular")};d.prototype.showNew=function(){return this.showContent("new")};d.prototype.addPoint=function(){return b.popup.show(new b.Points.PointAddView({id:"p-add-place"}))};d.prototype.showPointDetail=function(a,c){var d;d=new b.Points.Point({id:a});d.set("type","point");return d.fetch({success:function(a,d){return b.popup.show(new b.Points.PointDetailView({model:a,
photoId:c}))}})};d.prototype.showSetDetail=function(a,c){var d;d=new b.Points.Set({id:a});d.set("type","collection");return d.fetch({success:function(a,d){return b.popup.show(new b.Points.SetDetailView({model:a,photoId:c}))}})};d.prototype.showPointPhoto=function(a,b){this.showContent();return this.showPointDetail(a,b)};return d}(Marionette.Controller)}).call(this);
(function(){var b;b=window.Yapp;b.addInitializer(function(){console.log("application initializing");this.addRegions({header:"#header",map:"#yandex-map",content:"#content",footer:"#footer",popup:b.Common.PopupRegion});this.commands.setHandler("toggleMap",function(e){b.map.$el.toggleClass("map-opened");$("#wrap").toggleClass("map-opened");e&&(b.map.$el.addClass("map-opened"),$("#wrap").addClass("map-opened"));e="\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443"===b.map.$el.find(".a-toggle").html()?
"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443";return b.map.$el.find(".a-toggle").html(e)});return this.reqres.setHandler("request",function(e){var g;g=b.API_BASE_URL+e.url;g=e.url;console.log([""+e.type+" request to "+g+" with data:",e.data]);return $.ajax({url:g,type:e.type,dataType:e.dataType||"json",processData:e.processData,data:e.data,success:function(b){var a;console.log(["response from API: ",
b]);if(e.successCallback)return a=[b],_.each(e.params,function(b){return a.push(b)}),e.successCallback.apply(e.context,a)}})})});b.on("start",function(){console.log("starting application");$(document).on("click","a.nonav",function(b){var g,c;g=$(this).attr("href");c=this.protocol+"//";if(g&&g.slice(0,c.length)!==c&&0!==g.indexOf("javascript:"))return b.preventDefault(),Backbone.history.navigate(g,!0)});this.user=new b.User.Profile(USER);return this.runApplication()});b.runApplication=function(){this.Common.start();
"pins"===this.user.get("last_state")?(this.Points.start(),this.Map.start()):(this.Map.start(),this.Points.start());this.vent.on("logout",function(){return window.location.replace("/")});return Backbone.history.start({pushState:!0})};b.start()}).call(this);
