/*

 Lo-Dash 1.3.1 (Custom Build) lodash.com/license
 Build: `lodash modern -o ./dist/lodash.js`
 Underscore.js 1.4.4 underscorejs.org/LICENSE
*/
"object"!==typeof JSON&&(JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function g(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=d[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function h(d,b){var c,f,m,r,n=e,t,p=b[d];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(d));"function"===typeof l&&(p=l.call(b,d,p));switch(typeof p){case "string":return g(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";e+=a;t=[];if("[object Array]"===Object.prototype.toString.apply(p)){r=p.length;for(c=0;c<r;c+=1)t[c]=h(c,p)||"null";m=0===t.length?"[]":e?"[\n"+e+t.join(",\n"+e)+"\n"+n+"]":"["+t.join(",")+"]";e=n;return m}if(l&&"object"===typeof l){r=l.length;for(c=0;c<r;c+=1)"string"===typeof l[c]&&(f=l[c],(m=h(f,p))&&t.push(g(f)+(e?": ":":")+m))}else for(f in p)Object.prototype.hasOwnProperty.call(p,f)&&(m=h(f,p))&&t.push(g(f)+(e?": ":":")+m);m=0===t.length?"{}":e?"{\n"+e+t.join(",\n"+
e)+"\n"+n+"}":"{"+t.join(",")+"}";e=n;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,a,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(d,b,c){var f;a=e="";if("number"===typeof c)for(f=0;f<c;f+=1)a+=" ";else"string"===typeof c&&(a=c);if((l=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return h("",{"":d})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function b(a,c){var f,e,p=a[c];if(p&&"object"===typeof p)for(f in p)Object.prototype.hasOwnProperty.call(p,f)&&(e=b(p,f),void 0!==e?p[f]=e:delete p[f]);return d.call(a,c,p)}var c;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"===typeof d?b({"":c},""):c;throw new SyntaxError("JSON.parse");})})();
!function(b){function g(a,d){return function(b){return l(a.call(this,b),d)}}function h(a,d){return function(b){return this.lang().ordinal(a.call(this,b),d)}}function f(){}function c(d){a(this,d)}function e(a){var d=a.years||a.year||a.y||0,b=a.months||a.month||a.M||0,c=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,e=a.hours||a.hour||a.h||0,u=a.minutes||a.minute||a.m||0,n=a.seconds||a.second||a.s||0,p=a.milliseconds||a.millisecond||a.ms||0;this._input=a;this._milliseconds=p+1E3*n+6E4*u+36E5*e;this._days=
f+7*c;this._months=b+12*d;this._data={};this._bubble()}function a(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);return a}function d(a){return 0>a?Math.ceil(a):Math.floor(a)}function l(a,d){for(var b=a+"";b.length<d;)b="0"+b;return b}function q(a,d,b,c){var f,e,u=d._milliseconds,n=d._days;d=d._months;u&&a._d.setTime(+a._d+u*b);(n||d)&&(f=a.minute(),e=a.hour());n&&a.date(a.date()+n*b);d&&a.month(a.month()+d*b);u&&!c&&y.updateOffset(a);(n||d)&&(a.minute(f),a.hour(e))}function v(a,d){var b,c=Math.min(a.length,
d.length),f=Math.abs(a.length-d.length),e=0;for(b=0;c>b;b++)~~a[b]!==~~d[b]&&e++;return e+f}function x(a){return a?O[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function k(a){if(!a)return y.fn._lang;if(!X[a]&&ra)try{require("./lang/"+a)}catch(d){return y.fn._lang}return X[a]}function m(a){var d,b,c=a.match(P);d=0;for(b=c.length;b>d;d++)c[d]=K[c[d]]?K[c[d]]:c[d].match(/\[.*\]/)?c[d].replace(/^\[|\]$/g,""):c[d].replace(/\\/g,"");return function(f){var e="";for(d=0;b>d;d++)e+=c[d]instanceof Function?
c[d].call(f,a):c[d];return e}}function r(a,d){function b(d){return a.lang().longDateFormat(d)||d}for(var c=5;c--&&Q.test(d);)d=d.replace(Q,b);return G[d]||(G[d]=m(d)),G[d](a)}function n(a,d){switch(a){case "DDDD":return qa;case "YYYY":return sa;case "YYYYY":return D;case "S":case "SS":case "SSS":case "DDD":return da;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return ea;case "a":case "A":return k(d._l)._meridiemParse;case "X":return fa;case "Z":case "ZZ":return R;case "T":return ga;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return H;
default:return RegExp(a.replace("\\",""))}}function t(a){a=((R.exec(a)||[])[0]+"").match(Y)||["-",0,0];var d=+(60*a[1])+~~a[2];return"+"===a[0]?-d:d}function p(a){var d,b=[];if(!a._d){for(d=0;7>d;d++)a._a[d]=b[d]=null==a._a[d]?2===d?1:0:a._a[d];b[3]+=~~((a._tzm||0)/60);b[4]+=~~((a._tzm||0)%60);d=new Date(0);a._useUTC?(d.setUTCFullYear(b[0],b[1],b[2]),d.setUTCHours(b[3],b[4],b[5],b[6])):(d.setFullYear(b[0],b[1],b[2]),d.setHours(b[3],b[4],b[5],b[6]));a._d=d}}function w(a){var d,b,c=a._f.match(P),f=
a._i;a._a=[];for(d=0;d<c.length;d++)if((b=(n(c[d],a).exec(f)||[])[0])&&(f=f.slice(f.indexOf(b)+b.length)),K[c[d]]){var e=a,u=void 0,l=e._a;switch(c[d]){case "M":case "MM":l[1]=null==b?0:~~b-1;break;case "MMM":case "MMMM":u=k(e._l).monthsParse(b);null!=u?l[1]=u:e._isValid=!1;break;case "D":case "DD":case "DDD":case "DDDD":null!=b&&(l[2]=~~b);break;case "YY":l[0]=~~b+(68<~~b?1900:2E3);break;case "YYYY":case "YYYYY":l[0]=~~b;break;case "a":case "A":e._isPm=k(e._l).isPM(b);break;case "H":case "HH":case "h":case "hh":l[3]=
~~b;break;case "m":case "mm":l[4]=~~b;break;case "s":case "ss":l[5]=~~b;break;case "S":case "SS":case "SSS":l[6]=~~(1E3*("0."+b));break;case "X":e._d=new Date(1E3*parseFloat(b));break;case "Z":case "ZZ":e._useUTC=!0,e._tzm=t(b)}null==b&&(e._isValid=!1)}f&&(a._il=f);a._isPm&&12>a._a[3]&&(a._a[3]+=12);!1===a._isPm&&12===a._a[3]&&(a._a[3]=0);p(a)}function u(a,d,b,c,f){return f.relativeTime(d||1,!!b,a,c)}function z(a,d,b){var c;d=b-d;b-=a.day();return b>d&&(b-=7),d-7>b&&(b+=7),c=y(a).add("d",b),{week:Math.ceil(c.dayOfYear()/
7),year:c.year()}}function E(d){var f=d._i,e=d._f;if(null===f||""===f)d=null;else{"string"==typeof f&&(d._i=f=k().preparse(f));if(y.isMoment(f))d=a({},f),d._d=new Date(+f._d);else if(e)if("[object Array]"===Object.prototype.toString.call(e)){var f=d,u,n,l,A=99;for(l=0;l<f._f.length;l++)u=a({},f),u._f=f._f[l],w(u),e=new c(u),u=v(u._a,e.toArray()),e._il&&(u+=e._il.length),A>u&&(A=u,n=e);a(f,n)}else w(d);else if(n=d,f=n._i,e=ta.exec(f),f===b)n._d=new Date;else if(e)n._d=new Date(+e[1]);else if("string"==
typeof f)if(f=n._i,e=ua.exec(f)){n._f="YYYY-MM-DD"+(e[2]||" ");for(e=0;4>e;e++)if(ma[e][1].exec(f)){n._f+=ma[e][0];break}R.exec(f)&&(n._f+=" Z");w(n)}else n._d=new Date(f);else"[object Array]"===Object.prototype.toString.call(f)?(n._a=f.slice(0),p(n)):n._d=f instanceof Date?new Date(+f):new Date(f);d=new c(d)}return d}function na(a,d){y.fn[a]=y.fn[a+"s"]=function(a){var b=this._isUTC?"UTC":"";return null!=a?(this._d["set"+b+d](a),y.updateOffset(this),this):this._d["get"+b+d]()}}function A(a){y.duration.fn[a]=
function(){return this._data[a]}}function B(a,d){y.duration.fn["as"+a]=function(){return+this/d}}for(var y,C,S=Math.round,X={},ra="undefined"!=typeof module&&module.exports,ta=/^\/?Date\((\-?\d+)/i,ha=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,P=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,Q=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,H=/\d\d?/,da=/\d{1,3}/,qa=/\d{3}/,sa=/\d{1,4}/,D=/[+\-]?\d{1,6}/,
ea=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,R=/Z|[\+\-]\d\d:?\d\d/i,ga=/T/i,fa=/[\+\-]?\d+(\.\d{1,3})?/,ua=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ma=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Y=/([\+\-]|\d\d)/gi,ia=["Date","Hours","Minutes","Seconds","Milliseconds"],Z={Milliseconds:1,Seconds:1E3,
Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},O={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},G={},va="DDD w W M D d".split(" "),T="MDHhmswW".split(""),K={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,
a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},
GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/
10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var a=-this.zone();return 0>a&&(a=-a),"+"+l(~~(a/60),2)+":"+l(~~a%60,2)},ZZ:function(){var a=-this.zone();return 0>a&&(a=-a),"+"+l(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};va.length;)C=va.pop(),K[C+"o"]=h(K[C],C);for(;T.length;)C=T.pop(),K[C+C]=g(K[C],2);K.DDDD=g(K.DDD,3);f.prototype={set:function(a){var d,b;for(b in a)d=a[b],"function"==typeof d?
this[b]=d:this["_"+b]=d},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var d,b,c;this._monthsParse||(this._monthsParse=[]);for(d=0;12>d;d++)if(this._monthsParse[d]||(b=y([2E3,d]),c="^"+this.months(b,"")+"|^"+this.monthsShort(b,""),
this._monthsParse[d]=RegExp(c.replace(".",""),"i")),this._monthsParse[d].test(a))return d},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var d,b,c;this._weekdaysParse||
(this._weekdaysParse=[]);for(d=0;7>d;d++)if(this._weekdaysParse[d]||(b=y([2E3,1]).day(d),c="^"+this.weekdays(b,"")+"|^"+this.weekdaysShort(b,"")+"|^"+this.weekdaysMin(b,""),this._weekdaysParse[d]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[d].test(a))return d},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var d=this._longDateFormat[a];return!d&&this._longDateFormat[a.toUpperCase()]&&(d=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,
function(a){return a.slice(1)}),this._longDateFormat[a]=d),d},isPM:function(a){return"p"===(a+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,d,b){return 11<a?b?"pm":"PM":b?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,d){var b=this._calendar[a];return"function"==typeof b?b.apply(d):b},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",
m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,d,b,c){var f=this._relativeTime[b];return"function"==typeof f?f(a,d,b,c):f.replace(/%d/i,a)},pastFuture:function(a,d){var b=this._relativeTime[0<a?"future":"past"];return"function"==typeof b?b(d):b.replace(/%s/i,d)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},
week:function(a){return z(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};y=function(a,d,b){return E({_i:a,_f:d,_l:b,_isUTC:!1})};y.utc=function(a,d,b){return E({_useUTC:!0,_isUTC:!0,_l:b,_i:a,_f:d})};y.unix=function(a){return y(1E3*a)};y.duration=function(a,d){var b,c,f=y.isDuration(a),u="number"==typeof a,n=f?a._input:u?{}:a,l=ha.exec(a);return u?d?n[d]=a:n.milliseconds=a:l&&(b="-"===l[1]?-1:1,n={y:0,d:~~l[2]*b,h:~~l[3]*b,m:~~l[4]*b,s:~~l[5]*b,ms:~~l[6]*b}),c=new e(n),f&&a.hasOwnProperty("_lang")&&
(c._lang=a._lang),c};y.version="2.1.0";y.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";y.updateOffset=function(){};y.lang=function(a,d){return a?(d?(d.abbr=a,X[a]||(X[a]=new f),X[a].set(d)):X[a]||k(a),y.duration.fn._lang=y.fn._lang=k(a),void 0):y.fn._lang._abbr};y.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),k(a)};y.isMoment=function(a){return a instanceof c};y.isDuration=function(a){return a instanceof e};y.fn=c.prototype={clone:function(){return y(this)},valueOf:function(){return+this._d+
6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return r(y(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!v(this._a,(this._isUTC?
y.utc(this._a):y(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){a=r(this,a||y.defaultFormat);return this.lang().postformat(a)},add:function(a,d){var b;return b="string"==typeof a?y.duration(+d,a):y.duration(a,d),q(this,b,1),this},subtract:function(a,d){var b;return b="string"==typeof a?y.duration(+d,a):y.duration(a,d),q(this,b,-1),this},diff:function(a,b,c){var f,e;a=
this._isUTC?y(a).zone(this._offset||0):y(a).local();var u=6E4*(this.zone()-a.zone());return b=x(b),"year"===b||"month"===b?(f=432E5*(this.daysInMonth()+a.daysInMonth()),e=12*(this.year()-a.year())+(this.month()-a.month()),e+=(this-y(this).startOf("month")-(a-y(a).startOf("month")))/f,e-=6E4*(this.zone()-y(this).startOf("month").zone()-(a.zone()-y(a).startOf("month").zone()))/f,"year"===b&&(e/=12)):(f=this-a,e="second"===b?f/1E3:"minute"===b?f/6E4:"hour"===b?f/36E5:"day"===b?(f-u)/864E5:"week"===b?
(f-u)/6048E5:f),c?e:d(e)},from:function(a,d){return y.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!d)},fromNow:function(a){return this.from(y(),a)},calendar:function(){var a=this.diff(y().startOf("day"),"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||
this.zone()<this.clone().month(5).zone()},day:function(a){var d=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-d}):d},month:function(a){var d,b=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(d=this.date(),this.date(1),this._d["set"+b+"Month"](a),this.date(Math.min(d,this.daysInMonth())),y.updateOffset(this),this):this._d["get"+
b+"Month"]()},startOf:function(a){switch(a=x(a)){case "year":this.month(0);case "month":this.date(1);case "week":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,d){return d="undefined"!=typeof d?d:"millisecond",+this.clone().startOf(d)>+y(a).startOf(d)},isBefore:function(a,d){return d="undefined"!=typeof d?
d:"millisecond",+this.clone().startOf(d)<+y(a).startOf(d)},isSame:function(a,d){return d="undefined"!=typeof d?d:"millisecond",+this.clone().startOf(d)===+y(a).startOf(d)},min:function(a){return a=y.apply(null,arguments),this>a?this:a},max:function(a){return a=y.apply(null,arguments),a>this?this:a},zone:function(a){var d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():("string"==typeof a&&(a=t(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,d!==a&&q(this,y.duration(d-
a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return y.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var d=S((y(this).startOf("day")-y(this).startOf("year"))/864E5)+1;return null==a?d:this.add("d",a-d)},weekYear:function(a){var d=z(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?d:this.add("y",a-d)},isoWeekYear:function(a){var d=z(this,1,4).year;
return null==a?d:this.add("y",a-d)},week:function(a){var d=this.lang().week(this);return null==a?d:this.add("d",7*(a-d))},isoWeek:function(a){var d=z(this,1,4).week;return null==a?d:this.add("d",7*(a-d))},weekday:function(a){var d=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?d:this.add("d",a-d)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},lang:function(a){return a===b?this._lang:(this._lang=k(a),this)}};for(C=0;C<ia.length;C++)na(ia[C].toLowerCase().replace(/s$/,
""),ia[C]);na("year","FullYear");y.fn.days=y.fn.day;y.fn.months=y.fn.month;y.fn.weeks=y.fn.week;y.fn.isoWeeks=y.fn.isoWeek;y.fn.toJSON=y.fn.toISOString;y.duration.fn=e.prototype={_bubble:function(){var a,b;a=this._milliseconds;b=this._days;var c=this._months,f=this._data;f.milliseconds=a%1E3;a=d(a/1E3);f.seconds=a%60;a=d(a/60);f.minutes=a%60;a=d(a/60);f.hours=a%24;b+=d(a/24);f.days=b%30;c+=d(b/30);f.months=c%12;b=d(c/12);f.years=b},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+
864E5*this._days+2592E6*(this._months%12)+31536E6*~~(this._months/12)},humanize:function(a){var d=+this,b;b=!a;var c=this.lang(),f=S(Math.abs(d)/1E3),e=S(f/60),n=S(e/60),l=S(n/24),p=S(l/365),f=45>f&&["s",f]||1===e&&["m"]||45>e&&["mm",e]||1===n&&["h"]||22>n&&["hh",n]||1===l&&["d"]||25>=l&&["dd",l]||45>=l&&["M"]||345>l&&["MM",S(l/30)]||1===p&&["y"]||["yy",p];b=(f[2]=b,f[3]=0<d,f[4]=c,u.apply({},f));return a&&(b=this.lang().pastFuture(d,b)),this.lang().postformat(b)},add:function(a,d){var b=y.duration(a,
d);return this._milliseconds+=b._milliseconds,this._days+=b._days,this._months+=b._months,this._bubble(),this},subtract:function(a,d){var b=y.duration(a,d);return this._milliseconds-=b._milliseconds,this._days-=b._days,this._months-=b._months,this._bubble(),this},get:function(a){return a=x(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=x(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:y.fn.lang};for(C in Z)Z.hasOwnProperty(C)&&(B(C,Z[C]),A(C.toLowerCase()));B("Weeks",6048E5);
y.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};y.lang("en",{ordinal:function(a){var d=a%10;return a+(1===~~(a%100/10)?"th":1===d?"st":2===d?"nd":3===d?"rd":"th")}});ra&&(module.exports=y);"undefined"==typeof ender&&(this.moment=y);"function"==typeof define&&define.amd&&define("moment",[],function(){return y})}.call(this);function plural(b,g){var h=b.split("_");return 1===g%10&&11!==g%100?h[0]:2<=g%10&&4>=g%10&&(10>g%100||20<=g%100)?h[1]:h[2]}
function relativeTimeWithPlural(b,g,h){var f={mm:"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"};return"m"===
h?g?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":b+" "+plural(f[h],+b)}
function monthsCaseReplace(b,g){return{nominative:"\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),accusative:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ")}[/D[oD]? *MMMM?/.test(g)?
"accusative":"nominative"][b.month()]}
function weekdaysCaseReplace(b,g){return{nominative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),accusative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0443 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0443 \u0441\u0443\u0431\u0431\u043e\u0442\u0443".split(" ")}[/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e)? ?\] ?dddd/.test(g)?"accusative":
"nominative"][b.day()]}
moment.lang("ru",{months:monthsCaseReplace,monthsShort:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" "),weekdays:weekdaysCaseReplace,weekdaysShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),weekdaysMin:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),
longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., LT",LLLL:"dddd, D MMMM YYYY \u0433., LT"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",nextWeek:function(){return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT"},lastWeek:function(){switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd [\u0432] LT";
case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"\u0447\u0430\u0441",hh:relativeTimeWithPlural,
d:"\u0434\u0435\u043d\u044c",dd:relativeTimeWithPlural,M:"\u043c\u0435\u0441\u044f\u0446",MM:relativeTimeWithPlural,y:"\u0433\u043e\u0434",yy:relativeTimeWithPlural},ordinal:function(b,g){switch(g){case "M":case "d":case "DDD":return b+"-\u0439";case "D":return b+"-\u0433\u043e";case "w":case "W":return b+"-\u044f";default:return b}},week:{dow:1,doy:7}});
(function(b,g){function h(a,d,b){if(-1===b.indexOf("%"))return b;a=a.style;var c=a.width,f;return a.width=b,f=d.width,a.width=c,f}function f(a,d,b){var c="height"!==d,f=c?a.offsetWidth:a.offsetHeight,e=c?"Left":"Top",n=c?"Right":"Bottom",c=k(a),l=parseFloat(c["padding"+e])||0,g=parseFloat(c["padding"+n])||0,m=parseFloat(c["border"+e+"Width"])||0,q=parseFloat(c["border"+n+"Width"])||0,e=c["margin"+e],n=c["margin"+n];r||(e=h(a,c,e),n=h(a,c,n));e=parseFloat(e)||0;n=parseFloat(n)||0;if(0<f)b?f+=e+n:f-=
l+g+m+q;else{f=c[d];if(0>f||null===f)f=a.style[d]||0;f=parseFloat(f)||0;b&&(f+=l+g+e+n+m+q)}return f}function c(a,d,c){a.addEventListener?a.addEventListener(d,c,!1):a.attachEvent&&(a["e"+d+c]=c,a[d+c]=function(){a["e"+d+c](b.event)},a.attachEvent("on"+d,a[d+c]))}function e(a,d){if(a){this.element=a;this.options={};for(var b in e.defaults)this.options[b]=e.defaults[b];for(b in d)this.options[b]=d[b];this._create();this.build()}}"use strict";var a=b.document,d="classList"in a.createElement("div"),l=
d?function(a,d){return a.classList.contains(d)}:function(a,d){return RegExp("(^|\\s+)"+d+"(\\s+|$)").test(a.className)},q=d?function(a,d){a.classList.add(d)}:function(a,d){l(a,d)||(a.className=a.className+" "+d)},v=d?function(a,d){a.classList.remove(d)}:function(a,d){a.className=a.className.replace(RegExp("(^|\\s+)"+d+"(\\s+|$)")," ")},x=a.defaultView,k=x&&x.getComputedStyle?function(a){return x.getComputedStyle(a,null)}:function(a){return a.currentStyle},m=a.getElementsByTagName("body")[0],d=a.createElement("div"),
a=m||a.createElement("body");d.style.marginTop="1%";a.appendChild(d);var r="1%"!==k(d).marginTop;a.removeChild(d);var n=["position","height"];e.defaults={isResizable:!0,gutterWidth:0,isRTL:!1,isFitWidth:!1};e.prototype={_getBricks:function(a){for(var d,b=0,c=a.length;b<c;b++)d=a[b],d.style.position="absolute",q(d,"masonry-brick"),this.bricks.push(d)},_create:function(){this.reloadItems();var a=this.element.style;this._originalStyle={};for(var d=0,f=n.length;d<f;d++){var e=n[d];this._originalStyle[e]=
a[e]||""}this.element.style.position="relative";this.horizontalDirection=this.options.isRTL?"right":"left";this.offset={};a=k(this.element);d=this.options.isRTL?"paddingRight":"paddingLeft";this.offset.y=parseFloat(a.paddingTop)||0;this.offset.x=parseFloat(a[d])||0;this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var l=this;setTimeout(function(){q(l.element,"masonry")});this.options.isResizable&&c(b,"resize",function(){l._handleResize()})},build:function(a){this._getColumns();
this._reLayout(a)},_getColumns:function(){var a=f(this.options.isFitWidth?this.element.parentNode:this.element,"width");this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||f(this.bricks[0],"width",!0)||a;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},reloadItems:function(){this.bricks=[];this._getBricks(this.element.children)},_reLayout:function(a){var d=this.cols;for(this.colYs=
[];d--;)this.colYs.push(0);this.layout(this.bricks,a)},layout:function(a,d){if(a&&a.length){for(var b,c,e,n,l,A,h=0,g=a.length;h<g;h++)if(b=a[h],1===b.nodeType){c=Math.ceil(f(b,"width",!0)/this.columnWidth);c=Math.min(c,this.cols);if(1===c)A=this.colYs;else{e=this.cols+1-c;A=[];for(l=0;l<e;l++)n=this.colYs.slice(l,l+c),A[l]=Math.max.apply(Math,n)}e=Math.min.apply(Math,A);c=0;for(l=A.length;c<l&&A[c]!==e;c++);b.style.top=e+this.offset.y+"px";b.style[this.horizontalDirection]=this.columnWidth*c+this.offset.x+
"px";b=e+f(b,"height",!0);A=this.cols+1-l;for(l=0;l<A;l++)this.colYs[c+l]=b}this.element.style.height=Math.max.apply(Math,this.colYs)+"px";if(this.options.isFitWidth){g=0;for(h=this.cols;--h&&0===this.colYs[h];)g++;this.element.style.width=(this.cols-g)*this.columnWidth-this.options.gutterWidth+"px"}d&&d.call(a)}},_handleResize:function(){var a=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(function(){a.resize();a._resizeTimeout=null},100)},resize:function(){var a=
this.cols;this._getColumns();(this.isFluid||this.cols!==a)&&this._reLayout()},reload:function(a){this.reloadItems();this.build(a)},appended:function(a,d,b){var c=this,e=function(){c._appended(a,b)};if(d){d=f(this.element,"height")+"px";for(var n=0,l=a.length;n<l;n++)a[n].style.top=d;setTimeout(e,1)}else e()},_appended:function(a,d){this._getBricks(a);this.layout(a,d)},destroy:function(){for(var a,d=0,c=this.bricks.length;d<c;d++)a=this.bricks[d],a.style.position="",a.style.top="",a.style.left="",
v(a,"masonry-brick");a=this.element.style;c=n.length;for(d=0;d<c;d++){var f=n[d];a[f]=this._originalStyle[f]}v(this.element,"masonry");this.resizeHandler&&(d=b,c=this.resizeHandler,d.removeEventListener?d.removeEventListener("resize",c,!1):d.detachEvent&&(d.detachEvent("onresize",d["resize"+c]),d["resize"+c]=null,d["eresize"+c]=null))}};e.getWH=f;b.Masonry=e})(window);
(function(b){function g(a){var d=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(this).ajaxSubmit(d))}function h(a){var d=a.target,c=b(d);if(!c.is(":submit,input:image")){d=c.closest(":submit");if(0===d.length)return;d=d[0]}var f=this;f.clk=d;"image"==d.type&&(void 0!==a.offsetX?(f.clk_x=a.offsetX,f.clk_y=a.offsetY):"function"==typeof b.fn.offset?(c=c.offset(),f.clk_x=a.pageX-c.left,f.clk_y=a.pageY-c.top):(f.clk_x=a.pageX-d.offsetLeft,f.clk_y=a.pageY-d.offsetTop));setTimeout(function(){f.clk=
f.clk_x=f.clk_y=null},100)}function f(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var c,e;c=void 0!==b("<input type='file'/>").get(0).files;e=void 0!==window.FormData;b.fn.ajaxSubmit=function(a){function d(a){a=b.param(a).split("&");var d=a.length,c={},f,e;for(f=0;f<d;f++)e=a[f].split("="),c[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);
return c}function l(c){for(var f=new FormData,e=0;e<c.length;e++)f.append(c[e].name,c[e].value);if(a.extraData){c=d(a.extraData);for(var n in c)c.hasOwnProperty(n)&&f.append(n,c[n])}a.data=null;n=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:g||"POST"});a.uploadProgress&&(n.xhr=function(){var d=jQuery.ajaxSettings.xhr();d.upload&&(d.upload.onprogress=function(d){var b=0,c=d.loaded||d.position,f=d.total;d.lengthComputable&&(b=Math.ceil(100*(c/f)));a.uploadProgress(d,
c,f,b)});return d});n.data=null;var u=n.beforeSend;n.beforeSend=function(a,d){d.data=f;u&&u.call(this,a,d)};return b.ajax(n)}function h(d){function c(){function a(){try{var d=(m.contentWindow?m.contentWindow.document:m.contentDocument?m.contentDocument:m.document).readyState;f("state = "+d);d&&"uninitialized"==d.toLowerCase()&&setTimeout(a,50)}catch(b){f("Server abort: ",b," (",b.name,")"),e(qa),Q&&clearTimeout(Q),Q=void 0}}var d=k.attr("target"),u=k.attr("action");n.setAttribute("target",w);g||n.setAttribute("method",
"POST");u!=l.url&&n.setAttribute("action",l.url);!l.skipEncodingOverride&&(!g||/post/i.test(g))&&k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});l.timeout&&(Q=setTimeout(function(){P=!0;e(da)},l.timeout));var p=[];try{if(l.extraData)for(var h in l.extraData)l.extraData.hasOwnProperty(h)&&(b.isPlainObject(l.extraData[h])&&l.extraData[h].hasOwnProperty("name")&&l.extraData[h].hasOwnProperty("value")?p.push(b('<input type="hidden" name="'+l.extraData[h].name+'">').attr("value",
l.extraData[h].value).appendTo(n)[0]):p.push(b('<input type="hidden" name="'+h+'">').attr("value",l.extraData[h]).appendTo(n)[0]));l.iframeTarget||(t.appendTo("body"),m.attachEvent?m.attachEvent("onload",e):m.addEventListener("load",e,!1));setTimeout(a,15);n.submit()}finally{n.setAttribute("action",u),d?n.setAttribute("target",d):k.removeAttr("target"),b(p).remove()}}function e(a){if(!q.aborted&&!R){try{D=m.contentWindow?m.contentWindow.document:m.contentDocument?m.contentDocument:m.document}catch(d){f("cannot access response document: ",
d),a=qa}if(a===da&&q)q.abort("timeout"),H.reject(q,"timeout");else if(a==qa&&q)q.abort("server abort"),H.reject(q,"error","server abort");else if(D&&D.location.href!=l.iframeSrc||P){m.detachEvent?m.detachEvent("onload",e):m.removeEventListener("load",e,!1);a="success";var c;try{if(P)throw"timeout";var n="xml"==l.dataType||D.XMLDocument||b.isXMLDoc(D);f("isXml="+n);if(!n&&(window.opera&&(null===D.body||!D.body.innerHTML))&&--ea){f("requeing onLoad callback, DOM not available");setTimeout(e,250);return}var u=
D.body?D.body:D.documentElement;q.responseText=u?u.innerHTML:null;q.responseXML=D.XMLDocument?D.XMLDocument:D;n&&(l.dataType="xml");q.getResponseHeader=function(a){return{"content-type":l.dataType}[a]};u&&(q.status=Number(u.getAttribute("status"))||q.status,q.statusText=u.getAttribute("statusText")||q.statusText);var h=(l.dataType||"").toLowerCase(),A=/(json|script|text)/.test(h);if(A||l.textarea){var g=D.getElementsByTagName("textarea")[0];if(g)q.responseText=g.value,q.status=Number(g.getAttribute("status"))||
q.status,q.statusText=g.getAttribute("statusText")||q.statusText;else if(A){var w=D.getElementsByTagName("pre")[0],z=D.getElementsByTagName("body")[0];w?q.responseText=w.textContent?w.textContent:w.innerText:z&&(q.responseText=z.textContent?z.textContent:z.innerText)}}else"xml"==h&&(!q.responseXML&&q.responseText)&&(q.responseXML=ga(q.responseText));try{sa=ua(q,h,l)}catch(k){a="parsererror",q.error=c=k||a}}catch(v){f("error caught: ",v),a="error",q.error=c=v||a}q.aborted&&(f("upload aborted"),a=null);
q.status&&(a=200<=q.status&&300>q.status||304===q.status?"success":"error");"success"===a?(l.success&&l.success.call(l.context,sa,"success",q),H.resolve(q.responseText,"success",q),p&&b.event.trigger("ajaxSuccess",[q,l])):a&&(void 0===c&&(c=q.statusText),l.error&&l.error.call(l.context,q,a,c),H.reject(q,"error",c),p&&b.event.trigger("ajaxError",[q,l,c]));p&&b.event.trigger("ajaxComplete",[q,l]);p&&!--b.active&&b.event.trigger("ajaxStop");l.complete&&l.complete.call(l.context,q,a);R=!0;l.timeout&&
clearTimeout(Q);setTimeout(function(){l.iframeTarget||t.remove();q.responseXML=null},100)}}}var n=k[0],u,l,p,w,t,m,q,x,P,Q;x=!!b.fn.prop;var H=b.Deferred();if(b(":input[name=submit],:input[id=submit]",n).length)return alert('Error: Form elements must not have name or id of "submit".'),H.reject(),H;if(d)for(u=0;u<r.length;u++)d=b(r[u]),x?d.prop("disabled",!1):d.removeAttr("disabled");l=b.extend(!0,{},b.ajaxSettings,a);l.context=l.context||l;w="jqFormIO"+(new Date).getTime();l.iframeTarget?(t=b(l.iframeTarget),
(d=t.attr("name"))?w=d:t.attr("name",w)):(t=b('<iframe name="'+w+'" src="'+l.iframeSrc+'" />'),t.css({position:"absolute",top:"-1000px",left:"-1000px"}));m=t[0];q={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var d="timeout"===a?"timeout":"aborted";f("aborting upload... "+d);this.aborted=1;if(m.contentWindow.document.execCommand)try{m.contentWindow.document.execCommand("Stop")}catch(c){}t.attr("src",
l.iframeSrc);q.error=d;l.error&&l.error.call(l.context,q,d,a);p&&b.event.trigger("ajaxError",[q,l,d]);l.complete&&l.complete.call(l.context,q,d)}};(p=l.global)&&0===b.active++&&b.event.trigger("ajaxStart");p&&b.event.trigger("ajaxSend",[q,l]);if(l.beforeSend&&!1===l.beforeSend.call(l.context,q,l))return l.global&&b.active--,H.reject(),H;if(q.aborted)return H.reject(),H;if(x=n.clk)if((d=x.name)&&!x.disabled)l.extraData=l.extraData||{},l.extraData[d]=x.value,"image"==x.type&&(l.extraData[d+".x"]=n.clk_x,
l.extraData[d+".y"]=n.clk_y);var da=1,qa=2;x=b("meta[name=csrf-token]").attr("content");if((d=b("meta[name=csrf-param]").attr("content"))&&x)l.extraData=l.extraData||{},l.extraData[d]=x;l.forceSync?c():setTimeout(c,10);var sa,D,ea=50,R,ga=b.parseXML||function(a,d){window.ActiveXObject?(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a)):d=(new DOMParser).parseFromString(a,"text/xml");return d&&d.documentElement&&"parsererror"!=d.documentElement.nodeName?d:null},fa=b.parseJSON||function(a){return window.eval("("+
a+")")},ua=function(a,d,c){var f=a.getResponseHeader("content-type")||"",e="xml"===d||!d&&0<=f.indexOf("xml");a=e?a.responseXML:a.responseText;e&&"parsererror"===a.documentElement.nodeName&&b.error&&b.error("parsererror");c&&c.dataFilter&&(a=c.dataFilter(a,d));"string"===typeof a&&("json"===d||!d&&0<=f.indexOf("json")?a=fa(a):("script"===d||!d&&0<=f.indexOf("javascript"))&&b.globalEval(a));return a};return H}if(!this.length)return f("ajaxSubmit: skipping submit process - no element selected"),this;
var g,x,k=this;"function"==typeof a&&(a={success:a});g=this.attr("method");x=this.attr("action");(x=(x="string"===typeof x?b.trim(x):"")||window.location.href||"")&&(x=(x.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:x,success:b.ajaxSettings.success,type:g||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);x={};this.trigger("form-pre-serialize",[this,a,x]);if(x.veto)return f("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&
!1===a.beforeSerialize(this,a))return f("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=a.traditional;void 0===m&&(m=b.ajaxSettings.traditional);var r=[],n,t=this.formToArray(a.semantic,r);a.data&&(a.extraData=a.data,n=b.param(a.data,m));if(a.beforeSubmit&&!1===a.beforeSubmit(t,this,a))return f("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[t,this,a,x]);if(x.veto)return f("ajaxSubmit: submit vetoed via form-submit-validate trigger"),
this;x=b.param(t,m);n&&(x=x?x+"&"+n:n);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+x,a.data=null):a.data=x;var p=[];a.resetForm&&p.push(function(){k.resetForm()});a.clearForm&&p.push(function(){k.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var w=a.success||function(){};p.push(function(d){var c=a.replaceTarget?"replaceWith":"html";b(a.target)[c](d).each(w,arguments)})}else a.success&&p.push(a.success);a.success=function(d,b,c){for(var f=a.context||this,e=0,n=p.length;e<
n;e++)p[e].apply(f,[d,b,c||k,k])};n=0<b("input:file:enabled[value]",this).length;x="multipart/form-data"==k.attr("enctype")||"multipart/form-data"==k.attr("encoding");m=c&&e;f("fileAPI :"+m);var u;!1!==a.iframe&&(a.iframe||(n||x)&&!m)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){u=h(t)}):u=h(t):u=(n||x)&&m?l(t):b.ajax(a);k.removeData("jqxhr").data("jqxhr",u);for(n=0;n<r.length;n++)r[n]=null;this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){a=a||{};a.delegation=
a.delegation&&b.isFunction(b.fn.on);if(!a.delegation&&0===this.length){var d=this.selector,c=this.context;if(!b.isReady&&d)return f("DOM not ready, queuing ajaxForm"),b(function(){b(d,c).ajaxForm(a)}),this;f("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return a.delegation?(b(document).off("submit.form-plugin",this.selector,g).off("click.form-plugin",this.selector,h).on("submit.form-plugin",this.selector,a,g).on("click.form-plugin",this.selector,a,h),
this):this.ajaxFormUnbind().bind("submit.form-plugin",a,g).bind("click.form-plugin",a,h)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,d){var f=[];if(0===this.length)return f;var e=this[0],h=a?e.getElementsByTagName("*"):e.elements;if(!h)return f;var g,k,m,r,n,t;g=0;for(t=h.length;g<t;g++)if(n=h[g],m=n.name)if(a&&e.clk&&"image"==n.type)!n.disabled&&e.clk==n&&(f.push({name:m,value:b(n).val(),type:n.type}),f.push({name:m+".x",
value:e.clk_x},{name:m+".y",value:e.clk_y}));else if((r=b.fieldValue(n,!0))&&r.constructor==Array){d&&d.push(n);k=0;for(n=r.length;k<n;k++)f.push({name:m,value:r[k]})}else if(c&&"file"==n.type&&!n.disabled)if(d&&d.push(n),r=n.files,r.length)for(k=0;k<r.length;k++)f.push({name:m,value:r[k],type:n.type});else f.push({name:m,value:"",type:n.type});else null!==r&&"undefined"!=typeof r&&(d&&d.push(n),f.push({name:m,value:r,type:n.type,required:n.required}));if(!a&&e.clk&&(h=b(e.clk),g=h[0],(m=g.name)&&
!g.disabled&&"image"==g.type))f.push({name:m,value:h.val()}),f.push({name:m+".x",value:e.clk_x},{name:m+".y",value:e.clk_y});return f};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var d=[];this.each(function(){var c=this.name;if(c){var f=b.fieldValue(this,a);if(f&&f.constructor==Array)for(var e=0,h=f.length;e<h;e++)d.push({name:c,value:f[e]});else null!==f&&"undefined"!=typeof f&&d.push({name:this.name,value:f})}});return b.param(d)};b.fn.fieldValue=
function(a){for(var d=[],c=0,f=this.length;c<f;c++){var e=b.fieldValue(this[c],a);null===e||("undefined"==typeof e||e.constructor==Array&&!e.length)||(e.constructor==Array?b.merge(d,e):d.push(e))}return d};b.fieldValue=function(a,d){var c=a.name,f=a.type,e=a.tagName.toLowerCase();void 0===d&&(d=!0);if(d&&(!c||a.disabled||"reset"==f||"button"==f||("checkbox"==f||"radio"==f)&&!a.checked||("submit"==f||"image"==f)&&a.form&&a.form.clk!=a||"select"==e&&-1==a.selectedIndex))return null;if("select"==e){var h=
a.selectedIndex;if(0>h)return null;for(var c=[],e=a.options,g=(f="select-one"==f)?h+1:e.length,h=f?h:0;h<g;h++){var m=e[h];if(m.selected){var r=m.value;r||(r=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value);if(f)return r;c.push(r)}}return c}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var c=this.type,f=this.tagName.toLowerCase();if(d.test(c)||"textarea"==f)this.value="";else if("checkbox"==c||"radio"==c)this.checked=!1;else if("select"==f)this.selectedIndex=-1;else if(a&&(!0===a&&/hidden/.test(c)||"string"==typeof a&&b(this).is(a)))this.value=""})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=
!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var d=this.type;"checkbox"==d||"radio"==d?this.checked=a:"option"==this.tagName.toLowerCase()&&(d=b(this).parent("select"),a&&(d[0]&&"select-one"==d[0].type)&&d.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1})(jQuery);
(function(b){b.rating=function(h,f){this.options=b.extend({fx:"float",image:"/images/stars.png",stars:5,minimal:0,titles:["\u0433\u043e\u043b\u043e\u0441","\u0433\u043e\u043b\u043e\u0441\u0430","\u0433\u043e\u043b\u043e\u0441\u043e\u0432"],readOnly:!1,url:"",type:"post",loader:"/images/ajax-loader.gif",click:function(){},callback:function(){}},f||{});this.el=b(h);this.height=this.width=this.left=0;this._data={};var c=this;this.el.find(":hidden").each(function(){var a=b(this);c._data[a.attr("name")]=
a.val()});this._data.val=parseFloat(this._data.val)||0;this._data.votes=parseFloat(this._data.votes)||"";this._data.val>this.options.stars&&(this._data.val=this.options.stars);0>this._data.val&&(this._data.val=0);this.old=this._data.val;this.vote_wrap=b('<div class="vote-wrap"></div>');this.vote_block=b('<div class="vote-block"></div>');this.vote_hover=b('<div class="vote-hover"></div>');this.vote_stars=b('<div class="vote-stars"></div>');this.vote_active=b('<div class="vote-active"></div>');this.vote_result=
b('<div class="vote-result"></div>');this.vote_success=b('<div class="vote-success"></div>');this.loader=b('<img src="'+this.options.loader+'" alt="load...">');this.el.html(this.loader);var e=new Image;e.src=this.options.image;e.onload=function(){c.width=this.width;c.height=this.height/3;c.init()}};var g=b.rating;g.fn=g.prototype={rating:"2.0"};g.fn.extend=g.extend=b.extend;g.fn.extend({init:function(){this.render();if(!this.options.readOnly){var h=this,f=0,c=0;this.vote_hover.bind("mousemove mouseover",
function(e){if(!h.options.readOnly){var a=b(this),d=0;f=0<e.clientX?e.clientX:e.pageX;c=f-a.offset().left-2;e=h.width*h.options.stars;a=h.options.minimal*h.width;c>e&&(c=e);c<a&&(c=a);Math.round(10*(c/h.width));"half"==h.options.fx?c=Math.ceil(2*(c/h.width))*h.width/2:"float"!=h.options.fx&&(c=Math.ceil(c/h.width)*h.width);d=Math.round(10*(c/h.width))/10;h.vote_active.css({width:c,"background-position":"left center"});h.vote_success.html("\u0412\u0430\u0448\u0430 \u043e\u0446\u0435\u043d\u043a\u0430:"+
d)}}).bind("mouseout",function(){h.options.readOnly||(h.reset(),h.vote_success.empty())}).bind("click.rating",function(){if(!h.options.readOnly){var b=Math.round(10*(c/h.width))/10;b>h.options.stars&&(b=h.options.stars);0>b&&(b=0);h.old=h._data.val;h._data.val=(h._data.val*h._data.votes+b)/(h._data.votes+1);h._data.val=Math.round(100*h._data.val)/100;h._data.score=b;h.vote_success.html("\u0412\u0430\u0448\u0430 \u043e\u0446\u0435\u043d\u043a\u0430:"+b);""!=h.options.url&&h.send();h.options.readOnly=
!0;h.options.click.apply(this,[b])}})}},set:function(){this.vote_active.css({width:this._data.val*this.width,"background-position":"left bottom"})},reset:function(){this.vote_active.css({width:this.old*this.width,"background-position":"left bottom"})},setvoters:function(){this.vote_result.html(this.declOfNum(this._data.votes))},render:function(){this.el.html(this.vote_wrap.append(this.vote_hover.css({padding:"0 4px",height:this.height,width:this.width*this.options.stars}),this.vote_result.text(this.declOfNum(this._data.votes)),
this.vote_success));this.vote_block.append(this.vote_stars.css({height:this.height,width:this.width*this.options.stars,background:"url('"+this.options.image+"') left top"}),this.vote_active.css({height:this.height,width:this._data.val*this.width,background:"url('"+this.options.image+"') left bottom"})).appendTo(this.vote_hover)},send:function(h){var f=this;this.vote_result.html(this.loader);this._data.votes++;b.ajax({url:f.options.url,type:f.options.type,data:this._data,dataType:"json",success:function(b){"OK"==
b.status?f.set():(f._data.votes--,f.reset());f.setvoters();b.msg&&f.vote_success.html(b.msg);"function"==typeof f.options.callback&&f.options.callback.apply(f,[b])}})},declOfNum:function(b){if(0>=b)return"";b=Math.abs(Math.floor(b));cases=[2,0,1,1,1,2];return b+" "+this.options.titles[4<b%100&&20>b%100?2:cases[5>b%10?b%10:5]]}});b.fn.rating=function(h){if("string"==typeof h){var f=b(this).data("rating"),c=Array.prototype.slice.call(arguments,1);return f[h].apply(f,c)}return this.each(function(){var c=
b(this).data("rating");c?(h&&b.extend(c.options,h),c.init()):b(this).data("rating",new g(this,h))})}})(jQuery);
!function(b,g,h){function f(a,d){var b=Math.max(0,a[0]-d[0],d[0]-a[1]),c=Math.max(0,a[2]-d[1],d[1]-a[3]);return b+c}function c(a,d,c){var f=a.length;for(c=c?"offset":"position";f--;){var e=a[f].el?a[f].el:b(a[f]),n=e[c]();d[f]=[n.left,n.left+e.outerWidth(!0),n.top,n.top+e.outerHeight(!0)]}}function e(a,d){var b=d.offset();return{left:a.left-b.left,top:a.top-b.top}}function a(a,d,b){d=[d.left,d.top];b=b&&[b.left,b.top];for(var c,e=a.length,n=[];e--;)c=a[e],n[e]=[e,f(c,d),b&&f(c,b)];return n=n.sort(function(a,
d){return d[1]-a[1]||d[2]-a[2]||d[0]-a[0]})}function d(a,d,b,c){a=a.find(d);for(d=a.length;d--;){var f=a.eq(d).data(m);if(f)f[b](c)}}function l(a){this.options=b.extend({},n,a);this.containers=[];this.childGroups=[];this.scrolledProxy=b.proxy(this.scrolled,this);this.dragProxy=b.proxy(this.drag,this);this.dropProxy=b.proxy(this.drop,this);this.options.parentGroup?this.options.parentGroup.childGroups.push(this):(this.placeholder=b(this.options.placeholder),a.isValidTarget||(this.options.isValidTarget=
h))}function q(a,d){this.el=a;this.childGroups=[];this.floatRight=!1;this.dragInitProxy=b.proxy(this.dragInit,this);this.options=b.extend({},r,d);this.group=l.get(this.options);this.rootGroup=this.options.rootGroup=this.options.rootGroup||this.group;this.parentGroup=this.options.parentGroup=this.options.parentGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;this.enable(!0)}var v,x,k,m="sortable",r={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},n=
{afterMove:function(){},containerSelector:"ol, ul",distance:0,handle:"",itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(a,d){a.css(d)},onDragStart:function(a){a.css({height:a.height(),width:a.width()});a.addClass("dragged");b("body").addClass("dragging")},onDrop:function(a){a.removeClass("dragged").removeAttr("style");b("body").removeClass("dragging")},onMousedown:function(a,d){d.preventDefault()},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,
serialize:function(a,d,c){a=b.extend({},a.data());if(c)return d;d[0]&&(a.children=d,delete a.subContainer);delete a.sortable;return a},tolerance:0},t={},p=0;"ontouchstart"in g?(v="touchstart.sortable",x="touchend.sortable touchcancel.sortable",k="touchmove.sortable"):(v="mousedown.sortable",x="mouseup.sortable",k="mousemove.sortable");l.get=function(a){t[a.group]||(a.group||(a.group=p++),t[a.group]=new l(a));return t[a.group]};l.prototype={dragInit:function(a,d){this.$document=b(d.el[0].ownerDocument);
this.toggleListeners("on");this.item=b(a.target).closest(this.options.itemSelector);this.itemContainer=d;this.setPointer(a);this.options.onMousedown(this.item,a,n.onMousedown)},drag:function(a){if(!this.dragging){if(!this.distanceMet(a))return;d(this.item,this.options.containerSelector,"disable",!0);this.options.onDragStart(this.item,this.itemContainer,n.onDragStart);this.item.before(this.placeholder);this.dragging=!0}this.setPointer(a);this.options.onDrag(this.item,e(this.pointer,this.item.offsetParent()),
n.onDrag);var b=a.pageX;a=a.pageY;var c=this.sameResultBox,f=this.options.tolerance;if(!c||c.top-f>a||c.bottom+f<a||c.left-f>b||c.right+f<b)this.searchValidTarget()||this.placeholder.detach()},drop:function(){this.toggleListeners("off");if(this.dragging){if(this.placeholder.closest("html")[0])this.placeholder.before(this.item).detach();else this.options.onCancel(this.item,this.itemContainer,n.onCancel);this.options.onDrop(this.item,this.getContainer(this.item),n.onDrop);d(this.item,this.options.containerSelector,
"enable",!0);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=h;this.dragging=!1}this.item=h},searchValidTarget:function(d,b){d||(d=this.relativePointer||this.pointer,b=this.lastRelativePointer||this.lastPointer);for(var c=a(this.getContainerDimensions(),d,b),f=c.length;f--;){var n=c[f][0];if(!c[f][1]||this.options.pullPlaceholder){n=this.containers[n];if(!this.$getOffsetParent()){var l=n.getItemOffsetParent();d=e(d,l);b=e(b,l)}if(n.searchValidTarget(d,b))return!0}}},
movePlaceholder:function(a,d,b,c){var f=this.lastAppendedItem;if(c||!(f&&f[0]===d[0]))d[b](this.placeholder),this.lastAppendedItem=d,this.sameResultBox=c,this.options.afterMove(this.placeholder,a)},getContainerDimensions:function(){this.containerDimensions||c(this.containers,this.containerDimensions=[],!this.$getOffsetParent());return this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data(m)},$getOffsetParent:function(){if(this.offsetParent===h){var a=
this.containers.length-1,d=this.containers[a].getItemOffsetParent();if(!this.options.parentGroup)for(;a--;)if(d[0]!=this.containers[a].getItemOffsetParent()[0]){d=!1;break}this.offsetParent=d}return this.offsetParent},clearOffsetParent:function(){this.offsetParent=h},setPointer:function(a){a={left:a.pageX,top:a.pageY};if(this.$getOffsetParent()){var d=e(a,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=d}this.lastPointer=this.pointer;this.pointer=a},distanceMet:function(a){return Math.max(Math.abs(this.pointer.left-
a.pageX),Math.abs(this.pointer.top-a.pageY))>=this.options.distance},addContainer:function(a){this.containers.push(a)},removeContainer:function(a){a=b.inArray(a,this.containers);if(-1!==a){var d=this.containers,c=d.slice(a+1||d.length);d.length=0>a?d.length+a:a;d.push.apply(d,c)}},scrolled:function(){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(a){this.$document[a](k,this.dragProxy)[a](x,this.dropProxy)[a]("scroll.sortable",this.scrolledProxy)},clearDimensions:function(){this.containerDimensions=
h;for(var a=this.containers.length;a--;)this.containers[a].itemDimensions=h;for(a=this.childGroups.length;a--;)this.childGroups[a].clearDimensions()}};q.prototype={dragInit:function(a){var d=this.rootGroup;!d.item&&1===a.which&&this.options.drag&&!b(a.target).is(this.options.exclude)&&d.dragInit(a,this)},searchValidTarget:function(d,b){var c=a(this.getItemDimensions(),d,b),f=c.length,e=this.rootGroup,n=!e.options.isValidTarget||e.options.isValidTarget(e.item,this);if(!f&&n)return e.movePlaceholder(this,
this.el,"append"),!0;for(;f--;)if(e=c[f][0],!c[f][1]&&this.options.nested&&this.getContainerGroup(e)){if(this.getContainerGroup(e).searchValidTarget(d,b))return!0}else if(n)return this.movePlaceholder(e,d),!0},movePlaceholder:function(a,d){var c=b(this.items[a]),f=this.itemDimensions[a],e="after",n=c.outerWidth(),l=c.outerHeight(),h=c.offset(),h={left:h.left,right:h.left+n,top:h.top,bottom:h.top+l};this.options.vertical?d.top<=(f[2]+f[3])/2?(e="before",h.bottom-=l/2):h.top+=l/2:d.left<=(f[0]+f[1])/
2!=this.floatRight?(e="before",h.right-=n/2):h.left+=n/2;this.rootGroup.movePlaceholder(this,c,e,h)},getItemDimensions:function(){this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.dragged)").get(),c(this.items,this.itemDimensions=[]));return this.itemDimensions},getItemOffsetParent:function(){var a=this.el;return"relative"===a.css("position")||"absolute"===a.css("position")||"fixed"===a.css("position")?a:a.offsetParent()},getContainerGroup:function(a){var d=b.data(this.items[a],
"subContainer");if(d===h){var c=this.$getChildren(this.items[a],"container"),d=!1;c[0]&&(d=b.extend({},this.options,{parentGroup:this.group,group:p++}),d=c[m](d).data(m).group);b.data(this.items[a],"subContainer",d)}return d},$getChildren:function(a,d){return b(a).children(this.rootGroup.options[d+"Selector"])},_serialize:function(a,d){var c=this,f=this.$getChildren(a,d?"item":"container").not(this.options.exclude).map(function(){return c._serialize(b(this),!d)}).get();return this.rootGroup.options.serialize(a,
f,d)}};var w={enable:function(a){this.options.drop&&this.group.addContainer(this);a||d(this.el,this.options.containerSelector,"enable",!0);this.el.on(v,this.handle,this.dragInitProxy)},disable:function(a){this.options.drop&&this.group.removeContainer(this);a||d(this.el,this.options.containerSelector,"disable",!0);this.el.off(v)},serialize:function(){return this._serialize(this.el,!0)}};b.extend(q.prototype,w);b.fn[m]=function(a){var d=Array.prototype.slice.call(arguments,1);return this.map(function(){var c=
b(this),f=c.data(m);if(f&&w[a])return w[a].apply(f,d)||this;!f&&(a===h||"object"===typeof a)&&c.data(m,new q(c,a));return this})}}(jQuery,window);
!function(b){var g=function(b,c){this.init("tooltip",b,c)};g.prototype={constructor:g,init:function(f,c,e){var a;this.type=f;this.$element=b(c);this.options=this.getOptions(e);this.enabled=!0;c=this.options.trigger.split(" ");for(e=c.length;e--;)if(a=c[e],"click"==a)this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this));else"manual"!=a&&(f="hover"==a?"mouseenter":"focus",a="hover"==a?"mouseleave":"blur",this.$element.on(f+"."+this.type,this.options.selector,b.proxy(this.enter,
this)),this.$element.on(a+"."+this.type,this.options.selector,b.proxy(this.leave,this)));this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(f){f=b.extend({},b.fn[this.type].defaults,this.$element.data(),f);f.delay&&"number"==typeof f.delay&&(f.delay={show:f.delay,hide:f.delay});return f},enter:function(f){var c=b.fn[this.type].defaults,e={},a;this._options&&b.each(this._options,function(a,b){c[a]!=b&&(e[a]=b)},this);a=
b(f.currentTarget)[this.type](e).data(this.type);if(!a.options.delay||!a.options.delay.show)return a.show();clearTimeout(this.timeout);a.hoverState="in";this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)},leave:function(f){var c=b(f.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out";this.timeout=setTimeout(function(){"out"==c.hoverState&&
c.hide()},c.options.delay.hide)},show:function(){var f,c,e,a,d;c=b.Event("show");if(this.hasContent()&&this.enabled&&(this.$element.trigger(c),!c.isDefaultPrevented())){f=this.tip();this.setContent();this.options.animation&&f.addClass("fade");a="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement;f.detach().css({top:0,left:0,display:"block"});this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);c=
this.getPosition();e=f[0].offsetWidth;f=f[0].offsetHeight;switch(a){case "bottom":d={top:c.top+c.height,left:c.left+c.width/2-e/2};break;case "top":d={top:c.top-f,left:c.left+c.width/2-e/2};break;case "left":d={top:c.top+c.height/2-f/2,left:c.left-e};break;case "right":d={top:c.top+c.height/2-f/2,left:c.left+c.width}}this.applyPlacement(d,a);this.$element.trigger("shown")}},applyPlacement:function(b,c){var e=this.tip(),a=e[0].offsetWidth,d=e[0].offsetHeight,l,h,g;e.offset(b).addClass(c).addClass("in");
l=e[0].offsetWidth;h=e[0].offsetHeight;"top"==c&&h!=d&&(b.top=b.top+d-h,g=!0);"bottom"==c||"top"==c?(d=0,0>b.left&&(d=-2*b.left,b.left=0,e.offset(b),l=e[0].offsetWidth),this.replaceArrow(d-a+l,l,"left")):this.replaceArrow(h-d,h,"top");g&&e.offset(b)},replaceArrow:function(b,c,e){this.arrow().css(e,b?50*(1-b/c)+"%":"")},setContent:function(){var b=this.tip(),c=this.getTitle();b.find(".tooltip-inner")[this.options.html?"html":"text"](c);b.removeClass("fade in top bottom left right")},hide:function(){function f(){var a=
setTimeout(function(){c.off(b.support.transition.end).detach()},500);c.one(b.support.transition.end,function(){clearTimeout(a);c.detach()})}var c=this.tip(),e=b.Event("hide");this.$element.trigger(e);if(!e.isDefaultPrevented())return c.removeClass("in"),b.support.transition&&this.$tip.hasClass("fade")?f():c.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var b=this.$element;if(b.attr("title")||"string"!=typeof b.attr("data-original-title"))b.attr("data-original-title",b.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var f=this.$element[0];return b.extend({},"function"==typeof f.getBoundingClientRect?f.getBoundingClientRect():{width:f.offsetWidth,height:f.offsetHeight},this.$element.offset())},getTitle:function(){var b=this.$element,c=this.options;return b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||b(this.options.template)},arrow:function(){return this.$arrow=
this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(f){f=f?b(f.currentTarget)[this.type](this._options).data(this.type):this;f.tip().hasClass("in")?f.hide():f.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var h=b.fn.tooltip;
b.fn.tooltip=function(f){return this.each(function(){var c=b(this),e=c.data("tooltip"),a="object"==typeof f&&f;e||c.data("tooltip",e=new g(this,a));if("string"==typeof f)e[f]()})};b.fn.tooltip.Constructor=g;b.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};b.fn.tooltip.noConflict=function(){b.fn.tooltip=h;return this}}(window.jQuery);
!function(b){var g=function(f){this.element=b(f)};g.prototype={constructor:g,show:function(){var f=this.element,c=f.closest("ul:not(.dropdown-menu)"),e=f.attr("data-target"),a,d;e||(e=(e=f.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));f.parent("li").hasClass("active")||(a=c.find(".active:last a")[0],d=b.Event("show",{relatedTarget:a}),f.trigger(d),d.isDefaultPrevented()||(e=b(e),this.activate(f.parent("li"),c),this.activate(e,e.parent(),function(){f.trigger({type:"shown",relatedTarget:a})})))},activate:function(f,
c,e){function a(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");l?(f[0].offsetWidth,f.addClass("in")):f.removeClass("fade");f.parent(".dropdown-menu")&&f.closest("li.dropdown").addClass("active");e&&e()}var d=c.find("> .active"),l=e&&b.support.transition&&d.hasClass("fade");l?d.one(b.support.transition.end,a):a();d.removeClass("in")}};var h=b.fn.tab;b.fn.tab=function(f){return this.each(function(){var c=b(this),e=c.data("tab");e||c.data("tab",
e=new g(this));if("string"==typeof f)e[f]()})};b.fn.tab.Constructor=g;b.fn.tab.noConflict=function(){b.fn.tab=h;return this};b(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(f){f.preventDefault();b(this).tab("show")})}(window.jQuery);
!function(b){var g=function(b,c){this.init("popover",b,c)};g.prototype=b.extend({},b.fn.tooltip.Constructor.prototype,{constructor:g,setContent:function(){var b=this.tip(),c=this.getTitle(),e=this.getContent();b.find(".popover-title")[this.options.html?"html":"text"](c);b.find(".popover-content")[this.options.html?"html":"text"](e);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,c=this.options;
return("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){this.$tip||(this.$tip=b(this.options.template));return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var h=b.fn.popover;b.fn.popover=function(f){return this.each(function(){var c=b(this),e=c.data("popover"),a="object"==typeof f&&f;e||c.data("popover",e=new g(this,a));if("string"==typeof f)e[f]()})};b.fn.popover.Constructor=g;b.fn.popover.defaults=
b.extend({},b.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover popup"><div class="arrow"></div><div class="p-top"><h3 class="popover-title"></h3><button class="p-close"></button></div><div class="p-body"><div class="popover-content"></div><br><span href="#" class="fr a-btn a-no">\u041d\u0435\u0442</span><span href="#" class="a-btn a-yes">\u0414\u0430</span></div></div>'});b.fn.popover.noConflict=function(){b.fn.popover=h;return this}}(window.jQuery);
var Handlebars={};
(function(b,g){b.VERSION="1.0.0-rc.4";b.COMPILER_REVISION=3;b.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:">= 1.0.0-rc.4"};b.helpers={};b.partials={};var h=Object.prototype.toString;b.registerHelper=function(a,d,c){if("[object Object]"===h.call(a)){if(c||d)throw new b.Exception("Arg not supported with multiple helpers");b.Utils.extend(this.helpers,a)}else c&&(d.not=c),this.helpers[a]=d};b.registerPartial=function(a,d){"[object Object]"===h.call(a)?b.Utils.extend(this.partials,a):this.partials[a]=
d};b.registerHelper("helperMissing",function(a){if(2===arguments.length)return g;throw Error("Could not find property '"+a+"'");});b.registerHelper("blockHelperMissing",function(a,d){var c=d.inverse||function(){},f=d.fn,e=h.call(a);"[object Function]"===e&&(a=a.call(this));return!0===a?f(this):!1===a||null==a?c(this):"[object Array]"===e?0<a.length?b.helpers.each(a,d):c(this):f(a)});b.K=function(){};b.createFrame=Object.create||function(a){b.K.prototype=a;a=new b.K;b.K.prototype=null;return a};b.logger=
{DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{"0":"debug",1:"info",2:"warn",3:"error"},log:function(a,d){if(b.logger.level<=a){var c=b.logger.methodMap[a];"undefined"!==typeof console&&console[c]&&console[c].call(console,d)}}};b.log=function(a,d){b.logger.log(a,d)};b.registerHelper("each",function(a,d){var c=d.fn,f=d.inverse,e=0,l="",h;d.data&&(h=b.createFrame(d.data));if(a&&"object"===typeof a)if(a instanceof Array)for(var g=a.length;e<g;e++)h&&(h.index=e),l+=c(a[e],{data:h});else for(g in a)a.hasOwnProperty(g)&&
(h&&(h.key=g),l+=c(a[g],{data:h}),e++);0===e&&(l=f(this));return l});b.registerHelper("if",function(a,d){"[object Function]"===h.call(a)&&(a=a.call(this));return!a||b.Utils.isEmpty(a)?d.inverse(this):d.fn(this)});b.registerHelper("unless",function(a,d){return b.helpers["if"].call(this,a,{fn:d.inverse,inverse:d.fn})});b.registerHelper("with",function(a,d){if(!b.Utils.isEmpty(a))return d.fn(a)});b.registerHelper("log",function(a,d){var c=d.data&&null!=d.data.level?parseInt(d.data.level,10):1;b.log(c,
a)});var f=function(){function a(){this.yy={}}var d={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,
pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,
2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(a,d,b,c,f,e,l){a=e.length-1;switch(f){case 1:return e[a-1];case 2:this.$=new c.ProgramNode([],e[a]);break;case 3:this.$=new c.ProgramNode(e[a-2],e[a]);break;case 4:this.$=new c.ProgramNode(e[a-1],[]);break;case 5:this.$=new c.ProgramNode(e[a]);break;case 6:this.$=new c.ProgramNode([],[]);break;case 7:this.$=new c.ProgramNode([]);break;case 8:this.$=
[e[a]];break;case 9:e[a-1].push(e[a]);this.$=e[a-1];break;case 10:this.$=new c.BlockNode(e[a-2],e[a-1].inverse,e[a-1],e[a]);break;case 11:this.$=new c.BlockNode(e[a-2],e[a-1],e[a-1].inverse,e[a]);break;case 12:this.$=e[a];break;case 13:this.$=e[a];break;case 14:this.$=new c.ContentNode(e[a]);break;case 15:this.$=new c.CommentNode(e[a]);break;case 16:this.$=new c.MustacheNode(e[a-1][0],e[a-1][1]);break;case 17:this.$=new c.MustacheNode(e[a-1][0],e[a-1][1]);break;case 18:this.$=e[a-1];break;case 19:this.$=
new c.MustacheNode(e[a-1][0],e[a-1][1]);break;case 20:this.$=new c.MustacheNode(e[a-1][0],e[a-1][1],!0);break;case 21:this.$=new c.PartialNode(e[a-1]);break;case 22:this.$=new c.PartialNode(e[a-2],e[a-1]);break;case 24:this.$=[[e[a-2]].concat(e[a-1]),e[a]];break;case 25:this.$=[[e[a-1]].concat(e[a]),null];break;case 26:this.$=[[e[a-1]],e[a]];break;case 27:this.$=[[e[a]],null];break;case 28:this.$=[[new c.DataNode(e[a])],null];break;case 29:e[a-1].push(e[a]);this.$=e[a-1];break;case 30:this.$=[e[a]];
break;case 31:this.$=e[a];break;case 32:this.$=new c.StringNode(e[a]);break;case 33:this.$=new c.IntegerNode(e[a]);break;case 34:this.$=new c.BooleanNode(e[a]);break;case 35:this.$=new c.DataNode(e[a]);break;case 36:this.$=new c.HashNode(e[a]);break;case 37:e[a-1].push(e[a]);this.$=e[a-1];break;case 38:this.$=[e[a]];break;case 39:this.$=[e[a-2],e[a]];break;case 40:this.$=[e[a-2],new c.StringNode(e[a])];break;case 41:this.$=[e[a-2],new c.IntegerNode(e[a])];break;case 42:this.$=[e[a-2],new c.BooleanNode(e[a])];
break;case 43:this.$=[e[a-2],new c.DataNode(e[a])];break;case 44:this.$=new c.PartialNameNode(e[a]);break;case 45:this.$=new c.IdNode(e[a]);break;case 46:e[a-2].push(e[a]);this.$=e[a-2];break;case 47:this.$=[e[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,
11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],
19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,
14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,
34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},
{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,
35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,
20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],
22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(a,d){throw Error(a);},parse:function(a){var d=[0],b=[null],c=[],e=this.table,f="",l=0,n=0,h=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==
typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;c.push(a);var g=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,k,m,q,t={},r,v;;){m=d[d.length-1];if(this.defaultActions[m])q=this.defaultActions[m];else{if(null===p||"undefined"==typeof p)p=void 0,p=this.lexer.lex()||1,"number"!==typeof p&&(p=this.symbols_[p]||p);q=e[m]&&e[m][p]}if("undefined"===typeof q||!q.length||!q[0]){var x="";if(!h){v=[];
for(r in e[m])this.terminals_[r]&&2<r&&v.push("'"+this.terminals_[r]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'");this.parseError(x,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:a,expected:v})}}if(q[0]instanceof Array&&1<q.length)throw Error("Parse Error: multiple actions possible at state: "+
m+", token: "+p);switch(q[0]){case 1:d.push(p);b.push(this.lexer.yytext);c.push(this.lexer.yylloc);d.push(q[1]);p=null;k?(p=k,k=null):(n=this.lexer.yyleng,f=this.lexer.yytext,l=this.lexer.yylineno,a=this.lexer.yylloc,0<h&&h--);break;case 2:v=this.productions_[q[1]][1];t.$=b[b.length-v];t._$={first_line:c[c.length-(v||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(v||1)].first_column,last_column:c[c.length-1].last_column};g&&(t._$.range=[c[c.length-(v||1)].range[0],c[c.length-
1].range[1]]);m=this.performAction.call(t,f,n,l,this.yy,q[1],b,c);if("undefined"!==typeof m)return m;v&&(d=d.slice(0,-2*v),b=b.slice(0,-1*v),c=c.slice(0,-1*v));d.push(this.productions_[q[1]][0]);b.push(t.$);c.push(t._$);q=e[d[d.length-2]][d[d.length-1]];d.push(q);break;case 3:return!0}}return!0}},b=function(){return{EOF:1,parseError:function(a,d){if(this.yy.parser)this.yy.parser.parseError(a,d);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=
this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);
return a},unput:function(a){var d=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-d-1);this.offset-=d;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var c=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?
(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-d};this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-d]);return this},more:function(){this._more=!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,
20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),d=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+d+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,d,b;this._more||(this.match=this.yytext="");for(var c=this._currentRules(),e=0;e<c.length;e++)if((d=this._input.match(this.rules[c[e]]))&&(!a||d[0].length>a[0].length))if(a=d,b=e,!this.options.flex)break;if(a){if(d=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=
d.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,
this,c[b],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-
1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,d,b,c){switch(b){case 0:return d.yytext="\\",14;case 1:"\\"!==d.yytext.slice(-1)&&this.begin("mu");"\\"===d.yytext.slice(-1)&&(d.yytext=d.yytext.substr(0,d.yyleng-1),this.begin("emu"));if(d.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==d.yytext.slice(-1)&&this.popState(),"\\"===d.yytext.slice(-1)&&(d.yytext=d.yytext.substr(0,
d.yyleng-1)),14;case 4:return d.yytext=d.yytext.substr(0,d.yyleng-4),this.popState(),15;case 5:return this.begin("par"),24;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 23;case 12:this.popState();this.begin("com");break;case 13:return d.yytext=d.yytext.substr(3,d.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 36;case 16:return 35;case 17:return 35;case 18:return 39;case 20:return this.popState(),18;case 21:return this.popState(),
18;case 22:return d.yytext=d.yytext.substr(1,d.yyleng-2).replace(/\\"/g,'"'),30;case 23:return d.yytext=d.yytext.substr(1,d.yyleng-2).replace(/\\'/g,"'"),30;case 24:return d.yytext=d.yytext.substr(1),28;case 25:return 32;case 26:return 32;case 27:return 31;case 28:return 35;case 29:return d.yytext=d.yytext.substr(1,d.yyleng-2),35;case 30:return"INVALID";case 32:return this.popState(),37;case 33:return 5}},rules:[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,
/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$:\-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$\-\/]+)/,/^(?:$)/],
conditions:{mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,33],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},par:{rules:[31,32],inclusive:!1},INITIAL:{rules:[0,1,2,33],inclusive:!0}}}}();d.lexer=b;a.prototype=d;d.Parser=a;return new a}();b.Parser=f;b.parse=function(a){if(a.constructor===b.AST.ProgramNode)return a;b.Parser.yy=b.AST;return b.Parser.parse(a)};b.AST={};b.AST.ProgramNode=function(a,d){this.type="program";this.statements=a;
d&&(this.inverse=new b.AST.ProgramNode(d))};b.AST.MustacheNode=function(a,d,b){this.type="mustache";this.escaped=!b;this.hash=d;b=this.id=a[0];a=this.params=a.slice(1);this.isHelper=(this.eligibleHelper=b.isSimple)&&(a.length||d)};b.AST.PartialNode=function(a,d){this.type="partial";this.partialName=a;this.context=d};b.AST.BlockNode=function(a,d,c,e){var f=a.id;if(f.original!==e.original)throw new b.Exception(f.original+" doesn't match "+e.original);this.type="block";this.mustache=a;this.program=d;
if((this.inverse=c)&&!this.program)this.isInverse=!0};b.AST.ContentNode=function(a){this.type="content";this.string=a};b.AST.HashNode=function(a){this.type="hash";this.pairs=a};b.AST.IdNode=function(a){this.type="ID";this.original=a.join(".");for(var d=[],c=0,e=0,f=a.length;e<f;e++){var l=a[e];if(".."===l||"."===l||"this"===l){if(0<d.length)throw new b.Exception("Invalid path: "+this.original);".."===l?c++:this.isScoped=!0}else d.push(l)}this.parts=d;this.string=d.join(".");this.depth=c;this.isSimple=
1===a.length&&!this.isScoped&&0===c;this.stringModeValue=this.string};b.AST.PartialNameNode=function(a){this.type="PARTIAL_NAME";this.name=a};b.AST.DataNode=function(a){this.type="DATA";this.id=a};b.AST.StringNode=function(a){this.type="STRING";this.stringModeValue=this.string=a};b.AST.IntegerNode=function(a){this.type="INTEGER";this.integer=a;this.stringModeValue=Number(a)};b.AST.BooleanNode=function(a){this.type="BOOLEAN";this.bool=a;this.stringModeValue="true"===a};b.AST.CommentNode=function(a){this.type=
"comment";this.comment=a};var c="description fileName lineNumber message name number stack".split(" ");b.Exception=function(a){for(var d=Error.prototype.constructor.apply(this,arguments),b=0;b<c.length;b++)this[c[b]]=d[c[b]]};b.Exception.prototype=Error();b.SafeString=function(a){this.string=a};b.SafeString.prototype.toString=function(){return this.string.toString()};var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,d=/[&<>"'`]/,l=function(a){return e[a]||
"&amp;"};b.Utils={extend:function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])},escapeExpression:function(c){if(c instanceof b.SafeString)return c.toString();if(null==c||!1===c)return"";c=c.toString();return!d.test(c)?c:c.replace(a,l)},isEmpty:function(a){return!a&&0!==a?!0:"[object Array]"===h.call(a)&&0===a.length?!0:!1}};var q=b.Compiler=function(){},v=b.JavaScriptCompiler=function(){};q.prototype={compiler:q,disassemble:function(){for(var a=this.opcodes,d,b=[],c,e,f=0,l=a.length;f<l;f++)if(d=
a[f],"DECLARE"===d.opcode)b.push("DECLARE "+d.name+"="+d.value);else{c=[];for(var h=0;h<d.args.length;h++)e=d.args[h],"string"===typeof e&&(e='"'+e.replace("\n","\\n")+'"'),c.push(e);b.push(d.opcode+" "+c.join(" "))}return b.join("\n")},equals:function(a){var d=this.opcodes.length;if(a.opcodes.length!==d)return!1;for(var b=0;b<d;b++){var c=this.opcodes[b],e=a.opcodes[b];if(c.opcode!==e.opcode||c.args.length!==e.args.length)return!1;for(var f=0;f<c.args.length;f++)if(c.args[f]!==e.args[f])return!1}d=
this.children.length;if(a.children.length!==d)return!1;for(b=0;b<d;b++)if(!this.children[b].equals(a.children[b]))return!1;return!0},guid:0,compile:function(a,d){this.children=[];this.depths={list:[]};this.options=d;var b=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(b)for(var c in b)this.options.knownHelpers[c]=b[c];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){a=
a.statements;var d;this.opcodes=[];for(var b=0,c=a.length;b<c;b++)d=a[b],this[d.type](d);this.isSimple=1===c;this.depths.list=this.depths.list.sort(function(a,d){return a-d});return this},compileProgram:function(a){a=(new this.compiler).compile(a,this.options);var d=this.guid++,b;this.usePartial=this.usePartial||a.usePartial;this.children[d]=a;for(var c=0,e=a.depths.list.length;c<e;c++)b=a.depths.list[c],2>b||this.addDepth(b-1);return d},block:function(a){var d=a.mustache,b=a.program;a=a.inverse;
b&&(b=this.compileProgram(b));a&&(a=this.compileProgram(a));var c=this.classifyMustache(d);"helper"===c?this.helperMustache(d,b,a):"simple"===c?(this.simpleMustache(d),this.opcode("pushProgram",b),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(d,b,a),this.opcode("pushProgram",b),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(a){a=a.pairs;var d,b;this.opcode("pushHash");
for(var c=0,e=a.length;c<e;c++)d=a[c],b=d[1],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this.accept(b),this.opcode("assignToHash",d[0]);this.opcode("popHash")},partial:function(a){var d=a.partialName;this.usePartial=!0;a.context?this.ID(a.context):this.opcode("push","depth0");this.opcode("invokePartial",d.name);this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},
mustache:function(a){var d=this.options,b=this.classifyMustache(a);"simple"===b?this.simpleMustache(a):"helper"===b?this.helperMustache(a):this.ambiguousMustache(a);a.escaped&&!d.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(a,d,b){a=a.id;var c=a.parts[0],e=null!=d||null!=b;this.opcode("getContext",a.depth);this.opcode("pushProgram",d);this.opcode("pushProgram",b);this.opcode("invokeAmbiguous",c,e)},simpleMustache:function(a){a=a.id;"DATA"===a.type?this.DATA(a):
a.parts.length?this.ID(a):(this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperMustache:function(a,d,b){d=this.setupFullMustacheParams(a,d,b);a=a.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",d.length,a);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+a);this.opcode("invokeHelper",d.length,a)}},ID:function(a){this.addDepth(a.depth);
this.opcode("getContext",a.depth);a.parts[0]?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var d=1,b=a.parts.length;d<b;d++)this.opcode("lookup",a.parts[d])},DATA:function(a){this.options.data=!0;this.opcode("lookupData",a.id)},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,
1)})},declare:function(a,d){this.opcodes.push({opcode:"DECLARE",name:a,value:d})},addDepth:function(a){if(isNaN(a))throw Error("EWOT");0!==a&&!this.depths[a]&&(this.depths[a]=!0,this.depths.list.push(a))},classifyMustache:function(a){var d=a.isHelper,b=a.eligibleHelper,c=this.options;b&&!d&&(c.knownHelpers[a.id.parts[0]]?d=!0:c.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var d=a.length,b;d--;)if(b=a[d],this.options.stringParams)b.depth&&this.addDepth(b.depth),
this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type);else this[b.type](b)},setupMustacheParams:function(a){var d=a.params;this.pushParams(d);a.hash?this.hash(a.hash):this.opcode("emptyHash");return d},setupFullMustacheParams:function(a,d,b){var c=a.params;this.pushParams(c);this.opcode("pushProgram",d);this.opcode("pushProgram",b);a.hash?this.hash(a.hash):this.opcode("emptyHash");return c}};var x=function(a){this.value=a};v.prototype={nameLookup:function(a,
d){return/^[0-9]+$/.test(d)?a+"["+d+"]":v.isValidJavaScriptVariableName(d)?a+"."+d:a+"['"+d+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,d,c,e){this.environment=a;this.options=d||{};b.log(b.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=
!!c;this.context=c||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(a,d);a=a.opcodes;this.i=0;for(r=a.length;this.i<r;this.i++)d=a[this.i],"DECLARE"===d.opcode?this[d.name]=d.value:this[d.opcode].apply(this,d.args);return this.createFunctionContext(e)},nextOpcode:function(){return this.environment.opcodes[this.i+1]},eat:function(){this.i+=1},preamble:function(){var a=
[];if(this.isChild)a.push("");else{var d=this.namespace,b="helpers = helpers || "+d+".helpers;";this.environment.usePartial&&(b=b+" partials = partials || "+d+".partials;");this.options.data&&(b+=" data = data || {};");a.push(b)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=a},createFunctionContext:function(a){var d=this.stackVars.concat(this.registers.list);0<d.length&&(this.source[1]=this.source[1]+", "+d.join(", "));if(!this.isChild)for(var c in this.context.aliases)this.source[1]=
this.source[1]+", "+c+"="+this.context.aliases[c];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.source.push("return buffer;");d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];c=0;for(var e=this.environment.depths.list.length;c<e;c++)d.push("depth"+this.environment.depths.list[c]);c=this.mergeSource();this.isChild||(e=b.COMPILER_REVISION,
c="this.compilerInfo = ["+e+",'"+b.REVISION_CHANGES[e]+"'];\n"+c);if(a)return d.push(c),Function.apply(this,d);a="function "+(this.name||"")+"("+d.join(",")+") {\n  "+c+"}";b.log(b.logger.DEBUG,a+"\n\n");return a},mergeSource:function(){for(var a="",d,b=0,c=this.source.length;b<c;b++){var e=this.source[b];e.appendToBuffer?d=d?d+"\n    + "+e.content:e.content:(d&&(a+="buffer += "+d+";\n  ",d=g),a+=e+"\n  ")}return a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var a=["depth0"];this.setupParams(0,a);this.replaceStack(function(d){a.splice(1,0,d);return"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var d=this.topStack();a.splice(1,0,d);a[a.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+d+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},
append:function(){this.flushInline();var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }");this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+
this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(d){return d+" == null || "+d+" === false ? "+d+" : "+this.nameLookup(d,a,"context")})},lookupData:function(a){this.push(this.nameLookup("data",a,"data"))},pushStringParam:function(a,
d){this.pushStackLiteral("depth"+this.lastContext);this.pushString(d);"string"===typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=g;this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes",
"{"+a.types.join(",")+"}"));this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){this.inlineStack.push(a);return a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,d){this.context.aliases.helperMissing="helpers.helperMissing";var b=this.lastHelper=this.setupHelper(a,d,!0);this.push(b.name);
this.replaceStack(function(a){return a+" ? "+a+".call("+b.callParams+") : helperMissing.call("+b.helperMissingParams+")"})},invokeKnownHelper:function(a,d){var b=this.setupHelper(a,d);this.push(b.name+".call("+b.callParams+")")},invokeAmbiguous:function(a,d){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var b=this.setupHelper(0,a,d),c=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();this.source.push("if ("+
f+" = "+c+") { "+f+" = "+f+".call("+b.callParams+"); }");this.source.push("else { "+f+" = "+e+"; "+f+" = typeof "+f+" === functionType ? "+f+".apply(depth0) : "+f+"; }")},invokePartial:function(a){a=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&a.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+a.join(", ")+")")},assignToHash:function(a){var d=this.popStack(),b,c;this.options.stringParams&&(c=this.popStack(),
b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b);c&&e.types.push("'"+a+"': "+c);e.values.push("'"+a+"': ("+d+")")},compiler:v,compileChildren:function(a,d){for(var b=a.children,c,e,f=0,l=b.length;f<l;f++){c=b[f];e=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=e.compile(c,d,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},
matchExistingProgram:function(a){for(var d=0,b=this.context.environments.length;d<b;d++){var c=this.context.environments[d];if(c&&c.equals(a))return d}},programExpression:function(a){this.context.aliases.self="this";if(null==a)return"self.noop";var d=this.environment.children[a];a=d.depths.list;for(var b=[d.index,d.name,"data"],c=0,e=a.length;c<e;c++)d=a[c],1===d?b.push("depth0"):b.push("depth"+(d-1));return(0===a.length?"self.program(":"self.programWithDepth(")+b.join(", ")+")"},register:function(a,
d){this.useRegister(a);this.source.push(a+" = "+d+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new x(a))},pushStack:function(a){this.flushInline();var d=this.incrStack();a&&this.source.push(d+" = "+a+";");this.compileStack.push(d);return d},replaceStack:function(a){var d="",b=this.isInline(),c;b?(c=this.popStack(!0),c instanceof x?c=c.value:(d=this.stackSlot?this.topStackName():this.incrStack(),d=
"("+this.push(d)+" = "+c+"),",c=this.topStack())):c=this.topStack();a=a.call(this,c);b?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+d+a+")")):(/^stack/.test(c)||(c=this.nextStack()),this.source.push(c+" = ("+d+a+");"));return c},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},
flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var d=0,b=a.length;d<b;d++){var c=a[d];c instanceof x?this.compileStack.push(c):this.pushStack(c)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var d=this.isInline(),b=(d?this.inlineStack:this.compileStack).pop();if(!a&&b instanceof x)return b.value;d||this.stackSlot--;return b},topStack:function(a){var d=this.isInline()?this.inlineStack:this.compileStack,d=d[d.length-1];return!a&&d instanceof
x?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,d,b){var c=[];this.setupParams(a,c,b);a=this.nameLookup("helpers",d,"helper");return{params:c,name:a,callParams:["depth0"].concat(c).join(", "),helperMissingParams:b&&["depth0",this.quotedString(d)].concat(c).join(", ")}},setupParams:function(a,d,b){var c=[],e=[],f=[],l,h;c.push("hash:"+
this.popStack());l=this.popStack();if((h=this.popStack())||l)h||(this.context.aliases.self="this",h="self.noop"),l||(this.context.aliases.self="this",l="self.noop"),c.push("inverse:"+l),c.push("fn:"+h);for(h=0;h<a;h++)l=this.popStack(),d.push(l),this.options.stringParams&&(f.push(this.popStack()),e.push(this.popStack()));this.options.stringParams&&(c.push("contexts:["+e.join(",")+"]"),c.push("types:["+f.join(",")+"]"),c.push("hashContexts:hashContexts"),c.push("hashTypes:hashTypes"));this.options.data&&
c.push("data:data");c="{"+c.join(",")+"}";b?(this.register("options",c),d.push("options")):d.push(c);return d.join(", ")}};for(var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
k=v.RESERVED_WORDS={},m=0,r=f.length;m<r;m++)k[f[m]]=!0;v.isValidJavaScriptVariableName=function(a){return!v.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1};b.precompile=function(a,d){if(null==a||"string"!==typeof a&&a.constructor!==b.AST.ProgramNode)throw new b.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);d=d||{};"data"in d||(d.data=!0);var c=b.parse(a),c=(new q).compile(c,d);return(new v).compile(c,d)};b.compile=function(a,d){if(null==
a||"string"!==typeof a&&a.constructor!==b.AST.ProgramNode)throw new b.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);d=d||{};"data"in d||(d.data=!0);var c;return function(e,f){if(!c){var l=b.parse(a),l=(new q).compile(l,d),l=(new v).compile(l,d,g,!0);c=b.template(l)}return c.call(this,e,f)}};b.VM={template:function(a){var d={escapeExpression:b.Utils.escapeExpression,invokePartial:b.VM.invokePartial,programs:[],program:function(a,d,c){var e=this.programs[a];
c?e=b.VM.program(a,d,c):e||(e=this.programs[a]=b.VM.program(a,d));return e},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f=a.call(d,b,c,e.helpers,e.partials,e.data),l=d.compilerInfo||[],h=l[0]||1,g=b.COMPILER_REVISION;if(h!==g){if(h<g)throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+b.REVISION_CHANGES[g]+") or downgrade your runtime to an older version ("+
b.REVISION_CHANGES[h]+").";throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+l[1]+").";}return f}},programWithDepth:function(a,d,b){var c=Array.prototype.slice.call(arguments,3),e=function(a,e){e=e||{};return d.apply(this,[a,e.data||b].concat(c))};e.program=a;e.depth=c.length;return e},program:function(a,d,b){var c=function(a,c){c=c||{};return d(a,c.data||b)};c.program=a;c.depth=0;return c},noop:function(){return""},
invokePartial:function(a,d,c,e,f,l){e={helpers:e,partials:f,data:l};if(a===g)throw new b.Exception("The partial "+d+" could not be found");if(a instanceof Function)return a(c,e);if(b.compile)return f[d]=b.compile(a,{data:l!==g}),f[d](c,e);throw new b.Exception("The partial "+d+" could not be compiled when running in runtime-only mode");}};b.template=b.VM.template})(Handlebars);
!function(b){function g(a,d,b){b=(b||0)-1;for(var c=a.length;++b<c;)if(a[b]===d)return b;return-1}function h(a,d){var b=typeof d;if(a=a.k,"boolean"==b||d==t)return a[d];"number"!=b&&"string"!=b&&(b="object");var c="number"==b?d:na+d;return a=a[b]||(a[b]={}),"object"==b?a[c]&&-1<g(a[c],d)?0:-1:a[c]?0:-1}function f(a){var d=this.k,b=typeof a;if("boolean"==b||a==t)d[a]=n;else{"number"!=b&&"string"!=b&&(b="object");var c="number"==b?a:na+a,e=d[b]||(d[b]={});"object"==b?(e[c]||(e[c]=[])).push(a)==this.b.length&&
(d[b]=p):e[c]=n}}function c(a){return a.charCodeAt(0)}function e(a,d){var b=a.m,c=d.m;if(a=a.l,d=d.l,a!==d){if(a>d||"undefined"==typeof a)return 1;if(a<d||"undefined"==typeof d)return-1}return b<c?-1:1}function a(a){var d=-1,b=a.length,c=q();c["false"]=c["null"]=c["true"]=c.undefined=p;var e=q();e.b=a;e.k=c;for(e.push=f;++d<b;)e.push(a[d]);return!1===c.object?(x(e),t):e}function d(a){return"\\"+va[a]}function l(){return w.pop()||[]}function q(){return u.pop()||{b:t,k:t,l:t,"false":p,m:0,leading:p,
maxWait:0,"null":p,number:t,object:t,push:t,string:t,trailing:p,"true":p,undefined:p,n:t}}function v(a){a.length=0;w.length<B&&w.push(a)}function x(a){var d=a.k;d&&x(d);a.b=a.k=a.l=a.object=a.number=a.string=a.n=t;u.length<B&&u.push(a)}function k(a,d,b){d||(d=0);"undefined"==typeof b&&(b=a?a.length:0);var c=-1;b=b-d||0;for(var e=Array(0>b?0:b);++c<b;)e[c]=a[d+c];return e}function m(f){function u(a){if(!a||L.call(a)!=Y)return p;var d=a.valueOf,b="function"==typeof d&&(b=za(d))&&za(b);return b?a==b||
za(a)==b:Cb(a)}function B(a,d,b){if(!a||!G[typeof a])return a;d=d&&"undefined"==typeof b?d:s.createCallback(d,b);for(var c=-1,e=G[typeof a]&&U(a),f=e?e.length:0;++c<f&&(b=e[c],!1!==d(a[b],b,a)););return a}function w(a,d,b){var c;if(!a||!G[typeof a])return a;d=d&&"undefined"==typeof b?d:s.createCallback(d,b);for(c in a)if(!1===d(a[c],c,a))break;return a}function T(a,d,b){var c,e=a,f=e;if(!e)return f;for(var l=arguments,h=0,g="number"==typeof b?2:l.length;++h<g;)if((e=l[h])&&G[typeof e])for(var k=-1,
m=G[typeof e]&&U(e),q=m?m.length:0;++k<q;)c=m[k],"undefined"==typeof f[c]&&(f[c]=e[c]);return f}function W(a,d,b){var c,e=a,f=e;if(!e)return f;var l=arguments,h=0,g="number"==typeof b?2:l.length;if(3<g&&"function"==typeof l[g-2])var k=s.createCallback(l[--g-1],l[g--],2);else 2<g&&"function"==typeof l[g-1]&&(k=l[--g]);for(;++h<g;)if((e=l[h])&&G[typeof e])for(var m=-1,q=G[typeof e]&&U(e),A=q?q.length:0;++m<A;)c=q[m],f[c]=k?k(f[c],e[c]):e[c];return f}function va(a){var d,b=[];if(!a||!G[typeof a])return b;
for(d in a)J.call(a,d)&&b.push(d);return b}function s(a){return a&&"object"==typeof a&&!V(a)&&J.call(a,"__wrapped__")?a:new Aa(a)}function Aa(a){this.__wrapped__=a}function Ea(a,d,b,c){function e(){var c=arguments,k=l?this:d;return f||(a=d[h]),b.length&&(c=c.length?(c=I.call(c),g?c.concat(b):b.concat(c)):b),this instanceof e?(k=aa(a.prototype)?Fa(a.prototype):{},c=a.apply(k,c),aa(c)?c:k):a.apply(k,c)}var f=oa(a),l=!b,h=d;if(l){var g=c;b=d}else if(!f){if(!c)throw new Db;d=a}return e}function Eb(a){return fb[a]}
function Ba(){var a=(a=s.indexOf)===gb?g:a;return a}function hb(a){return function(d,b,c,e){return"boolean"!=typeof b&&b!=t&&(e=c,c=e&&e[b]===d?r:b,b=p),c!=t&&(c=s.createCallback(c,e)),a(d,b,c,e)}}function Cb(a){var d,b;return a&&L.call(a)==Y&&(d=a.constructor,!oa(d)||d instanceof d)?(w(a,function(a,d){b=d}),b===r||J.call(a,b)):p}function Fb(a){return Gb[a]}function Pa(a,d,b,c,e,f){var h=a;if("boolean"!=typeof d&&d!=t&&(c=b,b=d,d=p),"function"==typeof b){if(b="undefined"==typeof c?b:s.createCallback(b,
c,1),h=b(h),"undefined"!=typeof h)return h;h=a}if(c=aa(h)){var g=L.call(h);if(!O[g])return h;var m=V(h)}if(!c||!d)return c?m?k(h):W({},h):h;switch(c=ja[g],g){case ga:case fa:return new c(+h);case ma:case Z:return new c(h);case ia:return c(h.source,ta.exec(h))}g=!e;e||(e=l());f||(f=l());for(var q=e.length;q--;)if(e[q]==a)return f[q];return h=m?c(h.length):{},m&&(J.call(a,"index")&&(h.index=a.index),J.call(a,"input")&&(h.input=a.input)),e.push(a),f.push(h),(m?F:B)(a,function(a,c){h[c]=Pa(a,d,b,r,e,
f)}),g&&(v(e),v(f)),h}function Ga(a){var d=[];return w(a,function(a,b){oa(a)&&d.push(b)}),d.sort()}function ib(a){for(var d=-1,b=U(a),c=b.length,e={};++d<c;){var f=b[d];e[a[f]]=f}return e}function wa(a,d,b,c,e,f){var h=b===E;if("function"==typeof b&&!h){b=s.createCallback(b,c,2);var g=b(a,d);if("undefined"!=typeof g)return!!g}if(a===d)return 0!==a||1/a==1/d;var k=typeof a,m=typeof d;if(a===a&&(!a||"function"!=k&&"object"!=k)&&(!d||"function"!=m&&"object"!=m))return p;if(a==t||d==t)return a===d;if(m=
L.call(a),k=L.call(d),m==ea&&(m=Y),k==ea&&(k=Y),m!=k)return p;switch(m){case ga:case fa:return+a==+d;case ma:return a!=+a?d!=+d:0==a?1/a==1/d:a==+d;case ia:case Z:return a==ka(d)}if(k=m==R,!k){if(J.call(a,"__wrapped__")||J.call(d,"__wrapped__"))return wa(a.__wrapped__||a,d.__wrapped__||d,b,c,e,f);if(m!=Y)return p;var m=a.constructor,q=d.constructor;if(m!=q&&(!oa(m)||!(m instanceof m&&oa(q)&&q instanceof q)))return p}q=!e;e||(e=l());f||(f=l());for(m=e.length;m--;)if(e[m]==a)return f[m]==d;var A=0,
g=n;if(e.push(a),f.push(d),k){if(m=a.length,A=d.length,g=A==a.length,!g&&!h)return g;for(;A--;)if(k=m,q=d[A],h)for(;k--&&!(g=wa(a[k],q,b,c,e,f)););else if(!(g=wa(a[A],q,b,c,e,f)))break;return g}return w(d,function(d,l,h){return J.call(h,l)?(A++,g=J.call(a,l)&&wa(a[l],d,b,c,e,f)):void 0}),g&&!h&&w(a,function(a,d,b){return J.call(b,d)?g=-1<--A:void 0}),q&&(v(e),v(f)),g}function oa(a){return"function"==typeof a}function aa(a){return!(!a||!G[typeof a])}function jb(a){return"number"==typeof a||L.call(a)==
ma}function Ca(a){return"string"==typeof a||L.call(a)==Z}function kb(a,d,b){var c=arguments,e=0,f=2;if(!aa(a))return a;if(b===E)var h=c[3],g=c[4],k=c[5];else{var m=n,g=l(),k=l();"number"!=typeof b&&(f=c.length);3<f&&"function"==typeof c[f-2]?h=s.createCallback(c[--f-1],c[f--],2):2<f&&"function"==typeof c[f-1]&&(h=c[--f])}for(;++e<f;)(V(c[e])?F:B)(c[e],function(d,b){var c,e,f=d,l=a[b];if(d&&((e=V(d))||u(d))){for(f=g.length;f--;)if(c=g[f]==d){l=k[f];break}if(!c){var m;h&&(f=h(l,d),m="undefined"!=typeof f)&&
(l=f);m||(l=e?V(l)?l:[]:u(l)?l:{});g.push(d);k.push(l);m||(l=kb(l,d,E,h,g,k))}}else h&&(f=h(l,d),"undefined"==typeof f&&(f=d)),"undefined"!=typeof f&&(l=f);a[b]=l});return m&&(v(g),v(k)),a}function Qa(a){for(var d=-1,b=U(a),c=b.length,e=M(c);++d<c;)e[d]=a[b[d]];return e}function lb(a,d,b){var c=-1,e=Ba(),f=a?a.length:0,l=p;return b=(0>b?ba(0,f+b):b)||0,f&&"number"==typeof f?l=-1<(Ca(a)?a.indexOf(d,b):e(a,d,b)):B(a,function(a){return++c<b?void 0:!(l=a===d)}),l}function mb(a,d,b){var c=n;d=s.createCallback(d,
b);b=-1;var e=a?a.length:0;if("number"==typeof e)for(;++b<e&&(c=!!d(a[b],b,a)););else B(a,function(a,b,e){return c=!!d(a,b,e)});return c}function Ha(a,d,b){var c=[];d=s.createCallback(d,b);b=-1;var e=a?a.length:0;if("number"==typeof e)for(;++b<e;){var f=a[b];d(f,b,a)&&c.push(f)}else B(a,function(a,b,e){d(a,b,e)&&c.push(a)});return c}function Ra(a,d,b){d=s.createCallback(d,b);b=-1;var c=a?a.length:0;if("number"!=typeof c){var e;return B(a,function(a,b,c){return d(a,b,c)?(e=a,p):void 0}),e}for(;++b<
c;){var f=a[b];if(d(f,b,a))return f}}function F(a,d,b){var c=-1,e=a?a.length:0;if(d=d&&"undefined"==typeof b?d:s.createCallback(d,b),"number"==typeof e)for(;++c<e&&!1!==d(a[c],c,a););else B(a,d);return a}function Sa(a,d,b){var c=-1,e=a?a.length:0;if(d=s.createCallback(d,b),"number"==typeof e)for(var f=M(e);++c<e;)f[c]=d(a[c],c,a);else f=[],B(a,function(a,b,e){f[++c]=d(a,b,e)});return f}function nb(a,d,b){var e=-1/0,f=e;if(!d&&V(a)){b=-1;for(var l=a.length;++b<l;){var h=a[b];h>f&&(f=h)}}else d=!d&&
Ca(a)?c:s.createCallback(d,b),F(a,function(a,b,c){b=d(a,b,c);b>e&&(e=b,f=a)});return f}function Ta(a,d){var b=-1,c=a?a.length:0;if("number"==typeof c)for(var e=M(c);++b<c;)e[b]=a[b][d];return e||Sa(a,d)}function Ua(a,d,b,c){if(!a)return b;var e=3>arguments.length;d=s.createCallback(d,c,4);var f=-1,l=a.length;if("number"==typeof l)for(e&&(b=a[++f]);++f<l;)b=d(b,a[f],f,a);else B(a,function(a,c,f){b=e?(e=p,a):d(b,a,c,f)});return b}function ob(a,d,b,c){var e=a?a.length:0,f=3>arguments.length;if("number"!=
typeof e)var l=U(a),e=l.length;return d=s.createCallback(d,c,4),F(a,function(c,h,g){h=l?l[--e]:--e;b=f?(f=p,a[h]):d(b,a[h],h,g)}),b}function pb(a,d,b){var c;d=s.createCallback(d,b);b=-1;var e=a?a.length:0;if("number"==typeof e)for(;++b<e&&!(c=d(a[b],b,a)););else B(a,function(a,b,e){return!(c=d(a,b,e))});return!!c}function qb(d){var b=-1,c=Ba(),e=d?d.length:0,f=xa.apply(N,I.call(arguments,1)),l=[],k=e>=A&&c===g;if(k){var m=a(f);m?(c=h,f=m):k=p}for(;++b<e;)m=d[b],0>c(f,m)&&l.push(m);return k&&x(f),
l}function Va(a,d,b){if(a){var c=0,e=a.length;if("number"!=typeof d&&d!=t){var f=-1;for(d=s.createCallback(d,b);++f<e&&d(a[f],f,a);)c++}else if(c=d,c==t||b)return a[0];return k(a,0,Ia(ba(0,c),e))}}function gb(a,d,b){if("number"==typeof b){var c=a?a.length:0;b=0>b?ba(0,c+b):b||0}else if(b)return b=rb(a,d),a[b]===d?b:-1;return a?g(a,d,b):-1}function Wa(a,d,b){if("number"!=typeof d&&d!=t){var c=0,e=-1,f=a?a.length:0;for(d=s.createCallback(d,b);++e<f&&d(a[e],e,a);)c++}else c=d==t||b?1:ba(0,d);return k(a,
c)}function rb(a,d,b,c){var e=0,f=a?a.length:e;b=b?s.createCallback(b,c,1):Xa;for(d=b(d);e<f;)c=e+f>>>1,b(a[c])<d?e=c+1:f=c;return e}function sb(a){for(var d=-1,b=a?nb(Ta(a,"length")):0,c=M(0>b?0:b);++d<b;)c[d]=Ta(a,d);return c}function tb(a,d){for(var b=-1,c=a?a.length:0,e={};++b<c;){var f=a[b];d?e[f]=d[b]:e[f[0]]=f[1]}return e}function Ya(a,d){return ub.fastBind||pa&&2<arguments.length?pa.call.apply(pa,arguments):Ea(a,d,I.call(arguments,2))}function vb(a,d,b){function c(){Ja(A);Ja(u);k=0;A=u=t}
function e(){var d=r&&(!v||1<k);c();d&&(!1!==q&&(m=new Ka),h=a.apply(g,l))}function f(){c();(r||q!==d)&&(m=new Ka,h=a.apply(g,l))}var l,h,g,k=0,m=0,q=p,A=t,u=t,r=n;if(d=ba(0,d||0),b===n)var v=n,r=p;else aa(b)&&(v=b.leading,q="maxWait"in b&&ba(d,b.maxWait||0),r="trailing"in b?b.trailing:r);return function(){if(l=arguments,g=this,k++,Ja(u),!1===q)v&&2>k&&(h=a.apply(g,l));else{var b=new Ka;!A&&!v&&(m=b);var c=q-(b-m);0<c?A||(A=La(f,c)):(Ja(A),A=t,m=b,h=a.apply(g,l))}return d!==q&&(u=La(e,d)),h}}function wb(a){var d=
I.call(arguments,1);return La(function(){a.apply(r,d)},1)}function Xa(a){return a}function xb(a){F(Ga(a),function(d){var b=s[d]=a[d];s.prototype[d]=function(){var a=this.__wrapped__,d=[a];return Ma.apply(d,arguments),d=b.apply(s,d),a&&"object"==typeof a&&a===d?this:new Aa(d)}})}function yb(){return this.__wrapped__}f=f?la.defaults(b.Object(),f,la.pick(b,D)):b;var M=f.Array,Za=f.Boolean,Ka=f.Date,$a=f.Function,ca=f.Math,Hb=f.Number,Da=f.Object,ab=f.RegExp,ka=f.String,Db=f.TypeError,N=[],bb=Da.prototype,
Ib=f._,ya=ab("^"+ka(bb.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Jb=ca.ceil,Ja=f.clearTimeout,xa=N.concat,zb=ca.floor,Kb=$a.prototype.toString,za=ya.test(za=Da.getPrototypeOf)&&za,J=bb.hasOwnProperty,Ma=N.push,Na=f.setImmediate,La=f.setTimeout,L=bb.toString,pa=ya.test(pa=L.bind)&&pa,Fa=ya.test(Fa=Da.create)&&Fa,cb=ya.test(cb=M.isArray)&&cb,Lb=f.isFinite,Mb=f.isNaN,Oa=ya.test(Oa=Da.keys)&&Oa,ba=ca.max,Ia=ca.min,db=f.parseInt,Ab=ca.random,I=N.slice,ca=
ya.test(f.attachEvent),ca=pa&&!/\n|true/.test(pa+ca),ja={};ja[R]=M;ja[ga]=Za;ja[fa]=Ka;ja[ua]=$a;ja[Y]=Da;ja[ma]=Hb;ja[ia]=ab;ja[Z]=ka;Aa.prototype=s.prototype;var ub=s.support={};ub.fastBind=pa&&!ca;s.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ha,variable:"",imports:{_:s}};var V=cb,U=Oa?function(a){return aa(a)?Oa(a):[]}:va,fb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gb=ib(fb),Za=hb(function Bb(a,d,b){for(var c=-1,e=a?a.length:0,f=[];++c<
e;){var l=a[c];b&&(l=b(l,c,a));V(l)?Ma.apply(f,d?l:Bb(l)):f.push(l)}return f}),eb=hb(function(d,b,c){var e=-1,f=Ba(),k=d?d.length:0,m=[],q=!b&&k>=A&&f===g,u=c||q?l():m;if(q){var r=a(u);r?(f=h,u=r):(q=p,u=c?u:(v(u),m))}for(;++e<k;){var r=d[e],n=c?c(r,e,d):r;(b?!e||u[u.length-1]!==n:0>f(u,n))&&((c||q)&&u.push(n),m.push(r))}return q?(v(u.b),x(u)):c&&v(u),m});return ca&&K&&"function"==typeof Na&&(wb=Ya(Na,f)),Na=8==db(Q+"08")?db:function(a,d){return db(Ca(a)?a.replace(H,""):a,d||0)},s.after=function(a,
d){return 1>a?d():function(){return 1>--a?d.apply(this,arguments):void 0}},s.assign=W,s.at=function(a){for(var d=-1,b=xa.apply(N,I.call(arguments,1)),c=b.length,e=M(c);++d<c;)e[d]=a[b[d]];return e},s.bind=Ya,s.bindAll=function(a){for(var d=1<arguments.length?xa.apply(N,I.call(arguments,1)):Ga(a),b=-1,c=d.length;++b<c;){var e=d[b];a[e]=Ya(a[e],a)}return a},s.bindKey=function(a,d){return Ea(a,d,I.call(arguments,2),E)},s.compact=function(a){for(var d=-1,b=a?a.length:0,c=[];++d<b;){var e=a[d];e&&c.push(e)}return c},
s.compose=function(){var a=arguments;return function(){for(var d=arguments,b=a.length;b--;)d=[a[b].apply(this,d)];return d[0]}},s.countBy=function(a,d,b){var c={};return d=s.createCallback(d,b),F(a,function(a,b,e){b=ka(d(a,b,e));J.call(c,b)?c[b]++:c[b]=1}),c},s.createCallback=function(a,d,b){if(a==t)return Xa;var c=typeof a;if("function"!=c){if("object"!=c)return function(d){return d[a]};var e=U(a);return function(d){for(var b=e.length,c=p;b--&&(c=wa(d[e[b]],a[e[b]],E)););return c}}return"undefined"==
typeof d||P&&!P.test(Kb.call(a))?a:1===b?function(b){return a.call(d,b)}:2===b?function(b,c){return a.call(d,b,c)}:4===b?function(b,c,e,f){return a.call(d,b,c,e,f)}:function(b,c,e){return a.call(d,b,c,e)}},s.debounce=vb,s.defaults=T,s.defer=wb,s.delay=function(a,d){var b=I.call(arguments,2);return La(function(){a.apply(r,b)},d)},s.difference=qb,s.filter=Ha,s.flatten=Za,s.forEach=F,s.forIn=w,s.forOwn=B,s.functions=Ga,s.groupBy=function(a,d,b){var c={};return d=s.createCallback(d,b),F(a,function(a,
b,e){b=ka(d(a,b,e));(J.call(c,b)?c[b]:c[b]=[]).push(a)}),c},s.initial=function(a,d,b){if(!a)return[];var c=0,e=a.length;if("number"!=typeof d&&d!=t){var f=e;for(d=s.createCallback(d,b);f--&&d(a[f],f,a);)c++}else c=d==t||b?1:d||c;return k(a,0,Ia(ba(0,e-c),e))},s.intersection=function(d){for(var b=arguments,c=b.length,e=-1,f=l(),k=-1,m=Ba(),q=d?d.length:0,u=[],p=l();++e<c;){var r=b[e];f[e]=m===g&&(r?r.length:0)>=A&&a(e?b[e]:p)}a:for(;++k<q;){var n=f[0],r=d[k];if(0>(n?h(n,r):m(p,r))){e=c;for((n||p).push(r);--e;)if(n=
f[e],0>(n?h(n,r):m(b[e],r)))continue a;u.push(r)}}for(;c--;)(n=f[c])&&x(n);return v(f),v(p),u},s.invert=ib,s.invoke=function(a,d){var b=I.call(arguments,2),c=-1,e="function"==typeof d,f=a?a.length:0,l=M("number"==typeof f?f:0);return F(a,function(a){l[++c]=(e?d:a[d]).apply(a,b)}),l},s.keys=U,s.map=Sa,s.max=nb,s.memoize=function(a,d){function b(){var c=b.cache,e=na+(d?d.apply(this,arguments):arguments[0]);return J.call(c,e)?c[e]:c[e]=a.apply(this,arguments)}return b.cache={},b},s.merge=kb,s.min=function(a,
d,b){var e=1/0,f=e;if(!d&&V(a)){b=-1;for(var l=a.length;++b<l;){var h=a[b];h<f&&(f=h)}}else d=!d&&Ca(a)?c:s.createCallback(d,b),F(a,function(a,b,c){b=d(a,b,c);b<e&&(e=b,f=a)});return f},s.omit=function(a,d,b){var c=Ba(),e="function"==typeof d,f={};if(e)d=s.createCallback(d,b);else var l=xa.apply(N,I.call(arguments,1));return w(a,function(a,b,h){(e?!d(a,b,h):0>c(l,b))&&(f[b]=a)}),f},s.once=function(a){var d,b;return function(){return d?b:(d=n,b=a.apply(this,arguments),a=t,b)}},s.pairs=function(a){for(var d=
-1,b=U(a),c=b.length,e=M(c);++d<c;){var f=b[d];e[d]=[f,a[f]]}return e},s.partial=function(a){return Ea(a,I.call(arguments,1))},s.partialRight=function(a){return Ea(a,I.call(arguments,1),t,E)},s.pick=function(a,d,b){var c={};if("function"!=typeof d)for(var e=-1,f=xa.apply(N,I.call(arguments,1)),l=aa(a)?f.length:0;++e<l;){var h=f[e];h in a&&(c[h]=a[h])}else d=s.createCallback(d,b),w(a,function(a,b,e){d(a,b,e)&&(c[b]=a)});return c},s.pluck=Ta,s.range=function(a,d,b){a=+a||0;b=+b||1;d==t&&(d=a,a=0);var c=
-1;d=ba(0,Jb((d-a)/b));for(var e=M(d);++c<d;)e[c]=a,a+=b;return e},s.reject=function(a,d,b){return d=s.createCallback(d,b),Ha(a,function(a,b,c){return!d(a,b,c)})},s.rest=Wa,s.shuffle=function(a){var d=-1,b=a?a.length:0,c=M("number"==typeof b?b:0);return F(a,function(a){var b=zb(Ab()*(++d+1));c[d]=c[b];c[b]=a}),c},s.sortBy=function(a,d,b){var c=-1,f=a?a.length:0,l=M("number"==typeof f?f:0);d=s.createCallback(d,b);F(a,function(a,b,e){var f=l[++c]=q();f.l=d(a,b,e);f.m=c;f.n=a});f=l.length;for(l.sort(e);f--;)a=
l[f],l[f]=a.n,x(a);return l},s.tap=function(a,d){return d(a),a},s.throttle=function(a,d,b){var c=n,e=n;return!1===b?c=p:aa(b)&&(c="leading"in b?b.leading:c,e="trailing"in b?b.trailing:e),b=q(),b.leading=c,b.maxWait=d,b.trailing=e,a=vb(a,d,b),x(b),a},s.times=function(a,d,b){a=-1<(a=+a)?a:0;var c=-1,e=M(a);for(d=s.createCallback(d,b,1);++c<a;)e[c]=d(c);return e},s.toArray=function(a){return a&&"number"==typeof a.length?k(a):Qa(a)},s.transform=function(a,d,b,c){var e=V(a);return d=s.createCallback(d,
c,4),b==t&&(e?b=[]:(c=a&&a.constructor,b=aa(c&&c.prototype)?Fa(c&&c.prototype):{})),(e?F:B)(a,function(a,c,e){return d(b,a,c,e)}),b},s.union=function(a){return V(a)||(arguments[0]=a?I.call(a):N),eb(xa.apply(N,arguments))},s.uniq=eb,s.unzip=sb,s.values=Qa,s.where=Ha,s.without=function(a){return qb(a,I.call(arguments,1))},s.wrap=function(a,d){return function(){var b=[a];return Ma.apply(b,arguments),d.apply(this,b)}},s.zip=function(a){return a?sb(arguments):[]},s.zipObject=tb,s.collect=Sa,s.drop=Wa,
s.each=F,s.extend=W,s.methods=Ga,s.object=tb,s.select=Ha,s.tail=Wa,s.unique=eb,xb(s),s.chain=s,s.prototype.chain=function(){return this},s.clone=Pa,s.cloneDeep=function(a,d,b){return Pa(a,n,d,b)},s.contains=lb,s.escape=function(a){return a==t?"":ka(a).replace(qa,Eb)},s.every=mb,s.find=Ra,s.findIndex=function(a,d,b){var c=-1,e=a?a.length:0;for(d=s.createCallback(d,b);++c<e;)if(d(a[c],c,a))return c;return-1},s.findKey=function(a,d,b){var c;return d=s.createCallback(d,b),B(a,function(a,b,e){return d(a,
b,e)?(c=b,p):void 0}),c},s.has=function(a,d){return a?J.call(a,d):p},s.identity=Xa,s.indexOf=gb,s.isArguments=function(a){return L.call(a)==ea},s.isArray=V,s.isBoolean=function(a){return a===n||!1===a||L.call(a)==ga},s.isDate=function(a){return a?"object"==typeof a&&L.call(a)==fa:p},s.isElement=function(a){return a?1===a.nodeType:p},s.isEmpty=function(a){var d=n;if(!a)return d;var b=L.call(a),c=a.length;return b==R||b==Z||b==ea||b==Y&&"number"==typeof c&&oa(a.splice)?!c:(B(a,function(){return d=p}),
d)},s.isEqual=wa,s.isFinite=function(a){return Lb(a)&&!Mb(parseFloat(a))},s.isFunction=oa,s.isNaN=function(a){return jb(a)&&a!=+a},s.isNull=function(a){return a===t},s.isNumber=jb,s.isObject=aa,s.isPlainObject=u,s.isRegExp=function(a){return a?"object"==typeof a&&L.call(a)==ia:p},s.isString=Ca,s.isUndefined=function(a){return"undefined"==typeof a},s.lastIndexOf=function(a,d,b){var c=a?a.length:0;for("number"==typeof b&&(c=(0>b?ba(0,c+b):Ia(b,c-1))+1);c--;)if(a[c]===d)return c;return-1},s.mixin=xb,
s.noConflict=function(){return f._=Ib,this},s.parseInt=Na,s.random=function(a,d){a==t&&d==t&&(d=1);a=+a||0;d==t?(d=a,a=0):d=+d||0;var b=Ab();return a%1||d%1?a+Ia(b*(d-a+parseFloat("1e-"+((b+"").length-1))),d):a+zb(b*(d-a+1))},s.reduce=Ua,s.reduceRight=ob,s.result=function(a,d){var b=a?a[d]:r;return oa(b)?a[d]():b},s.runInContext=m,s.size=function(a){var d=a?a.length:0;return"number"==typeof d?d:U(a).length},s.some=pb,s.sortedIndex=rb,s.template=function(a,b,c){var e=s.templateSettings;a||(a="");c=
T({},c,e);var f,l=T({},c.imports,e.imports),e=U(l),l=Qa(l),h=0,g=c.interpolate||da,k="__p+='",g=ab((c.escape||da).source+"|"+g.source+"|"+(g===ha?ra:da).source+"|"+(c.evaluate||da).source+"|$","g");a.replace(g,function(b,c,e,l,g,m){return e||(e=l),k+=a.slice(h,m).replace(sa,d),c&&(k+="'+__e("+c+")+'"),g&&(f=n,k+="';"+g+";__p+='"),e&&(k+="'+((__t=("+e+"))==null?'':__t)+'"),h=m+b.length,b});k+="';\n";(g=c=c.variable)||(c="obj",k="with("+c+"){"+k+"}");k=(f?k.replace(y,""):k).replace(C,"$1").replace(S,
"$1;");k="function("+c+"){"+(g?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+k+"return __p}";try{var m=$a(e,"return "+k).apply(r,l)}catch(q){throw q.source=k,q;}return b?m(b):(m.source=k,m)},s.unescape=function(a){return a==t?"":ka(a).replace(X,Fb)},s.uniqueId=function(a){var d=++z;return ka(a==t?"":a)+d},s.all=mb,s.any=pb,s.detect=Ra,s.findWhere=Ra,s.foldl=Ua,s.foldr=ob,s.include=lb,s.inject=Ua,B(s,function(a,
d){s.prototype[d]||(s.prototype[d]=function(){var d=[this.__wrapped__];return Ma.apply(d,arguments),a.apply(s,d)})}),s.first=Va,s.last=function(a,d,b){if(a){var c=0,e=a.length;if("number"!=typeof d&&d!=t){var f=e;for(d=s.createCallback(d,b);f--&&d(a[f],f,a);)c++}else if(c=d,c==t||b)return a[e-1];return k(a,ba(0,e-c))}},s.take=Va,s.head=Va,B(s,function(a,d){s.prototype[d]||(s.prototype[d]=function(d,b){var c=a(this.__wrapped__,d,b);return d==t||b&&"function"!=typeof d?c:new Aa(c)})}),s.VERSION="1.3.1",
s.prototype.toString=function(){return ka(this.__wrapped__)},s.prototype.value=yb,s.prototype.valueOf=yb,F(["join","pop","shift"],function(a){var d=N[a];s.prototype[a]=function(){return d.apply(this.__wrapped__,arguments)}}),F(["push","reverse","sort","unshift"],function(a){var d=N[a];s.prototype[a]=function(){return d.apply(this.__wrapped__,arguments),this}}),F(["concat","slice","splice"],function(a){var d=N[a];s.prototype[a]=function(){return new Aa(d.apply(this.__wrapped__,arguments))}}),s}var r,
n=!0,t=null,p=!1,w=[],u=[],z=0,E={},na=+new Date+"",A=75,B=40,y=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,S=/(__e\(.*?\)|\b__t\))\+'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,ra=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ta=/\w*$/,ha=/<%=([\s\S]+?)%>/g,P=(P=/\bthis\b/)&&P.test(m)&&P,Q=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",H=RegExp("^["+Q+"]*0+(?=.$)"),da=/($^)/,qa=/[&<>"']/g,sa=/['\n\r\t\u2028\u2029\\]/g,D="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),
ea="[object Arguments]",R="[object Array]",ga="[object Boolean]",fa="[object Date]",ua="[object Function]",ma="[object Number]",Y="[object Object]",ia="[object RegExp]",Z="[object String]",O={};O[ua]=p;O[ea]=O[R]=O[ga]=O[fa]=O[ma]=O[Y]=O[ia]=O[Z]=n;var G={"boolean":p,"function":n,object:n,number:p,string:p,undefined:p},va={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},T=G[typeof exports]&&exports,K=G[typeof module]&&module&&module.exports==T&&module,W=G[typeof global]&&
global;!W||W.global!==W&&W.window!==W||(b=W);var la=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(b._=la,define(function(){return la})):T&&!T.nodeType?K?(K.exports=la)._=la:T._=la:b._=la}(this);
(function(){var b=this,g=b.Backbone,h=[],f=h.push,c=h.slice,e=h.splice,a;a="undefined"!==typeof exports?exports:b.Backbone={};a.VERSION="1.0.0";var d=b._;!d&&"undefined"!==typeof require&&(d=require("underscore"));a.$=b.jQuery||b.Zepto||b.ender||b.$;a.noConflict=function(){b.Backbone=g;return this};a.emulateHTTP=!1;a.emulateJSON=!1;var l=a.Events={on:function(a,d,b){if(!v(this,"on",a,[d,b])||!d)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:d,context:b,
ctx:b||this});return this},once:function(a,b,c){if(!v(this,"once",a,[b,c])||!b)return this;var e=this,f=d.once(function(){e.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var e,f,l,h,g,k,m,q;if(!this._events||!v(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:d.keys(this._events);g=0;for(k=h.length;g<k;g++)if(a=h[g],l=this._events[a]){this._events[a]=e=[];if(b||c){m=0;for(q=l.length;m<q;m++)f=l[m],(b&&b!==f.callback&&b!==
f.callback._callback||c&&c!==f.context)&&e.push(f)}e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var d=c.call(arguments,1);if(!v(this,"trigger",a,d))return this;var b=this._events[a],e=this._events.all;b&&x(b,d);e&&x(e,arguments);return this},stopListening:function(a,d,b){var c=this._listeners;if(!c)return this;var e=!d&&!b;"object"===typeof d&&(b=this);a&&((c={})[a._listenerId]=a);for(var f in c)c[f].off(d,b,this),e&&delete this._listeners[f];return this}},
q=/\s+/,v=function(a,d,b,c){if(!b)return!0;if("object"===typeof b){for(var e in b)a[d].apply(a,[e,b[e]].concat(c));return!1}if(q.test(b)){b=b.split(q);e=0;for(var f=b.length;e<f;e++)a[d].apply(a,[b[e]].concat(c));return!1}return!0},x=function(a,d){var b,c=-1,e=a.length,f=d[0],l=d[1],h=d[2];switch(d.length){case 0:for(;++c<e;)(b=a[c]).callback.call(b.ctx);break;case 1:for(;++c<e;)(b=a[c]).callback.call(b.ctx,f);break;case 2:for(;++c<e;)(b=a[c]).callback.call(b.ctx,f,l);break;case 3:for(;++c<e;)(b=
a[c]).callback.call(b.ctx,f,l,h);break;default:for(;++c<e;)(b=a[c]).callback.apply(b.ctx,d)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){l[b]=function(b,c,e){var f=this._listeners||(this._listeners={}),l=b._listenerId||(b._listenerId=d.uniqueId("l"));f[l]=b;"object"===typeof c&&(e=this);b[a](c,e,this);return this}});l.bind=l.on;l.unbind=l.off;d.extend(a,l);var k=a.Model=function(a,b){var c,e=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};d.extend(this,d.pick(b,m));b.parse&&
(e=this.parse(e,b)||{});if(c=d.result(this,"defaults"))e=d.defaults({},e,c);this.set(e,b);this.changed={};this.initialize.apply(this,arguments)},m=["url","urlRoot","collection"];d.extend(k.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return d.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=
this.get(a)},set:function(a,b,c){var e,f,l,h,g,k,m;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;l=c.unset;h=c.silent;a=[];g=this._changing;this._changing=!0;g||(this._previousAttributes=d.clone(this.attributes),this.changed={});m=this.attributes;k=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],d.isEqual(m[e],b)||a.push(e),d.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,l?delete m[e]:
m[e]=b;if(!h){a.length&&(this._pending=!0);b=0;for(e=a.length;b<e;b++)this.trigger("change:"+a[b],this,m[a[b]],c)}if(g)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,
a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,c=!1,e=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!d.isEqual(e[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,
a),a))return!1;c&&c(b,d,a);b.trigger("sync",b,d,a)};ha(this,a);return this.sync("read",this,a)},save:function(a,b,c){var e,f=this.attributes;null==a||"object"===typeof a?(e=a,c=b):(e={})[a]=b;if(e&&(!c||!c.wait)&&!this.set(e,c))return!1;c=d.extend({validate:!0},c);if(!this._validate(e,c))return!1;e&&c.wait&&(this.attributes=d.extend({},f,e));void 0===c.parse&&(c.parse=!0);var l=this,h=c.success;c.success=function(a){l.attributes=f;var b=l.parse(a,c);c.wait&&(b=d.extend(e||{},b));if(d.isObject(b)&&
!l.set(b,c))return!1;h&&h(l,a,c);l.trigger("sync",l,a,c)};ha(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=e);a=this.sync(a,this,c);e&&c.wait&&(this.attributes=f);return a},destroy:function(a){a=a?d.clone(a):{};var b=this,c=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&e();c&&c(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;ha(this,a);var f=this.sync("delete",this,a);a.wait||
e();return f},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||ta();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,d){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},d.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=d.extend({},this.attributes,a);var c=this.validationError=
this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,d.extend(b||{},{validationError:c}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){k.prototype[a]=function(){var b=c.call(arguments);b.unshift(this.attributes);return d[a].apply(d,b)}});var r=a.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,
d.extend({silent:!0},b))},n={add:!0,remove:!0,merge:!0},t={add:!0,merge:!1,remove:!1};d.extend(r.prototype,l,{model:k,initialize:function(){},toJSON:function(a){return this.map(function(d){return d.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.defaults(b||{},t))},remove:function(a,b){a=d.isArray(a)?a.slice():[a];b||(b={});var c,e,f,l;c=0;for(e=a.length;c<e;c++)if(l=this.get(a[c]))delete this._byId[l.id],delete this._byId[l.cid],f=this.indexOf(l),
this.models.splice(f,1),this.length--,b.silent||(b.index=f,l.trigger("remove",l,this,b)),this._removeReference(l);return this},set:function(a,b){b=d.defaults(b||{},n);b.parse&&(a=this.parse(a,b));d.isArray(a)||(a=a?[a]:[]);var c,l,h,g,k,m=b.at,q=this.comparator&&null==m&&!1!==b.sort,A=d.isString(this.comparator)?this.comparator:null,u=[],p=[],r={};c=0;for(l=a.length;c<l;c++)if(h=this._prepareModel(a[c],b))(g=this.get(h))?(b.remove&&(r[g.cid]=!0),b.merge&&(g.set(h.attributes,b),q&&(!k&&g.hasChanged(A))&&
(k=!0))):b.add&&(u.push(h),h.on("all",this._onModelEvent,this),this._byId[h.cid]=h,null!=h.id&&(this._byId[h.id]=h));if(b.remove){c=0;for(l=this.length;c<l;++c)r[(h=this.models[c]).cid]||p.push(h);p.length&&this.remove(p,b)}u.length&&(q&&(k=!0),this.length+=u.length,null!=m?e.apply(this.models,[m,0].concat(u)):f.apply(this.models,u));k&&this.sort({silent:!0});if(b.silent)return this;c=0;for(l=u.length;c<l;c++)(h=u[c]).trigger("add",h,this,b);k&&this.trigger("sort",this,b);return this},reset:function(a,
b){b||(b={});for(var c=0,e=this.models.length;c<e;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:this.length},b));return a},pop:function(a){var d=this.at(this.length-1);this.remove(d,a);return d},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:0},b));return a},shift:function(a){var d=
this.at(0);this.remove(d,a);return d},slice:function(a,d){return this.models.slice(a,d)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(d){for(var b in a)if(a[b]!==d.get(b))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||
1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var e=d.isFunction(b)?b:function(a){return a.get(b)};return d.sortedIndex(this.models,a,e,c)},pluck:function(a){return d.invoke(this.models,"get",a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":
"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};ha(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,e=b.success;b.success=function(d){b.wait&&c.add(a,b);e&&e(a,d,b)};a.save(null,b);return a},parse:function(a,d){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,d){if(a instanceof k)return a.collection||
(a.collection=this),a;d||(d={});d.collection=this;var b=new this.model(a,d);return!b._validate(a,d)?(this.trigger("invalid",this,a,d),!1):b},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,d,b,c){("add"===a||"remove"===a)&&b!==this||("destroy"===a&&this.remove(d,c),d&&a==="change:"+d.idAttribute&&(delete this._byId[d.previous(d.idAttribute)],null!=d.id&&(this._byId[d.id]=d)),this.trigger.apply(this,arguments))}});
d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){r.prototype[a]=function(){var b=c.call(arguments);b.unshift(this.models);return d[a].apply(d,b)}});d.each(["groupBy","countBy","sortBy"],function(a){r.prototype[a]=function(b,c){var e=d.isFunction(b)?b:function(a){return a.get(b)};
return d[a](this.models,e,c)}});var h=a.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},p=/^(\S+)\s*(.*)$/,w="model collection el id attributes className tagName events".split(" ");d.extend(h.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(d,
b){this.$el&&this.undelegateEvents();this.$el=d instanceof a.$?d:a.$(d);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||(c=this[a[b]]);if(c){var e=b.match(p),f=e[1],e=e[2],c=d.bind(c,this),f=f+(".delegateEvents"+this.cid);if(""===e)this.$el.on(f,c);else this.$el.on(f,e,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+
this.cid);return this},_configure:function(a){this.options&&(a=d.extend({},d.result(this,"options"),a));d.extend(this,d.pick(a,w));this.options=a},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var b=d.extend({},d.result(this,"attributes"));this.id&&(b.id=d.result(this,"id"));this.className&&(b["class"]=d.result(this,"className"));b=a.$("<"+d.result(this,"tagName")+">").attr(b);this.setElement(b,!1)}}});a.sync=function(b,c,e){var f=u[b];d.defaults(e||(e={}),{emulateHTTP:a.emulateHTTP,
emulateJSON:a.emulateJSON});var l={type:f,dataType:"json"};e.url||(l.url=d.result(c,"url")||ta());if(null==e.data&&c&&("create"===b||"update"===b||"patch"===b))l.contentType="application/json",l.data=JSON.stringify(e.attrs||c.toJSON(e));e.emulateJSON&&(l.contentType="application/x-www-form-urlencoded",l.data=l.data?{model:l.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){l.type="POST";e.emulateJSON&&(l.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
f);if(h)return h.apply(this,arguments)}}"GET"!==l.type&&!e.emulateJSON&&(l.processData=!1);if("PATCH"===l.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))l.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};b=e.xhr=a.ajax(d.extend(l,e));c.trigger("request",c,b,e);return b};var u={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={});a.routes&&
(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,na=/(\(\?)?:\w+/g,A=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(z.prototype,l,{initialize:function(){},route:function(b,c,e){d.isRegExp(b)||(b=this._routeToRegExp(b));d.isFunction(c)&&(e=c,c="");e||(e=this[c]);var f=this;a.history.route(b,function(d){d=f._extractParameters(b,d);e&&e.apply(f,d);f.trigger.apply(f,["route:"+c].concat(d));f.trigger("route",c,d);a.history.trigger("route",f,c,d)});return this},
navigate:function(d,b){a.history.navigate(d,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(B,"\\$&").replace(E,"(?:$1)?").replace(na,function(a,d){return d?a:"([^/]+)"}).replace(A,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a){return a?decodeURIComponent(a):null})}});
var y=a.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,X=/msie [\w.]+/,ra=/\/$/;y.started=!1;d.extend(y.prototype,l,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,d){if(null==a)if(this._hasPushState||!this._wantsHashChange||d){a=this.location.pathname;var b=this.root.replace(ra,"");a.indexOf(b)||
(a=a.substr(b.length))}else a=this.getHash();return a.replace(C,"")},start:function(b){if(y.started)throw Error("Backbone.history has already been started");y.started=!0;this.options=d.extend({},{root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);b=this.getFragment();var c=document.documentMode,c=X.exec(navigator.userAgent.toLowerCase())&&
(!c||7>=c);this.root=("/"+this.root+"/").replace(S,"/");c&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b));if(this._hasPushState)a.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!c)a.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=b;b=this.location;c=b.pathname.replace(/[^\/]$/,
"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!c)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&c&&b.hash)&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment+b.search));if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",
this.checkUrl);clearInterval(this._checkUrlInterval);y.started=!1},route:function(a,d){this.handlers.unshift({route:a,callback:d})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},
navigate:function(a,d){if(!y.started)return!1;if(!d||!0===d)d={trigger:d};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var b=this.root+a;if(this._hasPushState)this.history[d.replace?"replaceState":"pushState"]({},document.title,b);else if(this._wantsHashChange)this._updateHash(this.location,a,d.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(d.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,d.replace));else return this.location.assign(b);
d.trigger&&this.loadUrl(a)}},_updateHash:function(a,d,b){b?(b=a.href.replace(/(javascript:|#).*$/,""),a.replace(b+"#"+d)):a.hash="#"+d}});a.history=new y;k.extend=r.extend=z.extend=h.extend=y.extend=function(a,b){var c=this,e;e=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};d.extend(e,c,b);var f=function(){this.constructor=e};f.prototype=c.prototype;e.prototype=new f;a&&d.extend(e.prototype,a);e.__super__=c.prototype;return e};var ta=function(){throw Error('A "url" property or function must be specified');
},ha=function(a,d){var b=d.error;d.error=function(c){b&&b(a,c,d);a.trigger("error",a,c,d)}}}).call(this);
Backbone.ChildViewContainer=function(b,g){var h=function(b){this._views={};this._indexByModel={};this._indexByCollection={};this._indexByCustom={};this._updateLength();this._addInitialViews(b)};g.extend(h.prototype,{add:function(b,c){var e=b.cid;this._views[e]=b;b.model&&(this._indexByModel[b.model.cid]=e);b.collection&&(this._indexByCollection[b.collection.cid]=e);c&&(this._indexByCustom[c]=e);this._updateLength()},findByModel:function(b){return this.findByCid(this._indexByModel[b.cid])},findByCollection:function(b){return this.findByCid(this._indexByCollection[b.cid])},
findByCustom:function(b){return this.findByCid(this._indexByCustom[b])},findByIndex:function(b){return g.values(this._views)[b]},findByCid:function(b){return this._views[b]},remove:function(b){var c=b.cid;b.model&&delete this._indexByModel[b.model.cid];b.collection&&delete this._indexByCollection[b.collection.cid];var e,a;for(a in this._indexByCustom)if(this._indexByCustom.hasOwnProperty(a)&&this._indexByCustom[a]===c){e=a;break}e&&delete this._indexByCustom[e];delete this._views[c];this._updateLength()},
call:function(b,c){c=Array.prototype.slice.call(arguments,1);this.apply(b,c)},apply:function(b,c){c=c||[];g.each(this._views,function(e){g.isFunction(e[b])&&e[b].apply(e,c)})},_updateLength:function(){this.length=g.size(this._views)},_addInitialViews:function(b){if(b){var c,e,a=b.length;for(e=0;a>e;e++)c=b[e],this.add(c)}}});return g.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(b){h.prototype[b]=function(){var c=[g.values(this._views)].concat(g.toArray(arguments));return g[b].apply(g,c)}}),h}(Backbone,_);
Backbone.Wreqr=function(b,g,h){g={};return g.Handlers=function(b,c){var e=function(a){this.options=a;this._wreqrHandlers={};c.isFunction(this.initialize)&&this.initialize(a)};return e.extend=b.Model.extend,c.extend(e.prototype,b.Events,{setHandlers:function(a){c.each(a,function(a,b){var e=null;c.isObject(a)&&!c.isFunction(a)&&(e=a.context,a=a.callback);this.setHandler(b,a,e)},this)},setHandler:function(a,d,b){this._wreqrHandlers[a]={callback:d,context:b};this.trigger("handler:add",a,d,b)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var d=this._wreqrHandlers[a];if(!d)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return d.callback.apply(d.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),e}(b,h),g.CommandStorage=function(){var f=function(b){this.options=b;this._commands={};h.isFunction(this.initialize)&&this.initialize(b)};return h.extend(f.prototype,b.Events,{getCommands:function(b){var e=
this._commands[b];return e||(e={command:b,instances:[]},this._commands[b]=e),e},addCommand:function(b,e){this.getCommands(b).instances.push(e)},clearCommands:function(b){this.getCommands(b).instances=[]}}),f}(),g.Commands=function(b){return b.Handlers.extend({storageType:b.CommandStorage,constructor:function(c){this.options=c||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var e=Array.prototype.slice.call(arguments);b.Handlers.prototype.constructor.apply(this,
e)},execute:function(b,e){b=arguments[0];e=Array.prototype.slice.call(arguments,1);this.hasHandler(b)?this.getHandler(b).apply(this,e):this.storage.addCommand(b,e)},_executeCommands:function(b,e,a){var d=this.storage.getCommands(b);h.each(d.instances,function(d){e.apply(a,d)});this.storage.clearCommands(b)},_initializeStorage:function(b){b=b.storageType||this.storageType;this.storage=h.isFunction(b)?new b:b}})}(g),g.RequestResponse=function(b){return b.Handlers.extend({request:function(){var b=arguments[0],
e=Array.prototype.slice.call(arguments,1);return this.getHandler(b).apply(this,e)}})}(g),g.EventAggregator=function(b,c){var e=function(){};return e.extend=b.Model.extend,c.extend(e.prototype,b.Events),e}(b,h),g}(Backbone,Backbone.Marionette,_);
var Marionette=function(b,g,h){function f(a,d){var b=Error(a);throw b.name=d||"Error",b;}var c={};g.Marionette=c;c.$=g.$;var e=Array.prototype.slice;return c.extend=g.Model.extend,c.getOption=function(a,d){if(a&&d)return a.options&&d in a.options&&void 0!==a.options[d]?a.options[d]:a[d]},c.triggerMethod=function(){function a(a,d,b){return b.toUpperCase()}var d=/(^|:)(\w)/gi;return function(b){var c=this["on"+b.replace(d,a)];return this.trigger.apply(this,arguments),h.isFunction(c)?c.apply(this,h.tail(arguments)):
void 0}}(),c.MonitorDOMRefresh=function(){function a(a){a._isShown&&a._isRendered&&h.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(d){d.listenTo(d,"show",function(){d._isShown=!0;a(d)});d.listenTo(d,"render",function(){d._isRendered=!0;a(d)})}}(),function(a){function d(a,d,b,c){c=c.split(/\s+/);h.each(c,function(c){var e=a[c];e||f("Method '"+c+"' was configured as an event handler, but does not exist.");a.listenTo(d,b,e,a)})}function b(a,d,c,e){a.listenTo(d,c,e,a)}function c(a,
d,b,e){e=e.split(/\s+/);h.each(e,function(c){a.stopListening(d,b,a[c],a)})}function e(a,d,b,c){a.stopListening(d,b,c,a)}function g(a,d,b,c,e){d&&b&&(h.isFunction(b)&&(b=b.call(a)),h.each(b,function(b,f){h.isFunction(b)?c(a,d,f,b):e(a,d,f,b)}))}a.bindEntityEvents=function(a,c,e){g(a,c,e,b,d)};a.unbindEntityEvents=function(a,d,b){g(a,d,b,e,c)}}(c),c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]},h.extend(c.Callbacks.prototype,{add:function(a,d){this._callbacks.push({cb:a,ctx:d});
this._deferred.done(function(b,c){d&&(b=d);a.call(b,c)})},run:function(a,d){this._deferred.resolve(d,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];h.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};h.isFunction(this.initialize)&&this.initialize(this.options)},c.Controller.extend=c.extend,h.extend(c.Controller.prototype,g.Events,{close:function(){this.stopListening();this.triggerMethod("close");
this.unbind()}}),c.Region=function(a){if(this.options=a||{},this.el=c.getOption(this,"el"),!this.el){var d=Error("An 'el' must be specified for a region.");throw d.name="NoElError",d;}this.initialize&&(d=Array.prototype.slice.apply(arguments),this.initialize.apply(this,d))},h.extend(c.Region,{buildRegion:function(a,d){var b="string"==typeof a,c="string"==typeof a.selector,e=void 0===a.regionType,f="function"==typeof a;if(!f&&!b&&!c)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");
var g,m;b&&(g=a);a.selector&&(g=a.selector);f&&(m=a);!f&&e&&(m=d);a.regionType&&(m=a.regionType);b=new m({el:g});return a.parentEl&&(b.getEl=function(d){var b=a.parentEl;return h.isFunction(b)&&(b=b()),b.find(d)}),b}}),h.extend(c.Region.prototype,g.Events,{show:function(a){this.ensureEl();var d=a.isClosed||h.isUndefined(a.$el),b=a!==this.currentView;b&&this.close();a.render();(b||d)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&
0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}}),c.Region.extend=c.extend,c.RegionManager=function(a){var d=a.Controller.extend({constructor:function(d){this._regions=
{};a.Controller.prototype.constructor.call(this,d)},addRegions:function(a,d){var b={};return h.each(a,function(a,c){"string"==typeof a&&(a={selector:a});a.selector&&(a=h.defaults({},a,d));var e=this.addRegion(c,a);b[c]=e},this),b},addRegion:function(d,b){var c,e=h.isObject(b),f=h.isString(b),g=!!b.selector;return c=f||e&&g?a.Region.buildRegion(b,a.Region):h.isFunction(b)?a.Region.buildRegion(b,a.Region):b,this._store(d,c),this.triggerMethod("region:add",d,c),c},get:function(a){return this._regions[a]},
removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){h.each(this._regions,function(a,d){this._remove(d,a)},this)},closeRegions:function(){h.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var d=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,d)},_store:function(a,d){this._regions[a]=d;this._setLength()},_remove:function(a,d){d.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",
a,d)},_setLength:function(){this.length=h.size(this._regions)}});return h.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){d.prototype[a]=function(){var d=[h.values(this._regions)].concat(h.toArray(arguments));return h[a].apply(h,d)}}),d}(c),c.TemplateCache=function(a){this.templateId=a},h.extend(c.TemplateCache,{templateCaches:{},get:function(a){var d=this.templateCaches[a];
return d||(d=new c.TemplateCache(a),this.templateCaches[a]=d),d.load()},clear:function(){var a,d=e.call(arguments),b=d.length;if(0<b)for(a=0;b>a;a++)delete this.templateCaches[d[a]];else this.templateCaches={}}}),h.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var d=c.$(a).html();return d&&0!==d.length||
f("Could not find template: '"+a+"'","NoTemplateError"),d},compileTemplate:function(a){return h.template(a)}}),c.Renderer={render:function(a,d){if(!a){var b=Error("Cannot render the template since it's false, null or undefined.");throw b.name="TemplateNotFoundError",b;}return b="function"==typeof a?a:c.TemplateCache.get(a),b(d)}},c.View=g.View.extend({constructor:function(){h.bindAll(this,"render");var a=Array.prototype.slice.apply(arguments);g.View.prototype.constructor.apply(this,a);c.MonitorDOMRefresh(this);
this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var d=this.templateHelpers;return h.isFunction(d)&&(d=d.call(this)),h.extend(a,d)},configureTriggers:function(){if(this.triggers){var a={},d=h.result(this,"triggers");return h.each(d,function(d,b){a[b]=function(a){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();this.triggerMethod(d,{view:this,
model:this.model,collection:this.collection})}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;h.isFunction(a)&&(a=a.call(this));var d={},b=this.configureTriggers();h.extend(d,a,b);g.View.prototype.delegateEvents.call(this,d)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);
g.View.prototype.undelegateEvents.apply(this,a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=h.result(this,"_uiBindings");
this.ui={};h.each(h.keys(a),function(d){this.ui[d]=this.$(a[d])},this)}},unbindUIElements:function(){this.ui&&(h.each(this.ui,function(a,d){delete this.ui[d]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),c.ItemView=c.View.extend({serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=
this.serializeData(),a=this.mixinTemplateHelpers(a),d=this.getTemplate(),a=c.Renderer.render(d,a);return this.$el.html(a),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,e.call(arguments)),this.triggerMethod("item:closed"))}}),c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage();
c.View.prototype.constructor.apply(this,e.call(arguments));this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var d=this.getItemView(a),b=this.collection.indexOf(a);this.addItemView(a,d,b)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,
"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView()},
showCollection:function(){var a;this.collection.each(function(d,b){a=this.getItemView(d);this.addItemView(d,a,b)},this)},showEmptyView:function(){var a=c.getOption(this,"emptyView");if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var d=new g.Model;this.addItemView(d,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var a=c.getOption(this,"itemView");return a||f("An `itemView` must be specified","NoItemViewError"),
a},addItemView:function(a,d,b){var e=c.getOption(this,"itemViewOptions");h.isFunction(e)&&(e=e.call(this,a,b));a=this.buildItemView(a,d,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,b);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var d=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var b=e.call(arguments);b[0]=d+
":"+b[0];b.splice(1,0,a);c.triggerMethod.apply(this,b)},this)},renderItemView:function(a,d){a.render();this.appendHtml(this,a,d)},buildItemView:function(a,d,b){a=h.extend({model:a},b);return new d(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==
this.collection.length||this.showEmptyView()},appendHtml:function(a,d){a.$el.append(d.el)},_initChildViewStorage:function(){this.children=new g.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,e.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}}),c.CompositeView=c.CollectionView.extend({_initialEvents:function(){this.collection&&
(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;return a||f("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();
this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a),d=this.getTemplate();return c.Renderer.render(d,
a)},appendHtml:function(a,d){this.getItemViewContainer(a).append(d.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var d;a.itemViewContainer?(d=h.result(a,"itemViewContainer"),d=a.$(d),0>=d.length&&f("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):d=a.$el;return a.$itemViewContainer=d,d},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),c.Layout=c.ItemView.extend({regionType:c.Region,
constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.call(this,a)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,d){var b=
{};return b[a]=d,this.addRegions(b)[a]},addRegions:function(a){return this.regions=h.extend(this.regions||{},a),this._buildRegions(a)},removeRegion:function(a){return this.regionManager.removeRegion(a)},_buildRegions:function(a){var d=this;return this.regionManager.addRegions(a,{parentEl:function(){return d.$el}})},_initializeRegions:function(a){this._initRegionManager();a=h.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();
this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,d){this[a]=d;this.trigger("region:add",a,d)});this.listenTo(this.regionManager,"region:remove",function(a,d){delete this[a];this.trigger("region:remove",a,d)})}}),c.AppRouter=g.Router.extend({constructor:function(a){if(g.Router.prototype.constructor.apply(this,e.call(arguments)),this.options=a,this.appRoutes){var d=c.getOption(this,
"controller");this.processAppRoutes(d,this.appRoutes)}},processAppRoutes:function(a,d){var b=h.keys(d).reverse();h.each(b,function(b){var c=d[b],e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,h.bind(e,a))},this)}}),c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.Wreqr.EventAggregator;this.commands=new g.Wreqr.Commands;this.reqres=new g.Wreqr.RequestResponse;this.submodules={};h.extend(this,a);this.triggerMethod=
c.triggerMethod},h.extend(c.Application.prototype,g.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},
addRegions:function(a){return this._regionManager.addRegions(a)},removeRegion:function(a){this._regionManager.removeRegion(a)},module:function(){var a=e.call(arguments);return a.unshift(this),c.Module.create.apply(c.Module,a)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,d){this[a]=d});this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),c.Application.extend=c.extend,c.Module=function(a,
d){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=d;this.startWithParent=!0;this.triggerMethod=c.triggerMethod},h.extend(c.Module.prototype,g.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(h.each(this.submodules,function(d){d.startWithParent&&d.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=
!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),h.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,d){this._runModuleDefinition(a,d)},_runModuleDefinition:function(a,d){if(a){var b=h.flatten([this,this.app,g,c,c.$,h,d]);a.apply(this,b)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=
new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}}),h.extend(c.Module,{create:function(a,d,b){var c=a,f=e.call(arguments);f.splice(0,3);d=d.split(".");var g=[];return g[d.length-1]=b,h.each(d,function(d,b){var e=c;c=this._getModule(e,d,a);this._addModuleDefinition(e,c,g[b],f)},this),c},_getModule:function(a,d,b){var e=a[d];return e||(e=new c.Module(d,b),a[d]=e,a.submodules[d]=e),e},_addModuleDefinition:function(a,d,b,c){var e,f;h.isFunction(b)?(e=b,f=!0):h.isObject(b)?(e=b.define,f=b.startWithParent):
f=!0;e&&d.addDefinition(e,c);d.startWithParent=d.startWithParent&&f;d.startWithParent&&!d.startWithParentIsConfigured&&(d.startWithParentIsConfigured=!0,a.addInitializer(function(a){d.startWithParent&&d.start(a)}))}}),c}(this,Backbone,_);
(function(){Backbone.InfiniScroll=function(b,g){function h(d){d={};f.options.includePage&&(d.p=a+1);return d}g=g||{};var f={},c,e,a,d,l=0;d=b.length||25;f.collection=b;f.options=_.defaults(g,{success:function(){},error:function(){},onFetch:function(){},target:$(window),extraParams:{},pageSize:d,scrollOffset:100,remove:!1,strict:!1,includePage:!1});f.destroy=function(){c.off("scroll",f.watchScroll)};f.enableFetch=function(){e=!0};f.disableFetch=function(){e=!1};f.onFetch=function(){f.options.onFetch()};
f.fetchSuccess=function(d,b){f.options.strict&&d.length>=(a+1)*f.options.pageSize||!f.options.strict&&0<b.length?(f.enableFetch(),a+=1):f.disableFetch();f.options.success(d,b)};f.fetchError=function(a,d){f.enableFetch();f.options.error(a,d)};f.watchScroll=function(a){a=c.scrollTop()+c.height();var d=c.get(0).scrollHeight;d||(d=$(document).height());if(a>=d-f.options.scrollOffset&&e&&l<=a){d=f.collection.last();if(!d)return;f.onFetch();f.disableFetch();f.collection.fetch({success:f.fetchSuccess,error:f.fetchError,
remove:f.options.remove,data:$.extend(h(d),f.options.extraParams)})}l=a};c=$(f.options.target);e=!0;a=1;c.on("scroll",f.watchScroll);return f}})();(function(){window.DEBUG=!1}).call(this);
(function(){var b;window.Backbone.emulateJSON=!0;window.Yapp=new Marionette.Application;window.Yapp.API_BASE_URL="/api/v1";window.Yapp.API_BASE_URL="";window.Yapp.YA_MAP_URL="http://api-maps.yandex.ru/2.0-stable/?load=package.full&lang=ru-RU&wizard=constructor";window.Yapp.DEBUG=void 0!==window.DEBUG?window.DEBUG:!0;jQuery(document).ajaxSend(function(b,h,f){var c;b=function(b){var a,d,c,f,h,g;a=null;if(document.cookie&&""!==document.cookie){d=document.cookie.split(";");f=function(d){d=jQuery.trim(d);
if(d.substring(0,b.length+1)===b+"=")return a=decodeURIComponent(d.substring(b.length+1))};h=0;for(g=d.length;h<g;h++)c=d[h],f(c)}return a};c=function(b){var a,d;a=document.location.host;d=document.location.protocol;a="//"+a;d+=a;return b===d||b.slice(0,d.length+1)===d+"/"||b===a||b.slice(0,a.length+1)===a+"/"||!/^(\/\/|http:|https:).*/.test(b)};if(!/^(GET|HEAD|OPTIONS|TRACE)$/.test(f.type.toUpperCase())&&c(f.url))return h.setRequestHeader("X-CSRFToken",b("csrftoken"))});b="undefined"===typeof window.console?
{}:window.console;if(!window.Yapp.DEBUG||"undefined"===typeof b.log)b.log=b.debug=b.trace=b.dir=b.dirxml=b.group=b.groupEnd=b.time=b.timeEnd=b.assert=b.profile=function(){}}).call(this);this.Templates=this.Templates||{};this.Templates.Coll=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<section class="p-block event-labels">\n  <h4 class="title-block">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u0441 \u044d\u0442\u0438\u043c \u043c\u0435\u0441\u0442\u043e\u043c</h4>\n\n  <menu class="p-nav-collection">\n    <a href="#" class="prev">&larr; \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435</a>\n    <a href="#" class="next">\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 &rarr;</a>\n  </menu>\n\n  <div class="clearfix body">\n    <div class="scroll-photos">\n      <ul class="ul-collection-list">\n        <li>\n          <div class="ucl-item">\n            <div class="photo">\n              <div class="yasen-info">\n                <div class="yp-info">\n                  <i class="yp-like"></i><small>12</small>\n                </div>\n              </div>\n\n              <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n            </div>\n\n            <ul class="photo-preview">\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n            </ul>\n\n            <div class="body">\n              <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n              <div class="collection-short-desc">\n                <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n              </div>\n            </div>\n          </div>\n\n          <div class="ucl-item">\n            <div class="photo">\n              <div class="yasen-info">\n                <div class="yp-info">\n                  <i class="yp-like"></i><small>12</small>\n                </div>\n              </div>\n\n              <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n            </div>\n\n            <ul class="photo-preview">\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n            </ul>\n\n            <div class="body">\n              <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n              <div class="collection-short-desc">\n                <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n              </div>\n            </div>\n          </div>\n\n          <div class="ucl-item">\n            <div class="photo">\n              <div class="yasen-info">\n                <div class="yp-info">\n                  <i class="yp-like"></i><small>12</small>\n                </div>\n              </div>\n\n              <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n            </div>\n\n            <ul class="photo-preview">\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n            </ul>\n\n            <div class="body">\n              <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n              <div class="collection-short-desc">\n                <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n              </div>\n            </div>\n          </div>\n        </li>\n\n        <li>\n          <div class="ucl-item">\n            <div class="photo">\n              <div class="yasen-info">\n                <div class="yp-info">\n                  <i class="yp-like"></i><small>12</small>\n                </div>\n              </div>\n\n              <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n            </div>\n\n            <ul class="photo-preview">\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n            </ul>\n\n            <div class="body">\n              <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n              <div class="collection-short-desc">\n                <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n              </div>\n            </div>\n          </div>\n\n          <div class="ucl-item">\n            <div class="photo">\n              <div class="yasen-info">\n                <div class="yp-info">\n                  <i class="yp-like"></i><small>12</small>\n                </div>\n              </div>\n\n              <a href="#" class="a-photo"><img src="temp/photo-166x132.jpg" alt="" width="166" height="132"></a>\n            </div>\n\n            <ul class="photo-preview">\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n\n              <li>\n                <a href="#">\n                  <img src="temp/img-51x41.jpg" alt="" width="51" height="41">\n                </a>\n              </li>\n            </ul>\n\n            <div class="body">\n              <img src="temp/avatar.jpg" alt="" class="avatar" width="29" height="30">\n\n              <div class="collection-short-desc">\n                <h3>\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0432 \u043b\u0435\u0442\u043e</h3>\n                <p>\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u0410\u043d\u0434\u0440\u0435\u044f \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432\u0430</p>\n              </div>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n'});
this.Templates.Events=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div id="tab-events" class="tab-pane">\n  <div class="calendar">\n    <select id="c-year-2">\n      <option value="1">2013</option>\n      <option value="2">2012</option>\n      <option value="3">2011</option>\n      <option value="4">2010</option>\n    </select>\n\n    <select id="c-month-2">\n      <option value="1">\u042f\u043d\u0432\u0430\u0440\u044c</option>\n      <option value="2">\u0424\u0435\u0432\u0440\u0430\u043b\u044c</option>\n      <option value="3">\u041c\u0430\u0440\u0442</option>\n      <option value="4">\u0410\u043f\u0440\u0435\u043b\u044c</option>\n      <option value="5">\u041c\u0430\u0439</option>\n      <option value="6">\u0418\u044e\u043d\u044c</option>\n      <option value="7">\u0418\u044e\u043b\u044c</option>\n      <option value="8">\u0410\u0432\u0433\u0443\u0441\u0442</option>\n      <option value="9">\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c</option>\n      <option value="10">\u041e\u043a\u0442\u044f\u0431\u0440\u044c</option>\n      <option value="11">\u041d\u043e\u044f\u0431\u0440\u044c</option>\n      <option value="12">\u0414\u0435\u043a\u0430\u0431\u0440\u044c</option>\n    </select>\n\n    <ul class="c-days">\n      <li><a href="#">1</a></li>\n      <li><a href="#">2</a></li>\n      <li><a href="#">3</a></li>\n      <li><a href="#" class="active">4</a></li>\n      <li><a href="#">5</a></li>\n      <li><a href="#">6</a></li>\n      <li><a href="#">7</a></li>\n      <li><span>8</span></li>\n      <li><span>9</span></li>\n      <li><a href="#">10</a></li>\n      <li><a href="#">11</a></li>\n      <li><a href="#">12</a></li>\n      <li><a href="#">13</a></li>\n      <li><a href="#">14</a></li>\n      <li><a href="#">15</a></li>\n      <li><a href="#">16</a></li>\n      <li><a href="#">17</a></li>\n      <li><span>18</span></li>\n      <li><a href="#">19</a></li>\n      <li><a href="#">20</a></li>\n      <li><a href="#">21</a></li>\n      <li><a href="#">22</a></li>\n      <li><a href="#">23</a></li>\n      <li><a href="#">24</a></li>\n      <li><a href="#">25</a></li>\n      <li><a href="#">26</a></li>\n      <li><a href="#">27</a></li>\n      <li><a href="#">28</a></li>\n      <li><a href="#">29</a></li>\n      <li><a href="#">30</a></li>\n      <li><span>31</span></li>\n      <li><a href="#"></a></li>\n    </ul>\n  </div>\n\n  <div class="toggle-block">\n    <ul class="event-list">\n      <li>\n        <a href="#" class="fl photo">\n          <img src="temp/img-1.jpg" alt="">\n        </a>\n\n        <div class="body">\n          <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n          <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n          <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n          <div class="stats">\n            <span>\n              <span class="ico-want-small"></span>\n              15\n            </span>\n\n            <span>\n              <span class="ico-like-small"></span>\n              23\n            </span>\n\n            <span>\n              <span class="ico-comment-small"></span>\n              2\n            </span>\n          </div>\n\n          <div class="short-desc">\n            <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n            <div class="body">\n              <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n              <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n            </div>\n          </div>\n        </div>\n      </li>\n\n      <li class="even">\n        <a href="#" class="fl photo">\n          <img src="temp/img-2.jpg" alt="">\n        </a>\n\n        <div class="body">\n          <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n          <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n          <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n          <div class="stats">\n            <span>\n              <span class="ico-want-small"></span>\n              15\n            </span>\n\n            <span>\n              <span class="ico-like-small"></span>\n              23\n            </span>\n\n            <span>\n              <span class="ico-comment-small"></span>\n              2\n            </span>\n          </div>\n\n          <div class="short-desc">\n            <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n            <div class="body">\n              <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n              <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n            </div>\n          </div>\n        </div>\n      </li>\n    </ul>\n\n    <div class="hidden-content">\n      <ul class="event-list">\n        <li>\n          <a href="#" class="fl photo">\n            <img src="temp/img-1.jpg" alt="">\n          </a>\n\n          <div class="body">\n            <time datetime="2013-02-06">1-6 \u0444\u0435\u0432\u0440\u0430\u043b\u044f</time>\n\n            <h3><a href="#">IT \u0424\u043e\u0440\u0443\u043c 2013</a></h3>\n            <div class="addr">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0412\u043e\u043b\u043e\u0433\u0434\u0430</div>\n            <div class="stats">\n              <span>\n                <span class="ico-want-small"></span>\n                15\n              </span>\n\n              <span>\n                <span class="ico-like-small"></span>\n                23\n              </span>\n\n              <span>\n                <span class="ico-comment-small"></span>\n                2\n              </span>\n            </div>\n\n            <div class="short-desc">\n              <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n\n              <div class="body">\n                <a href="#" class="a-author">\u0422\u043e\u0432\u0430\u0440\u0438\u0449 SinteZ</a>\n\n                <p>\u041d\u0430\u0440\u044f\u0434\u0443 \u0441 \u0445\u0440\u0430\u043c\u043e\u043c \u041f\u043e\u043a\u0440\u043e\u0432\u0430 \u043d\u0430 \u0420\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435</p>\n              </div>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <a href="#" class="a-toggle">\u0432\u0441\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f <span>&darr;</span></a>\n  </div>\n\n  <a href="#" class="btn btn-event"><b>+</b> \u0421\u043e\u0431\u044b\u0442\u0438\u0435</a>\n</div>\n'});
this.Templates.Reviews=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div class="bp-comments bp-comments_review">\n  <div class="toggle-block a-toggle-down">\n    \n    <div class="add-comment">\n      <form action="#">\n        <div class="ac-block">\n          <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar" data-author="\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432">\n          \n          <div class="ac-body">\n            <textarea placeholder="\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 \u043e\u0442\u0437\u044b\u0432..."></textarea>\n          </div>\n        </div>\n        <input type="submit" class="button button_green" value="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c">\n        <div class="vote">\n          <label class="vote__label">\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e:</label>\n          <div class="vote__raiting js-vote">\n            <input type="hidden" name="vote-id" value="1"/>\n          </div>\n        </div>\n      </form>\n    </div>\n    \n\n    <div  class="item-comment item-comment_green">\n      <img src="temp/avatar.jpg" alt="" width="29" height="30" class="avatar">\n      \n      <div class="comment-body">\n        <div class="comment-author">\u0410\u043d\u0434\u0440\u0435\u0439 \u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0432</div>\n        <div class="comment-date">\u041e\u0446\u0435\u043d\u0438\u043b(\u0430) \u043c\u0435\u0441\u0442\u043e: 5<span class="ico-vote-small"></span> 20.02.2013 \u0432 17:15</div>\n        \n      </div>\n      \n      <div class="action">\n          <a href="#" class="a-complaint-comment"></a>\n        </div>\n    </div>\n    \n    <div class="hidden-content">\n    </div>\n\n    <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043e\u0442\u0437\u044b\u0432\u044b <span>&darr;</span></a>\n    \n  </div>\n</div>\n'});
this.Templates.AuthPopupView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div class="p-top">\n  <h3>\u0412\u0445\u043e\u0434</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <div class="social-auth">\x3c!-- sa- social auth --\x3e\n    <a href="/login/vkontakte-oauth2/" class="sa-vk"></a>\n    <a class="sa-fb" style="opacity: 0.2"></a>\n    <a class="sa-tw" style="opacity: 0.2"></a>\n    <a class="sa-ok" style="opacity: 0.2"></a>\n    <a class="sa-mm" style="opacity: 0.2"></a>\n    <a class="sa-ya" style="opacity: 0.2"></a>\n  </div>\n</div>\n'});
this.Templates.ComplaintCommentView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div class="p-top">\n  <h3>\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439</h3>\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <form action="#">\n    <p>\u041f\u043e\u0447\u0435\u043c\u0443 \u0412\u044b \u0436\u0430\u043b\u0443\u0435\u0442\u0435\u0441\u044c \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439?</p>\n    \n    <div class="line">\n      <label class="custom-radio">\n        <input type="radio" value="" name="radio-1">\n        \u0421\u043f\u0430\u043c\n      </label>\n      \n      <label class="custom-radio">\n        <input type="radio" value="" name="radio-1">\n        \u041e\u0441\u043a\u043e\u0440\u0431\u043b\u0435\u043d\u0438\u0435\n      </label>\n      \n      <label class="custom-radio">\n        <input type="radio" value="" name="radio-1">\n        \u0414\u0440\u0443\u0433\u043e\u0435\n      </label>\n    </div>\n    <div class="line">\n      <textarea rows="3" cols="30" onfocus="if(this.value == this.defaultValue) this.value =\'\';" onblur="if(this.value == \'\') this.value = this.defaultValue;">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442</textarea>\n    </div>\n    \n    <input type="submit" value="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f" class="a-btn">\n  </form>\n</div>\n'});
this.Templates.FooterView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<a href="#" class="a-toggle" title="\u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u0430\u043d\u0435\u043b\u044c">&nbsp;</a>\n<a href="#" class="a-up">\u0412\u0432\u0435\u0440\u0445 <span>&uarr;</span></a>\n\n<ul>\n  <li><a href="#" class="aboutProject nonav">\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435</a></li>\n  <li><a href="#" class="contacts nonav">\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b</a></li>\n  <li><a href="#">\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435</a></li>\n</ul>\n\n<div class="apps">\n  <a href="#" class="app-android">&nbsp;</a>\n  <a href="#" class="app-store">&nbsp;</a>\n</div>\n\n<div class="share">\n  <div id="vk_like"></div>\n  <div class="fb-like" data-href="http://yasenput.ru" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n</div>\n\n<div class="f-social">\n  <a href="http://vk.com/yasenput" target="_blank" class="a-vk">&nbsp;</a>\n  <a href="http://www.facebook.com/yasenput" target="_blank" class="a-fb">&nbsp;</a>\n</div>\n'});
this.Templates.HeaderView=Handlebars.template(function(b,g,h,f,c){function e(a,d){var b,c;return b=""+('\n            <div class="label label-place" data-type="place" data-left-corner="'+q((c=(c=a.location,null==c||!1===c?c:c.leftCorner),typeof c===l?c.apply(a):c))+'" data-right-corner="'+q((c=(c=a.location,null==c||!1===c?c:c.rightCorner),typeof c===l?c.apply(a):c))+'">\n            '+q((c=(c=a.location,null==c||!1===c?c:c.region),typeof c===l?c.apply(a):c))+'\n            <button class="remove-label"></button>\n          </div>\n          ')}
this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var a,d,l="function",q=this.escapeExpression,v=this;f=h.helperMissing;b='<div class="logo">\u044f\u0441\u0435\u043d \u043f\u0443\u0442\u044c</div>\n\n<div class="head-search">\n  <div class="search">\n    <form action="#" id="multisearchForm">\n      <input type="submit" value="\u041d\u0430\u0439\u0442\u0438">\n\n      <div class="label-fields">\n        \x3c!--\n        ';if((d=h["if"].call(g,(a=g.location,null==a||!1===a?a:a.country),
{hash:{},inverse:v.noop,fn:v.program(1,function(a,d){var b,c;return b=""+('\n        <div class="label label-place">\n          '+q((c=(c=a.location,null==c||!1===c?c:c.country),typeof c===l?c.apply(a):c))+'\n          <button class="remove-label"></button>\n        </div>\n        ')},c),data:c}))||0===d)b+=d;b+="\n\n        ";if((d=h["if"].call(g,(a=g.location,null==a||!1===a?a:a.region),{hash:{},inverse:v.noop,fn:v.program(3,function(a,d){var b,c;return b=""+('\n        <div class="label label-place">\n          '+
q((c=(c=a.location,null==c||!1===c?c:c.region),typeof c===l?c.apply(a):c))+'\n          <button class="remove-label"></button>\n        </div>\n        ')},c),data:c}))||0===d)b+=d;b+="\n        --\x3e\n\n        ";if((d=h["if"].call(g,(a=g.location,null==a||!1===a?a:a.city),{hash:{},inverse:v.program(7,function(a,d){var b,c,f;b="\n          ";if((f=h["if"].call(a,(c=a.location,null==c||!1===c?c:c.region),{hash:{},inverse:v.noop,fn:v.program(8,e,d),data:d}))||0===f)b+=f;return b+"\n        "},c),
fn:v.program(5,function(a,d){var b,c;return b=""+('\n        <div class="label label-place" data-type="place" data-left-corner="'+q((c=(c=a.location,null==c||!1===c?c:c.leftCorner),typeof c===l?c.apply(a):c))+'" data-right-corner="'+q((c=(c=a.location,null==c||!1===c?c:c.rightCorner),typeof c===l?c.apply(a):c))+'">\n          '+q((c=(c=a.location,null==c||!1===c?c:c.city),typeof c===l?c.apply(a):c))+'\n          <button class="remove-label"></button>\n        </div>\n        ')},c),data:c}))||0===
d)b+=d;b+='\n        <div class="label label-add">\n          \u0418\u0441\u043a\u0430\u0442\u044c\n          <span>+</span>\n        </div>\n\n        <span class="text-field"><input type="text"></span>\n      </div>\n      <button type="button" class="clear-input"></button>\n    </form>\n\n    <div class="drop-search" style="display:none;"></div>\n    <div class="drop-search-overlay" style="display:none;width:100%;height:100%;top:0;left:0;position:fixed;z-index:-1"></div>\n  </div>\n</div>\n\n<div class="head-nav">\n  <div>\n    <ul>\n      ';
d={hash:{},inverse:v.noop,fn:v.program(10,function(a,d){return'\n      <li class="head-nav-current-item" data-models="points"><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n      <li><a href="#">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</a></li>\n      <li data-models="sets"><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n      <li data-models="events"><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n      <li data-models="routes"><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      '},
c),data:c};if((d=(a=h.ifEquals,a?a.call(g,g.searchModels,"points",d):f.call(g,"ifEquals",g.searchModels,"points",d)))||0===d)b+=d;b+="\n      ";d={hash:{},inverse:v.noop,fn:v.program(12,function(a,d){return'\n      <li class="head-nav-current-item" data-models="sets"><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n      <li><a href="#">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</a></li>\n      <li data-models="points"><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n      <li data-models="events"><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n      <li data-models="routes"><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      '},
c),data:c};if((d=(a=h.ifEquals,a?a.call(g,g.searchModels,"sets",d):f.call(g,"ifEquals",g.searchModels,"sets",d)))||0===d)b+=d;b+="\n      ";d={hash:{},inverse:v.noop,fn:v.program(14,function(a,d){return'\n      <li class="head-nav-current-item" data-models="routes"><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      <li><a href="#">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</a></li>\n      <li data-models="points"><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n      <li data-models="sets"><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n      <li data-models="events"><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n      '},
c),data:c};if((d=(a=h.ifEquals,a?a.call(g,g.searchModels,"routes",d):f.call(g,"ifEquals",g.searchModels,"routes",d)))||0===d)b+=d;b+="\n      ";d={hash:{},inverse:v.noop,fn:v.program(16,function(a,d){return'\n      <li class="head-nav-current-item" data-models="events"><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n      <li><a href="#">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</a></li>\n      <li data-models="points"><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n      <li data-models="sets"><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n      <li data-models="routes"><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      '},
c),data:c};if((d=(a=h.ifEquals,a?a.call(g,g.searchModels,"events",d):f.call(g,"ifEquals",g.searchModels,"events",d)))||0===d)b+=d;b+="\n      ";if((d=h.unless.call(g,g.searchModels,{hash:{},inverse:v.noop,fn:v.program(18,function(a,d){return'\n      <li class="head-nav-current-item"><a href="#">\u0412\u0441\u0435 \u0441\u0440\u0430\u0437\u0443</a></li>\n      <li data-models="points"><a href="#">\u041c\u0435\u0441\u0442\u0430</a></li>\n      <li data-models="sets"><a href="#">\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438</a></li>\n      <li data-models="events"><a href="#">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n      <li data-models="routes"><a href="#">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a></li>\n      '},
c),data:c}))||0===d)b+=d;b+='\n    </ul>\n  </div>\n</div>\n\n<div class="add-block-head">\n  <i class="ico-add"></i>\n\n  <div>\n    <div class="drop-add-head">\n      <a href="/point/add" class="nonav" data-target="p-add-place">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</a>\n      <a href="/route/add" class="nonav" data-target="p-add-event">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n      \x3c!--<a href="/event/add" data-target="p-add-event">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435</a>--\x3e\n    </div>\n  </div>\n</div>\n\n';
if((d=h["if"].call(g,g.authorized,{hash:{},inverse:v.program(22,function(a,d){return'\n  <div class="auth">\n    <img src="/static/images/guest.png" alt="" class="avatar" width="29" height="30">\n    <div class="user-body">\n      <span href="#" class="a-login">\u0412\u0445\u043e\u0434</span>\n    </div>\n  </div>\n'},c),fn:v.program(20,function(a,d){var b,c;b='\n  <div class="auth user">\n    <img src="/media/';(c=h.avatar)?c=c.call(a,{hash:{},data:d}):(c=a.avatar,c=typeof c===l?c.apply(a):c);b+=
q(c)+'" alt="" class="avatar" width="29" height="30">\n    <div class="user-body">\n      <div class="user-name">';(c=h.first_name)?c=c.call(a,{hash:{},data:d}):(c=a.first_name,c=typeof c===l?c.apply(a):c);b+=q(c)+" ";(c=h.last_name)?c=c.call(a,{hash:{},data:d}):(c=a.last_name,c=typeof c===l?c.apply(a):c);b+=q(c)+'<div class="drop-logout"><a href="/logout/" class="a-logout">\u0412\u044b\u0445\u043e\u0434</a></div></div>\n      <div class="user-likes">\n        <span class="ico ico-like-small"></span>\n        ';
(c=h.count_liked_objects)?c=c.call(a,{hash:{},data:d}):(c=a.count_liked_objects,c=typeof c===l?c.apply(a):c);b+=q(c)+'\n        <span class="ico ico-comment-small"></span>\n        ';(c=h.count_commented_objects)?c=c.call(a,{hash:{},data:d}):(c=a.count_commented_objects,c=typeof c===l?c.apply(a):c);return b+=q(c)+"\n      </div>\n    </div>\n  </div>\n"},c),data:c}))||0===d)b+=d;return b+"\n"});
this.Templates.LabelTemplate=Handlebars.template(function(b,g,h,f,c){function e(a,b){var c,e;c='\n    <div class="label label-';(e=h.type)?e=e.call(a,{hash:{},data:b}):(e=a.type,e=typeof e===d?e.apply(a):e);c+=l(e)+'" data-label-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===d?e.apply(a):e);c+=l(e)+'">\n      ';(e=h.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===d?e.apply(a):e);return c+=l(e)+'\n      <button class="remove-label"></button>\n    </div>\n  '}function a(a,
b){var c,e;c='data-left-corner="';(e=h.coordLeft)?e=e.call(a,{hash:{},data:b}):(e=a.coordLeft,e=typeof e===d?e.apply(a):e);c+=l(e)+'" data-right-corner="';(e=h.coordRight)?e=e.call(a,{hash:{},data:b}):(e=a.coordRight,e=typeof e===d?e.apply(a):e);return c+=l(e)+'"'}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};b="";var d="function",l=this.escapeExpression,q=this,v=h.helperMissing;if((g=h["if"].call(g,g.labels,{hash:{},inverse:q.program(4,function(b,c){var e,f,g;e='\n  <div class="label label-';
(f=h.type)?f=f.call(b,{hash:{},data:c}):(f=b.type,f=typeof f===d?f.apply(b):f);e+=l(f)+'" data-id="';(f=h.id)?f=f.call(b,{hash:{},data:c}):(f=b.id,f=typeof f===d?f.apply(b):f);e+=l(f)+'" data-type="';(f=h.type)?f=f.call(b,{hash:{},data:c}):(f=b.type,f=typeof f===d?f.apply(b):f);e+=l(f)+'" ';g={hash:{},inverse:q.noop,fn:q.program(5,a,c),data:c};if((g=(f=h.ifEquals,f?f.call(b,b.type,"place",g):v.call(b,"ifEquals",b.type,"place",g)))||0===g)e+=g;e+=">\n    ";(g=h.name)?g=g.call(b,{hash:{},data:c}):(g=
b.name,g=typeof g===d?g.apply(b):g);return e+=l(g)+'\n    <button class="remove-label"></button>\n  </div>\n'},c),fn:q.program(1,function(a,d){var b,c;b="\n  ";if((c=h.each.call(a,a.labels,{hash:{},inverse:q.noop,fn:q.program(2,e,d),data:d}))||0===c)b+=c;return b+"\n"},c),data:c}))||0===g)b+=g;return b+"\n"});
this.Templates.MultisearchDropdown=Handlebars.template(function(b,g,h,f,c){function e(a,d){var b,c;return b=""+('\n    <li class="item-label" data-name="'+m((c=(c=a.GeoObject,null==c||!1===c?c:c.name),typeof c===k?c.apply(a):c))+'" data-left-corner="'+m((c=(c=(c=(c=a.GeoObject,null==c||!1===c?c:c.boundedBy),null==c||!1===c?c:c.Envelope),null==c||!1===c?c:c.lowerCorner),typeof c===k?c.apply(a):c))+'" data-right-corner="'+m((c=(c=(c=(c=a.GeoObject,null==c||!1===c?c:c.boundedBy),null==c||!1===c?c:c.Envelope),
null==c||!1===c?c:c.upperCorner),typeof c===k?c.apply(a):c))+'" data-location="'+m((c=(c=(c=a.GeoObject,null==c||!1===c?c:c.Point),null==c||!1===c?c:c.pos),typeof c===k?c.apply(a):c))+'" data-type="place">\n      <a href="#">'+m((c=(c=a.GeoObject,null==c||!1===c?c:c.name),typeof c===k?c.apply(a):c))+" <i>"+m((c=(c=a.GeoObject,null==c||!1===c?c:c.description),typeof c===k?c.apply(a):c))+"</i></a>\n    </li>\n    ")}function a(a,b){var c,e;c='\n    <li class="item-label" data-name="';(e=h.name)?e=e.call(a,
{hash:{},data:b}):(e=a.name,e=typeof e===k?e.apply(a):e);c+=m(e)+'" data-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===k?e.apply(a):e);c+=m(e)+'" data-type="name">\n      ';if((e=h["if"].call(a,a.address,{hash:{},inverse:r.program(11,q,b),fn:r.program(8,d,b),data:b}))||0===e)c+=e;return c+"\n    </li>\n    "}function d(a,d){var b,c;b='\n        <a class="nonav" href="/point/';(c=h.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c=typeof c===k?c.apply(a):c);b+=m(c)+'">';(c=h.name)?c=c.call(a,
{hash:{},data:d}):(c=a.name,c=typeof c===k?c.apply(a):c);b+=m(c)+" <i>";if((c=h["if"].call(a,a.address,{hash:{},inverse:r.noop,fn:r.program(9,l,d),data:d}))||0===c)b+=c;return b+"</i></a>\n      "}function l(a,d){var b,c;c={hash:{},data:d};return m((b=h.splitAddr,b?b.call(a,a.address,",",c):n.call(a,"splitAddr",a.address,",",c)))}function q(a,d){var b,c;b='\n        <a class="nonav" href="/set/';(c=h.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c=typeof c===k?c.apply(a):c);b+=m(c)+'">';(c=h.name)?c=c.call(a,
{hash:{},data:d}):(c=a.name,c=typeof c===k?c.apply(a):c);return b+=m(c)+"</a>\n      "}function v(a,d){var b,c;b='\n      <li class="item-label" data-name="';(c=h.name)?c=c.call(a,{hash:{},data:d}):(c=a.name,c=typeof c===k?c.apply(a):c);b+=m(c)+'" data-id="';(c=h.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c=typeof c===k?c.apply(a):c);b+=m(c)+'" data-type="tags"><a href="#">';(c=h.name)?c=c.call(a,{hash:{},data:d}):(c=a.name,c=typeof c===k?c.apply(a):c);return b+=m(c)+"</a></li>\n    "}function x(a,
d){var b,c;b='\n    <li class="item-label" data-name="';(c=h.first_name)?c=c.call(a,{hash:{},data:d}):(c=a.first_name,c=typeof c===k?c.apply(a):c);b+=m(c)+" ";(c=h.last_name)?c=c.call(a,{hash:{},data:d}):(c=a.last_name,c=typeof c===k?c.apply(a):c);b+=m(c)+'" data-id="';(c=h.id)?c=c.call(a,{hash:{},data:d}):(c=a.id,c=typeof c===k?c.apply(a):c);b+=m(c)+'" data-type="user">\n      <a href="#">';(c=h.first_name)?c=c.call(a,{hash:{},data:d}):(c=a.first_name,c=typeof c===k?c.apply(a):c);b+=m(c)+" ";(c=
h.last_name)?c=c.call(a,{hash:{},data:d}):(c=a.last_name,c=typeof c===k?c.apply(a):c);return b+=m(c)+"</a>\n    </li>\n    "}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var k="function",m=this.escapeExpression,r=this,n=h.helperMissing;b='<button type="button"  class="toggle-panel"></button>\n\n<div class="inner-wrap">\n';if((f=h["if"].call(g,g.empty,{hash:{},inverse:r.noop,fn:r.program(1,function(a,d){return'\n  <ul class="item">\n    <li class="drop-not-found">\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e</li>\n  </ul>\n'},
c),data:c}))||0===f)b+=f;b+="\n\n";if((f=h["if"].call(g,g.places,{hash:{},inverse:r.noop,fn:r.program(3,function(a,d){var b,c;b=""+('\n  <ul class="item item-place">\n    <li class="item-title">\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f <sup>'+m((c=(c=a.places,null==c||!1===c?c:c.length),typeof c===k?c.apply(a):c))+"</sup></li>\n    ");if((c=h.each.call(a,a.places,{hash:{},inverse:r.noop,fn:r.program(4,e,d),data:d}))||0===c)b+=c;return b+"\n  </ul>\n"},c),
data:c}))||0===f)b+=f;b+="\n\n";if((f=h["if"].call(g,g.points,{hash:{},inverse:r.noop,fn:r.program(6,function(d,b){var c,e;c=""+('\n  <ul class="item item-name">\n    <li class="item-title">\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 <sup>'+m((e=(e=d.points,null==e||!1===e?e:e.length),typeof e===k?e.apply(d):e))+"</sup></li>\n    ");if((e=h.each.call(d,d.points,{hash:{},inverse:r.noop,fn:r.program(7,a,b),data:b}))||0===e)c+=e;return c+"\n  </ul>\n"},c),data:c}))||0===f)b+=f;b+="\n\n";if((f=h["if"].call(g,
g.tags,{hash:{},inverse:r.noop,fn:r.program(13,function(a,d){var b,c;b=""+('\n  <ul class="item item-labels">\n    <li class="item-title">\u041c\u0435\u0442\u043a\u0438 <sup>'+m((c=(c=a.tags,null==c||!1===c?c:c.length),typeof c===k?c.apply(a):c))+"</sup></li>\n    ");if((c=h.each.call(a,a.tags,{hash:{},inverse:r.noop,fn:r.program(14,v,d),data:d}))||0===c)b+=c;return b+"\n  </ul>\n"},c),data:c}))||0===f)b+=f;b+="\n\n";if((f=h["if"].call(g,g.users,{hash:{},inverse:r.noop,fn:r.program(16,function(a,
d){var b,c;b=""+('\n  <ul class="item item-users">\n    <li class="item-title">\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 <sup>'+m((c=(c=a.users,null==c||!1===c?c:c.length),typeof c===k?c.apply(a):c))+"</sup></li>\n    ");if((c=h.each.call(a,a.users,{hash:{},inverse:r.noop,fn:r.program(17,x,d),data:d}))||0===c)b+=c;return b+"\n  </ul>\n"},c),data:c}))||0===f)b+=f;return b+"\n</div>\n"});
this.Templates.IconTemplate=Handlebars.template(function(b,g,h,f,c){function e(a,b){var c;(c=h.style)?c=c.call(a,{hash:{},data:b}):(c=a.style,c=typeof c===d?c.apply(a):c);return l(c)}function a(a,d){return"m-dostoprimechatelnost"}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};b="";var d="function",l=this.escapeExpression,q=this;if((g=h.each.call(g,g.icons,{hash:{},inverse:q.noop,fn:q.program(1,function(b,c){var f,g;f='\n<a href="#" data-toggle="tooltip" title="';(g=h.name)?g=g.call(b,
{hash:{},data:c}):(g=b.name,g=typeof g===d?g.apply(b):g);f+=l(g)+'" data-placement="top" data-type-ico="';(g=h.name)?g=g.call(b,{hash:{},data:c}):(g=b.name,g=typeof g===d?g.apply(b):g);f+=l(g)+'">\n  <span class="m-ico ';if((g=h["if"].call(b,b.style,{hash:{},inverse:q.program(4,a,c),fn:q.program(2,e,c),data:c}))||0===g)f+=g;f+='" data-id="';(g=h.id)?g=g.call(b,{hash:{},data:c}):(g=b.id,g=typeof g===d?g.apply(b):g);return f+=l(g)+'"></span>\n</a>\n'},c),data:c}))||0===g)b+=g;return b+"\n"});
this.Templates.MapView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<div id="mainmap" style="width: 100%;"></div>\n\n<div class="m-ico-group"></div>\n\n<div class="toggle-bottom">\n  <a href="#" class="a-toggle">\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n</div>\n'});
this.Templates.AddToCollectionView=Handlebars.template(function(b,g,h,f,c){function e(a,b){var c,e;c='\n          <label class="custom-checkbox" data-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===d?e.apply(a):e);c+=l(e)+'">\n            <input type="checkbox" value="" name="collection" data-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===d?e.apply(a):e);c+=l(e)+'">\n            ';(e=h.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===d?e.apply(a):e);return c+=
l(e)+"\n          </label>\n          "}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var a,d="function",l=this.escapeExpression,q=this;b='<div class="p-top">\n  <h3>\u041d\u043e\u0432\u0430\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f</h3>\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <form >\n    <div class="line">\n      <label for="input-add-new">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</label>\n      <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438..." id="input-add-new-name">\n    </div>\n\n    <div class="line">\n      <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438..." id="input-add-new-desc">\n    </div>\n\n    <input type="submit" value="\u0421\u043e\u0437\u0434\u0430\u0442\u044c" class="a-btn a-add-collection nonav">\n\n    <br><br>\n\n    ';
if((g=h["if"].call(g,(a=g.user,null==a||!1===a?a:a.collections),{hash:{},inverse:q.noop,fn:q.program(1,function(a,b){var d,c,f;d='\n    <div class="line">\n      <label>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0439:</label>\n      <div class="wide-box">\n        <div class="small-viewport">\n          ';if((f=h.each.call(a,(c=a.user,null==c||!1===c?c:c.collections),
{hash:{},inverse:q.noop,fn:q.program(2,e,b),data:b}))||0===f)d+=f;return d+'\n        </div>\n      </div>\n    </div>\n\n    <input type="submit" value="\u0412\u044b\u0431\u0440\u0430\u0442\u044c" class="a-btn a-to-collection nonav">\n    '},c),data:c}))||0===g)b+=g;return b+"\n      \n  </form>\n</div>\n"});
this.Templates.BigPhoto=Handlebars.template(function(b,g,h,f,c){function e(a,b){return'\n          <a href="#" class="a-remove-comment" data-toggle="tooltip" data-content="\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439?" title="\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n        '}function a(a,
b){return'\n          <a href="#" class="a-complaint-comment" data-toggle="tooltip" title="\u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></a>\n        '}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var d,l=this.escapeExpression,q=h.helperMissing,v=this;b='<div class="bp-photo" data-photo-id="';(f=h.id)?f=f.call(g,{hash:{},data:c}):(f=g.id,f="function"===typeof f?f.apply(g):f);
b+=l(f)+'">\n  <img src="';(f=h.thumbnail560)?f=f.call(g,{hash:{},data:c}):(f=g.thumbnail560,f="function"===typeof f?f.apply(g):f);b+=l(f)+'" alt="" class="main-photo" height="">\n\n  <div class="bp-add-like">\n    <img src="/media/'+l((f=(f=g.author,null==f||!1===f?f:f.avatar),"function"===typeof f?f.apply(g):f))+'" alt="" width="22" height="22" class="avatar">\n    <span class="bp-name">'+l((f=(f=g.author,null==f||!1===f?f:f.first_name),"function"===typeof f?f.apply(g):f))+" "+l((f=(f=g.author,
null==f||!1===f?f:f.last_name),"function"===typeof f?f.apply(g):f))+'</span>\n\n    <a href="#" class="a-like ';if((d=h["if"].call(g,g.isliked,{hash:{},inverse:v.noop,fn:v.program(1,function(a,b){return"marked"},c),data:c}))||0===d)b+=d;b+='" data-photo-id="';(d=h.id)?d=d.call(g,{hash:{},data:c}):(d=g.id,d="function"===typeof d?d.apply(g):d);b+=l(d)+'"></a>\n    <span class="count-like">';(d=h.likes_count)?d=d.call(g,{hash:{},data:c}):(d=g.likes_count,d="function"===typeof d?d.apply(g):d);b+=l(d)+
'</span>\n  </div>\n</div>\n\n<div class="bp-comments">\n  <div class="toggle-block a-toggle-up">\n    <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 <span>&darr;</span></a>\n\n    ';if((d=h.each.call(g,g.comments,{hash:{},inverse:v.noop,fn:v.programWithDepth(3,function(b,d,c){var f,g,t;f='\n    <div class="item-comment" data-comment-id="';(g=h.id)?g=g.call(b,{hash:{},data:d}):(g=b.id,g="function"===typeof g?g.apply(b):g);f+=l(g)+
'">\n      <img src="/media/'+l((g=(g=b.author,null==g||!1===g?g:g.avatar),"function"===typeof g?g.apply(b):g))+'" alt="" width="29" height="30" class="avatar">\n\n      <div class="comment-body">\n        <div class="comment-author">'+l((g=(g=b.author,null==g||!1===g?g:g.first_name),"function"===typeof g?g.apply(b):g))+" "+l((g=(g=b.author,null==g||!1===g?g:g.last_name),"function"===typeof g?g.apply(b):g))+"</div>\n        <p>";(t=h.txt)?t=t.call(b,{hash:{},data:d}):(t=b.txt,t="function"===typeof t?
t.apply(b):t);f+=l(t)+'</p>\n        <div class="comment-date">';t={hash:{},data:d};f+=l((g=h.dateFormat,g?g.call(b,b.created,t):q.call(b,"dateFormat",b.created,t)))+'</div>\n      </div>\n\n      <div class="action">\n        ';t={hash:{},inverse:v.program(6,a,d),fn:v.program(4,e,d),data:d};if((t=(g=h.ifEquals,g?g.call(b,(g=b.author,null==g||!1===g?g:g.id),(g=c.user,null==g||!1===g?g:g.id),t):q.call(b,"ifEquals",(g=b.author,null==g||!1===g?g:g.id),(g=c.user,null==g||!1===g?g:g.id),t)))||0===t)f+=
t;return f+"\n      </div>\n    </div>\n    "},c,g),data:c}))||0===d)b+=d;b+='\n\n    \x3c!-- hidden comments will be here --\x3e\n    <div class="hidden-content"></div>\n\n    ';if((d=h["if"].call(g,(f=g.user,null==f||!1===f?f:f.authorized),{hash:{},inverse:v.noop,fn:v.program(8,function(a,b){var d,c;d=""+('\n    <div class="add-comment">\n      <form action="#" id="commentForm">\n        <div class="ac-block">\n          <img src="/media/'+l((c=(c=a.user,null==c||!1===c?c:c.avatar),"function"===
typeof c?c.apply(a):c))+'" alt="" width="29" height="30" class="avatar">\n          <div class="ac-body">\n            <div class="toggle-area">\n              <textarea name="comment" data-photo-id="');(c=h.id)?c=c.call(a,{hash:{},data:b}):(c=a.id,c="function"===typeof c?c.apply(a):c);return d+=l(c)+'" rows="3" cols="40" placeholder="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"></textarea>\n              <input type="submit" value="">\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\x3c!-- end .add-comment --\x3e\n    '},
c),data:c}))||0===d)b+=d;return b+"\n\n  </div>\x3c!-- end .toggle-block a-toggle-up --\x3e\n</div>\x3c!-- end .bp-comments --\x3e\n"});
this.Templates.PointAddView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var e=this.escapeExpression,a=h.helperMissing;b='<div class="p-top">\n  <h3>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</h3>\n\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="clearfix p-body">\n  <form action="#" id="pointAddForm" enctype="multipart/form-data" method="POST">\n    <div class="fr w-385">\n      <div class="map-block">\n        <div id="popup-map-place" style="width:385px; height:305px"></div>\n\n        <div class="drop-filter">\n          <input name="address" type="text" placeholder="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043c\u0435\u0441\u0442\u0430..." class="input-map-txt" data-key="address" autocomplete="off" id="add-new-place-address" value="';(f=
h.address)?f=f.call(g,{hash:{},data:c}):(f=g.address,f="function"===typeof f?f.apply(g):f);b+=e(f)+'">\n          <ul class="drop-results"></ul>\n        </div>\n        \x3c!--<input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b..." class="input-map-coords">--\x3e\n\n      </div>\n    </div>\n\n    <div class="fl w-385">\n      <div class="input-line">\n        <div class="required">*</div>\n\n        \x3c!--<div class="drop-filter">--\x3e\n          <input name="name" type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430..." id="add-new-place-name" data-key="name" autocomplete="off" class="search-matches">\n          <ul class="drop-results"></ul>\n        \x3c!--</div>--\x3e\n      </div>\n\n      <div class="input-line">\n        <div class="required">*</div>\n\n        <textarea  name="description" data-key="description" rows="4" cols="33" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430..." class="input-place-desc" id="add-new-place-description" value="';
(f=h.description)?f=f.call(g,{hash:{},data:c}):(f=g.description,f="function"===typeof f?f.apply(g):f);b+=e(f)+'"></textarea>\n      </div>\n\n      <div class="add-place-choose-type-place">\n        <h4>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043c\u0435\u0441\u0442\u0430:</h4>\n\n        <div class="clearfix ctp-labels">\n          ';if((f=h.each.call(g,g.requireLabels,{hash:{},inverse:this.noop,fn:this.program(1,function(b,c){var f,g,x;f='\n            <div class="ctp-item-label">\n              <div class="placemark" data-label-id="';
(g=h.id)?g=g.call(b,{hash:{},data:c}):(g=b.id,g="function"===typeof g?g.apply(b):g);f+=e(g)+'">\n                \x3c!--<span class="m-ico m-dostoprimechatelnost"></span>--\x3e\n                <img src="/media/';(g=h.icons)?g=g.call(b,{hash:{},data:c}):(g=b.icons,g="function"===typeof g?g.apply(b):g);f+=e(g)+'">\n              </div>\n              <span class="ctp-item-title">';x={hash:{},data:c};return f+=e((g=h.addShy,g?g.call(b,b.name,x):a.call(b,"addShy",b.name,x)))+"</span>\n            </div>\n          "},
c),data:c}))||0===f)b+=f;b+='\n        </div>\n\n        <div class="clearfix ctp-more-labels">\n          <div class="input-line">\n            <div class="drop-filter select-labels">\n              <div class="p-labels drop-labels">\n                <div class="clearfix selected-labels">\n                  <div class="label label-add">\n                    \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0435\u0442\u043a\u0443\n                    <span>+</span>\n                  </div>\n\n                  <span class="text-field"><input name="tags" type="text"></span>\n                </div>\n\n                <input type="button" value=" " class="clear-selected">\n\n                <ul class="drop-labels-field"></ul>\n              </div>\n            </div>\n          </div>\n\n          <div class="labels-field"></div>\n        </div>\n      </div>\n    </div>\n\n    <div class="clear"></div>\n\n    <div class="clearfix place-photos">\n      <h4>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043a \u043c\u0435\u0441\u0442\u0443:</h4>\n\n      <div class="item-photo load-photo">\n        <input name="img" type="file">\n      </div>\n\n      <span class="photos-prev"></span>\n      <span class="photos-next"></span>\n\n      <div class="photos-gallery">\n        <ul id="item-photo-list">\n          ';
if((f=h.each.call(g,g.imgs,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,f;c='\n            <li>\n              <div class="item-photo">\n                <img src="';(f=h.thumbnail104x104)?f=f.call(a,{hash:{},data:b}):(f=a.thumbnail104x104,f="function"===typeof f?f.apply(a):f);return c+=e(f)+'" alt="" width="104" height="104">\n                <button class="remove-photo"></button>\n\n                <i class="ico-main-photo"></i>\n                <div class="txt-tooltip">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u044b\u043c</div>\n              </div>\n            </li>\n          '},
c),data:c}))||0===f)b+=f;return b+'\n        </ul>\n\n        <div class="item-photo photo-loading" style="display:none;">\n          <div class="load-status">\n            <div class="progress-loading">\n              <div style="width: 0%;" class="value"></div>\n            </div>\n            <span class="progress-count">0%</span>\n          </div>\n        </div>\n\n      </div>\n    </div>\x3c!-- end .place-photos --\x3e\n\n    <footer class="p-footer">\n      <div class="input-line submit-line">\n          <input type="submit" value="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e" class="fr a-btn" id="a-add-point">\n\n        <label class="fr custom-checkbox checked">\n          <input type="checkbox" checked>\n          \u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0437\u044c\u044f\u043c\n        </label>\n\n        <small class="required-desc">\u041f\u043e\u043b\u044f \u0441\u043e \u0437\u043d\u0430\u0447\u043a\u043e\u043c * \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</small>\n      </div>\n    </footer>\n  </form>\n</div>\n'});
this.Templates.PointDetailView=Handlebars.template(function(b,g,h,f,c){function e(a,b){return'\n                        <button type="button" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e" class="remove-photo"></button>\n                      '}function a(a,b){return'\n                        <button type="button" title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0444\u043e\u0442\u043e" class="complaint-photo"></button>\n                      '}
function d(a,b){var d,c;d={hash:{},data:b};return d="\n              <p>"+(u((c=h.safe,c?c.call(a,a.review,d):E.call(a,"safe",a.review,d)))+"</p>\n              ")}function l(a,b){return'\n              \x3c!--<a data-toggle="tooltip" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c&nbsp;\u043e\u0442\u0437\u044b\u0432" data-placement="title" data-content="\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432?" href="#" class="a-remove-comment"></a>--\x3e\n              '}
function q(a,b){return'\n                <a data-toggle="tooltip" title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f&nbsp;\u043d\u0430&nbsp;\u043e\u0442\u0437\u044b\u0432" data-placement="bottom" href="#" class="a-complaint-comment"></a>\n              '}function v(a,b){var d,c;d='\n        <div class="label label-place">';(c=h.name)?c=c.call(a,{hash:{},data:b}):(c=a.name,c=typeof c===w?c.apply(a):c);return d+=u(c)+"</div>\n        "}function x(a,b){return'\n  <a href="#" class="a-btn a-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n  '}
function k(a,b){return"marked"}function m(a,b){return'<i class="ico-wifi"></i>'}function r(a,b){return'<i class="ico-disabled"></i>'}function n(a,b){return'<i class="ico-p"></i>'}function t(a,b){return'<i class="ico-wc"></i>'}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var p,w="function",u=this.escapeExpression,z=this,E=h.helperMissing;b='<div class="clearfix p-body">\n<header>\n  \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n\n  \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n\n  <h2><a href="#" class="a-place-name">';
(f=h.name)?f=f.call(g,{hash:{},data:c}):(f=g.name,f=typeof f===w?f.apply(g):f);b+=u(f)+'</a></h2>\n  <small>\u0423\u0432\u0438\u0434\u0435\u043b</small>\n  <a href="#">'+u((f=(f=g.author,null==f||!1===f?f:f.first_name),typeof f===w?f.apply(g):f))+" "+u((f=(f=g.author,null==f||!1===f?f:f.last_name),typeof f===w?f.apply(g):f))+'</a>\n  <div class="addr">';(p=h.address)?p=p.call(g,{hash:{},data:c}):(p=g.address,p=typeof p===w?p.apply(g):p);b+=u(p)+'</div>\n\n  <div class="p-place-desc">\n    ';(p=h.headDescription)?
p=p.call(g,{hash:{},data:c}):(p=g.headDescription,p=typeof p===w?p.apply(g):p);b+=u(p);if((p=h["if"].call(g,g.tailDescription,{hash:{},inverse:z.noop,fn:z.program(1,function(a,b){var d,c;d='<span class="hellip">&hellip;</span><span class="hidden more-desc">';(c=h.tailDescription)?c=c.call(a,{hash:{},data:b}):(c=a.tailDescription,c=typeof c===w?c.apply(a):c);return d+=u(c)+'<br></span><a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>'},c),data:c}))||0===p)b+=
p;b+='\n  </div>\n\n  <div class="stats">\n    <span>\n      <span class="ico-want-small"></span>\n      ';(p=h.beens_count)?p=p.call(g,{hash:{},data:c}):(p=g.beens_count,p=typeof p===w?p.apply(g):p);b+=u(p)+'\n    </span>\n\n    <span>\n      <span class="ico-like-small"></span>\n      ';(p=h.likes_count)?p=p.call(g,{hash:{},data:c}):(p=g.likes_count,p=typeof p===w?p.apply(g):p);b+=u(p)+'\n    </span>\n\n    <span>\n      <span class="ico-star-small"></span>\n      '+u((f=(f=g.sets,null==f||!1===
f?f:f.length),typeof f===w?f.apply(g):f))+'\n    </span>\n\n    <span>\n      <span class="ico-vote-small"></span>\n      ';(p=h.reviewusersplus)?p=p.call(g,{hash:{},data:c}):(p=g.reviewusersplus,p=typeof p===w?p.apply(g):p);b+=u(p)+"/";(p=h.reviewusersminus)?p=p.call(g,{hash:{},data:c}):(p=g.reviewusersminus,p=typeof p===w?p.apply(g):p);b+=u(p)+'\n    </span>\n  </div>\n</header>\n\n<div class="wide-box">\n  <ul class="p-tabs">\n    <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n    <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n    <li><a href="#tab-reviews" data-toggle="tab">\u041e\u0442\u0437\u044b\u0432\u044b</a></li>\n    \x3c!--\n    <li><a href="#tab-desc" data-toggle="tab">\u041e \u043c\u0435\u0441\u0442\u0435</a></li>\n    <li><a href="#tab-events" data-toggle="tab">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a></li>\n    --\x3e\n\n    <li><div class="shadow"></div></li>\n  </ul>\n\n  <div class="tabs-content">\n    <div id="tab-photo" class="tab-pane active">\n      <ul class="tabs-inside">\x3c!-- tp- tab photo --\x3e\n        <li class="active"><a href="#tp-tab-pop" data-toggle="tab">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435</a></li>\n        <li><a href="#tp-tab-my" data-toggle="tab">\u043d\u043e\u0432\u044b\u0435</a></li>\n        <li><a href="#tp-tab-new" data-toggle="tab">\u043c\u043e\u0438</a></li>\n      </ul>\n\n      <div class="tabs-content">\n        <div class="toggle-block">\n          <div class="clearfix p-gallery">\n            <div class="clearfix place-photos">\n              <div class="photos-gallery">\n                <ul>\n                  ';
if((p=h.each.call(g,g.imgs,{hash:{},inverse:z.noop,fn:z.programWithDepth(3,function(b,d,c){var f,g,l;f='\n                  <li>\n                    <div class="item-photo selected" data-photo-id="';(g=h.id)?g=g.call(b,{hash:{},data:d}):(g=b.id,g=typeof g===w?g.apply(b):g);f+=u(g)+'">\n                      <a href="/point/'+u((g=c.id,typeof g===w?g.apply(b):g))+"/photo/";(l=h.id)?l=l.call(b,{hash:{},data:d}):(l=b.id,l=typeof l===w?l.apply(b):l);f+=u(l)+'">\n                        <img src="';(l=
h.thumbnail104x104)?l=l.call(b,{hash:{},data:d}):(l=b.thumbnail104x104,l=typeof l===w?l.apply(b):l);f+=u(l)+'" alt="" width="104" height="104">\n                      </a>\n\n                      ';d={hash:{},inverse:z.program(6,a,d),fn:z.program(4,e,d),data:d};if((l=(g=h.ifEquals,g?g.call(b,(g=b.author,null==g||!1===g?g:g.id),(g=c.user,null==g||!1===g?g:g.id),d):E.call(b,"ifEquals",(g=b.author,null==g||!1===g?g:g.id),(g=c.user,null==g||!1===g?g:g.id),d)))||0===l)f+=l;return f+"\n                    </div>\n                  </li>\n                  "},
c,g),data:c}))||0===p)b+=p;b+='\n                </ul>\n              </div>\n              <div class="item-photo load-photo">\n                <form id="addPhotoForm" action="" method="POST" enctype="multipart/form-data">\n                  <input name="img" type="file">\n                </form>\n              </div>\n\n              \x3c!--\n              <div class="item-photo load-photo">\n                <input type="file">\n              </div>\n              --\x3e\n\n              <span class="photos-next"></span>\n              <span class="photos-prev"></span>\n            </div>\n\n            <div id="big-photo"></div>\n          </div>\n        </div>\n      </div>\n    </div>\x3c!-- end #tab-photo --\x3e\n\n    <div id="tab-map" class="tab-pane">\n      <div class="map">\n        <div id="popup-map" style="width:560px; height:510px"></div>\n\n        <div class="m-ico-group">\n          <a href="#">\n            <span class="m-ico m-hotel"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-cafe"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-restoran"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-turism"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-azs"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-active-rest"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-sto"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-commerc"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-hunting"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-events"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-shop"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-fishing"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-monument"></span>\n          </a>\n          <a href="#">\n            <span class="m-ico m-church"></span>\n          </a>\n        </div>\n\n      </div>\n    </div>\x3c!-- end #tab-map --\x3e\n\n    <div id="tab-reviews" class="tab-pane">\n      <div class="bp-comments bp-comments_review">\n        <div class="toggle-block a-toggle-down">\n\n          <div class="add-comment">\n            <form id="reviewForm" action="#">\n              <div class="ac-block">\n                <img src="/media/'+
u((f=(f=g.user,null==f||!1===f?f:f.avatar),typeof f===w?f.apply(g):f))+'" alt="" width="29" height="30" class="avatar" data-author="'+u((f=(f=g.user,null==f||!1===f?f:f.first_name),typeof f===w?f.apply(g):f))+" "+u((f=(f=g.user,null==f||!1===f?f:f.last_name),typeof f===w?f.apply(g):f))+'">\n\n                <div class="ac-body">\n                  <textarea name="review" placeholder="\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 \u043e\u0442\u0437\u044b\u0432..."></textarea>\n                </div>\n              </div>\n              <input type="submit" class="button button_green" value="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c">\n              <div class="vote">\n                <label class="vote__label">\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e:</label>\n                <div class="vote__raiting js-vote">\n                  <input type="hidden" name="vote-id" value="1"/>\n                </div>\n              </div>\n            </form>\n          </div>\n\n\n          ';
if((p=h.each.call(g,g.reviews,{hash:{},inverse:z.noop,fn:z.programWithDepth(8,function(a,b,c){var e,f,g;e=""+('\n          <div  class="item-comment item-comment_green">\n            <img src="/media/'+u((f=(f=a.author,null==f||!1===f?f:f.avatar),typeof f===w?f.apply(a):f))+'" alt="" width="29" height="30" class="avatar">\n            <div class="comment-body">\n              <div class="comment-author">'+u((f=(f=a.author,null==f||!1===f?f:f.first_name),typeof f===w?f.apply(a):f))+" "+u((f=(f=a.author,
null==f||!1===f?f:f.last_name),typeof f===w?f.apply(a):f))+'</div>\n              <div class="comment-date">\u041e\u0446\u0435\u043d\u0438\u043b(\u0430) \u043c\u0435\u0441\u0442\u043e: ');(g=h.rating)?g=g.call(a,{hash:{},data:b}):(g=a.rating,g=typeof g===w?g.apply(a):g);e+=u(g)+'<span class="ico-vote-small"></span> ';g={hash:{},data:b};e+=u((f=h.dateFormat,f?f.call(a,a.updated,g):E.call(a,"dateFormat",a.updated,g)))+"</div>\n              ";if((g=h["if"].call(a,a.review,{hash:{},inverse:z.noop,fn:z.program(9,
d,b),data:b}))||0===g)e+=g;e+='\n            </div>\n\n            <div class="action">\n              ';g={hash:{},inverse:z.program(13,q,b),fn:z.program(11,l,b),data:b};if((g=(f=h.ifEquals,f?f.call(a,(f=a.author,null==f||!1===f?f:f.id),(f=c.user,null==f||!1===f?f:f.id),g):E.call(a,"ifEquals",(f=a.author,null==f||!1===f?f:f.id),(f=c.user,null==f||!1===f?f:f.id),g)))||0===g)e+=g;return e+"\n            </div>\n          </div>\n          "},c,g),data:c}))||0===p)b+=p;b+='\n\n          <div class="hidden-content"></div>\n          <a href="#" class="a-toggle">\u0432\u0441\u0435 \u043e\u0442\u0437\u044b\u0432\u044b <span>&darr;</span></a>\n\n        </div>\n      </div>\x3c!-- end .bp-comments --\x3e\n    </div>\x3c!-- end #tab-reviews --\x3e\n  </div>\n\n  <div class="tabs-content p-common-content">\n    ';
if((p=h["if"].call(g,g.tags,{hash:{},inverse:z.noop,fn:z.program(15,function(a,b){var d,c;d='\n    <section class="p-block event-labels">\n      <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n      <div class="body">\n        ';if((c=h.each.call(a,a.tags,{hash:{},inverse:z.noop,fn:z.program(16,v,b),data:b}))||0===c)d+=c;return d+"\n      </div>\n    </section>\n    "},c),data:c}))||0===p)b+=p;b+="\n  </div>\n</div>\n\n</div>\n\n";if((p=h["if"].call(g,(f=g.user,null==f||!1===f?f:f.authorized),
{hash:{},inverse:z.noop,fn:z.program(18,function(a,b){var d,c,e;d='\n<aside id="right-panel">\n  <a href="#" class="a-btn a-add-collection">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n  <a href="/route/add/point/';(c=h.id)?c=c.call(a,{hash:{},data:b}):(c=a.id,c=typeof c===w?c.apply(a):c);d+=u(c)+'" class="a-btn a-add-path nonav">\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n  ';e={hash:{},inverse:z.noop,fn:z.program(19,x,b),data:b};
if((e=(c=h.ifEquals,c?c.call(a,(c=a.author,null==c||!1===c?c:c.id),(c=a.user,null==c||!1===c?c:c.id),e):E.call(a,"ifEquals",(c=a.author,null==c||!1===c?c:c.id),(c=a.user,null==c||!1===c?c:c.id),e)))||0===e)d+=e;d+='\n\n  <div class="basic-icons">\n    <span href="#" class="a-like ';if((e=h["if"].call(a,a.isliked,{hash:{},inverse:z.noop,fn:z.program(21,k,b),data:b}))||0===e)d+=e;d+='" data-placement="bottom" data-original-title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip"></span>\n    <a href="#" class="a-complaint" data-placement="bottom" data-original-title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f&nbsp;\u043d\u0430&nbsp;\u043c\u0435\u0441\u0442\u043e" data-toggle="tooltip"></a>\n  </div>\n\n  <div class="aside-social">\n    <div class="share">\n      <div id="vk_like_point"></div>\n      <br>\n      <div class="fb-like" data-href="http://yasenput.ru/point/';
(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===w?e.apply(a):e);d+=u(e)+'" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>\n    </div>\n  </div>\n\n  <div class="small-icons">\n    ';if((e=h["if"].call(a,a.wifi,{hash:{},inverse:z.noop,fn:z.program(23,m,b),data:b}))||0===e)d+=e;if((e=h["if"].call(a,a.invalid,{hash:{},inverse:z.noop,fn:z.program(25,r,b),data:b}))||0===e)d+=e;if((e=h["if"].call(a,a.parking,{hash:{},inverse:z.noop,
fn:z.program(27,n,b),data:b}))||0===e)d+=e;if((e=h["if"].call(a,a.wc,{hash:{},inverse:z.noop,fn:z.program(29,t,b),data:b}))||0===e)d+=e;return d+"\n  </div>\n</aside>\n"},c),data:c}))||0===p)b+=p;return b+"\n"});
this.Templates.PointItemView=Handlebars.template(function(b,g,h,f,c){function e(a,b){return"marked"}function a(a,b){return'\n    <a href="#" class="a-edit-new" data-toggle="tooltip" title="\u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c" data-placement="bottom"></a>\n    '}function d(a,b){var d,c;return d=""+('\n        <img src="'+p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail207),
typeof c===t?c.apply(a):c))+'" alt="" width="207" height="'+p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail207_height),typeof c===t?c.apply(a):c))+'">\n      ')}function l(a,b){return'\n        <img src="/static/images/collection_logo.png" alt="" width="65" height="52">\n      '}function q(a,b){var d,c;return d=""+('\n      <li>\n        <a href="#">\n          <img src="'+p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:
c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===t?c.apply(a):c))+'" alt="" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="'+p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[1]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===t?c.apply(a):c))+'" alt="" width="65" height="52">\n        </a>\n      </li>\n\n      <li>\n        <a href="#">\n          <img src="'+
p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[2]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===t?c.apply(a):c))+'" alt="" width="65" height="52">\n        </a>\n      </li>\n    ')}function v(a,b){var d,c,e;d="\n      ";if((e=h["if"].call(a,(c=a.points,null==c||!1===c?c:c[1]),{hash:{},inverse:w.program(15,k,b),fn:w.program(13,x,b),data:b}))||0===e)d+=e;return d+"\n    "}function x(a,b){var d,c;return d=""+('\n        <li>\n          <a href="#">\n            <img src="'+
p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail65x52),typeof c===t?c.apply(a):c))+'" alt="" width="65" height="52">\n          </a>\n        </li>\n\n        <li>\n          <a href="#">\n            <img src="'+p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[1]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail135x52),typeof c===t?c.apply(a):c))+'" alt="" width="135" height="52">\n          </a>\n        </li>\n      ')}
function k(a,b){var d,c,e;d="\n        ";if((e=h["if"].call(a,(c=a.points,null==c||!1===c?c:c[0]),{hash:{},inverse:w.noop,fn:w.program(16,m,b),data:b}))||0===e)d+=e;return d+"\n      "}function m(a,b){var d,c;return d=""+('\n          <li>\n            <a href="#">\n              <img src="'+p((c=(c=(c=(c=(c=a.points,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.imgs),null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail205x52),typeof c===t?c.apply(a):c))+'" alt="" width="205" height="52">\n            </a>\n          </li>\n        ')}
function r(a,b){var c,d;c='\n    <a href="/route/';(d=h.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===t?d.apply(a):d);return c+=p(d)+'/edit" class="a-edit-new nonav" data-toggle="tooltip" title="\u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c" data-placement="bottom"></a>\n    '}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};b="";var n,t="function",p=this.escapeExpression,w=this,u=h.helperMissing;f={hash:{},inverse:w.noop,fn:w.program(1,
function(b,c){var f,g,k;f='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';k={hash:{},inverse:w.noop,fn:w.program(2,e,c),data:c};if((k=(g=h.ifBelong,g?g.call(b,b.user,b.likeusers,k):u.call(b,"ifBelong",b.user,b.likeusers,k)))||0===k)f+=k;f+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n    ';k={hash:{},inverse:w.noop,fn:w.program(4,a,c),data:c};if((k=(g=h.ifEquals,g?g.call(b,(g=b.user,
null==g||!1===g?g:g.id),(g=b.author,null==g||!1===g?g:g.id),k):u.call(b,"ifEquals",(g=b.user,null==g||!1===g?g:g.id),(g=b.author,null==g||!1===g?g:g.id),k)))||0===k)f+=k;f+='\n\n    <div class="yasen-info">\n      <span class="yp-title">';(k=h.ypi)?k=k.call(b,{hash:{},data:c}):(k=b.ypi,k=typeof k===t?k.apply(b):k);f+=p(k)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';(k=h.likes_count)?k=k.call(b,{hash:{},data:c}):(k=b.likes_count,k=typeof k===
t?k.apply(b):k);f+=p(k)+'</small>\n        \x3c!--\n        <i class="yp-marked"></i><small>';(k=h.collections_count)?k=k.call(b,{hash:{},data:c}):(k=b.collections_count,k=typeof k===t?k.apply(b):k);f+=p(k)+'</small>\n        <i class="yp-place"></i><small>';(k=h.beens_count)?k=k.call(b,{hash:{},data:c}):(k=b.beens_count,k=typeof k===t?k.apply(b):k);f+=p(k)+'</small>\n        <i class="yp-star"></i><small>+';(k=h.reviewusersplus)?k=k.call(b,{hash:{},data:c}):(k=b.reviewusersplus,k=typeof k===t?k.apply(b):
k);f+=p(k)+"/-";(k=h.reviewusersminus)?k=k.call(b,{hash:{},data:c}):(k=b.reviewusersminus,k=typeof k===t?k.apply(b):k);f+=p(k)+'</small>\n        --\x3e\n      </div>\n    </div>\n\n    <a href="/set/';(k=h.id)?k=k.call(b,{hash:{},data:c}):(k=b.id,k=typeof k===t?k.apply(b):k);f+=p(k)+'" class="a-photo nonav">\n      ';if((k=h["if"].call(b,(g=(g=(g=b.points,null==g||!1===g?g:g[0]),null==g||!1===g?g:g.imgs),null==g||!1===g?g:g[0]),{hash:{},inverse:w.program(8,l,c),fn:w.program(6,d,c),data:c}))||0===
k)f+=k;f+='\n    </a>\n  </div>\n\n  <ul class="photo-preview a-photo nonav">\n    ';if((k=h["if"].call(b,(g=b.points,null==g||!1===g?g:g[2]),{hash:{},inverse:w.program(12,v,c),fn:w.program(10,q,c),data:c}))||0===k)f+=k;f+='\n  </ul>\n  <div class="body author-point">\n    <img src="/media/'+p((g=(g=b.author,null==g||!1===g?g:g.avatar),typeof g===t?g.apply(b):g))+'" alt="" class="avatar" width="29" height="30">\n\n      <h3>';(k=h.name)?k=k.call(b,{hash:{},data:c}):(k=b.name,k=typeof k===t?k.apply(b):
k);return f+=p(k)+"</h3>\n      <p>\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043b "+p((g=(g=b.author,null==g||!1===g?g:g.first_name),typeof g===t?g.apply(b):g))+" "+p((g=(g=b.author,null==g||!1===g?g:g.last_name),typeof g===t?g.apply(b):g))+"</p>\n  </div>\n"},c),data:c};if((f=(n=h.ifEquals,n?n.call(g,g.type_of_item,"set",f):u.call(g,"ifEquals",g.type_of_item,"set",f)))||0===f)b+=f;b+="\n\n";f={hash:{},inverse:w.noop,fn:w.program(18,function(b,c){var d,
f,g;d='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';g={hash:{},inverse:w.noop,fn:w.program(2,e,c),data:c};if((g=(f=h.ifBelong,f?f.call(b,b.user,b.likeusers,g):u.call(b,"ifBelong",b.user,b.likeusers,g)))||0===g)d+=g;d+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n    <a href="#" class="a-collection" title="\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e" data-toggle="tooltip" data-placement="bottom">\u0412 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e</a>\n    ';
g={hash:{},inverse:w.noop,fn:w.program(4,a,c),data:c};if((g=(f=h.ifEquals,f?f.call(b,(f=b.user,null==f||!1===f?f:f.id),(f=b.author,null==f||!1===f?f:f.id),g):u.call(b,"ifEquals",(f=b.user,null==f||!1===f?f:f.id),(f=b.author,null==f||!1===f?f:f.id),g)))||0===g)d+=g;d+='\n\n    <div class="yasen-info">\n      <span class="yp-title">';(g=h.ypi)?g=g.call(b,{hash:{},data:c}):(g=b.ypi,g=typeof g===t?g.apply(b):g);d+=p(g)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';
(g=h.likes_count)?g=g.call(b,{hash:{},data:c}):(g=b.likes_count,g=typeof g===t?g.apply(b):g);d+=p(g)+'</small>\n        <i class="yp-marked"></i><small>';(g=h.sets_count)?g=g.call(b,{hash:{},data:c}):(g=b.sets_count,g=typeof g===t?g.apply(b):g);d+=p(g)+'</small>\n        <i class="yp-place"></i><small>';(g=h.beens_count)?g=g.call(b,{hash:{},data:c}):(g=b.beens_count,g=typeof g===t?g.apply(b):g);d+=p(g)+'</small>\n        <i class="yp-star"></i><small>+';(g=h.reviewusersplus)?g=g.call(b,{hash:{},data:c}):
(g=b.reviewusersplus,g=typeof g===t?g.apply(b):g);d+=p(g)+"/-";(g=h.reviewusersminus)?g=g.call(b,{hash:{},data:c}):(g=b.reviewusersminus,g=typeof g===t?g.apply(b):g);d+=p(g)+'</small>\n      </div>\n    </div>\n\n    <a href="/point/';(g=h.id)?g=g.call(b,{hash:{},data:c}):(g=b.id,g=typeof g===t?g.apply(b):g);d+=p(g)+'" class="a-photo nonav">\n      <img src="'+p((f=(f=(f=b.imgs,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail207),typeof f===t?f.apply(b):f))+'" alt="" width="207" height="'+p((f=
(f=(f=b.imgs,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.thumbnail207_height),typeof f===t?f.apply(b):f))+'">\n    </a>\n  </div>\n\n  <div class="body">\n      <img src="/media/'+p((f=(f=b.author,null==f||!1===f?f:f.avatar),typeof f===t?f.apply(b):f))+'" alt="" class="avatar" width="29" height="30">\n    <h3>';(g=h.name)?g=g.call(b,{hash:{},data:c}):(g=b.name,g=typeof g===t?g.apply(b):g);d+=p(g)+"</h3>\n    <p>";(g=h.address)?g=g.call(b,{hash:{},data:c}):(g=b.address,g=typeof g===t?g.apply(b):g);
return d+=p(g)+"</p>\n  </div>\n"},c),data:c};if((f=(n=h.ifEquals,n?n.call(g,g.type_of_item,"point",f):u.call(g,"ifEquals",g.type_of_item,"point",f)))||0===f)b+=f;b+="\n\n";f={hash:{},inverse:w.noop,fn:w.program(20,function(a,b){var c,f,g;c='\n  <div class="photo">\n    <a href="#" class="a-like a-like-ok ';g={hash:{},inverse:w.noop,fn:w.program(2,e,b),data:b};if((g=(f=h.ifBelong,f?f.call(a,a.user,a.likeusers,g):u.call(a,"ifBelong",a.user,a.likeusers,g)))||0===g)c+=g;c+='" title="\u043c\u043d\u0435&nbsp;\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f" data-toggle="tooltip" data-placement="bottom">&nbsp;</a>\n    ';
g={hash:{},inverse:w.noop,fn:w.program(21,r,b),data:b};if((g=(f=h.ifEquals,f?f.call(a,(f=a.user,null==f||!1===f?f:f.id),(f=a.author,null==f||!1===f?f:f.id),g):u.call(a,"ifEquals",(f=a.user,null==f||!1===f?f:f.id),(f=a.author,null==f||!1===f?f:f.id),g)))||0===g)c+=g;c+='\n\n    <div class="yasen-info">\n      <span class="yp-title">';(g=h.ypi)?g=g.call(a,{hash:{},data:b}):(g=a.ypi,g=typeof g===t?g.apply(a):g);c+=p(g)+' \u042f\u041f\u0438</span>\n\n      <div class="yp-info">\n        <i class="yp-like"></i><small>';
(g=h.likes_count)?g=g.call(a,{hash:{},data:b}):(g=a.likes_count,g=typeof g===t?g.apply(a):g);c+=p(g)+'</small>\n        <i class="yp-star"></i><small>+';(g=h.reviewusersplus)?g=g.call(a,{hash:{},data:b}):(g=a.reviewusersplus,g=typeof g===t?g.apply(a):g);c+=p(g)+"/-";(g=h.reviewusersminus)?g=g.call(a,{hash:{},data:b}):(g=a.reviewusersminus,g=typeof g===t?g.apply(a):g);c+=p(g)+'</small>\n      </div>\n    </div>\n\n    <a href="/route/';(g=h.id)?g=g.call(a,{hash:{},data:b}):(g=a.id,g=typeof g===t?g.apply(a):
g);c+=p(g)+'" class="a-photo nonav">\n      ';if((g=h["if"].call(a,(f=(f=(f=a.points,null==f||!1===f?f:f[0]),null==f||!1===f?f:f.imgs),null==f||!1===f?f:f[0]),{hash:{},inverse:w.program(8,l,b),fn:w.program(6,d,b),data:b}))||0===g)c+=g;c+='\n    </a>\n  </div>\n\n  <ul class="photo-preview a-photo nonav">\n    ';if((g=h["if"].call(a,(f=a.points,null==f||!1===f?f:f[2]),{hash:{},inverse:w.program(12,v,b),fn:w.program(10,q,b),data:b}))||0===g)c+=g;c+='\n  </ul>\n  <div class="body author-point">\n    <img src="/media/'+
p((f=(f=a.author,null==f||!1===f?f:f.avatar),typeof f===t?f.apply(a):f))+'" alt="" class="avatar" width="29" height="30">\n\n      <h3>';(g=h.name)?g=g.call(a,{hash:{},data:b}):(g=a.name,g=typeof g===t?g.apply(a):g);return c+=p(g)+"</h3>\n      <p>\u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0441\u043e\u0437\u0434\u0430\u043b "+p((f=(f=a.author,null==f||!1===f?f:f.first_name),typeof f===t?f.apply(a):f))+" "+p((f=(f=a.author,null==f||!1===f?f:f.last_name),typeof f===t?f.apply(a):f))+"</p>\n  </div>\n"},
c),data:c};if((f=(n=h.ifEquals,n?n.call(g,g.type_of_item,"route",f):u.call(g,"ifEquals",g.type_of_item,"route",f)))||0===f)b+=f;return b+"\n"});this.Templates.PointListView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return""});
this.Templates.PointPanelView=Handlebars.template(function(b,g,h,f,c){function e(a,b){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var a,d;f=h.helperMissing;b='<a href="/popular" data-target="tab-popular" class="';d={hash:{},inverse:this.noop,fn:this.program(1,e,c),data:c};if((d=(a=h.ifEquals,a?a.call(g,g.active,"ypi",d):f.call(g,"ifEquals",g.active,"ypi",d)))||0===d)b+=d;b+=' nonav menu-item">\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435</a>\n<a href="/new" data-target="tab-new" class="';
d={hash:{},inverse:this.noop,fn:this.program(1,e,c),data:c};if((d=(a=h.ifEquals,a?a.call(g,g.active,"updated",d):f.call(g,"ifEquals",g.active,"updated",d)))||0===d)b+=d;return b+' nonav menu-item">\u043d\u043e\u0432\u043e\u0435</a>\n'});this.Templates.PointsMainLayout=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];return'<header id="point-panel" class="clearfix top-panel"></header>\n\n<div id="point-content" class="content tabs-content">\n  <section id="tab-popular"></section>\n  <section id="tab-new"></section>\n</div>\n\n<div class="GridFooter">\n  <div class="gridLoadingWrapper">\n    <hr>\n    <div class="gridLoading">\n      <span class="gridFooterLogoIcon"></span>\n      <span class="gridFooterSpinner"></span>\n    </div>\n  </div>\n</div>\n\n'});
this.Templates.ProgressImage=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};b="";var e=this.escapeExpression;if((g=h.each.call(g,g.imgs,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,f;c='\n  <li>\n    <div class="item-photo">\n      <img src="';(f=h.thumbnail104x104)?f=f.call(a,{hash:{},data:b}):(f=a.thumbnail104x104,f="function"===typeof f?f.apply(a):f);return c+=e(f)+'" alt="" width="104" height="104">\n      <button class="remove-photo"></button>\n\n      <i class="ico-main-photo"></i>\n      <div class="txt-tooltip">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0430\u0432\u043d\u044b\u043c</div>\n    </div>\n  </li>\n'},
c),data:c}))||0===g)b+=g;return b+"\n"});
this.Templates.SetDetailView=Handlebars.template(function(b,g,h,f,c){function e(a,b){return'\n      \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n    '}function a(a,b){return'\n                          <button type="button" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e" class="remove-photo"></button>\n                        '}function d(a,b){return'\n                          <button type="button" title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0444\u043e\u0442\u043e" class="complaint-photo"></button>\n                        '}function l(a,
b){var c,d;c='\n              <div class="label">';(d=h.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===m?d.apply(a):d);return c+=r(d)+"</div>\n            "}function q(a,b){return"marked"}function v(a,b){return'<a href="#" class="a-btn stp-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'}function x(a,b){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var k,m="function",r=this.escapeExpression,n=this,t=h.helperMissing;
b='<div class="clearfix p-body">\n  <header>\n    ';if((f=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:n.noop,fn:n.program(1,e,c),data:c}))||0===f)b+=f;b+='\n      \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n      <h2>'+r((k=(k=g.activePoint,null==k||!1===k?k:k.name),typeof k===m?k.apply(g):k))+'</h2>\n      <small>\u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0441\u044f</small> <a href="#">'+r((k=(k=(k=g.activePoint,null==k||
!1===k?k:k.author),null==k||!1===k?k:k.first_name),typeof k===m?k.apply(g):k))+" "+r((k=(k=(k=g.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.last_name),typeof k===m?k.apply(g):k))+'</a>\n\n      <div class="addr">'+r((k=(k=g.activePoint,null==k||!1===k?k:k.address),typeof k===m?k.apply(g):k))+'</div>\n\n      <div class="stats">\n        <span>\n          <span class="ico-want-small"></span>\n          '+r((k=(k=g.activePoint,null==k||!1===k?k:k.beens_count),typeof k===m?k.apply(g):
k))+'\n        </span>\n\n        <span>\n          <span class="ico-like-small"></span>\n          '+r((k=(k=(k=g.activePoint,null==k||!1===k?k:k.likesusers),null==k||!1===k?k:k.length),typeof k===m?k.apply(g):k))+'\n        </span>\n\n        <span>\n          <span class="ico-star-small"></span>\n          '+r((k=(k=g.activePoint,null==k||!1===k?k:k.sets_count),typeof k===m?k.apply(g):k))+'\n        </span>\n\n        <span>\n          <span class="ico-vote-small"></span>\n          '+r((k=(k=
g.activePoint,null==k||!1===k?k:k.reviewusersplus),typeof k===m?k.apply(g):k))+"/"+r((k=(k=g.activePoint,null==k||!1===k?k:k.reviewusersminus),typeof k===m?k.apply(g):k))+'\n        </span>\n      </div>\n  </header>\n\n  <div class="wide-box">\n    <ul class="p-tabs">\n      <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n      <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n      <li><a href="#tab-desc" data-toggle="tab">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435</a></li>\n\n      <li><div class="shadow"></div></li>\n    </ul>\n\n    <div class="tabs-content">\n\n      <div id="tab-photo" class="tab-pane active">\n        <div class="tabs-content">\n          <div class="toggle-block">\n            <div class="clearfix p-gallery">\n              <div class="clearfix place-photos">\n                <div class="photos-gallery">\n                  <ul>\n                    ';
if((f=h.each.call(g,(k=g.activePoint,null==k||!1===k?k:k.imgs),{hash:{},inverse:n.noop,fn:n.programWithDepth(3,function(b,c,e){var f,g,l;f=""+('\n                    <li>\n                      <div class="item-photo" data-set-id="'+r((g=e.id,typeof g===m?g.apply(b):g))+'" data-photo-id="');(l=h.id)?l=l.call(b,{hash:{},data:c}):(l=b.id,l=typeof l===m?l.apply(b):l);f+=r(l)+'">\n                        <a href="/set/'+r((g=e.id,typeof g===m?g.apply(b):g))+"/point/"+r((g=(g=e.activePoint,null==g||!1===
g?g:g.id),typeof g===m?g.apply(b):g))+"/photo/";(l=h.id)?l=l.call(b,{hash:{},data:c}):(l=b.id,l=typeof l===m?l.apply(b):l);f+=r(l)+'">\n                          <img src="';(l=h.thumbnail104x104)?l=l.call(b,{hash:{},data:c}):(l=b.thumbnail104x104,l=typeof l===m?l.apply(b):l);f+=r(l)+'" alt="" width="104" height="104">\n                        </a>\n                        ';c={hash:{},inverse:n.program(6,d,c),fn:n.program(4,a,c),data:c};if((l=(g=h.ifEquals,g?g.call(b,(g=b.author,null==g||!1===g?
g:g.id),(g=e.user,null==g||!1===g?g:g.id),c):t.call(b,"ifEquals",(g=b.author,null==g||!1===g?g:g.id),(g=e.user,null==g||!1===g?g:g.id),c)))||0===l)f+=l;return f+"\n                      </div>\n                    </li>\n                    "},c,g),data:c}))||0===f)b+=f;b+='\n                  </ul>\n                </div>\n\n                <div class="item-photo load-photo">\n                  <form id="addPhotoForm" action="" method="POST" enctype="multipart/form-data">\n                    <input name="img" type="file">\n                  </form>\n                </div>\n\n                <span class="photos-next"></span>\n                <span class="photos-prev"></span>\n              </div>\n\n              <div id="big-photo"></div>\x3c!-- end #big-photo --\x3e\n\n            </div>\n          </div>\n        </div>\n      </div>\x3c!-- end #tab-photo --\x3e\n\n      <div id="tab-map" class="tab-pane">\n        <div class="map">\n            <div id="popup-map" style="width:560px; height:510px"></div>\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043d\u0430\u0447\u0430\u043b\u043e) --\x3e\n\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043a\u043e\u043d\u0435\u0446) --\x3e\n            <div class="m-ico-group">\n                <a href="#">\n                    <span class="m-ico m-hotel"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-cafe"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-restoran"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-turism"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-azs"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-active-rest"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-sto"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-commerc"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-hunting"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-events"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-shop"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-fishing"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-monument"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-church"></span>\n                </a>\n            </div>\n\n        </div>\n\n        <div id="near-objects">\n          <h4 class="title-block">\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u043d\u0438\u0446\u044b</h4>\n\n          <ol>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043e\u0434\u0438\u043d</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0434\u0432\u0430</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0438</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0447\u0435\u0442\u044b\u0440\u0435</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043f\u044f\u0442\u044c</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n          </ol>\n        </div>\n\n      </div>\x3c!-- end #tab-map --\x3e\n\n      <div id="tab-desc" class="tab-pane">\n        <div class="toggle-block">\n          <ul class="ul-desc"></ul>\n          <div class="hidden-content">\n            <ul class="ul-desc"></ul>\n          </div>\n\n          <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f <span>&darr;</span></a>\n        </div>\n\n        <div class="add-comment">\n          <form action="#">\n            <div class="ac-block">\n              <img src="/media/'+
r((k=(k=g.user,null==k||!1===k?k:k.avatar),typeof k===m?k.apply(g):k))+'" alt="" width="29" height="30" class="avatar">\n\n              <div class="ac-body">\n                <div class="toggle-area">\n                  <textarea rows="3" cols="40"></textarea>\n                  <input type="submit" value=" ">\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\x3c!-- end #tab-desc --\x3e\n    </div>\x3c!-- .tabs.content --\x3e\n\n    ';
if((f=h["if"].call(g,(k=g.activePoint,null==k||!1===k?k:k.tags),{hash:{},inverse:n.noop,fn:n.program(8,function(a,b){var c,d,e;c='\n    <div class="tabs-content p-common-content">\n      <section class="p-block event-labels">\n          <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n          <div class="body">\n            ';if((e=h.each.call(a,(d=a.activePoint,null==d||!1===d?d:d.tags),{hash:{},inverse:n.noop,fn:n.program(9,l,b),data:b}))||0===e)c+=e;return c+"\n          </div>\n      </section>\n    </div>\x3c!-- end .p-common-content --\x3e\n    "},
c),data:c}))||0===f)b+=f;b+="\n  </div>\x3c!-- end .wide-box --\x3e\n\n  <footer>\n    ";if((f=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:n.noop,fn:n.program(1,e,c),data:c}))||0===f)b+=f;b+='\n  </footer>\n</div>\x3c!-- end .cleatfix-body --\x3e\n\n<header id="c-top-panel">\n  <div class="inner-wrap">\n    <aside class="stp-buttons">\n    ';if((f=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:n.noop,fn:n.program(11,function(a,b){var c,d,e;
c='\n      <div class="c-buttons">\n        <a href="#" class="a-btn stp-like ';e={hash:{},inverse:n.noop,fn:n.program(12,q,b),data:b};if((e=(d=h.ifBelong,d?d.call(a,a.user,a.likeusers,e):t.call(a,"ifBelong",a.user,a.likeusers,e)))||0===e)c+=e;c+='">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</a>\n        ';e={hash:{},inverse:n.noop,fn:n.program(14,v,b),data:b};if((e=(d=h.ifEquals,d?d.call(a,(d=a.author,null==d||!1===d?d:d.id),(d=a.user,null==d||!1===d?d:d.id),e):t.call(a,"ifEquals",(d=a.author,
null==d||!1===d?d:d.id),(d=a.user,null==d||!1===d?d:d.id),e)))||0===e)c+=e;return c+"\n      </div>\n    "},c),data:c}))||0===f)b+=f;b+='\n      <div class="c-edit-buttons">\n        \x3c!--<a href="#" class="a-btn stp-remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>--\x3e\n        <a href="#" class="a-btn stp-save">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</a>\n      </div>\n    </aside>\n\n    <div class="ctp-head">\n      <h1>';(f=h.name)?f=f.call(g,{hash:{},data:c}):(f=g.name,
f=typeof f===m?f.apply(g):f);b+=r(f)+"</h1>\n      ";f={hash:{},inverse:n.program(18,function(a,b){var c,d;return c=""+('\n        \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\n        <a href="#">'+r((d=(d=a.author,null==d||!1===d?d:d.first_name),typeof d===m?d.apply(a):d))+" "+r((d=(d=a.author,null==d||!1===d?d:d.last_name),typeof d===m?d.apply(a):d))+"</a>\n      ")},c),fn:n.program(16,function(a,b){return"\n      "},c),data:c};if((f=(k=h.ifEquals,
k?k.call(g,g.author,"new",f):t.call(g,"ifEquals",g.author,"new",f)))||0===f)b+=f;b+='\n    </div>\n\n    <div class="ctp-content">\n      ';(f=h.headDescription)?f=f.call(g,{hash:{},data:c}):(f=g.headDescription,f=typeof f===m?f.apply(g):f);b+=r(f)+"\n      ";if((f=h["if"].call(g,g.tailDescription,{hash:{},inverse:n.noop,fn:n.program(20,function(a,b){var c,d;c='\n        <span class="hellip">\u2026</span>\n        <span class="hidden more-desc">';(d=h.tailDescription)?d=d.call(a,{hash:{},data:b}):
(d=a.tailDescription,d=typeof d===m?d.apply(a):d);return c+=r(d)+'</span>\n        <a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>\n      '},c),data:c}))||0===f)b+=f;b+='\n    </div>\n\n    <div class="c-edit-inputs">\n      <input type="text" value="';(f=h.name)?f=f.call(g,{hash:{},data:c}):(f=g.name,f=typeof f===m?f.apply(g):f);b+=r(f)+'">\n      <input type="text" value="';(f=h.description)?f=f.call(g,{hash:{},data:c}):(f=g.description,f=typeof f===
m?f.apply(g):f);b+=r(f)+'">\n    </div>\n  </div>\n</header>\n\n<aside id="c-left-panel">\n  <div class="aside-content">\n    <div class="aside-viewport">\n      <ol id="ol-collection">\n        ';if((f=h.each.call(g,g.points,{hash:{},inverse:n.noop,fn:n.programWithDepth(22,function(a,b,c){var d,e,f;d='\n        <li class="choose_place ';f={hash:{},inverse:n.noop,fn:n.program(23,x,b),data:b};if((f=(e=h.ifEquals,e?e.call(a,a.id,(e=c.activePoint,null==e||!1===e?e:e.id),f):t.call(a,"ifEquals",a.id,(e=
c.activePoint,null==e||!1===e?e:e.id),f)))||0===f)d+=f;d+='" data-placemark-id="placemark-1">\n          <a href="/set/'+r((e=c.id,typeof e===m?e.apply(a):e))+"/point/";(f=h.id)?f=f.call(a,{hash:{},data:b}):(f=a.id,f=typeof f===m?f.apply(a):f);d+=r(f)+'" class="choose_place_a" data-id="';(f=h.id)?f=f.call(a,{hash:{},data:b}):(f=a.id,f=typeof f===m?f.apply(a):f);d+=r(f)+'">';(f=h.name)?f=f.call(a,{hash:{},data:b}):(f=a.name,f=typeof f===m?f.apply(a):f);return d+=r(f)+'</a>\n            <button type="button" class="remove-collection"></button>\n          </li>\n        '},
c,g),data:c}))||0===f)b+=f;return b+'\n      </ol>\n    </div>\n\n    <a href="#" class="clp-up"></a> \x3c!-- clp- collection left panel  --\x3e\n    <a href="#" class="clp-down"></a>\n  </div>\n</aside>\n'});
this.Templates.RouteDetailView=Handlebars.template(function(b,g,h,f,c){function e(a,b){return'\n      \x3c!--<a href="#" class="fr a-btn a-subscribe">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</a>--\x3e\n    '}function a(a,b){return'\n                          <button type="button" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e" class="remove-photo"></button>\n                        '}function d(a,b){return'\n                          <button type="button" title="\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0444\u043e\u0442\u043e" class="complaint-photo"></button>\n                        '}
function l(a,b){var d,c;d='\n              <div class="label">';(c=h.name)?c=c.call(a,{hash:{},data:b}):(c=a.name,c=typeof c===m?c.apply(a):c);return d+=r(c)+"</div>\n            "}function q(a,b){return"marked"}function v(a,b){var c,d;c='<a href="/route/';(d=h.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===m?d.apply(a):d);return c+=r(d)+'/edit" class="nonav a-btn stp-edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'}function x(a,b){return"active"}this.compilerInfo=
[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var k,m="function",r=this.escapeExpression,n=this,t=h.helperMissing;b='<div class="clearfix p-body">\n  <header>\n    ';if((f=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:n.noop,fn:n.program(1,e,c),data:c}))||0===f)b+=f;b+='\n      \x3c!--<div class="event-date">1\u20155 \u044f\u043d\u0432\u0430\u0440\u044f</div>--\x3e\n      <h2>'+r((k=(k=g.activePoint,null==k||!1===k?k:k.name),typeof k===m?k.apply(g):k))+'</h2>\n      <small>\u043f\u043e\u0434\u0435\u043b\u0438\u043b\u0441\u044f</small> <a href="#">'+
r((k=(k=(k=g.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.first_name),typeof k===m?k.apply(g):k))+" "+r((k=(k=(k=g.activePoint,null==k||!1===k?k:k.author),null==k||!1===k?k:k.last_name),typeof k===m?k.apply(g):k))+'</a>\n\n      <div class="addr">'+r((k=(k=g.activePoint,null==k||!1===k?k:k.address),typeof k===m?k.apply(g):k))+'</div>\n\n      <div class="stats">\n        <span>\n          <span class="ico-want-small"></span>\n          '+r((k=(k=g.activePoint,null==k||!1===k?k:k.beens_count),
typeof k===m?k.apply(g):k))+'\n        </span>\n\n        <span>\n          <span class="ico-like-small"></span>\n          '+r((k=(k=g.activePoint,null==k||!1===k?k:k.likes_count),typeof k===m?k.apply(g):k))+'\n        </span>\n\n        <span>\n          <span class="ico-star-small"></span>\n          '+r((k=(k=g.activePoint,null==k||!1===k?k:k.sets_count),typeof k===m?k.apply(g):k))+'\n        </span>\n\n        <span>\n          <span class="ico-vote-small"></span>\n          '+r((k=(k=g.activePoint,
null==k||!1===k?k:k.reviewusersplus),typeof k===m?k.apply(g):k))+"/"+r((k=(k=g.activePoint,null==k||!1===k?k:k.reviewusersminus),typeof k===m?k.apply(g):k))+'\n        </span>\n      </div>\n  </header>\n\n  <div class="wide-box">\n    <ul class="p-tabs">\n      <li class="active"><a href="#tab-photo" data-toggle="tab">\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f</a></li>\n      <li><a href="#tab-map" data-toggle="tab">\u041d\u0430 \u043a\u0430\u0440\u0442\u0435</a></li>\n      <li><a href="#tab-desc" data-toggle="tab">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435</a></li>\n\n      <li><div class="shadow"></div></li>\n    </ul>\n\n    <div class="tabs-content">\n\n      <div id="tab-photo" class="tab-pane active">\n        <div class="tabs-content">\n          <div class="toggle-block">\n            <div class="clearfix p-gallery">\n              <div class="clearfix place-photos">\n                <div class="photos-gallery">\n                  <ul>\n                    ';
if((f=h.each.call(g,(k=g.activePoint,null==k||!1===k?k:k.imgs),{hash:{},inverse:n.noop,fn:n.programWithDepth(3,function(b,c,e){var f,g,l;f=""+('\n                    <li>\n                      <div class="item-photo" data-route-id="'+r((g=e.id,typeof g===m?g.apply(b):g))+'" data-photo-id="');(l=h.id)?l=l.call(b,{hash:{},data:c}):(l=b.id,l=typeof l===m?l.apply(b):l);f+=r(l)+'">\n                        <a href="/route/'+r((g=e.id,typeof g===m?g.apply(b):g))+"/point/"+r((g=(g=e.activePoint,null==g||
!1===g?g:g.id),typeof g===m?g.apply(b):g))+"/photo/";(l=h.id)?l=l.call(b,{hash:{},data:c}):(l=b.id,l=typeof l===m?l.apply(b):l);f+=r(l)+'">\n                          <img src="';(l=h.thumbnail104x104)?l=l.call(b,{hash:{},data:c}):(l=b.thumbnail104x104,l=typeof l===m?l.apply(b):l);f+=r(l)+'" alt="" width="104" height="104">\n                        </a>\n                        ';c={hash:{},inverse:n.program(6,d,c),fn:n.program(4,a,c),data:c};if((l=(g=h.ifEquals,g?g.call(b,(g=b.author,null==g||!1===
g?g:g.id),(g=e.user,null==g||!1===g?g:g.id),c):t.call(b,"ifEquals",(g=b.author,null==g||!1===g?g:g.id),(g=e.user,null==g||!1===g?g:g.id),c)))||0===l)f+=l;return f+"\n                      </div>\n                    </li>\n                    "},c,g),data:c}))||0===f)b+=f;b+='\n                  </ul>\n                </div>\n\n                <div class="item-photo load-photo">\n                  <form id="addPhotoForm" action="" method="POST" enctype="multipart/form-data">\n                    <input name="img" type="file">\n                  </form>\n                </div>\n\n                <span class="photos-next"></span>\n                <span class="photos-prev"></span>\n              </div>\n\n              <div id="big-photo"></div>\x3c!-- end #big-photo --\x3e\n\n            </div>\n          </div>\n        </div>\n      </div>\x3c!-- end #tab-photo --\x3e\n\n      <div id="tab-map" class="tab-pane">\n        <div class="map">\n            <div id="popup-map" style="width:560px; height:510px"></div>\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043d\u0430\u0447\u0430\u043b\u043e) --\x3e\n\n            \x3c!-- \u042d\u0442\u043e\u0442 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b, \u0433\u0434\u0435 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443 (\u043a\u043e\u043d\u0435\u0446) --\x3e\n            <div class="m-ico-group">\n                <a href="#">\n                    <span class="m-ico m-hotel"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-cafe"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-restoran"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-turism"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-azs"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-active-rest"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-sto"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-commerc"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-hunting"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-events"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-shop"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-fishing"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-monument"></span>\n                </a>\n\n                <a href="#">\n                    <span class="m-ico m-church"></span>\n                </a>\n            </div>\n\n        </div>\n\n        <div id="near-objects">\n          <h4 class="title-block">\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u043d\u0438\u0446\u044b</h4>\n\n          <ol>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043e\u0434\u0438\u043d</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0434\u0432\u0430</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0438</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0447\u0435\u0442\u044b\u0440\u0435</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n            <li>\n              <h5>\u041c\u0435\u0441\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u043f\u044f\u0442\u044c</h5>\n              <p>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f</p>\n            </li>\n          </ol>\n        </div>\n\n      </div>\x3c!-- end #tab-map --\x3e\n\n      <div id="tab-desc" class="tab-pane">\n        <div class="toggle-block">\n          <ul class="ul-desc"></ul>\n          <div class="hidden-content">\n            <ul class="ul-desc"></ul>\n          </div>\n\n          <a href="#" class="a-toggle">\u0415\u0449\u0451 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f <span>&darr;</span></a>\n        </div>\n\n        <div class="add-comment">\n          <form action="#">\n            <div class="ac-block">\n              <img src="/media/'+
r((k=(k=g.user,null==k||!1===k?k:k.avatar),typeof k===m?k.apply(g):k))+'" alt="" width="29" height="30" class="avatar">\n\n              <div class="ac-body">\n                <div class="toggle-area">\n                  <textarea rows="3" cols="40"></textarea>\n                  <input type="submit" value=" ">\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\x3c!-- end #tab-desc --\x3e\n    </div>\x3c!-- .tabs.content --\x3e\n\n    ';
if((f=h["if"].call(g,(k=g.activePoint,null==k||!1===k?k:k.tags),{hash:{},inverse:n.noop,fn:n.program(8,function(a,b){var c,d,e;c='\n    <div class="tabs-content p-common-content">\n      <section class="p-block event-labels">\n          <h4 class="title-block">\u041c\u0435\u0442\u043a\u0438</h4>\n\n          <div class="body">\n            ';if((e=h.each.call(a,(d=a.activePoint,null==d||!1===d?d:d.tags),{hash:{},inverse:n.noop,fn:n.program(9,l,b),data:b}))||0===e)c+=e;return c+"\n          </div>\n      </section>\n    </div>\x3c!-- end .p-common-content --\x3e\n    "},
c),data:c}))||0===f)b+=f;b+="\n  </div>\x3c!-- end .wide-box --\x3e\n\n  <footer>\n    ";if((f=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:n.noop,fn:n.program(1,e,c),data:c}))||0===f)b+=f;b+='\n  </footer>\n</div>\x3c!-- end .cleatfix-body --\x3e\n\n<header id="c-top-panel">\n  <div class="inner-wrap">\n    <aside class="stp-buttons">\n    ';if((f=h["if"].call(g,(k=g.user,null==k||!1===k?k:k.authorized),{hash:{},inverse:n.noop,fn:n.program(11,function(a,b){var c,d,e;
c='\n      <div class="c-buttons">\n        <a href="#" class="a-btn stp-like ';e={hash:{},inverse:n.noop,fn:n.program(12,q,b),data:b};if((e=(d=h.ifBelong,d?d.call(a,a.user,a.likeusers,e):t.call(a,"ifBelong",a.user,a.likeusers,e)))||0===e)c+=e;c+='">\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f</a>\n        ';e={hash:{},inverse:n.noop,fn:n.program(14,v,b),data:b};if((e=(d=h.ifEquals,d?d.call(a,(d=a.author,null==d||!1===d?d:d.id),(d=a.user,null==d||!1===d?d:d.id),e):t.call(a,"ifEquals",(d=a.author,
null==d||!1===d?d:d.id),(d=a.user,null==d||!1===d?d:d.id),e)))||0===e)c+=e;return c+"\n      </div>\n    "},c),data:c}))||0===f)b+=f;b+='\n      <div class="c-edit-buttons">\n        \x3c!--<a href="#" class="a-btn stp-remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>--\x3e\n        <a href="#" class="a-btn stp-save">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</a>\n      </div>\n    </aside>\n\n    <div class="ctp-head">\n      <h1>';(f=h.name)?f=f.call(g,{hash:{},data:c}):(f=g.name,
f=typeof f===m?f.apply(g):f);b+=r(f)+"</h1>\n      ";f={hash:{},inverse:n.program(18,function(a,b){var d,c;return d=""+('\n        \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\n        <a href="#">'+r((c=(c=a.author,null==c||!1===c?c:c.first_name),typeof c===m?c.apply(a):c))+" "+r((c=(c=a.author,null==c||!1===c?c:c.last_name),typeof c===m?c.apply(a):c))+"</a>\n      ")},c),fn:n.program(16,function(a,b){return"\n      "},c),data:c};if((f=(k=h.ifEquals,k?k.call(g,
g.author,"new",f):t.call(g,"ifEquals",g.author,"new",f)))||0===f)b+=f;b+='\n    </div>\n\n    <div class="ctp-content">\n      ';(f=h.headDescription)?f=f.call(g,{hash:{},data:c}):(f=g.headDescription,f=typeof f===m?f.apply(g):f);b+=r(f)+"\n      ";if((f=h["if"].call(g,g.tailDescription,{hash:{},inverse:n.noop,fn:n.program(20,function(a,b){var c,d;c='\n        <span class="hellip">\u2026</span>\n        <span class="hidden more-desc">';(d=h.tailDescription)?d=d.call(a,{hash:{},data:b}):(d=a.tailDescription,
d=typeof d===m?d.apply(a):d);return c+=r(d)+'</span>\n        <a href="#" class="a-toggle-desc">\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435</a>\n      '},c),data:c}))||0===f)b+=f;b+='\n    </div>\n\n    <div class="c-edit-inputs">\n      <input type="text" value="';(f=h.name)?f=f.call(g,{hash:{},data:c}):(f=g.name,f=typeof f===m?f.apply(g):f);b+=r(f)+'">\n      <input type="text" value="';(f=h.description)?f=f.call(g,{hash:{},data:c}):(f=g.description,f=typeof f===m?f.apply(g):f);b+=r(f)+
'">\n    </div>\n  </div>\n</header>\n\n<aside id="c-left-panel">\n  <div class="aside-content">\n    <div class="aside-viewport">\n      <ol id="ol-collection">\n        ';if((f=h.each.call(g,g.points,{hash:{},inverse:n.noop,fn:n.programWithDepth(22,function(a,b,c){var d,e;d='\n        <li class="choose_place ';b={hash:{},inverse:n.noop,fn:n.program(23,x,b),data:b};if((b=(e=h.ifEquals,e?e.call(a,(e=a.point,null==e||!1===e?e:e.id),(e=c.activePoint,null==e||!1===e?e:e.id),b):t.call(a,"ifEquals",(e=
a.point,null==e||!1===e?e:e.id),(e=c.activePoint,null==e||!1===e?e:e.id),b)))||0===b)d+=b;return d+='" data-placemark-id="placemark-1">\n          <a href="/route/'+r((e=c.id,typeof e===m?e.apply(a):e))+"/point/"+r((e=(e=a.point,null==e||!1===e?e:e.id),typeof e===m?e.apply(a):e))+'" class="choose_place_a" data-id="'+r((e=(e=a.point,null==e||!1===e?e:e.id),typeof e===m?e.apply(a):e))+'">'+r((e=(e=a.point,null==e||!1===e?e:e.name),typeof e===m?e.apply(a):e))+'</a>\n            <button type="button" class="remove-collection"></button>\n          </li>\n        '},
c,g),data:c}))||0===f)b+=f;return b+'\n      </ol>\n    </div>\n\n    <a href="#" class="clp-up"></a> \x3c!-- clp- collection left panel  --\x3e\n    <a href="#" class="clp-down"></a>\n  </div>\n</aside>\n'});
this.Templates.RoutesDetail=Handlebars.template(function(b,g,h,f,c){function e(b,d){var c,e;c="\n    <ul>\n      ";if((e=h.each.call(b,b.segments,{hash:{},inverse:m.noop,fn:m.program(3,a,d),data:d}))||0===e)c+=e;return c+"\n    </ul>\n    "}function a(a,b){var c,e,f;c="\n        <li>\n          ";f={hash:{},inverse:m.noop,fn:m.program(4,d,b),data:b};if((f=(e=h.ifEquals,e?e.call(a,a.direct,"\u043f\u0440\u044f\u043c\u043e",f):r.call(a,"ifEquals",a.direct,"\u043f\u0440\u044f\u043c\u043e",f)))||0===f)c+=
f;c+="\n          ";f={hash:{},inverse:m.noop,fn:m.program(6,l,b),data:b};if((f=(e=h.ifEquals,e?e.call(a,a.direct,"\u043d\u0430\u043b\u0435\u0432\u043e",f):r.call(a,"ifEquals",a.direct,"\u043d\u0430\u043b\u0435\u0432\u043e",f)))||0===f)c+=f;c+="\n          ";f={hash:{},inverse:m.noop,fn:m.program(8,q,b),data:b};if((f=(e=h.ifEquals,e?e.call(a,a.direct,"\u043d\u0430\u043f\u0440\u0430\u0432\u043e",f):r.call(a,"ifEquals",a.direct,"\u043d\u0430\u043f\u0440\u0430\u0432\u043e",f)))||0===f)c+=f;c+='\n          <div class="black">';
(f=h.direct)?f=f.call(a,{hash:{},data:b}):(f=a.direct,f=typeof f===x?f.apply(a):f);c+=k(f)+" ";(f=h.street)?f=f.call(a,{hash:{},data:b}):(f=a.street,f=typeof f===x?f.apply(a):f);c+=k(f)+"</div>\n          ";f={hash:{},data:b};return c+=k((e=h.safe,e?e.call(a,a.distance,f):r.call(a,"safe",a.distance,f)))+"\n        </li>\n      "}function d(a,b){var c,d;c='\n            <img src="/static/images/arrow-direct.png" alt="\u0435\u0445\u0430\u0442\u044c ';(d=h.direct)?d=d.call(a,{hash:{},data:b}):(d=a.direct,
d=typeof d===x?d.apply(a):d);return c+=k(d)+'" width="18" height="18">\n          '}function l(a,b){var c,d;c='\n            <img src="/static/images/arrow-left.png" alt="\u0435\u0445\u0430\u0442\u044c ';(d=h.direct)?d=d.call(a,{hash:{},data:b}):(d=a.direct,d=typeof d===x?d.apply(a):d);return c+=k(d)+'" width="18" height="18">\n          '}function q(a,b){var c,d;c='\n            <img src="/static/images/arrow-right.png" alt="\u0435\u0445\u0430\u0442\u044c ';(d=h.direct)?d=d.call(a,{hash:{},data:b}):
(d=a.direct,d=typeof d===x?d.apply(a):d);return c+=k(d)+'" width="18" height="18">\n          '}this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var v,x="function",k=this.escapeExpression,m=this,r=h.helperMissing;f={hash:{},data:c};b='<div class="dp-top">\n  \u0415\u0445\u0430\u0442\u044c \u043d\u0430 \u043c\u0430\u0448\u0438\u043d\u0435\n  <div class="black">'+(k((v=h.safe,v?v.call(g,g.totalTime,f):r.call(g,"safe",g.totalTime,f)))+" - ");f={hash:{},data:c};b+=k((v=h.safe,v?v.call(g,g.totalDistance,
f):r.call(g,"safe",g.totalDistance,f)))+'</div>\n</div>\n\n<ol class="ol-details-path">\n  ';if((g=h.each.call(g,g.ways,{hash:{},inverse:m.noop,fn:m.program(1,function(a,b){var c,d;c=""+('\n  <li>\n    <div class="path-name-place">'+k((d=(d=a.point,null==d||!1===d?d:d.name),typeof d===x?d.apply(a):d))+", "+k((d=(d=a.point,null==d||!1===d?d:d.address),typeof d===x?d.apply(a):d))+"</div>\n    \n    ");if((d=h["if"].call(a,a.segments,{hash:{},inverse:m.noop,fn:m.program(2,e,b),data:b}))||0===d)c+=d;
return c+"\n  </li>\n  "},c),data:c}))||0===g)b+=g;return b+="\n</ol>\n"});
this.Templates.RoutesDropdown=Handlebars.template(function(b,g,h,f,c){function e(a,b){var c,e;return c=""+('\n    <li class="item-label" data-address="'+l((e=(e=a.GeoObject,null==e||!1===e?e:e.description),typeof e===d?e.apply(a):e))+'" data-name="'+l((e=(e=a.GeoObject,null==e||!1===e?e:e.name),typeof e===d?e.apply(a):e))+'" data-left-corner="'+l((e=(e=(e=(e=a.GeoObject,null==e||!1===e?e:e.boundedBy),null==e||!1===e?e:e.Envelope),null==e||!1===e?e:e.lowerCorner),typeof e===d?e.apply(a):e))+'" data-right-corner="'+
l((e=(e=(e=(e=a.GeoObject,null==e||!1===e?e:e.boundedBy),null==e||!1===e?e:e.Envelope),null==e||!1===e?e:e.upperCorner),typeof e===d?e.apply(a):e))+'" data-location="'+l((e=(e=(e=a.GeoObject,null==e||!1===e?e:e.Point),null==e||!1===e?e:e.pos),typeof e===d?e.apply(a):e))+'" data-type="place">\n      <a href="#">'+l((e=(e=a.GeoObject,null==e||!1===e?e:e.name),typeof e===d?e.apply(a):e))+" <i>"+l((e=(e=a.GeoObject,null==e||!1===e?e:e.description),typeof e===d?e.apply(a):e))+"</i></a>\n    </li>\n    ")}
function a(a,b){var c,e;c='\n    <li class="item-label" data-title="';(e=h.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===d?e.apply(a):e);c+=l(e)+'" data-desc="';(e=h.address)?e=e.call(a,{hash:{},data:b}):(e=a.address,e=typeof e===d?e.apply(a):e);c+=l(e)+'" data-point-id="';(e=h.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===d?e.apply(a):e);c+=l(e)+'" data-type="name"><a href="#">';(e=h.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===d?e.apply(a):e);return c+=l(e)+"</a></li>\n    "}
this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var d="function",l=this.escapeExpression,q=this;b='<button type="button"  class="toggle-panel"></button>\n\n<div class="inner-wrap">\n';if((f=h["if"].call(g,g.empty,{hash:{},inverse:q.noop,fn:q.program(1,function(a,b){return'\n  <ul class="item">\n    <li class="drop-not-found">\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e</li>\n  </ul>\n'},c),data:c}))||0===f)b+=f;b+="\n\n";if((f=h["if"].call(g,
g.places,{hash:{},inverse:q.noop,fn:q.program(3,function(a,b){var c,f;c=""+('\n  <ul class="item item-place">\n    <li class="item-title">\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f <sup>'+l((f=(f=a.places,null==f||!1===f?f:f.length),typeof f===d?f.apply(a):f))+"</sup></li>\n    ");if((f=h.each.call(a,a.places,{hash:{},inverse:q.noop,fn:q.program(4,e,b),data:b}))||0===f)c+=f;return c+"\n  </ul>\n"},c),data:c}))||0===f)b+=f;b+="\n\n";if((f=h["if"].call(g,g.points,
{hash:{},inverse:q.noop,fn:q.program(6,function(b,c){var e,f;e=""+('\n  <ul class="item item-name">\n    <li class="item-title">\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 <sup>'+l((f=(f=b.points,null==f||!1===f?f:f.length),typeof f===d?f.apply(b):f))+"</sup></li>\n    ");if((f=h.each.call(b,b.points,{hash:{},inverse:q.noop,fn:q.program(7,a,c),data:c}))||0===f)e+=f;return e+"\n  </ul>\n"},c),data:c}))||0===f)b+=f;return b+"\n</div>\n"});
this.Templates.RoutesSaveView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var e=this.escapeExpression;b='<div class="p-top">\n  ';if((f=h["if"].call(g,g.name,{hash:{},inverse:this.program(3,function(a,b){return"\n  <h3>\u041d\u043e\u0432\u044b\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</h3>\n  "},c),fn:this.program(1,function(a,b){var c,f;c="\n  <h3>\u041c\u0430\u0440\u0448\u0440\u0443\u0442 - ";(f=h.name)?f=f.call(a,{hash:{},data:b}):
(f=a.name,f="function"===typeof f?f.apply(a):f);return c+=e(f)+"</h3>\n  "},c),data:c}))||0===f)b+=f;b+='\n  <input type="button" class="p-close" value=" ">\n</div>\n\n<div class="p-body">\n  <form >\n    <div class="line">\n      ';if((f=h["if"].call(g,g.name,{hash:{},inverse:this.program(7,function(a,b){return'\n      <label for="input-add-new">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 </label>\n      '},c),fn:this.program(5,
function(a,b){return'\n      <label for="input-add-new">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 </label>\n      '},c),data:c}))||0===f)b+=f;b+='\n      <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430..." id="input-add-new-name" value="';(f=h.name)?f=f.call(g,{hash:{},data:c}):(f=g.name,f="function"===
typeof f?f.apply(g):f);b+=e(f)+'">\n    </div>\n\n    <div class="line">\n      <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430..." id="input-add-new-desc" value="';(f=h.description)?f=f.call(g,{hash:{},data:c}):(f=g.description,f="function"===typeof f?f.apply(g):f);return b+=e(f)+'">\n    </div>\n\n    <input type="submit" value="\u0421\u043e\u0437\u0434\u0430\u0442\u044c" class="a-btn a-add-collection">\n  </form>\n</div>\n'});
this.Templates.RoutesView=Handlebars.template(function(b,g,h,f,c){this.compilerInfo=[3,">= 1.0.0-rc.4"];h=h||b.helpers;c=c||{};var e,a=this.escapeExpression;b='<header class="header_small">\n  <a href="/" class="logo_small nonav">\u044f\u0441\u0435\u043d \u043f\u0443\u0442\u044c</a>\n  <a href="/" class="button_brown nonav">\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e</a>\n  ';if((g=h["if"].call(g,(e=g.user,null==e||!1===e?e:e.authorized),{hash:{},inverse:this.program(3,function(a,b){return'\n    <div class="auth">\n      <img src="/static/images/guest.png" alt="" class="avatar" width="29" height="30">\n      <div class="user-body">\n        <span href="#" class="a-login">\u0412\u0445\u043e\u0434</span>\n      </div>\n    </div>\n  '},
c),fn:this.program(1,function(b,c){var e,f;return e=""+('\n  <div class="auth user">\n    <a href="#" target="_blank"><img src="/media/'+a((f=(f=b.user,null==f||!1===f?f:f.avatar),"function"===typeof f?f.apply(b):f))+'" alt="" class="avatar" width="29" height="30"></a>\n    <div class="user-body">\n      <div class="user-name">'+a((f=(f=b.user,null==f||!1===f?f:f.first_name),"function"===typeof f?f.apply(b):f))+" "+a((f=(f=b.user,null==f||!1===f?f:f.last_name),"function"===typeof f?f.apply(b):f))+
'</div>\n      <div class="user-likes">\n        <span class="ico ico-like-small"></span>\n        '+a((f=(f=b.user,null==f||!1===f?f:f.count_liked_objects),"function"===typeof f?f.apply(b):f))+'\n        <span class="ico ico-comment-small"></span>\n        '+a((f=(f=b.user,null==f||!1===f?f:f.count_commented_objects),"function"===typeof f?f.apply(b):f))+"\n      </div>\n    </div>\n  </div>\n  ")},c),data:c}))||0===g)b+=g;return b+'\n</header>\n\n<div class="aside-content">\n  <div class="pap-viewport">\n    <div class="field-enter-place">\n      <div class="search search_way">\n        <input type="text" class="route-input" placeholder="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e\u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435...">\n        <input type="button" class="drop-filter-clear">\n        <div class="drop-search-a">\n        </div>\n      </div>\n    </div>\n    \n    <div class="msg-hint">\n      \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043c\u0435\u0441\u0442\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0443 \u0447\u0435\u0440\u0435\u0437 \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e\u0438\u0441\u043a\u0430 \u0432 \u043e\u043a\u043d\u0435 &laquo;\u0424\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430&raquo;\n    </div>\n    \n    <ol class="ol-add-path-places"></ol>\n    \n    <div class="line-add-path-btn">\n      <a href="#" data-toogle="tooltip" data-placement="bottom" data-animation="true" title="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0442\u043e\u0447\u043a\u0438" class="a-btn btn-add-path disabled">\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n    </div>\n    \n    <div class="line-add-path-btn" id="action-btn">\n      <a href="#" class="a-btn btn-clear-map">\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a><a href="#" class="a-btn btn-save">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</a><a href="#" class="a-btn btn-print">\u041f\u0435\u0447\u0430\u0442\u044c</a>\n    </div>\n    \n    <div class="details-path"></div>\n  </div>\n</div>\n'});
(function(){Handlebars.registerHelper("ifEquals",function(b,g,h){return(null!=b?b.toString():void 0)===(null!=g?g.toString():void 0)?h.fn(this):h.inverse(this)});Handlebars.registerHelper("ifContains",function(b,g,h){return void 0===g?!1:_.contains(g,b)?h.fn(this):h.inverse(this)});Handlebars.registerHelper("ifBelong",function(b,g,h){var f,c,e,a;if(void 0===g)return!1;e=0;for(a=g.length;e<a;e++)c=g[e],c.id===b.id&&(f=!0);return f?h.fn(this):h.inverse(this)});Handlebars.registerHelper("dateFormat",
function(b,g){var h;return window.moment?(h=g.hash.format||"D MMMM YYYY \u0432 HH:mm",moment(b).format(h)):b});Handlebars.registerHelper("eachKey",function(b,g){var h,f,c,e;f="";b=b.toString().substring(1,b.length-1).split(",");c=0;for(e=b.length;c<e;c++)h=b[c],f+=g.fn(h.trim());return f});Handlebars.registerHelper("splitAddr",function(b,g,h){b=b.split(g);return b[2]});Handlebars.registerHelper("addShy",function(b,g){var h,f;if(_.contains(b," "))return b;h=b.slice(0,10);f=b.slice(10);return new Handlebars.SafeString(""+
h+"&shy;"+f)});Handlebars.registerHelper("safe",function(b,g){return new Handlebars.SafeString(b)})}).call(this);
(function(){Yapp.module("Common",{startWithParent:!1,define:function(){this.addInitializer(function(){console.log("initializing Common Module");this.router=new Yapp.Common.Router({controller:new Yapp.Common.Controller});this.headerView=new Yapp.Common.HeaderView({model:Yapp.user});Yapp.header.show(this.headerView);this.footerView=new Yapp.Common.FooterView;return Yapp.footer.show(this.footerView)});return this.sliderPhotos={flag:null,countHidden:0,afterMove:function(b){if(0===b)this.prev.addClass("disabled"),
this.next.removeClass("disabled");else if(b===$("li",this.slider).length-this.p.visible)this.prev.removeClass("disabled"),this.next.addClass("disabled");else return this.prev.removeClass("disabled"),this.next.removeClass("disabled")},move:function(b){var g;g=this;g.countHidden+=1*b;return g.slider.animate({left:-(g.slider.find("li:eq(1)").outerWidth(!0)*g.countHidden)},function(){g.flag=null;return g.afterMove(g.countHidden)})},init:function(b){var g;g=this;g.p=b;g.prev=$(".photos-prev",b.root);g.next=
$(".photos-next",b.root);g.slider=$("ul",b.root);g.countHidden=0;g.slider.animate({left:0},300);$("li",b.root).length<=b.visible?(g.prev.hide(),g.next.hide()):(g.prev.show(),g.next.show());g.next.unbind("click.SliderPhotos").bind("click.SliderPhotos",function(){if(g.flag||$(this).hasClass("disabled"))return!1;g.flag=!0;g.move(1);return!1}).removeClass("disabled");return g.prev.unbind("click.SliderPhotos").bind("click.SliderPhotos",function(){if(g.flag||$(this).hasClass("disabled"))return!1;g.flag=
!0;g.move(-1);return!1}).addClass("disabled")},reinit:function(b){return this.init(b||this.p)}}}})}).call(this);
(function(){Yapp.module("Map",{startWithParent:!1,define:function(){return this.addInitializer(function(){var b=this;console.log("initializing Map Module");this.mapDeferred=$.Deferred();this.router=new Yapp.Map.Router({controller:new Yapp.Map.Controller});this.mapView=new Yapp.Map.MapView;Yapp.map.show(this.mapView);this.clusterIcons=[{href:"/media/icons/cluster_small.png",size:[32,32],offset:[-23,-23]},{href:"/media/icons/cluster_big.png",size:[59,59],offset:[-29,-29]}];this.geocode=function(b,h){return void 0!==
window.ymaps?ymaps.geocode(b,h):this.mapDeferred};this.route=function(b,h){return void 0!==window.ymaps?ymaps.route(b,h):this.mapDeferred};return $.getScript(Yapp.YA_MAP_URL,function(){return b.mapDeferred.promise(ymaps.ready(function(){var g,h;console.log("Init Yandex map");b.yandexmap=new ymaps.Map("mainmap",{center:[ymaps.geolocation.latitude,ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"});b.trigger("load:yandexmap",b.yandexmap);g=b.yandexmap.getBounds()[0].reverse().join(" ");
h=b.yandexmap.getBounds()[1].reverse().join(" ");g=_.extend(ymaps.geolocation,{leftCorner:g,rightCorner:h});Yapp.user.set({location:g});b.yandexmap.controls.add("zoomControl",{right:5,top:80}).add("typeSelector");b.mapEvents=b.yandexmap.events.group();b.pointIconLayout=ymaps.templateLayoutFactory.createClass('<div class="placemark for-add-place $[properties.class]" data-point-id="$[properties.point.id]" id="placemark-$[properties.point.id]">\n  \x3c!--<img src="/media/$[properties.tag.icons]">--\x3e\n  [if properties.iconContent]\n  <span class="p-num">$[properties.iconContent]</span>\n  [else]\n  <span class="m-ico $[properties.tag.style|m-dostoprimechatelnost]"></span>\n  [endif]\n\n  <a href="#" class="a-add-place" data-point-id="$[properties.point.id]" data-title="$[properties.point.name]" data-desc="$[properties.point.address]">\n    <span data-toggle="tooltip" data-placement="bottom" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c&nbsp;\u0432&nbsp;\u043c\u0430\u0440\u0448\u0440\u0443\u0442"  class="p-num">$[properties.iconContent|+]</span>\n  </a>\n\n  <div class="name-place" data-point-id="$[properties.point.id]">$[properties.point.name]</div>\n</div>',
{build:function(){var b,c,e;this.constructor.superclass.build.call(this);c=this.getElement();e=c.getElementsByClassName("placemark");b=c.getElementsByClassName("a-add-place");c=c.getElementsByClassName("name-place");$("[data-toggle=tooltip]",this.getElement()).tooltip();this.eventsGroup=this.events.group();this.eventsGroup.add("click",this.onClickPlacemark,e);this.eventsGroup.add("click",this.onClickAddPlace,b);this.eventsGroup.add("click",this.onClickNamePlace,c);$(e).unbind("click").bind("click",
this.onClickPlacemark);$(b).unbind("click").bind("click",this.onClickAddPlace);return $(c).unbind("click").bind("click",this.onClickNamePlace)},clear:function(){this.eventsGroup.removeAll();return $("[data-toggle=tooltip]",this.getElement()).tooltip("destroy")},onClickPlacemark:function(b){var c;b.preventDefault();b.stopPropagation();$(b.currentTarget);clearTimeout();if($(this).hasClass("hover"))return c=$(this),$(".name-place",this).stop().animate({width:0},150,function(){return c.removeClass("hover")});
$(this).addClass("hover");b=$(".name-place",this).data("width")||$(".name-place",this).outerWidth();return $(".name-place",this).data("width",b).width(0).stop().animate({width:b-29},200)},onClickAddPlace:function(b){return Yapp.vent.trigger("click:addplacemark",b)},onClickNamePlace:function(b){if(b=$(b.currentTarget).data("point-id"))return Yapp.vent.trigger("click:nameplacemark",b)}});return b.mapDeferred.resolve()}))})})}})}).call(this);
(function(){Yapp.module("Points",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Points Module");return this.router=new Yapp.Points.Router({controller:new Yapp.Points.Controller})})}})}).call(this);(function(){Yapp.module("Routes",{startWithParent:!1,define:function(){return this.addInitializer(function(){console.log("initializing Routes Module");return this.router=new Yapp.Routes.Router({controller:new Yapp.Routes.Controller})})}})}).call(this);
(function(){Yapp.module("User",{startWithParent:!1,define:function(){return this.addInitializer(function(){return console.log("initializing User Module")})}})}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Common.PopupRegion=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.el="#popups .scroll-box";c.prototype.initialize=function(){console.log("initializing Yapp.Common.PopupRegion");this.body="body";this.wrapper="#popups";this.overlay="#overlay";
this.regionManager=new Marionette.RegionManager;return this.regions=this.regionManager.addRegions({alerts:"#alerts"})};c.prototype.open=function(b){return this.$el.append(b.el)};c.prototype.getEl=function(b){var a=this;b=$(b);b.unbind("click").bind("click",function(b){if($(b.target).hasClass("scroll-box"))return a.close()});return b};c.prototype.onShow=function(){$(this.body).css("overflow-y","hidden");$(this.overlay).show();$(this.wrapper).show();return this.regions.alerts.on("show",function(b){b.$el.css({margin:"0 0 0 292px",
top:"195px",position:"fixed",display:"none"});b.$el.fadeIn(500);return b.ui.closeButton.unbind("click").bind("click",function(){return b.close()})})};c.prototype.onClose=function(){this.regions.alerts.off();this.regions.alerts.close();$(this.overlay).hide();$(this.wrapper).hide();return $(this.body).css("overflow-y","auto")};return c}(Backbone.Marionette.Region)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Common.PopupView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initializing Yapp.Common.PopupView")};e.prototype.id="p-common";e.prototype.className="popup";e.prototype.modelEvents={change:"render"};
e.prototype.onBeforeRender=function(){return console.log("before render PopupView")};e.prototype.templateHelpers=function(){return{user:b.user.toJSON()}};return e}(Marionette.ItemView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.Point=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initializing Yapp.Points.Point")};e.prototype.idAttribute="unid";e.prototype.urlRoot=function(){return b.API_BASE_URL+"/api/v1/points/"};
e.prototype.defaults=function(){return{priority:0,name:"",address:"",description:"",longitude:"",latitude:"",imgs:[],tags:[]}};e.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.address&&c.push("address");""===a.longitude&&c.push("longitude");""===a.latitude&&c.push("latitude");""===a.description&&c.push("description");(!a.imgs||0===a.imgs.length)&&c.push("photos");(!a.tags||0===a.tags.length)&&c.push("tags");if(0<c.length)return c};e.prototype.search=function(a,c){return b.request("request",
{type:"GET",url:"/points/search/",params:{$dropResult:c},data:{s:a},successCallback:this._successSearch})};e.prototype._successSearch=function(a,b){return _.each(a,function(a){return b.append("<li data-point-id="+a.id+">"+a.name+"</li>")})};e.prototype.like=function(a,c,e){var f;f=this.get("id");return b.request("request",{url:b.API_BASE_URL+("/api/v1/points/"+f+"/like/"),type:"POST",context:e,successCallback:c,params:{target:a},data:{id:this.get("id")}})};e.prototype.likePhoto=function(a,c,e,f){return b.request("request",
{url:b.API_BASE_URL+"/photos/like",type:"POST",context:f,successCallback:e,params:{target:a},data:{id:c}})};e.prototype.addCommentPhoto=function(a,c,e,f){return b.request("request",{url:b.API_BASE_URL+"/comments/add",type:"POST",context:f,successCallback:e,data:{photo:a,txt:c}})};e.prototype.removeCommentPhoto=function(a,c,e){return b.request("request",{url:b.API_BASE_URL+"/comments/del",type:"POST",context:e,successCallback:c,params:{commentId:a},data:{id:a}})};e.prototype.addPhoto=function(a,c,
e){return b.request("request",{url:b.API_BASE_URL+("/photos/point/"+this.get("id")+"/add"),type:"POST",context:e,successCallback:c,processData:!1,contentType:!1,params:{id:this.get("id")},data:a})};e.prototype.removePhoto=function(a,c,e){return b.request("request",{url:b.API_BASE_URL+"/photos/del",type:"POST",context:e,successCallback:c,params:{photoId:a},data:{id:a}})};e.prototype.addToSet=function(a){return b.request("request",{url:b.API_BASE_URL+"/collections/addpoint",type:"POST",params:{setId:a},
data:{id:a,point:this.get("id")}})};e.prototype.addReview=function(a,c,e,f){return b.request("request",{url:b.API_BASE_URL+("/api/v1/points/"+this.get("id")+"/reviews/"),type:"POST",context:f,successCallback:e,data:{review:a,rating:c}})};e.prototype.parse=function(a){_.isArray(a)&&(a=a[0]);return a};return e}(Backbone.Model)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.Set=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initializing Yapp.Points.Set")};e.prototype.urlRoot=function(){return b.API_BASE_URL+"/api/v1/sets/"};e.prototype.defaults=function(){return{name:"",
description:"",ypi:0,priority:0}};e.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.description&&c.push("description");if(0<c.length)return c};e.prototype.like=function(a,c,e){return b.request("request",{url:b.API_BASE_URL+("/api/v1/sets/"+this.get("id")+"/like/"),type:"POST",context:e,successCallback:c,params:{target:a}})};e.prototype.create=function(a,c){if(this.isValid())return b.request("request",{url:b.API_BASE_URL+"/collections/add",type:"POST",context:c,successCallback:a,
params:{set:this},data:this.attributes})};return e}(b.Points.Point)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Routes.Route=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initializing Yapp.Routes.Route")};e.prototype.urlRoot=function(){return b.API_BASE_URL+"/api/v1/route/"};e.prototype.defaults=function(){return{name:"",
description:"",ypi:0,points:[],coords:""}};e.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.description&&c.push("description");if(0<c.length)return c};e.prototype.like=function(a,c,e){return b.request("request",{url:b.API_BASE_URL+("/api/v1/route/"+this.get("id")+"/like/"),type:"POST",context:e,successCallback:c,params:{target:a}})};e.prototype.create=function(a,c){if(this.isValid())return b.request("request",{url:b.API_BASE_URL+"/collections/add",type:"POST",context:c,
successCallback:a,params:{set:this},data:this.attributes})};return e}(b.Points.Point)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.User.Profile=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.User.Profile")};c.prototype.defaults={first_name:"",last_name:"",authorized:!1,email:!1,avatar:"",last_state:"pins",
count_liked_objects:0,count_commented_objects:0};return c}(Backbone.Model)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.PointCollection=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.model=function(a,c){if("point"===a.type_of_item)return new b.Points.Point(a,c);if("set"===a.type_of_item)return new b.Points.Set(a,c);if("route"===a.type_of_item)return new b.Routes.Route(a,
c)};e.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointCollection")};e.prototype.comparator=function(a){return-a.get("ypi")};e.prototype.parse=function(a){return a};e.prototype.url=function(){return b.API_BASE_URL+"/api/v1/yapens/"};return e}(Backbone.Collection)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.MainLayout=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.template=Templates.PointsMainLayout;e.prototype.id="point-layout";e.prototype.regions={panelContainer:"#point-panel",popularContainer:"#tab-popular",newContainer:"#tab-new"};
e.prototype.initialize=function(){console.log("initializing Yapp.Points.MainLayout");return this.pointCollection=new b.Points.PointCollection};e.prototype.onShow=function(){var a,c=this;a=this.options.content_type;b.updateSettings({content:a});this.panelContainer.show(new b.Points.PointPanelView({model:b.user,content_type:a}));console.log("loading points collection");return this.pointCollection.fetch({data:b.settings,success:function(e,f){console.log(["server response: ",f]);return f.error||f.errors?
console.error(f):c.popularContainer.show(new b.Points.PointListView({collection:c.pointCollection,content_type:a}))}})};return e}(Marionette.Layout)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Map.MapView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.template=Templates.MapView;e.prototype.tagName="div";e.prototype.className="map";e.prototype.initialize=function(){var a=this;console.log("initializing Yapp.Map.MapView");
this.user=b.user;this.iconTemplate=Templates.IconTemplate;_.bindAll(this,"updatePointCollection");$.get("/api/v1/map_yapens/").success(function(b){return a.pointsByTag=_.partial(a._filteredPoints,b)});return b.request("request",{url:b.API_BASE_URL+"/api/v1/tags/",context:this,successCallback:this.renderIcons})};e.prototype.events={"click .a-toggle":"toggleMap","click .m-ico":"showCluster"};e.prototype.toggleMap=function(a){a.preventDefault();return b.execute("toggleMap")};e.prototype.onRender=function(){var a=
this;return b.Map.mapDeferred.then(function(){a.map=b.Map.yandexmap;return b.Map.mapEvents.add("actionend",a.changeMap,a)})};e.prototype.changeMap=function(a){var c=this;a=this.map.getCenter();return b.Map.geocode(a,{results:10,json:!0}).then(function(a){var e,f,g,h,m;f=_.find(a.GeoObjectCollection.featureMember,function(a){return"locality"===a.GeoObject.metaDataProperty.GeocoderMetaData.kind||"area"===a.GeoObject.metaDataProperty.GeocoderMetaData.kind}).GeoObject.metaDataProperty.GeocoderMetaData;
e=c.map.getBounds()[0].reverse();a=c.map.getBounds()[1].reverse();m=b.settings.models;f=f.AddressDetails.Country;h=f.AdministrativeArea;g=f.Locality?f.Locality:h&&h.Locality?h.Locality:h&&h.SubAdministrativeArea&&h.SubAdministrativeArea.Locality?h.SubAdministrativeArea.Locality:h&&h.SubAdministrativeArea?h.SubAdministrativeArea:!1;c.user.set({searchModels:m,location:{country:f.CountryName,region:h?h.AdministrativeAreaName:"",city:g?g.LocalityName||g.SubAdministrativeAreaName:void 0,leftCorner:e.join(" "),
rightCorner:a.join(" ")}});e=_.zipObject(["ln","lt"],_(e).map(function(a){return parseFloat(a)}).value());a=_.zipObject(["ln","lt"],_(a).map(function(a){return parseFloat(a)}).value());b.updateSettings({coord_left:JSON.stringify(e),coord_right:JSON.stringify(a)});console.log("map update");return c.getMapYapens()})};e.prototype.updatePointCollection=function(a){var c=this;return b.Map.mapDeferred.then(function(){c.clusterer?c.clusterer.remove(c.boardPlacemarks):(c.clusterer=new ymaps.Clusterer({clusterIcons:b.Map.clusterIcons}),
b.Map.yandexmap.geoObjects.add(c.clusterer));c.boardPlacemarks=_.map(a,function(a){var c;c=_(a.tags).find(function(a){return""!==a.icons});return new ymaps.Placemark([a.latitude,a.longitude],{id:"map-point"+a.id,point:a,tag:c},{iconLayout:b.Map.pointIconLayout})});c.clusterer.add(c.boardPlacemarks);return c.clusterer.refresh()})};e.prototype.renderIcons=function(a){a=this.iconTemplate({icons:a.filter(function(a){return 0===a.level})});this.$(".m-ico-group").html(a);return this.$el.find("[data-toggle=tooltip]").tooltip()};
e.prototype._filteredPoints=function(a,b){return _(a).filter(function(a){var c;c=_.pluck(a.tags,"id");c=_.intersection(c,b);if(!_.isEmpty(c))return a}).value()};e.prototype.getPlaceMarks=function(a){a=this.pointsByTag(a);return _.map(a,function(a){var c;c=_(a.tags).find(function(a){return""!==a.icon});return new ymaps.Placemark([a.latitude,a.longitude],{id:"map-point"+a.id,point:a,tag:c},{iconLayout:b.Map.pointIconLayout})})};e.prototype.createCluster=function(a){var c=this;this.clusterer?this.clusterer.remove(this.diff):
(this.clusterer=new ymaps.Clusterer({clusterIcons:b.Map.clusterIcons}),b.Map.yandexmap.geoObjects.add(this.clusterer));this.placemarks=this.getPlaceMarks(a);this.diff=_(this.placemarks).filter(function(a){return!_(c.boardPlacemarks).map(function(a){return a.properties.getAll()}).find({id:a.properties.get("id")})}).value();this.clusterer.add(this.diff);return this.clusterer.refresh()};e.prototype.showCluster=function(a){a.preventDefault();a=$(a.currentTarget);a.parent().hasClass("active")?a.parent().removeClass("active"):
a.parent().addClass("active");a=this.$(".m-ico-group a.active").children();a=_.map(a,function(a){return $(a).data("id")});return this.createCluster(a)};e.prototype.clear=function(){if(this.clusterer)return this.clusterer.removeAll(),this.placemarks=[],this.boardPlacemarks=[]};e.prototype.getMapYapens=function(){return b.request("request",{url:b.API_BASE_URL+"/api/v1/map_yapens/",context:this,successCallback:this.updatePointCollection,data:{coord_left:b.settings.coord_left,coord_right:b.settings.coord_right}})};
return e}(Marionette.ItemView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Common.ComplaintCommentView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initialize ComplaintCommentView");return this.user=b.user};e.prototype.template=Templates.ComplaintCommentView;e.prototype.id=
"complaint-comment";e.prototype.className="popup popup-alert";e.prototype.ui={closeButton:".p-close"};e.prototype.events={"click .p-close":"hidePopup"};e.prototype.hidePopup=function(a){a.preventDefault();return b.popup.close()};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Common.AuthPopupView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initialize AuthPopupView")};e.prototype.template=Templates.AuthPopupView;e.prototype.events=function(){return{"click .p-close":"hidePopup"}};
e.prototype.hidePopup=function(){return b.popup.close()};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Common.FooterView=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){console.log("initializing Yapp.Common.FooterView");_.bindAll(this,"onScroll");return $(window).on("scroll",this.onScroll)};c.prototype.template=Templates.FooterView;
c.prototype.className="f-body";c.prototype.events={"click .a-toggle":"toggleFooter","click .a-up":"scrollTop"};c.prototype.modelEvents={change:"render"};c.prototype.toggleFooter=function(b){b.preventDefault();return $("body").toggleClass("hide-footer")};c.prototype.scrollTop=function(b){b.preventDefault();return $("body").animate({scrollTop:0},"slow")};c.prototype.onScroll=function(b){return 60<document.body.scrollTop?this.$(".a-up").show():this.$(".a-up").hide()};return c}(Marionette.ItemView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Common.HeaderView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initializing Yapp.Common.HeaderView");this.multisearchDropdownTemplate=Templates.MultisearchDropdown;return this.labelTemplate=Templates.LabelTemplate};
e.prototype.template=Templates.HeaderView;e.prototype.className="wrap";e.prototype.ui={labelFields:".label-fields",dropSearch:".drop-search",clearInput:".clear-input",searchInput:".text-field",labelAddButton:".label-add",removeLAbel:".remove-label",searchOverlay:".drop-search-overlay",itemTypeNav:".head-nav ul",logo:".logo",search:".search"};e.prototype.events={"click .drop-add-head, .auth, a-login":"showAuthPopup","click .drop-search-overlay":"hideDropdown","click .item-label":"addLabel","click .remove-label":"removeLabel",
"click .label-add":"focusInput","click .label-fields":"focusLabels","click .label-fields .label-name":"editInput","click .clear-input":"clearSearchInput","click #multisearchForm input[type=submit]":"submitSearch","submit #multisearchForm":"submitSearch","keydown .text-field input":"keyupInput","click .head-nav li":"selectItemType","click .head-nav ul":"showItemTypeMenu","click .add-block-head":"showAddMenu"};e.prototype.modelEvents={change:"render"};e.prototype.showAuthPopup=function(a){if(!this.model.get("authorized"))return a.preventDefault(),
a.stopPropagation(),b.vent.trigger("user:notauthorized")};e.prototype.addLabel=function(a){var c,e;a.preventDefault();c=$(a.currentTarget);e={id:c.data("id"),name:c.data("name"),type:c.data("type")};switch(e.type){case "tags":c=this.ui.labelFields.children(".label-tags");_.each(c,function(a){if($(a).data("id")===e.id)return $(a).remove()});this.ui.labelFields.children(".label-add").before(this.labelTemplate(e));this.submitSearch(a);break;case "place":e.coordLeft=c.data("left-corner");e.coordRight=
c.data("right-corner");this.ui.labelFields.children(".label-place").remove();this.ui.labelFields.prepend(this.labelTemplate(e));b.Map.yandexmap.setBounds([e.coordLeft.split(" ").reverse(),e.coordRight.split(" ").reverse()],{checkZoomRange:!0});this.submitSearch(a);break;case "user":this.ui.labelFields.children(".label-user").remove(),this.ui.labelFields.children(".label-add").before(this.labelTemplate(e)),this.submitSearch(a)}return this.hideDropdown()};e.prototype.removeLabel=function(a){a.preventDefault();
a.stopPropagation();$(a.currentTarget).parent().remove();this.ui.searchInput.children().focus();this.ui.logo.width(26<this.ui.search.outerHeight()?27:154);return this.submitSearch(a)};e.prototype.focusInput=function(a){a.preventDefault();a.stopPropagation();this.ui.labelAddButton.hide();this._setWidthInput();this.ui.searchInput.show();this.ui.searchOverlay.show();return this.ui.searchInput.children().val("").focus()};e.prototype.focusLabels=function(a){if($(a.target).hasClass("label-fields"))return this.focusInput(a)};
e.prototype.editInput=function(a){var b;a.preventDefault();a.stopPropagation();a=$(a.currentTarget);b=a.text().trim();a.remove();this.ui.labelAddButton.hide();this._setWidthInput();this.ui.searchInput.show();return this.ui.searchInput.children().val(b).focus()};e.prototype.clearSearchInput=function(a){a.preventDefault();$(a.currentTarget);this.ui.labelFields.children(".label-name, .label-place, .label-user, .label-tags, .label-new").remove();this.ui.logo.width(26<this.ui.search.outerHeight()?27:154);
return this.submitSearch(a)};e.prototype.submitSearch=function(a){var c,e,f,g,h,k=this;a&&(a.preventDefault(),a.stopPropagation());e=this.ui.labelFields.find(".label-place");g=this.ui.labelFields.find(".label-user");f=this.ui.labelFields.find(".label-tags");c=this.ui.itemTypeNav.find(".head-nav-current-item");a=e.data("left-corner");e=e.data("right-corner");!_.isEmpty(e)&&!_.isEmpty(a)&&(a=_.zipObject(["ln","lt"],_(a.split(" ")).map(function(a){return parseFloat(a)}).value()),a=JSON.stringify(a),
e=_.zipObject(["ln","lt"],_(e.split(" ")).map(function(a){return parseFloat(a)}).value()),e=JSON.stringify(e));h=this.ui.labelFields.find(".label-name").text().trim();g=g.data("id");f=_.map(f,function(a){return $(a).data("id")});c=c.data("models");b.updateSettings({user:g,tags:f.join(","),s:h,models:c,coord_left:a,coord_right:e});b.request("request",{url:b.API_BASE_URL+"/api/v1/yapens",type:"GET",context:this,successCallback:function(a){return k.trigger("update:multisearch",a,b.settings)},data:b.settings});
return this.ui.searchInput.children().val("")};e.prototype.hideDropdown=function(a){$(window).unbind("resize",$.proxy(this._setHeightSearchMenu,this));this.ui.dropSearch.hide();this.ui.dropSearch.find("li").removeClass("selected");this.ui.labelAddButton.show();this.ui.searchInput.hide();this.ui.searchInput.children().blur();this.ui.searchOverlay.hide();return this.ui.logo.width(30<this.ui.search.outerHeight()?27:154)};e.prototype.showDropdown=function(a,b){a=_.extend(a,{places:b.featureMember});_.isEmpty(_.flatten(_.values(a)))&&
(a={empty:!0});$(window).bind("resize",$.proxy(this._setHeightSearchMenu,this));this._setWidthInput();this.ui.dropSearch.html(this.multisearchDropdownTemplate(a));this.ui.searchOverlay.show();this.ui.dropSearch.show();return this._setHeightSearchMenu()};e.prototype.keyupInput=function(a){var b=this;this._onKeyDownSpecial(a);return this._delay(function(){var c;if(38!==a.which&&(40!==a.which&&13!==a.which&&27!==a.which&&8!==a.which)&&(c=b.ui.searchInput.children().val()))b.searchXHR=b.search(c,b.showDropdown,
b)},500)};e.prototype.showAddMenu=function(a){a.preventDefault();return $(a.currentTarget).toggleClass("opened")};e.prototype.showItemTypeMenu=function(a){a.preventDefault();a.stopPropagation();return this.ui.itemTypeNav.toggleClass("opened")};e.prototype.selectItemType=function(a){var b;b=$(a.currentTarget);if(!b.hasClass("head-nav-current-item"))return this.ui.itemTypeNav.children().removeClass("head-nav-current-item"),b.insertBefore(this.ui.itemTypeNav.children().first()),b.addClass("head-nav-current-item"),
this.submitSearch(a),this.model.set("searchModels",b.data("models"),{silent:!0}),this.ui.itemTypeNav.removeClass("opened")};e.prototype._onKeyDownSpecial=function(a){var b;switch(a.which){case 8:if(""===this.ui.searchInput.children().val())return this.ui.labelFields.children(".label:visible").last().remove();break;case 13:void 0!==this.searchXHR&&this.searchXHR.abort();clearTimeout(0);a.preventDefault();a.stopPropagation();$(".selected",this.ui.dropSearch).length?$(".selected a",this.ui.dropSearch).click():
this.ui.searchInput.children().val()&&(b={type:"name",name:this.ui.searchInput.children().val()},this.ui.labelFields.children(".label-name").remove(),this.ui.labelFields.children(".label-add").before(this.labelTemplate(b)),this.submitSearch(a));this.hideDropdown();break;case 27:a.preventDefault();a.stopPropagation();this.hideDropdown();break;case 38:a.preventDefault();a.stopPropagation();this._selectDropLi(-1);break;case 40:a.preventDefault(),a.stopPropagation(),this._selectDropLi(1)}};e.prototype._selectDropLi=
function(a){var b,c;c=$("li:visible:has(a)",this.ui.dropSearch).filter(function(){return!0});if(c.filter(".selected").length){b=c.index(c.filter(".selected"));if(b<c.length-1){if(1===a)return c.filter(".selected:first").removeClass("selected"),c.eq(b+1).addClass("selected").focus();c.filter(".selected:first").removeClass("selected");return c.eq(b-1).addClass("selected").focus()}c.filter(".selected:first").removeClass("selected");return 1===a?c.eq(0).addClass("selected").focus():c.eq(b-1).addClass("selected").focus()}return 1===
a?c.eq(0).addClass("selected").focus():c.last().addClass("selected").focus()};e.prototype._setWidthInput=function(){var a,b,c;b=this.ui.labelFields.width()-6;a=c=0;this.ui.labelFields.children(".label:visible").each(function(b){b=$(this).offset();b.top!==a&&(a=b.top,c=0);return c+=$(this).outerWidth(!0)});return this.ui.searchInput.width(b-c-4)};e.prototype._setHeightSearchMenu=function(){var a,b,c,e;b=this.ui.dropSearch;b.css("height","auto");a=b.outerHeight();c=b.offset().top-$(window).scrollTop();
e=$(window).height();return e<a+c+60?b.height(e-c-60):b.css("height","auto")};e.prototype._delay=function(){var a;a=0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();e.prototype.search=function(a,c,e){var f=this;b.Map.geocode(a,{json:!0}).then(function(g){return f.searchXHR=b.request("request",{url:b.API_BASE_URL+"/api/v1/search",type:"GET",context:e,successCallback:c,params:{geoObjectCollection:g?g.GeoObjectCollection:{}},data:{s:a}})});return this.searchXHR};return e}(Marionette.ItemView)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Common.StubView=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.Common.StubView")};c.prototype.modelEvents={change:"render"};return c}(Marionette.ItemView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.AddToCollectionView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initialize AddToCollectionView");_.bindAll(this,"render");this.user=b.user;return this.listenTo(this.user,"change:collections",
this.render)};e.prototype.template=Templates.AddToCollectionView;e.prototype.id="new-collection";e.prototype.ui={inputName:"#input-add-new-name",inputDescription:"#input-add-new-desc",closeButton:".p-close"};e.prototype.events={"click .p-close":"hidePopup","click .custom-checkbox":"toggleCheckbox","click .a-add-collection":"createSet","click .a-to-collection":"addToSet"};e.prototype.onShow=function(){return this.ui.inputName.focus()};e.prototype.hidePopup=function(a){a.preventDefault();return b.popup.close()};
e.prototype.toggleCheckbox=function(a){a=$(a.currentTarget);return $("input[type=checkbox]",a).is(":checked")?a.addClass("checked"):a.removeClass("checked")};e.prototype.createSet=function(a){var c;a.preventDefault();a.stopPropagation();c=this.ui.inputName.val().trim();a=this.ui.inputDescription.val().trim();if(!_.isEmpty(c)&&!_.isEmpty(a))return a=new b.Points.Set({name:c,description:a}),a.create(this.successCreateSet,this);if(_.isEmpty(c))return this.ui.inputName.focus();if(_.isEmpty(a))return this.ui.inputDescription.focus()};
e.prototype.addToSet=function(a){var b,c=this;a.preventDefault();a.stopPropagation();b=_.map($("[type=checkbox]:checked"),function(a){return $(a).data("id")});if(!_.isEmpty(b))return $.when.apply(this,_.map(b,this.model.addToSet,this.model)).done(function(a){var e,f;e=_.isArray(a)?arguments:[arguments];f=_(e).every(function(a){return"success"===a[1]});e=_(e).map(function(a){return a[0]});if(f)return c.successAddToSet(e.value(),b)})};e.prototype.successAddToSet=function(a,b){console.log(a,b);return this.ui.closeButton.click()};
e.prototype.successCreateSet=function(a,b){console.log(a,b);this.ui.inputDescription.val("");this.ui.inputName.val("");this.user.get("collections").push({id:b.get("id"),name:b.get("name")});return this.user.trigger("change:collections")};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.PointAddView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initialize PointAddView");this.model=new b.Points.Point;this.model.on("invalid",this.showError,this);this.model.on("valid",this.savePoint,
this);this.labelTemplate=Templates.LabelTemplate;b.request("request",{url:"/api/v1/tags/",context:this,successCallback:this.setLabels});return this.listenTo(b.Map,"load:yandexmap",this.onInitMap)};e.prototype.template=Templates.PointAddView;e.prototype.ui={form:"#pointAddForm",addButton:"#a-add-point",inputName:"input[name=name]",inputAddress:"input[name=address]",inputDescription:"input[name=description]",inputTags:"input[name=tags]",inputPhotos:"input[name=img]",photoList:"#item-photo-list",photoProgress:".photo-loading",
requireLabels:".ctp-labels",moreLabels:".ctp-more-labels",labelAddButton:".label-add",labelsHeader:".add-place-choose-type-place h4",selectedLabels:".selected-labels",placePhotos:".place-photos"};e.prototype.events=function(){return{"click .p-close":"hidePopup","keyup #add-new-place-address":"searchLocation","change #add-new-place-name, #add-new-place-address, #add-new-place-description":"setValue","focus .drop-filter input:text":"showDropList","blur .drop-filter input:text":"hideDropList","mousedown .drop-results > li":"addFromList",
"click #a-add-point":"validatePoint","click .ctp-item-label":"addRequireLabel","click .ctp-more-labels .label-place":"addMoreLabel","click h4 .remove-label":"showRequireLabel","click .selected-labels .remove-label":"removeLabel","click .clear-selected":"clearLabels","click .selected-labels":"showInput","change .load-photo input:file":"loadImage","click .remove-photo":"removePhoto"}};e.prototype.hidePopup=function(){return b.popup.close()};e.prototype.onRender=function(){this.ui.placePhotos.data("slider",
b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");return this.photoSlider.init({root:this.ui.placePhotos,visible:6})};e.prototype.onInitMap=function(a){var b,c=this;if(void 0!==window.ymaps||this.map)return this.map=a,this.popupMap=new ymaps.Map("popup-map-place",{center:a.getCenter(),zoom:11}),this.popupMap.controls.add("zoomControl"),b={},this.popupMap.events.add("click",function(a){c.popupMap.geoObjects.remove(b);a=a.get("coordPosition");c.popupMap.geoObjects.each(function(a){if("map-point"===
a.properties.get("id"))return c.popupMap.geoObjects.remove(a),!1});b=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",iconImageSize:[32,36],iconImageOffset:[-16,-38]});c.popupMap.geoObjects.add(b);ymaps.geocode(a).then(function(a){var b;b=!0;a.geoObjects.each(function(a){b&&$("#add-new-place-address").val(a.properties.get("metaDataProperty.GeocoderMetaData.text"));return b=!1});return c.$el.find("#add-new-place-address").change()});c.popupMap.setCenter(a,14,{checkZoomRange:!0,
duration:1E3});return c.model.set({longitude:a[1],latitude:a[0]},{silent:!0})})};e.prototype.setLabels=function(a){this.model.set({requireLabels:a.filter(function(a){return 0===a.level}),additionalLabels:a.filter(function(a){return 1===a.level}),otherLabels:a.filter(function(a){return 2===a.level})});return this.onInitMap(b.Map.yandexmap)};e.prototype.addRequireLabel=function(a){var b,c,e;a.preventDefault();b=$(a.currentTarget);this.ui.requireLabels.hide();a=this.ui.labelsHeader.text();c=b.find(".placemark").data("label-id");
b=b.find(".ctp-item-title").text();e=this.model.get("additionalLabels").filter(function(a){a.type="place";return a.parent===c});this.ui.labelsHeader.html(""+a+" <div class='label label-required'>"+b+"<button class='remove-label'></button></div>");this.model.get("tags").push({id:c,name:b,"class":"require"});this.ui.moreLabels.find(".labels-field").html(this.labelTemplate({labels:e}));return this.ui.moreLabels.slideDown(200)};e.prototype.showRequireLabel=function(a){a.preventDefault();a.stopPropagation();
this.clearLabels(a);this.ui.requireLabels.show();this.ui.moreLabels.hide();this.ui.labelsHeader.find("div").remove();return this.model.set("tags",[],{silent:!0})};e.prototype.addMoreLabel=function(a){a.preventDefault();a=$(a.currentTarget);this.ui.selectedLabels.prepend(a);return this.model.get("tags").push({id:a.data("label-id"),name:a.text(),"class":"other"})};e.prototype.removeLabel=function(a){var b;a.preventDefault();a.stopPropagation();b=$(a.currentTarget).parent();this.ui.moreLabels.find(".labels-field").append(b);
a=this.model.get("tags");return this.model.set({tags:a.filter(function(a){return a.id!==b.data("label-id")})},{silent:!0})};e.prototype.clearLabels=function(a){a.preventDefault();this.ui.moreLabels.find(".labels-field").append(this.ui.selectedLabels.find(".label-place"));a=this.model.get("tags");this.ui.labelAddButton.show();this.ui.inputTags.parent().hide();return this.model.set({tags:a.filter(function(a){return"require"===a["class"]})},{silent:!0})};e.prototype.showInput=function(a){a.preventDefault();
this.ui.inputTags.parent().css("display","inline");this.ui.labelAddButton.hide();return this.ui.inputTags.focus()};e.prototype.loadImage=function(a){var b=this;a.preventDefault();if(0!==a.currentTarget.files.length)return this.ui.form.ajaxSubmit({url:"/photos/add",type:"POST",dataType:"json",clearForm:!1,success:function(a){b.model.get("imgs").push(a[0]);b.ui.photoList.html(Templates.ProgressImage(b.model.toJSON()));b.ui.photoProgress.hide();return b.photoSlider.reinit()},beforeSend:function(a){return b.ui.photoProgress.show()},
uploadProgress:function(a,c,e,f){b.ui.photoProgress.find(".value").css("width",f+"%");return b.ui.photoProgress.find(".progress-count").text(f+" %")}})};e.prototype.removePhoto=function(a){a.preventDefault();return console.log(a.target)};e.prototype.setValue=function(a){var b;b=$.trim($(a.currentTarget).val());a=$(a.currentTarget).attr("data-key");return this.model.set(a,b,{silent:!0})};e.prototype.searchLocation=function(a){var b;a.preventDefault();a=$(a.currentTarget);if(0<a.val().length)return b=
a.closest(".drop-filter").find(".drop-results"),ymaps.geocode(a.val(),{boundedBy:this.map.getBounds(),strictBounds:!1}).then(function(a){var c;c=[];b.find("li").remove();a.geoObjects.each(function(a){var b,d,e,f;e=a.properties;f=e.get("text");d=e.get("name");b=e.get("description");e=$.map(e.get("metaDataProperty.PSearchObjectMetaData")&&e.get("metaDataProperty.PSearchObjectMetaData.Tags")||[],function(a){return a.tag});a=a.geometry.getCoordinates();return c.push({name:f||[d,b].concat(e).filter(Boolean).join(", "),
coords:JSON.stringify(a)})});return _.each(c,function(a){return b.append("<li data-coords='"+a.coords+"'>"+a.name+"</li>")})})};e.prototype.showDropList=function(a){return $(a.currentTarget).closest(".drop-filter").find(".drop-results").show()};e.prototype.hideDropList=function(a){$(a.currentTarget).closest(".drop-filter").find(".drop-results").hide().css("z-index",20);return $(a.currentTarget).closest(".input-line").css("z-index",1)};e.prototype.addFromList=function(a){var b,c,e,f;b=$(a.currentTarget).text();
$(a.currentTarget).closest(".drop-filter").find("input:text").val(b).change();a=$(a.currentTarget).data("coords");if(!_.isEmpty(a))return f=this,this.popupMap.geoObjects.each(function(a){if("map-point"===a.properties.get("id"))return f.popupMap.geoObjects.remove(a),!1}),e=new ymaps.Placemark(a,{id:"map-point"},{iconImageHref:"/media/icons/place-none.png",iconImageSize:[32,36],iconImageOffset:[-16,-38]}),c=a[1],b=a[0],this.popupMap.setCenter(a,14,{checkZoomRange:!0,duration:1E3}),this.model.set({longitude:c,
latitude:b},{silent:!0}),this.popupMap.geoObjects.add(e)};e.prototype.validatePoint=function(a){a.preventDefault();this.model.set();if(this.model.isValid())return this.$el.find("[data-key]").removeClass("validation-error"),this.model.trigger("valid")};e.prototype.savePoint=function(){return b.request("request",{url:b.API_BASE_URL+"/api/v1/points/",context:this,successCallback:this.successSave,type:"POST",data:{name:this.model.get("name"),address:this.model.get("address"),description:this.model.get("description"),
"tags[]":_.pluck(this.model.get("tags"),"id"),"imgs[]":_.pluck(this.model.get("imgs"),"id"),longitude:this.model.get("longitude"),latitude:this.model.get("latitude"),ypi:0,priority:0}})};e.prototype.showError=function(a,b){var c,e,f,g;this.$el.find("[data-key]").removeClass("validation-error");g=[];e=0;for(f=b.length;e<f;e++)c=b[e],g.push(this.$el.find("[data-key="+c+"]").addClass("validation-error"));return g};e.prototype.successSave=function(a){var c;c=new b.Points.Point(a);c.id=a.id;c.set("type_of_item",
"point");this.collection.add(c);this.collection.trigger("reset");b.popup.close();return console.log(c,"success")};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.PointDetailView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initialize PointDetailView");this.bigPhotoTemplate=Templates.BigPhoto;return this.user=b.user};e.prototype.template=Templates.PointDetailView;
e.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos",commentArea:".toggleArea textarea",map:".map"}};e.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto","click #big-photo > .bp-photo":"nextPhoto","click #right-panel .a-like":"like","click #commentForm textarea":"focusCommentTextarea","click .a-remove-comment":"showRemoveCommentPopover",
"click .item-comment .a-yes":"removeComment","click .item-comment .a-no, .item-comment .p-close":"hideRemoveCommentPopover","submit #commentForm":"submitCommentForm","submit #reviewForm":"submitReviewForm","click .bp-photo .a-like":"likePhoto","change #addPhotoForm input:file":"addPhoto","click .remove-photo":"removePhoto","click a[href=#tab-map]":"renderMap","click .a-add-collection":"addCollection","click .a-complaint-comment":"complaintComment"}};e.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,
150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON()}};e.prototype.onRender=function(){var a=this;this.$el.find("[data-toggle=tooltip]").tooltip();this.ui.placePhotos.data("slider",b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.photoSlider.init({root:this.ui.placePhotos,visible:4});_.isEmpty(this.model.get("imgs"))||this.showPhoto();this._renderSocial();return this.$(".js-vote").rating({fx:"full",image:"/static/images/rating.png",loader:"/static/images/ajax-loader3.gif",
stars:10,click:function(b){return a.rating=b}})};e.prototype._renderSocial=function(){void 0!==window.FB&&FB.XFBML.parse();if(void 0!==window.VK)return VK.Widgets.Like("vk_like_point",{type:"mini",pageTitle:this.model.get("name"),pageDescription:this.model.get("description"),text:"\u042f\u0441\u0435\u043d\u041f\u0443\u0442\u044c \u0437\u043d\u0430\u0435\u0442 \u0432\u0441\u0435 - "+this.model.get("name")},1E3+this.model.get("id"))};e.prototype.renderMap=function(a){var b,c;if(!this.map)return this.ui.map.height(500),
a=[this.model.get("latitude"),this.model.get("longitude")],b=null!=(c=this.model.get("icon"))?c:"/media/icons/place-none.png",this.map=new ymaps.Map("popup-map",{center:a,zoom:14}),c=new ymaps.Placemark(a,{id:this.model.get("id")},{iconImageHref:b,iconImageSize:[32,36],iconImageOffset:[-16,-38]}),this.map.geoObjects.add(c)};e.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");
b.toggleClass("open");return b.hasClass("open")?b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};e.prototype.showPhoto=function(a){var c,e;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),a=$(a.currentTarget),e=a.data("photo-id"),c=_.find(this.model.get("imgs"),function(a){return a.id===e})):this.options.photoId?(e=parseInt(this.options.photoId,10),c=_.find(this.model.get("imgs"),function(a){return a.id===e})):
(c=this.model.get("imgs")[0],e=c.id);a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===e});$(a).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(c,{user:this.user.toJSON()})));this.ui.bigPhoto.find("[data-toggle=tooltip]").tooltip();this.options.photoId=e;return b.Points.router.navigate($(a).children().attr("href"))};e.prototype.nextPhoto=function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===
b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")&&!this.photoSlider.next.hasClass("disabled")?this.photoSlider.move(1):a||this.photoSlider.reinit();this.options.photoId=a;return this.showPhoto()};e.prototype.focusCommentTextarea=function(a){a.preventDefault();return $(a.currentTarget).parent().addClass("focus")};e.prototype.addCollection=function(a){a.preventDefault();$(a.currentTarget);a=new b.Points.AddToCollectionView({model:this.model});return b.popup.regions.alerts.show(a)};
e.prototype.complaintComment=function(a){a.preventDefault();$(a.currentTarget);a=new b.Common.ComplaintCommentView({model:this.model});return b.popup.regions.alerts.show(a)};e.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};e.prototype.likePhoto=function(a){var b;a.preventDefault();a.stopPropagation();a=$(a.currentTarget);b=a.data("photo-id");return this.model.likePhoto(a,b,this.successLikePhoto,this)};e.prototype.submitCommentForm=
function(a){var b;a.preventDefault();$(a.currentTarget);if(b=this.$("textarea[name=comment]").val())return a=this.$("textarea[name=comment]").data("photo-id"),this.model.addCommentPhoto(a,b,this.successAddComment,this)};e.prototype.submitReviewForm=function(a){a&&a.preventDefault();$(a.currentTarget);a=this.$("textarea[name=review]").val()||"";if(this.rating)return this.$("textarea[name=review]").css("background","url(/static/images/ajax-loader.gif) no-repeat center"),this.model.addReview(a,this.rating,
this.successAddReview,this)};e.prototype.hideRemoveCommentPopover=function(a){a.preventDefault();return $(a.currentTarget).parents(".popover").hide()};e.prototype.showRemoveCommentPopover=function(a){$(a.currentTarget).popover("toggle");return a.preventDefault()};e.prototype.removeComment=function(a){a.preventDefault();a=$(a.currentTarget).parents(".item-comment").data("comment-id");return this.model.removeCommentPhoto(a,this.successRemoveComment,this)};e.prototype.addPhoto=function(a){a.preventDefault();
$(a.currentTarget);a=$("#addPhotoForm")[0];a=new FormData(a);return this.model.addPhoto(a,this.successAddPhoto,this)};e.prototype.removePhoto=function(a){a.preventDefault();a.stopPropagation();a=$(a.currentTarget).parents(".item-photo").data("photo-id");return this.model.removePhoto(a,this.successRemovePhoto,this)};e.prototype.successLike=function(a,b){var c;c=a[0];this.model.set({isliked:c.isliked,likes_count:c.likes_count});return b.hasClass("marked")?this.user.set("count_liked_objects",this.user.get("count_liked_objects")-
1):this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};e.prototype.successLikePhoto=function(a,b){var c,e,f,g,h,m,r=this;m=a[0];r=this;e=this.model.get("imgs");c=_.find(e,function(a){return a.id===m.id});g=_.indexOf(e,c);e.splice(g,1);h=c.likeusers;b.hasClass("marked")?(f=_.find(h,function(a){return a.id===r.user.get("id")}),f=_.indexOf(h,f),h.splice(f,1),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1)):(h.push(this.user.toJSON()),this.user.set("count_liked_objects",
this.user.get("count_liked_objects")+1));c.likeusers=h;e.splice(g,0,c);this.model.set("imgs",e);this.options.photoId=c.id;return this.model.trigger("change")};e.prototype.successAddComment=function(a){var b;b=this.$("textarea").data("photo-id");_.find(this.model.get("imgs"),function(a){return a.id===b}).comments.push(_.extend(a[0],{author:this.user.toJSON()}));this.user.set("count_commented_objects",this.user.get("count_commented_objects")+1);return this.model.trigger("change")};e.prototype.successRemoveComment=
function(a,b){var c,e,f,g;g=this.$("textarea").data("photo-id");f=_.find(this.model.get("imgs"),function(a){return a.id===g});e=f.comments;c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,1);f.comments=e;this.user.set("count_commented_objects",this.user.get("count_commented_objects")-1);return this.model.trigger("change")};e.prototype.successAddPhoto=function(a){var b;b=this.model.get("imgs");b.push(a[0]);this.model.set("imgs",b);return this.model.trigger("change")};e.prototype.successRemovePhoto=
function(a,b){var c,e;e=this.model.get("imgs");c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,1);this.model.set("imgs",e);this.options.photoId=e[0].id;return this.model.trigger("change")};e.prototype.successAddReview=function(a){var b=this;return this.model.fetch({success:function(){return b.$("a[href=#tab-reviews]").click()}})};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.PointItemView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initializing Yapp.Points.PointItemView");return this.user=b.user};e.prototype.tagName="article";e.prototype.className="item";e.prototype.template=
Templates.PointItemView;e.prototype.modelEvents={change:"render"};e.prototype.events={"click .photo .a-like":"like","click .photo .a-collection":"addToCollection","click .yp-title":"toggleYpInfo","click .yp-info":"toggleYpInfo"};e.prototype.ui={ypInfo:".yp-info",ypTitle:".yp-title"};e.prototype.templateHelpers=function(){return{user:this.user.toJSON()}};e.prototype.onBeforeRender=function(){return"set"===this.model.get("type_of_item")?this.$el.addClass("item-collection"):this.$el.addClass("item-place")};
e.prototype.onClose=function(){console.log("onClose item trigger");return this.remove()};e.prototype.like=function(a){if(this.user.get("authorized"))return a.preventDefault(),a=$(a.currentTarget),this.model.like(a,this.successLike,this);b.vent.trigger("user:notauthorized")};e.prototype.successLike=function(a,b){var c,e,f;f=this;e=this.model.get("likeusers");if(b.hasClass("marked"))return c=_.find(e,function(a){return a.id===f.user.id}),c=_.indexOf(e,c),e.splice(c,1),this.model.set("likeusers",e),
this.model.set("likes_count",this.model.get("likes_count")-1),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1);e.push(this.user);this.model.set("likes_count",this.model.get("likes_count")+1);this.model.set("likesers",e);return this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1)};e.prototype.addToCollection=function(a){if(this.user.get("authorized"))return a.preventDefault(),$(a.currentTarget),a=new b.Points.AddToCollectionView({model:this.model}),
b.popup.show(a);b.vent.trigger("user:notauthorized")};e.prototype.toggleYpInfo=function(a){this.ui.ypInfo.toggle();return this.ui.ypTitle.toggle()};return e}(Marionette.ItemView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.PointListView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.template=Templates.PointListView;e.prototype.className="items";e.prototype.id="items";e.prototype.itemView=b.Points.PointItemView;e.prototype.emptyView=b.Points.PointEmptyView;
e.prototype.initialize=function(){console.log("initializing Yapp.Points.PointListView");_.bindAll(this,"onShow","updateCollection");this.listenTo(b.Common.headerView,"update:multisearch",this.updateCollection,this.extraParams=b.settings);return this.infiniScroll=new Backbone.InfiniScroll(this.collection,{success:this.onShow,scrollOffset:350,includePage:!0,extraParams:this.extraParams})};e.prototype.onRender=function(){console.log("onRender trigger");return $(window).trigger("scroll")};e.prototype.onClose=
function(){console.log("onClose trigger");this.wall.destroy();this.infiniScroll.destroy();return this.remove()};e.prototype.onShow=function(){console.log("onShow trigger");b.Points.trigger("update:collection",this.collection);this.$el.find("[data-toggle=tooltip]").tooltip();this.wall?this.wall.reload():this.wall=new Masonry(this.el,{columnWidth:241,isFitWidth:!0});if(!(document.body.scrollHeight>document.body.clientHeight))return $(window).trigger("scroll")};e.prototype.onCompositeCollectionRendered=
function(){console.log("onCompositeCollectionRendered trigger");this.$el.find("[data-toggle=tooltip]").tooltip();if(this.wall)return this.wall.reload()};e.prototype.updateCollection=function(a,c){var e;this.extraParams=_.extend(this.extraParams,c);e=new b.Points.PointCollection(a);this.collection.reset(e.models);e.reset();this.infiniScroll.destroy();this.infiniScroll=new Backbone.InfiniScroll(this.collection,{success:this.onShow,scrollOffset:350,includePage:!0,extraParams:this.extraParams});return b.Points.trigger("update:collection",
this.collection)};return e}(Marionette.CompositeView)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Points.PointPanelView=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.Points.PointPanelView")};c.prototype.template=Templates.PointPanelView;c.prototype.modelEvents={change:"render"};
c.prototype.className="tabs";c.prototype.tagName="menu";c.prototype.templateHelpers=function(){return{active:this.options.content_type||"ypi"}};return c}(Marionette.ItemView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.SetDetailView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){var a;console.log("initialize SetDetailView");this.bigPhotoTemplate=Templates.BigPhoto;this.user=b.user;a=parseInt(this.options.pointId,10);
return this.activePoint=_.find(this.model.get("points"),function(b){return b.id===a})||this.model.get("points")[0]};e.prototype.template=Templates.SetDetailView;e.prototype.className="popup p-collection";e.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos",map:".map"}};e.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto",
"click #big-photo > .bp-photo":"nextPhoto","click li.choose_place > a":"choosePlace","click .stp-like":"like","click #commentForm textarea":"focusCommentTextarea","click .a-remove-comment":"removeComment","submit #commentForm":"submitCommentForm","click .bp-photo .a-like":"likePhoto","change #addPhotoForm input:file":"addPhoto","click .remove-photo":"removePhoto","click a[href=#tab-map]":"renderMap"}};e.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,
150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON(),activePoint:this.activePoint}};e.prototype.onRender=function(){this.ui.placePhotos.data("slider",b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.$el.find("[data-toggle=tooltip]").tooltip();this.showPhoto();return this.photoSlider.init({root:this.ui.placePhotos,visible:4})};e.prototype.renderMap=function(a){var b,c;if(!this.map)return this.ui.map.height(500),a=[this.activePoint.latitude,
this.activePoint.longitude],b=null!=(c=this.activePoint.icon)?c:"/media/icons/place-none.png",this.map=new ymaps.Map("popup-map",{center:a,zoom:14}),c=new ymaps.Placemark(a,{id:this.model.get("id")},{iconImageHref:b,iconImageSize:[32,36],iconImageOffset:[-16,-38]}),this.map.geoObjects.add(c)};e.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?
b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};e.prototype.showPhoto=function(a,c){var e,f;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),e=$(a.currentTarget),c=e.data("photo-id"),f=_.find(this.activePoint.imgs,function(a){return a.id===c})):c?(c=parseInt(c,10),f=_.find(this.activePoint.imgs,function(a){return a.id===c})):this.options.photoId?(c=parseInt(this.options.photoId,10),f=_.find(this.activePoint.imgs,
function(a){return a.id===c}),this.options.photoId=!1):(c=parseInt(this.options.photoId,10),f=_.find(this.activePoint.imgs,function(a){return a.id===c}),f=this.activePoint.imgs[0],c=f.id);e=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===c});$(e).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(f,{user:this.user.toJSON()})));this.ui.bigPhoto.find("[data-toggle=tooltip]").tooltip();return b.Points.router.navigate($(e).children().attr("href"))};e.prototype.nextPhoto=
function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")?this.photoSlider.move(1):this.photoSlider.next.is(":visible")&&this.photoSlider.reinit();return this.showPhoto(null,a)};e.prototype.choosePlace=function(a){var b;a.preventDefault();b=$(a.currentTarget).data("id");this.activePoint=_.find(this.model.get("points"),function(a){return a.id===
b});this.model.trigger("change");return delete this.map};e.prototype.focusCommentTextarea=function(a){a.preventDefault();return $(a.currentTarget).parent().addClass("focus")};e.prototype.unfocusCommentTextarea=function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");return a.val("")};e.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};e.prototype.successLike=function(a,b){var c,e,f=this;e=this.model.get("likeusers");
b.hasClass("marked")?(c=_.find(e,function(a){return a.id===f.user.get("id")}),c=_.indexOf(e,c),e.splice(c,1),console.log(e),this.model.set({likeusers:e,likes_count:this.model.get("likes_count")-1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1)):(e.push(this.user.toJSON()),console.log(e),this.model.set({likesers:e,likes_count:this.model.get("likes_count")+1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1));return this.model.trigger("change")};
e.prototype.likePhoto=function(a){var b;a.preventDefault();a.stopPropagation();a=$(a.currentTarget);b=a.data("photo-id");return this.model.likePhoto(a,b,this.successLikePhoto,this)};e.prototype.submitCommentForm=function(a){var b;a.preventDefault();$(a.currentTarget);if(b=this.$("textarea").val())return a=this.$("textarea").data("photo-id"),this.model.addCommentPhoto(a,b,this.successAddComment,this)};e.prototype.removeComment=function(a){a.preventDefault();a=$(a.currentTarget).parents(".item-comment").data("comment-id");
return this.model.removeCommentPhoto(a,this.successRemoveComment,this)};e.prototype.addPhoto=function(a){a.preventDefault();$(a.currentTarget);a=$("#addPhotoForm")[0];a=new FormData(a);return this.model.addPhoto(a,this.successAddPhoto,this)};e.prototype.removePhoto=function(a){a.preventDefault();a.stopPropagation();a=$(a.currentTarget).parents(".item-photo").data("photo-id");return this.model.removePhoto(a,this.successRemovePhoto,this)};e.prototype.successLikePhoto=function(a,b){var c,e,f,g,h,m,r=
this;m=a[0];e=this.activePoint.imgs;c=_.find(e,function(a){return a.id===m.id});g=_.indexOf(e,c);e.splice(g,1);h=c.likeusers;b.hasClass("marked")?(f=_.find(h,function(a){return a.id===r.user.get("id")}),f=_.indexOf(h,f),h.splice(f,1),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1)):(h.push(this.user.toJSON()),this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1));c.likeusers=h;e.splice(g,0,c);this.activePoint.imgs=e;this.options.photoId=c.id;return this.model.trigger("change")};
e.prototype.successAddComment=function(a){var b,c;c=this.$("textarea").data("photo-id");b=_.find(this.activePoint.imgs,function(a){return a.id===c});b.comments.push(_.extend(a[0],{author:this.user.toJSON()}));this.options.photoId=b.id;this.user.set("count_commented_objects",this.user.get("count_commented_objects")+1);return this.model.trigger("change")};e.prototype.successRemoveComment=function(a,b){var c,e,f,g;g=this.$("textarea").data("photo-id");f=_.find(this.activePoint.imgs,function(a){return a.id===
g});e=f.comments;c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,1);f.comments=e;this.options.photoId=f.id;this.user.set("count_commented_objects",this.user.get("count_commented_objects")-1);return this.model.trigger("change")};e.prototype.successAddPhoto=function(a){this.activePoint.imgs.push(a[0]);return this.model.trigger("change")};e.prototype.successRemovePhoto=function(a,b){var c,e;e=this.activePoint.imgs;c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,
1);this.activePoint.imgs=e;this.options.photoId=e[0].id;return this.model.trigger("change")};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Routes.RouteDetailView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){var a,c;console.log("initialize RouteDetailView");this.bigPhotoTemplate=Templates.BigPhoto;this.user=b.user;c=parseInt(this.options.pointId,
10);return this.activePoint=(a=_.find(this.model.get("points"),function(a){return a.point.id===c}))?a.point:this.model.get("points")[0].point};e.prototype.template=Templates.RouteDetailView;e.prototype.className="popup p-collection";e.prototype.ui=function(){return{bigPhoto:"#big-photo",bigPhotoImg:"#big-photo > .bp-photo",allPhotos:".item-photo",placePhotos:".place-photos",map:".map"}};e.prototype.events=function(){return{"click .p-place-desc .a-toggle-desc":"moreDescription","click .photos-gallery .item-photo":"showPhoto",
"click #big-photo > .bp-photo":"nextPhoto","click li.choose_place > a":"choosePlace","click .stp-like":"like","click #commentForm textarea":"focusCommentTextarea","click .a-remove-comment":"removeComment","submit #commentForm":"submitCommentForm","click .bp-photo .a-like":"likePhoto","change #addPhotoForm input:file":"addPhoto","click .remove-photo":"removePhoto","click a[href=#tab-map]":"renderMap"}};e.prototype.templateHelpers=function(){return{headDescription:this.model.get("description").slice(0,
150),tailDescription:this.model.get("description").slice(150),user:this.user.toJSON(),activePoint:this.activePoint}};e.prototype.onRender=function(){this.ui.placePhotos.data("slider",b.Common.sliderPhotos);this.photoSlider=this.ui.placePhotos.data("slider");this.$el.find("[data-toggle=tooltip]").tooltip();this.showPhoto();return this.photoSlider.init({root:this.ui.placePhotos,visible:4})};e.prototype.renderMap=function(a){var b,c;if(!this.map)return this.ui.map.height(500),a=[this.activePoint.latitude,
this.activePoint.longitude],b=null!=(c=this.activePoint.icon)?c:"/media/icons/place-none.png",this.map=new ymaps.Map("popup-map",{center:a,zoom:14}),c=new ymaps.Placemark(a,{id:this.model.get("id")},{iconImageHref:b,iconImageSize:[32,36],iconImageOffset:[-16,-38]}),this.map.geoObjects.add(c)};e.prototype.moreDescription=function(a){var b;a.preventDefault();b=$(a.currentTarget);a=b.closest(".p-place-desc");$(".hellip",a).toggle();$(".more-desc",a).toggleClass("hidden");b.toggleClass("open");return b.hasClass("open")?
b.text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"):b.text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")};e.prototype.showPhoto=function(a,c){var e,f;this.ui.allPhotos.removeClass("current");a?(a.preventDefault(),e=$(a.currentTarget),c=e.data("photo-id"),f=_.find(this.activePoint.imgs,function(a){return a.id===c})):c?(c=parseInt(c,10),f=_.find(this.activePoint.imgs,function(a){return a.id===c})):this.options.photoId?(c=parseInt(this.options.photoId,10),f=_.find(this.activePoint.imgs,
function(a){return a.id===c}),this.options.photoId=!1):(c=parseInt(this.options.photoId,10),f=_.find(this.activePoint.imgs,function(a){return a.id===c}),f=this.activePoint.imgs[0],c=f.id);e=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===c});$(e).addClass("current");this.ui.bigPhoto.html(this.bigPhotoTemplate(_.extend(f,{user:this.user.toJSON()})));this.ui.bigPhoto.find("[data-toggle=tooltip]").tooltip();return b.Routes.router.navigate($(e).children().attr("href"))};e.prototype.nextPhoto=
function(a){var b;b=$(a.currentTarget).data("photo-id");a=_.find(this.ui.allPhotos,function(a){return $(a).data("photo-id")===b});(a=$(a).parent("li").next().children().data("photo-id"))&&this.photoSlider.next.is(":visible")?this.photoSlider.move(1):this.photoSlider.next.is(":visible")&&this.photoSlider.reinit();return this.showPhoto(null,a)};e.prototype.choosePlace=function(a){var b;a.preventDefault();b=$(a.currentTarget).data("id");this.activePoint=_.find(this.model.get("points"),function(a){return a.point.id===
b}).point;this.model.trigger("change");return delete this.map};e.prototype.focusCommentTextarea=function(a){a.preventDefault();return $(a.currentTarget).parent().addClass("focus")};e.prototype.unfocusCommentTextarea=function(a){a.preventDefault();a=$(a.currentTarget);a.parent().removeClass("focus");return a.val("")};e.prototype.like=function(a){a.preventDefault();a=$(a.currentTarget);return this.model.like(a,this.successLike,this)};e.prototype.successLike=function(a,b){var c,e,f=this;e=this.model.get("likeusers");
b.hasClass("marked")?(c=_.find(e,function(a){return a.id===f.user.get("id")}),c=_.indexOf(e,c),e.splice(c,1),console.log(e),this.model.set({likeusers:e,likes_count:this.model.get("likes_count")-1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1)):(e.push(this.user.toJSON()),console.log(e),this.model.set({likesers:e,likes_count:this.model.get("likes_count")+1}),this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1));return this.model.trigger("change")};
e.prototype.likePhoto=function(a){var b;a.preventDefault();a.stopPropagation();a=$(a.currentTarget);b=a.data("photo-id");return this.model.likePhoto(a,b,this.successLikePhoto,this)};e.prototype.submitCommentForm=function(a){var b;a.preventDefault();$(a.currentTarget);if(b=this.$("textarea").val())return a=this.$("textarea").data("photo-id"),this.model.addCommentPhoto(a,b,this.successAddComment,this)};e.prototype.removeComment=function(a){a.preventDefault();a=$(a.currentTarget).parents(".item-comment").data("comment-id");
return this.model.removeCommentPhoto(a,this.successRemoveComment,this)};e.prototype.addPhoto=function(a){a.preventDefault();$(a.currentTarget);a=$("#addPhotoForm")[0];a=new FormData(a);return this.model.addPhoto(a,this.successAddPhoto,this)};e.prototype.removePhoto=function(a){a.preventDefault();a.stopPropagation();a=$(a.currentTarget).parents(".item-photo").data("photo-id");return this.model.removePhoto(a,this.successRemovePhoto,this)};e.prototype.successLikePhoto=function(a,b){var c,e,f,g,h,m,r=
this;m=a[0];e=this.activePoint.imgs;c=_.find(e,function(a){return a.id===m.id});g=_.indexOf(e,c);e.splice(g,1);h=c.likeusers;b.hasClass("marked")?(f=_.find(h,function(a){return a.id===r.user.get("id")}),f=_.indexOf(h,f),h.splice(f,1),this.user.set("count_liked_objects",this.user.get("count_liked_objects")-1)):(h.push(this.user.toJSON()),this.user.set("count_liked_objects",this.user.get("count_liked_objects")+1));c.likeusers=h;e.splice(g,0,c);this.activePoint.imgs=e;this.options.photoId=c.id;return this.model.trigger("change")};
e.prototype.successAddComment=function(a){var b,c;c=this.$("textarea").data("photo-id");b=_.find(this.activePoint.imgs,function(a){return a.id===c});b.comments.push(_.extend(a[0],{author:this.user.toJSON()}));this.options.photoId=b.id;this.user.set("count_commented_objects",this.user.get("count_commented_objects")+1);return this.model.trigger("change")};e.prototype.successRemoveComment=function(a,b){var c,e,f,g;g=this.$("textarea").data("photo-id");f=_.find(this.activePoint.imgs,function(a){return a.id===
g});e=f.comments;c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,1);f.comments=e;this.options.photoId=f.id;this.user.set("count_commented_objects",this.user.get("count_commented_objects")-1);return this.model.trigger("change")};e.prototype.successAddPhoto=function(a){this.activePoint.imgs.push(a[0]);return this.model.trigger("change")};e.prototype.successRemovePhoto=function(a,b){var c,e;e=this.activePoint.imgs;c=_.find(e,function(a){return a.id===b});c=_.indexOf(e,c);e.splice(c,
1);this.activePoint.imgs=e;this.options.photoId=e[0].id;return this.model.trigger("change")};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Routes.RoutesSaveView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initialize RoutesSaveView");_.bindAll(this,"render");this.user=b.user;this.routeCollection=this.options.routeCollection;return this.route=
this.options.route};e.prototype.template=Templates.RoutesSaveView;e.prototype.id="new-collection";e.prototype.ui={inputName:"#input-add-new-name",inputDescription:"#input-add-new-desc",closeButton:".p-close"};e.prototype.events={"click .p-close":"hidePopup","click .a-add-collection":"createRoute"};e.prototype.onShow=function(){return this.ui.inputName.focus()};e.prototype.hidePopup=function(a){a.preventDefault();return b.popup.close()};e.prototype.createRoute=function(a){var c,e,f=this;a.preventDefault();
a.stopPropagation();e=this.ui.inputName.val().trim();c=this.ui.inputDescription.val().trim();a=JSON.stringify(this.route.requestPoints);_.map(this.routeCollection,function(a){return a.point.placemark=null});if(!_.isEmpty(e)&&!_.isEmpty(c))return this.model.set({name:e,description:c,points:this.routeCollection,coords:a}),this.model.save().success(function(a){b.Map.yandexmap.geoObjects.remove(f.route);f.model.collection.reset();f.model.clear();b.popup.close();return b.Routes.router.navigate("routes",
!0)});if(_.isEmpty(e))return this.ui.inputName.focus();if(_.isEmpty(c))return this.ui.inputDescription.focus()};e.prototype.successCreateRoute=function(a,b){console.log(a,b);this.ui.inputDescription.val("");this.ui.inputName.val("");this.user.get("collections").push({id:b.get("id"),name:b.get("name")});return this.user.trigger("change:collections")};return e}(b.Common.PopupView)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Routes.RoutesView=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initializing Yapp.Routes.RoutesView");_.bindAll(this,"addWayPoint","removeWayPoint","resortCollection","addPointToPath");this.user=
b.user;this.search=b.Common.headerView.search;this.collection=new b.Points.PointCollection;this.model.collection=this.collection;this.dropdownTemplate=Templates.RoutesDropdown;this.detailsPathTemplate=Templates.RoutesDetail;this.collection.on("add",this.addWayPoint,this);this.collection.on("remove",this.removeWayPoint,this);this.collection.on("resort:collection",this.resortCollection,this);return this.listenTo(b.vent,"click:addplacemark",this.addPointToPath)};e.prototype.template=Templates.RoutesView;
e.prototype.className="pap-wrap";e.prototype.ui={routeInput:".route-input",addPathButton:".btn-add-path",dropResults:".drop-search-a",addPathPlace:".ol-add-path-places",msgHint:".msg-hint",detailsPath:".details-path",actionButton:"#action-btn",lineAddPathButton:".line-add-path-btn"};e.prototype.events={"keydown input.route-input":"keyupInput","click .btn-add-path":"buildPath","click .drop-search-a li.item-label":"addPointToPath","click .remove-item-path":"removePointFromPath","click .btn-clear-map":"clearMap",
"click .drop-filter-clear":"hideDropdown","click .btn-save":"savePath"};e.prototype.modelEvents={change:"render"};e.prototype.initBar=function(){var a=this;_.each(this.model.get("points"),function(c){c.point.unid=c.point.id;return a.collection.add(new b.Points.Point(c.point))});return b.Map.mapDeferred.then(function(){a.options.pointId&&a.addPointToPath();if(!_.isEmpty(a.model.get("points")))return a.collection.each(function(b){return a.ui.addPathPlace.append('<li data-point-id="'+b.get("id")+'">\n  <h4>'+
b.get("name")+"</h4>\n  <p>"+b.get("address")+'</p>\n  <input type="button" value=\'\' class="remove-item-path" data-point-id="'+b.get("id")+'">\n</li>')}),a.$(".btn-add-path").click()})};e.prototype.onShow=function(){b.Map.mapDeferred.then(function(){return b.Map.mapEvents.removeAll()});$("body").addClass("page-map");$("#header").hide();$("#panel-add-path").show();this._dragPoints();return this.initBar()};e.prototype.onClose=function(){$("body").removeClass("page-map");$("#header").show();$("#panel-add-path").hide();
this.collection.remove(this.collection.models);if(this.route)return b.Map.yandexmap.geoObjects.remove(this.route)};e.prototype.templateHelpers=function(){return{user:this.user.toJSON()}};e.prototype.hideDropdown=function(a){this.ui.dropResults.hide();this.ui.dropResults.empty();return this.ui.routeInput.val("")};e.prototype.showDropdown=function(a,b){a.tags=a.users=[];a=_.extend(a,{places:b.featureMember});_.isEmpty(_.flatten(_.values(a)))&&(a={empty:!0});this.ui.dropResults.html(this.dropdownTemplate(a));
return this.ui.dropResults.show()};e.prototype.keyupInput=function(a){var b=this;this._onKeyDownSpecial(a);return this._delay(function(){var c;if(38!==a.which&&(40!==a.which&&13!==a.which&&27!==a.which&&8!==a.which)&&(c=b.ui.routeInput.val()))b.searchXHR=b.search(c,b.showDropdown,b)},500)};e.prototype.buildPath=function(a){var c=this;a&&a.preventDefault();if(this.ui.addPathButton.hasClass("disabled"))this.ui.addPathButton.tooltip("show"),setTimeout(function(){c.ui.addPathButton.tooltip("hide");return c.ui.addPathButton.tooltip("destroy")},
1200),this.ui.addPathButton.addClass("disabled");else return this.route&&b.Map.yandexmap.geoObjects.remove(this.route),this.listeners&&this.listeners.removeAll(),a=_.isEmpty(this.model.get("coords"))?_(this.collection.models).map(function(a){return[a.get("latitude"),a.get("longitude")]}).value():JSON.parse(this.model.get("coords")),this.model.set("coords",[],{silent:!0}),b.Map.route(a).then(function(a){c.route=c.buildDetailPath(a);b.Map.yandexmap.geoObjects.add(c.route);c.route.editor.start({editWayPoints:!1});
c.listeners=c.route.events.group();c.listeners.add("update",function(a){return c.buildDetailPath(c.route)});c.ui.lineAddPathButton.hide();c.ui.actionButton.show();return c.ui.addPathButton.removeClass("disabled")})};e.prototype.buildDetailPath=function(a){var b,c,e,f,g,h,m,r,n,t,p,w,u;_.isEmpty(this.model.get("points"))||a.options.set("mapStateAutoApply",!0);a.getWayPoints().options.set("visible",!1);m=a.getPaths();h=m.getLength();c=[];w=_.range(h);r=0;for(t=w.length;r<t;r++){g=w[r];b=this.collection.models[g];
e=m.get(g);f=e.getSegments();u=[];n=0;for(p=f.length;n<p;n++)e=f[n],u.push({street:e.getStreet(),direct:e.getHumanAction(),distance:e.getHumanLength(),time:e.getHumanTime(),coords:e.getCoordinates()[1]});c.push({position:g,point:b.toJSON(),segments:u})}c.push({point:this.collection.last().toJSON(),position:h});this.ui.detailsPath.html(this.detailsPathTemplate({ways:c,totalTime:a.getHumanTime(),totalDistance:a.getHumanLength()}));this.ui.detailsPath.show();this.routeCollection=c;return this.route=
a};e.prototype.createGeoPoint=function(a){var c,e,f;f=parseInt(_.uniqueId(1010),10);e=new b.Points.Point({unid:f});c=a.location.split(" ");return e.set({id:f,longitude:c[0],latitude:c[1],name:a.name,address:a.address})};e.prototype.addPointToPath=function(a){var c,e,f,g=this;a?(a.preventDefault(),a=$(a.currentTarget),c=a.data()):this.options.pointId&&(c={pointId:this.options.pointId},this.options.pointId=null);e=this.collection.length;"place"===c.type?(f=this.createGeoPoint(c),this.collection.add(f),
this.collection.length!==e&&(b.Map.yandexmap.panTo([parseFloat(f.get("latitude")),parseFloat(f.get("longitude"))]),this.ui.addPathPlace.append('<li data-point-id="'+f.get("id")+'">\n  <h4>'+f.get("name")+"</h4>\n  <p>"+f.get("address")+'</p>\n  <input type="button" value=\'\' class="remove-item-path" data-point-id="'+f.get("id")+'">\n</li>'))):(f=new b.Points.Point({unid:c.pointId}),this.collection.findWhere({id:c.pointId})||f.fetch({success:function(a){a=new ymaps.Placemark([f.get("latitude"),f.get("longitude")],
{id:"map-point"+f.get("id"),point:f.toJSON(),"class":"place-added"},{iconLayout:b.Map.pointIconLayout});f.set("placemark",a);g.collection.add(f);if(g.collection.length!==e)return b.Map.yandexmap.panTo([parseFloat(f.get("latitude")),parseFloat(f.get("longitude"))]),g.ui.addPathPlace.append('<li data-point-id="'+f.get("id")+'">\n  <h4>'+f.get("name")+"</h4>\n  <p>"+f.get("address")+'</p>\n  <input type="button" value=\'\' class="remove-item-path" data-point-id="'+f.get("id")+'">\n</li>')}}));return this.hideDropdown()};
e.prototype.removePointFromPath=function(a){var b;a.preventDefault();a=$(a.currentTarget);b=a.data("point-id");b=this.collection.findWhere({id:b});this.collection.remove(b);this.model.set("coords",[],{silent:!0});return a.parent().remove()};e.prototype.clearMap=function(a){a&&a.preventDefault();this.ui.addPathPlace.empty();this.ui.detailsPath.empty().hide();this.ui.lineAddPathButton.show();this.ui.actionButton.hide();this.model.set("coords",[]);return this.collection.remove(this.collection.models)};
e.prototype.addWayPoint=function(a){var c=this;1===this.collection.length?(this.ui.msgHint.hide(),this.ui.addPathButton.addClass("disabled")):1<this.collection.length&&(this.ui.msgHint.hide(),this.ui.addPathButton.removeClass("disabled"),this.route&&this.buildPath());return b.Map.mapDeferred.then(function(){var e;e=new ymaps.Placemark([a.get("latitude"),a.get("longitude")],{id:"map-point"+a.get("id"),point:a.toJSON(),"class":"place-added"},{iconLayout:b.Map.pointIconLayout});a.set("placemark",e);
e.properties.set("iconContent",c.collection.indexOf(a)+1);return b.Map.yandexmap.geoObjects.add(e)})};e.prototype.removeWayPoint=function(a){b.Map.yandexmap.geoObjects.remove(a.get("placemark"));0===this.collection.length&&(this.ui.addPathPlace.empty(),this.ui.detailsPath.empty().hide(),this.ui.lineAddPathButton.show(),this.ui.actionButton.hide(),this.ui.msgHint.show(),this.ui.addPathButton.addClass("disabled"),this.route&&(b.Map.yandexmap.geoObjects.remove(this.route),this.route=null));this.route&&
this.buildPath();return this.collection.each(function(a,b){return a.get("placemark").properties.set("iconContent",b+1)})};e.prototype.resortCollection=function(a,b){var c;c=this.collection.findWhere({id:b});this._insertTo(a,c,this.collection.models);this.route&&this.buildPath();return this.collection.each(function(a,b){return a.get("placemark").properties.set("iconContent",b+1)})};e.prototype.savePath=function(a){a&&a.preventDefault();if(this.user.get("authorized"))return a=new b.Routes.RoutesSaveView({routeCollection:this.routeCollection,
model:this.model,route:this.route}),b.popup.show(a);b.vent.trigger("user:notauthorized")};e.prototype._onKeyDownSpecial=function(a){switch(a.which){case 13:void 0!==this.searchXHR&&this.searchXHR.abort();clearTimeout(0);a.preventDefault();a.stopPropagation();$(".selected",this.ui.dropResults).length&&$(".selected",this.ui.dropResults).click();this.hideDropdown();break;case 27:a.preventDefault();a.stopPropagation();this.hideDropdown();break;case 38:a.preventDefault();a.stopPropagation();this._selectDropLi(-1);
break;case 40:a.preventDefault(),a.stopPropagation(),this._selectDropLi(1)}};e.prototype._delay=function(){var a;a=0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();e.prototype._insertTo=function(a,b,c){var e;e=c.indexOf(b);c.splice(e,1);return c.splice(a,0,b)};e.prototype._selectDropLi=function(a){var b,c;c=$("li.item-label:visible",this.ui.dropResults).filter(function(){return!0});if(c.filter(".selected").length){b=c.index(c.filter(".selected"));if(b<c.length-1){if(1===a)return c.filter(".selected:first").removeClass("selected"),
c.eq(b+1).addClass("selected").focus();c.filter(".selected:first").removeClass("selected");return c.eq(b-1).addClass("selected").focus()}c.filter(".selected:first").removeClass("selected");return 1===a?c.eq(0).addClass("selected").focus():c.eq(b-1).addClass("selected").focus()}return 1===a?c.eq(0).addClass("selected").focus():c.last().addClass("selected").focus()};e.prototype._dragPoints=function(){var a=this;return $("ol.ol-add-path-places").sortable({group:"simple_with_animation",pullPlaceholder:!1,
onDrop:function(b,c,e){var f;f=$("<li/>").css({height:0});b.before(f);f.animate({height:b.height()});b.animate(f.position(),function(){f.detach();return e(b)});return a.collection.trigger("resort:collection",b.index()-1,b.data("point-id"))},onDragStart:function(a,b,c){var e,f;e=a.offset();f=b.rootGroup.pointer;this.adjustment={left:f.left-e.left,top:f.top-e.top};return c(a,b)},onDrag:function(a,b){return a.css({left:b.left-this.adjustment.left,top:b.top-this.adjustment.top})}})};return e}(Marionette.ItemView)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Common.Router=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){console.log("initializing Yapp.Common.Router");_.bindAll(this,"storeRoute");this.on("all",this.storeRoute);return this.history=[]};c.prototype.storeRoute=
function(){return this.history.push(Backbone.history.fragment)};c.prototype.previous=function(){return 1<this.history.length?this.navigate(this.history[this.history.length-2],!1):this.navigate("",!1)};return c}(Marionette.AppRouter)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Map.Router=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.Map.Router")};c.prototype.appRoutes={map:"showMap"};return c}(Marionette.AppRouter)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Points.Router=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.Points.Router")};c.prototype.appRoutes={"":"showLayout",popular:"showPopular","new":"showNew","point/add":"addPoint",
"point/:id":"showPointDetail","point/:id/photo/:photo_id":"showPointDetail","set/:id":"showSetDetail","set/:id/point/:id":"showSetPhoto","set/:id/point/:point_id/photo/:photo_id":"showSetPhoto"};return c}(Marionette.AppRouter)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Routes.Router=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.Routes.Router")};c.prototype.appRoutes={"route/add":"addRoute","route/add/point/:id":"addRoutePoint","route/:id":"showRouteDetail",
"route/:id/point/:id":"showRoutePhoto","route/:id/point/:point_id/photo/:photo_id":"showRoutePhoto","route/:id/edit":"editRoute"};return c}(Marionette.AppRouter)}).call(this);
(function(){var b,g={}.hasOwnProperty,h=function(b,c){function e(){this.constructor=b}for(var a in c)g.call(c,a)&&(b[a]=c[a]);e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};window.Yapp.Common.Controller=function(f){function c(){return b=c.__super__.constructor.apply(this,arguments)}h(c,f);c.prototype.initialize=function(){return console.log("initializing Yapp.Common.Controller")};c.prototype.something=function(){};return c}(Marionette.Controller)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Map.Controller=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initializing Yapp.Map.Controller")};e.prototype.showMap=function(){return b.execute("toggleMap","open")};e.prototype.addCollection=
function(a,b){var c;c=new ymaps.Placemark([point.get("latitude"),point.get("longitude")],{id:point.get("id")+"_"+point.get("point_id")},{iconImageHref:"/"+point.get("icon"),iconImageSize:[32,36],iconImageOffset:[-16,-38]});return this.myGeoObjectsArr.push(c)};e.prototype.addOnePoint=function(a,b){var c;c=new ymaps.Placemark([a.get("latitude"),a.get("longitude")],{id:a.get("id")+"_"+a.get("point_id")},{iconImageHref:"/"+a.get("icon"),iconImageSize:[32,36],iconImageOffset:[-16,-38]});return this.myGeoObjectsArr.push(c)};
return e}(Marionette.Controller)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Points.Controller=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){console.log("initializing Yapp.Points.Controller");return this.listenTo(b.vent,"click:nameplacemark",this.showPointDetail)};e.prototype.showLayout=
function(a){console.log("Show content "+a+" in Points module");b.popup.close();b.routePanel.close();this.layout=new b.Points.MainLayout({content_type:a||"ypi"});b.content.show(this.layout);return this.layout};e.prototype.showPopular=function(){return this.layout?(this.layout.options.content_type="ypi",b.content.show(this.layout)):this.showLayout("ypi")};e.prototype.showNew=function(){return this.layout?(this.layout.options.content_type="updated",b.content.show(this.layout)):this.showLayout("updated")};
e.prototype.addPoint=function(){this.layout||this.showLayout();return b.popup.show(new b.Points.PointAddView({id:"p-add-place",collection:this.layout.pointCollection}))};e.prototype.showPointDetail=function(a,c){var e;this.layout||this.showLayout();e=new b.Points.Point({unid:a});b.popup.show(new b.Points.PointDetailView({model:e,photoId:c}));return e.fetch()};e.prototype.showSetDetail=function(a,c,e){a=new b.Points.Set({unid:a});a.fetch({success:function(a,f){return b.popup.show(new b.Points.SetDetailView({model:a,
pointId:c,photoId:e}))}});return a};e.prototype.showSetPhoto=function(a,b,c){this.showLayout();return this.showSetDetail(a,b,c)};return e}(Marionette.Controller)}).call(this);
(function(){var b,g,h={}.hasOwnProperty,f=function(b,e){function a(){this.constructor=b}for(var d in e)h.call(e,d)&&(b[d]=e[d]);a.prototype=e.prototype;b.prototype=new a;b.__super__=e.prototype;return b};b=window.Yapp;b.Routes.Controller=function(c){function e(){return g=e.__super__.constructor.apply(this,arguments)}f(e,c);e.prototype.initialize=function(){return console.log("initializing Yapp.Routes.Controller")};e.prototype.addRoute=function(){var a;b.content.close();b.popup.close();b.Map.mapView.clear();
a=new b.Routes.RoutesView({model:new b.Routes.Route});return b.routePanel.show(a)};e.prototype.addRoutePoint=function(a){b.content.close();b.popup.close();b.Map.mapView.clear();a=new b.Routes.RoutesView({model:new b.Routes.Route,pointId:a});return b.routePanel.show(a)};e.prototype.showRouteDetail=function(a,c,e){a=new b.Routes.Route({unid:a});a.fetch({success:function(a,f){return b.popup.show(new b.Routes.RouteDetailView({model:a,pointId:c,photoId:e}))}});return a};e.prototype.showRoutePhoto=function(a,
b,c){return this.showRouteDetail(a,b,c)};e.prototype.editRoute=function(a){var c;b.content.close();b.popup.close();b.Map.mapView.clear();c=new b.Routes.Route({unid:a});return c.fetch({success:function(a){a=new b.Routes.RoutesView({model:c});return b.routePanel.show(a)}})};return e}(Marionette.Controller)}).call(this);
(function(){var b;b=window.Yapp;b.addInitializer(function(){console.log("application initializing");this.settings={};this.isMobile=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);this.updateSettings=function(b){var h,f,c;f={};h=!1;for(c in b)b.hasOwnProperty(c)&&this.settings[c]!==b[c]&&(_.isNumber(b[c])||!_.isEmpty(b[c])?this.settings[c]=b[c]:delete this.settings[c],f[c]=b[c],h=!0);if(h)return this.vent.trigger("change:settings",f)};this.addRegions({header:"#header",map:"#yandex-map",
content:"#content",routePanel:"#panel-add-path",footer:"#footer",popup:b.Common.PopupRegion});this.commands.setHandler("toggleMap",function(g){b.map.$el.toggleClass("map-opened");$("#wrap").toggleClass("map-opened");g&&(b.map.$el.addClass("map-opened"),$("#wrap").addClass("map-opened"));g="\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443"===b.map.$el.find(".a-toggle").html()?"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443":
"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443";return b.map.$el.find(".a-toggle").html(g)});return this.reqres.setHandler("request",function(g){var h;h=b.API_BASE_URL+g.url;h=g.url;console.log([""+g.type+" request to "+h+" with data:",g.data]);return $.ajax({url:h,type:g.type,dataType:g.dataType||"json",processData:g.processData,contentType:g.contentType,data:g.data,success:function(b){var c;console.log(["response from API: ",b]);if(g.successCallback)return c=[b],
_.each(g.params,function(b){return c.push(b)}),g.successCallback.apply(g.context,c)}})})});b.on("start",function(){console.log("starting application");this.user=new b.User.Profile(USER);this.runApplication();$(document).ajaxStart(function(){$(".spinner").show();return $(".GridFooter").show()}).ajaxStop(function(){$(".spinner").hide();return $(".GridFooter").hide()});return $(document).on("click","a.nonav",function(b){var h,f;h=$(this).attr("href");f=this.protocol+"//";if(h&&h.slice(0,f.length)!==
f&&0!==h.indexOf("javascript:"))return b.preventDefault(),b.stopPropagation(),Backbone.history.navigate(h,!0)})});b.runApplication=function(){this.isMobile&&$("body").addClass("mobile");this.Common.start();this.Map.start();this.Points.start();this.Routes.start();this.vent.on("user:notauthorized",function(){return b.popup.show(new b.Common.AuthPopupView)});this.vent.on("logout",function(){return window.location.replace("/")});return Backbone.history.start({pushState:!0})};b.start()}).call(this);
