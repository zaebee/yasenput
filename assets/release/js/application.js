/*

 Lo-Dash 2.4.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 Build: `lodash modern -o ./dist/lodash.js`
*/
"object"!==typeof JSON&&(JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function c(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=d[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a,d){var b,e,m,s,r=h,u,y=d[a];y&&("object"===typeof y&&"function"===typeof y.toJSON)&&(y=y.toJSON(a));"function"===typeof k&&(y=k.call(d,a,y));switch(typeof y){case "string":return c(y);case "number":return isFinite(y)?String(y):"null";case "boolean":case "null":return String(y);
case "object":if(!y)return"null";h+=g;u=[];if("[object Array]"===Object.prototype.toString.apply(y)){s=y.length;for(b=0;b<s;b+=1)u[b]=f(b,y)||"null";m=0===u.length?"[]":h?"[\n"+h+u.join(",\n"+h)+"\n"+r+"]":"["+u.join(",")+"]";h=r;return m}if(k&&"object"===typeof k){s=k.length;for(b=0;b<s;b+=1)"string"===typeof k[b]&&(e=k[b],(m=f(e,y))&&u.push(c(e)+(h?": ":":")+m))}else for(e in y)Object.prototype.hasOwnProperty.call(y,e)&&(m=f(e,y))&&u.push(c(e)+(h?": ":":")+m);m=0===u.length?"{}":h?"{\n"+h+u.join(",\n"+
h)+"\n"+r+"}":"{"+u.join(",")+"}";h=r;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var c;g=h="";if("number"===typeof d)for(c=0;c<d;c+=1)g+=" ";else"string"===typeof d&&(g=d);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return f("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(b,d){function c(a,b){var g,f,k=a[b];if(k&&"object"===typeof k)for(g in k)Object.prototype.hasOwnProperty.call(k,g)&&(f=c(k,g),void 0!==f?k[g]=f:delete k[g]);return d.call(a,b,k)}var g;b=String(b);a.lastIndex=0;a.test(b)&&(b=b.replace(a,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+b+")"),"function"===typeof d?c({"":g},""):g;throw new SyntaxError("JSON.parse");})})();
(function(b,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b.Spinner=c()})(this,function(){function b(a,b){var d=document.createElement(a||"div"),c;for(c in b)d[c]=b[c];return d}function c(a){for(var b=1,d=arguments.length;b<d;b++)a.appendChild(arguments[b]);return a}function f(a,b,d,c){var g=["opacity",b,~~(100*a),d,c].join("-");d=0.01+100*(d/c);c=Math.max(1-(1-a)/b*(100-d),a);var f=l.substring(0,l.indexOf("Animation")).toLowerCase();p[g]||(q.insertRule("@"+
(f&&"-"+f+"-"||"")+"keyframes "+g+"{0%{opacity:"+c+"}"+d+"%{opacity:"+a+"}"+(d+0.01)+"%{opacity:1}"+(d+b)%100+"%{opacity:"+a+"}100%{opacity:"+c+"}}",q.cssRules.length),p[g]=1);return g}function a(a,b){var d=a.style,c,g;if(void 0!==d[b])return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(g=0;g<n.length;g++)if(c=n[g]+b,void 0!==d[c])return c}function e(b,d){for(var c in d)b.style[a(b,c)||c]=d[c];return b}function h(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],c;for(c in d)void 0===a[c]&&
(a[c]=d[c])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function d(a){if("undefined"==typeof this)return new d(a);this.opts=h(a||{},d.defaults,m)}function k(){function a(d,c){return b("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}q.addRule(".spin-vml","behavior:url(#default#VML)");d.prototype.lines=function(b,d){function g(){return e(a("group",{coordsize:m+" "+m,coordorigin:-k+" "+-k}),{width:m,
height:m})}function f(b,m,p){c(h,c(e(g(),{rotation:360/d.lines*b+"deg",left:~~m}),c(e(a("roundrect",{arcsize:d.corners}),{width:k,height:d.width,left:d.radius,top:-d.width>>1,filter:p}),a("fill",{color:d.color,opacity:d.opacity}),a("stroke",{opacity:0}))))}var k=d.length+d.width,m=2*k,p=2*-(d.width+d.length)+"px",h=e(g(),{position:"absolute",top:p,left:p});if(d.shadow)for(p=1;p<=d.lines;p++)f(p,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(p=1;p<=d.lines;p++)f(p);
return c(b,h)};d.prototype.opacity=function(a,b,d,c){a=a.firstChild;c=c.shadow&&c.lines||0;if(a&&b+c<a.childNodes.length&&(a=(a=(a=a.childNodes[b+c])&&a.firstChild)&&a.firstChild))a.opacity=d}}var n=["webkit","Moz","ms","O"],p={},l,q=function(){var a=b("style",{type:"text/css"});c(document.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),m={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",
top:"auto",left:"auto",position:"relative"};d.defaults={};h(d.prototype,{spin:function(a){this.stop();var d=this,c=d.opts,f=d.el=e(b(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex}),k=c.radius+c.length+c.width,m,p;a&&(a.insertBefore(f,a.firstChild||null),p=g(a),m=g(f),e(f,{left:("auto"==c.left?p.x-m.x+(a.offsetWidth>>1):parseInt(c.left,10)+k)+"px",top:("auto"==c.top?p.y-m.y+(a.offsetHeight>>1):parseInt(c.top,10)+k)+"px"}));f.setAttribute("role","progressbar");d.lines(f,d.opts);
if(!l){var h=0,n=(c.lines-1)*(1-c.direction)/2,q,s=c.fps,v=s/c.speed,F=(1-c.opacity)/(v*c.trail/100),G=v/c.lines;(function O(){h++;for(var a=0;a<c.lines;a++)q=Math.max(1-(h+(c.lines-a)*G)%v*F,c.opacity),d.opacity(f,a*c.direction+n,q,c);d.timeout=d.el&&setTimeout(O,~~(1E3/s))})()}return d},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(a,d){function g(a,c){return e(b(),{position:"absolute",width:d.length+
d.width+"px",height:d.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/d.lines*k+d.rotate)+"deg) translate("+d.radius+"px,0)",borderRadius:(d.corners*d.width>>1)+"px"})}for(var k=0,m=(d.lines-1)*(1-d.direction)/2,p;k<d.lines;k++)p=e(b(),{position:"absolute",top:1+~(d.width/2)+"px",transform:d.hwaccel?"translate3d(0,0,0)":"",opacity:d.opacity,animation:l&&f(d.opacity,d.trail,m+k*d.direction,d.lines)+" "+1/d.speed+"s linear infinite"}),d.shadow&&c(p,e(g("#000","0 0 4px #000"),
{top:"2px"})),c(a,c(p,g(d.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,d,b){d<a.childNodes.length&&(a.childNodes[d].style.opacity=b)}});var s=e(b("group"),{behavior:"url(#default#VML)"});!a(s,"transform")&&s.adj?k():l=a(s,"animation");return d});
!function(b){function c(a,d){return function(b){return k(a.call(this,b),d)}}function f(a,d){return function(b){return this.lang().ordinal(a.call(this,b),d)}}function a(){}function e(a){g(this,a)}function h(a){var d=a.years||a.year||a.y||0,b=a.months||a.month||a.M||0,c=a.weeks||a.week||a.w||0,g=a.days||a.day||a.d||0,f=a.hours||a.hour||a.h||0,k=a.minutes||a.minute||a.m||0,e=a.seconds||a.second||a.s||0,r=a.milliseconds||a.millisecond||a.ms||0;this._input=a;this._milliseconds=r+1E3*e+6E4*k+36E5*f;this._days=
g+7*c;this._months=b+12*d;this._data={};this._bubble()}function g(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);return a}function d(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,d){for(var b=a+"";b.length<d;)b="0"+b;return b}function n(a,d,b,c){var g,f,k=d._milliseconds,e=d._days;d=d._months;k&&a._d.setTime(+a._d+k*b);(e||d)&&(g=a.minute(),f=a.hour());e&&a.date(a.date()+e*b);d&&a.month(a.month()+d*b);k&&!c&&z.updateOffset(a);(e||d)&&(a.minute(g),a.hour(f))}function p(a,d){var b,c=Math.min(a.length,
d.length),g=Math.abs(a.length-d.length),f=0;for(b=0;c>b;b++)~~a[b]!==~~d[b]&&f++;return f+g}function l(a){return a?Y[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function q(a){if(!a)return z.fn._lang;if(!G[a]&&N)try{require("./lang/"+a)}catch(d){return z.fn._lang}return G[a]}function m(a){var d,b,c=a.match(W);d=0;for(b=c.length;b>d;d++)c[d]=V[c[d]]?V[c[d]]:c[d].match(/\[.*\]/)?c[d].replace(/^\[|\]$/g,""):c[d].replace(/\\/g,"");return function(g){var f="";for(d=0;b>d;d++)f+=c[d]instanceof Function?
c[d].call(g,a):c[d];return f}}function s(a,d){function b(d){return a.lang().longDateFormat(d)||d}for(var c=5;c--&&S.test(d);)d=d.replace(S,b);return ea[d]||(ea[d]=m(d)),ea[d](a)}function r(a,d){switch(a){case "DDDD":return Q;case "YYYY":return A;case "YYYYY":return L;case "S":case "SS":case "SSS":case "DDD":return P;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return H;case "a":case "A":return q(d._l)._meridiemParse;case "X":return K;case "Z":case "ZZ":return I;case "T":return J;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return U;
default:return RegExp(a.replace("\\",""))}}function u(a){a=((I.exec(a)||[])[0]+"").match(aa)||["-",0,0];var d=+(60*a[1])+~~a[2];return"+"===a[0]?-d:d}function y(a){var d,b=[];if(!a._d){for(d=0;7>d;d++)a._a[d]=b[d]=null==a._a[d]?2===d?1:0:a._a[d];b[3]+=~~((a._tzm||0)/60);b[4]+=~~((a._tzm||0)%60);d=new Date(0);a._useUTC?(d.setUTCFullYear(b[0],b[1],b[2]),d.setUTCHours(b[3],b[4],b[5],b[6])):(d.setFullYear(b[0],b[1],b[2]),d.setHours(b[3],b[4],b[5],b[6]));a._d=d}}function x(a){var d,b,c=a._f.match(W),g=
a._i;a._a=[];for(d=0;d<c.length;d++)if((b=(r(c[d],a).exec(g)||[])[0])&&(g=g.slice(g.indexOf(b)+b.length)),V[c[d]]){var f=a,k=void 0,e=f._a;switch(c[d]){case "M":case "MM":e[1]=null==b?0:~~b-1;break;case "MMM":case "MMMM":k=q(f._l).monthsParse(b);null!=k?e[1]=k:f._isValid=!1;break;case "D":case "DD":case "DDD":case "DDDD":null!=b&&(e[2]=~~b);break;case "YY":e[0]=~~b+(68<~~b?1900:2E3);break;case "YYYY":case "YYYYY":e[0]=~~b;break;case "a":case "A":f._isPm=q(f._l).isPM(b);break;case "H":case "HH":case "h":case "hh":e[3]=
~~b;break;case "m":case "mm":e[4]=~~b;break;case "s":case "ss":e[5]=~~b;break;case "S":case "SS":case "SSS":e[6]=~~(1E3*("0."+b));break;case "X":f._d=new Date(1E3*parseFloat(b));break;case "Z":case "ZZ":f._useUTC=!0,f._tzm=u(b)}null==b&&(f._isValid=!1)}g&&(a._il=g);a._isPm&&12>a._a[3]&&(a._a[3]+=12);!1===a._isPm&&12===a._a[3]&&(a._a[3]=0);y(a)}function w(a,d,b,c,g){return g.relativeTime(d||1,!!b,a,c)}function B(a,d,b){var c;d=b-d;b-=a.day();return b>d&&(b-=7),d-7>b&&(b+=7),c=z(a).add("d",b),{week:Math.ceil(c.dayOfYear()/
7),year:c.year()}}function C(a){var d=a._i,c=a._f;if(null===d||""===d)a=null;else{"string"==typeof d&&(a._i=d=q().preparse(d));if(z.isMoment(d))a=g({},d),a._d=new Date(+d._d);else if(c)if("[object Array]"===Object.prototype.toString.call(c)){var d=a,f,k,r,m=99;for(r=0;r<d._f.length;r++)f=g({},d),f._f=d._f[r],x(f),c=new e(f),f=p(f._a,c.toArray()),c._il&&(f+=c._il.length),m>f&&(m=f,k=c);g(d,k)}else x(a);else if(k=a,d=k._i,c=O.exec(d),d===b)k._d=new Date;else if(c)k._d=new Date(+c[1]);else if("string"==
typeof d)if(d=k._i,c=ba.exec(d)){k._f="YYYY-MM-DD"+(c[2]||" ");for(c=0;4>c;c++)if(ya[c][1].exec(d)){k._f+=ya[c][0];break}I.exec(d)&&(k._f+=" Z");x(k)}else k._d=new Date(d);else"[object Array]"===Object.prototype.toString.call(d)?(k._a=d.slice(0),y(k)):k._d=d instanceof Date?new Date(+d):new Date(d);a=new e(a)}return a}function E(a,d){z.fn[a]=z.fn[a+"s"]=function(a){var b=this._isUTC?"UTC":"";return null!=a?(this._d["set"+b+d](a),z.updateOffset(this),this):this._d["get"+b+d]()}}function D(a){z.duration.fn[a]=
function(){return this._data[a]}}function M(a,d){z.duration.fn["as"+a]=function(){return+this/d}}for(var z,v,F=Math.round,G={},N="undefined"!=typeof module&&module.exports,O=/^\/?Date\((\-?\d+)/i,R=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,W=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,S=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,U=/\d\d?/,P=/\d{1,3}/,Q=/\d{3}/,A=/\d{1,4}/,L=/[+\-]?\d{1,6}/,
H=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,I=/Z|[\+\-]\d\d:?\d\d/i,J=/T/i,K=/[\+\-]?\d+(\.\d{1,3})?/,ba=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ya=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aa=/([\+\-]|\d\d)/gi,fa=["Date","Hours","Minutes","Seconds","Milliseconds"],da={Milliseconds:1,Seconds:1E3,
Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Y={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},ea={},T="DDD w W M D d".split(" "),X="MDHhmswW".split(""),V={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,
a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},
GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return k(~~(this.milliseconds()/
10),2)},SSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone();return 0>a&&(a=-a),"+"+k(~~(a/60),2)+":"+k(~~a%60,2)},ZZ:function(){var a=-this.zone();return 0>a&&(a=-a),"+"+k(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};T.length;)v=T.pop(),V[v+"o"]=f(V[v],v);for(;X.length;)v=X.pop(),V[v+v]=c(V[v],2);V.DDDD=c(V.DDD,3);a.prototype={set:function(a){var d,b;for(b in a)d=a[b],"function"==typeof d?this[b]=
d:this["_"+b]=d},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var d,b,c;this._monthsParse||(this._monthsParse=[]);for(d=0;12>d;d++)if(this._monthsParse[d]||(b=z([2E3,d]),c="^"+this.months(b,"")+"|^"+this.monthsShort(b,""),this._monthsParse[d]=
RegExp(c.replace(".",""),"i")),this._monthsParse[d].test(a))return d},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var d,b,c;this._weekdaysParse||(this._weekdaysParse=
[]);for(d=0;7>d;d++)if(this._weekdaysParse[d]||(b=z([2E3,1]).day(d),c="^"+this.weekdays(b,"")+"|^"+this.weekdaysShort(b,"")+"|^"+this.weekdaysMin(b,""),this._weekdaysParse[d]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[d].test(a))return d},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var d=this._longDateFormat[a];return!d&&this._longDateFormat[a.toUpperCase()]&&(d=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,
function(a){return a.slice(1)}),this._longDateFormat[a]=d),d},isPM:function(a){return"p"===(a+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,d,b){return 11<a?b?"pm":"PM":b?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,d){var b=this._calendar[a];return"function"==typeof b?b.apply(d):b},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",
m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,d,b,c){var g=this._relativeTime[b];return"function"==typeof g?g(a,d,b,c):g.replace(/%d/i,a)},pastFuture:function(a,d){var b=this._relativeTime[0<a?"future":"past"];return"function"==typeof b?b(d):b.replace(/%s/i,d)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},
week:function(a){return B(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};z=function(a,d,b){return C({_i:a,_f:d,_l:b,_isUTC:!1})};z.utc=function(a,d,b){return C({_useUTC:!0,_isUTC:!0,_l:b,_i:a,_f:d})};z.unix=function(a){return z(1E3*a)};z.duration=function(a,d){var b,c,g=z.isDuration(a),f="number"==typeof a,k=g?a._input:f?{}:a,e=R.exec(a);return f?d?k[d]=a:k.milliseconds=a:e&&(b="-"===e[1]?-1:1,k={y:0,d:~~e[2]*b,h:~~e[3]*b,m:~~e[4]*b,s:~~e[5]*b,ms:~~e[6]*b}),c=new h(k),g&&a.hasOwnProperty("_lang")&&
(c._lang=a._lang),c};z.version="2.1.0";z.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";z.updateOffset=function(){};z.lang=function(d,b){return d?(b?(b.abbr=d,G[d]||(G[d]=new a),G[d].set(b)):G[d]||q(d),z.duration.fn._lang=z.fn._lang=q(d),void 0):z.fn._lang._abbr};z.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),q(a)};z.isMoment=function(a){return a instanceof e};z.isDuration=function(a){return a instanceof h};z.fn=e.prototype={clone:function(){return z(this)},valueOf:function(){return+this._d+
6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return s(z(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!p(this._a,(this._isUTC?
z.utc(this._a):z(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){a=s(this,a||z.defaultFormat);return this.lang().postformat(a)},add:function(a,d){var b;return b="string"==typeof a?z.duration(+d,a):z.duration(a,d),n(this,b,1),this},subtract:function(a,d){var b;return b="string"==typeof a?z.duration(+d,a):z.duration(a,d),n(this,b,-1),this},diff:function(a,b,c){var g,f;a=
this._isUTC?z(a).zone(this._offset||0):z(a).local();var k=6E4*(this.zone()-a.zone());return b=l(b),"year"===b||"month"===b?(g=432E5*(this.daysInMonth()+a.daysInMonth()),f=12*(this.year()-a.year())+(this.month()-a.month()),f+=(this-z(this).startOf("month")-(a-z(a).startOf("month")))/g,f-=6E4*(this.zone()-z(this).startOf("month").zone()-(a.zone()-z(a).startOf("month").zone()))/g,"year"===b&&(f/=12)):(g=this-a,f="second"===b?g/1E3:"minute"===b?g/6E4:"hour"===b?g/36E5:"day"===b?(g-k)/864E5:"week"===b?
(g-k)/6048E5:g),c?f:d(f)},from:function(a,d){return z.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!d)},fromNow:function(a){return this.from(z(),a)},calendar:function(){var a=this.diff(z().startOf("day"),"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||
this.zone()<this.clone().month(5).zone()},day:function(a){var d=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-d}):d},month:function(a){var d,b=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(d=this.date(),this.date(1),this._d["set"+b+"Month"](a),this.date(Math.min(d,this.daysInMonth())),z.updateOffset(this),this):this._d["get"+
b+"Month"]()},startOf:function(a){switch(a=l(a)){case "year":this.month(0);case "month":this.date(1);case "week":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,d){return d="undefined"!=typeof d?d:"millisecond",+this.clone().startOf(d)>+z(a).startOf(d)},isBefore:function(a,d){return d="undefined"!=typeof d?
d:"millisecond",+this.clone().startOf(d)<+z(a).startOf(d)},isSame:function(a,d){return d="undefined"!=typeof d?d:"millisecond",+this.clone().startOf(d)===+z(a).startOf(d)},min:function(a){return a=z.apply(null,arguments),this>a?this:a},max:function(a){return a=z.apply(null,arguments),a>this?this:a},zone:function(a){var d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():("string"==typeof a&&(a=u(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,d!==a&&n(this,z.duration(d-
a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return z.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var d=F((z(this).startOf("day")-z(this).startOf("year"))/864E5)+1;return null==a?d:this.add("d",a-d)},weekYear:function(a){var d=B(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?d:this.add("y",a-d)},isoWeekYear:function(a){var d=B(this,1,4).year;
return null==a?d:this.add("y",a-d)},week:function(a){var d=this.lang().week(this);return null==a?d:this.add("d",7*(a-d))},isoWeek:function(a){var d=B(this,1,4).week;return null==a?d:this.add("d",7*(a-d))},weekday:function(a){var d=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?d:this.add("d",a-d)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},lang:function(a){return a===b?this._lang:(this._lang=q(a),this)}};for(v=0;v<fa.length;v++)E(fa[v].toLowerCase().replace(/s$/,
""),fa[v]);E("year","FullYear");z.fn.days=z.fn.day;z.fn.months=z.fn.month;z.fn.weeks=z.fn.week;z.fn.isoWeeks=z.fn.isoWeek;z.fn.toJSON=z.fn.toISOString;z.duration.fn=h.prototype={_bubble:function(){var a,b;a=this._milliseconds;b=this._days;var c=this._months,g=this._data;g.milliseconds=a%1E3;a=d(a/1E3);g.seconds=a%60;a=d(a/60);g.minutes=a%60;a=d(a/60);g.hours=a%24;b+=d(a/24);g.days=b%30;c+=d(b/30);g.months=c%12;b=d(c/12);g.years=b},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+
864E5*this._days+2592E6*(this._months%12)+31536E6*~~(this._months/12)},humanize:function(a){var d=+this,b;b=!a;var c=this.lang(),g=F(Math.abs(d)/1E3),f=F(g/60),k=F(f/60),e=F(k/24),r=F(e/365),g=45>g&&["s",g]||1===f&&["m"]||45>f&&["mm",f]||1===k&&["h"]||22>k&&["hh",k]||1===e&&["d"]||25>=e&&["dd",e]||45>=e&&["M"]||345>e&&["MM",F(e/30)]||1===r&&["y"]||["yy",r];b=(g[2]=b,g[3]=0<d,g[4]=c,w.apply({},g));return a&&(b=this.lang().pastFuture(d,b)),this.lang().postformat(b)},add:function(a,d){var b=z.duration(a,
d);return this._milliseconds+=b._milliseconds,this._days+=b._days,this._months+=b._months,this._bubble(),this},subtract:function(a,d){var b=z.duration(a,d);return this._milliseconds-=b._milliseconds,this._days-=b._days,this._months-=b._months,this._bubble(),this},get:function(a){return a=l(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=l(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:z.fn.lang};for(v in da)da.hasOwnProperty(v)&&(M(v,da[v]),D(v.toLowerCase()));M("Weeks",6048E5);
z.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};z.lang("en",{ordinal:function(a){var d=a%10;return a+(1===~~(a%100/10)?"th":1===d?"st":2===d?"nd":3===d?"rd":"th")}});N&&(module.exports=z);"undefined"==typeof ender&&(this.moment=z);"function"==typeof define&&define.amd&&define("moment",[],function(){return z})}.call(this);function plural(b,c){var f=b.split("_");return 1===c%10&&11!==c%100?f[0]:2<=c%10&&4>=c%10&&(10>c%100||20<=c%100)?f[1]:f[2]}
function relativeTimeWithPlural(b,c,f){var a={mm:"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"};return"m"===
f?c?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":b+" "+plural(a[f],+b)}
function monthsCaseReplace(b,c){return{nominative:"\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),accusative:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ")}[/D[oD]? *MMMM?/.test(c)?
"accusative":"nominative"][b.month()]}
function weekdaysCaseReplace(b,c){return{nominative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),accusative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0443 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0443 \u0441\u0443\u0431\u0431\u043e\u0442\u0443".split(" ")}[/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e)? ?\] ?dddd/.test(c)?"accusative":
"nominative"][b.day()]}
moment.lang("ru",{months:monthsCaseReplace,monthsShort:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" "),weekdays:weekdaysCaseReplace,weekdaysShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),weekdaysMin:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),
longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., LT",LLLL:"dddd, D MMMM YYYY \u0433., LT"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",nextWeek:function(){return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT"},lastWeek:function(){switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd [\u0432] LT";
case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:relativeTimeWithPlural,mm:relativeTimeWithPlural,h:"\u0447\u0430\u0441",hh:relativeTimeWithPlural,
d:"\u0434\u0435\u043d\u044c",dd:relativeTimeWithPlural,M:"\u043c\u0435\u0441\u044f\u0446",MM:relativeTimeWithPlural,y:"\u0433\u043e\u0434",yy:relativeTimeWithPlural},ordinal:function(b,c){switch(c){case "M":case "d":case "DDD":return b+"-\u0439";case "D":return b+"-\u0433\u043e";case "w":case "W":return b+"-\u044f";default:return b}},week:{dow:1,doy:7}});
var Handlebars=function(){var b=function(){function a(d){this.string=d}a.prototype.toString=function(){return""+this.string};return a}(),c=function(a){function d(a){return c[a]||"&amp;"}var b={},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},f=/[&<>"'`]/g,e=/[&<>"'`]/;b.extend=function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};var h=Object.prototype.toString;b.toString=h;var m=function(a){return"function"===typeof a};m(/x/)&&(m=function(a){return"function"===
typeof a&&"[object Function]"===h.call(a)});b.isFunction=m;var s=Array.isArray||function(a){return a&&"object"===typeof a?"[object Array]"===h.call(a):!1};b.isArray=s;b.escapeExpression=function(b){if(b instanceof a)return b.toString();if(!b&&0!==b)return"";b=""+b;return!e.test(b)?b:b.replace(f,d)};b.isEmpty=function(a){return!a&&0!==a?!0:s(a)&&0===a.length?!0:!1};return b}(b),f=function(){function a(b,c){var g;c&&c.firstLine&&(g=c.firstLine,b+=" - "+g+":"+c.firstColumn);for(var f=Error.prototype.constructor.call(this,
b),e=0;e<d.length;e++)this[d[e]]=f[d[e]];g&&(this.lineNumber=g,this.column=c.firstColumn)}var d="description fileName lineNumber message name number stack".split(" ");a.prototype=Error();return a}(),a=function(a,d){function b(a,d){this.helpers=a||{};this.partials=d||{};c(this)}function c(a){a.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw new m("Missing helper: '"+a+"'");});a.registerHelper("blockHelperMissing",function(d,b){var c=b.inverse||function(){},g=b.fn;r(d)&&(d=
d.call(this));return!0===d?g(this):!1===d||null==d?c(this):s(d)?0<d.length?a.helpers.each(d,b):c(this):g(d)});a.registerHelper("each",function(a,d){var b=d.fn,c=d.inverse,g=0,f="",k;r(a)&&(a=a.call(this));d.data&&(k=x(d.data));if(a&&"object"===typeof a)if(s(a))for(var e=a.length;g<e;g++)k&&(k.index=g,k.first=0===g,k.last=g===a.length-1),f+=b(a[g],{data:k});else for(e in a)a.hasOwnProperty(e)&&(k&&(k.key=e,k.index=g,k.first=0===g),f+=b(a[e],{data:k}),g++);0===g&&(f=c(this));return f});a.registerHelper("if",
function(a,d){r(a)&&(a=a.call(this));return!d.hash.includeZero&&!a||h.isEmpty(a)?d.inverse(this):d.fn(this)});a.registerHelper("unless",function(d,b){return a.helpers["if"].call(this,d,{fn:b.inverse,inverse:b.fn,hash:b.hash})});a.registerHelper("with",function(a,d){r(a)&&(a=a.call(this));if(!h.isEmpty(a))return d.fn(a)});a.registerHelper("log",function(d,b){var c=b.data&&null!=b.data.level?parseInt(b.data.level,10):1;a.log(c,d)})}function f(a,d){y.log(a,d)}var e={},h=a,m=d;e.VERSION="1.3.0";e.COMPILER_REVISION=
4;e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var s=h.isArray,r=h.isFunction,u=h.toString;e.HandlebarsEnvironment=b;b.prototype={constructor:b,logger:y,log:f,registerHelper:function(a,d,b){if("[object Object]"===u.call(a)){if(b||d)throw new m("Arg not supported with multiple helpers");h.extend(this.helpers,a)}else b&&(d.not=b),this.helpers[a]=d},registerPartial:function(a,d){"[object Object]"===u.call(a)?h.extend(this.partials,a):this.partials[a]=d}};var y=
{methodMap:{"0":"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,d){if(y.level<=a){var b=y.methodMap[a];"undefined"!==typeof console&&console[b]&&console[b].call(console,d)}}};e.logger=y;e.log=f;var x=function(a){var d={};h.extend(d,a);return d};e.createFrame=x;return e}(c,f),e=function(a,d,b){function c(a,d,b){var g=function(a,c){c=c||{};return d(a,c.data||b)};g.program=a;g.depth=0;return g}var f={},e=b.COMPILER_REVISION,h=b.REVISION_CHANGES;f.checkRevision=
function(a){var b=a&&a[0]||1;if(b!==e){if(b<e)throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+h[e]+") or downgrade your runtime to an older version ("+h[b]+").");throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").");}};f.template=function(b,f){if(!f)throw new d("No environment passed to template");
var k={escapeExpression:a.escapeExpression,invokePartial:function(a,b,c,g,k,e){var r=f.VM.invokePartial.apply(this,arguments);if(null!=r)return r;if(f.compile)return r={helpers:g,partials:k,data:e},k[b]=f.compile(a,{data:void 0!==e},f),k[b](c,r);throw new d("The partial "+b+" could not be compiled when running in runtime-only mode");},programs:[],program:function(a,d,b){var g=this.programs[a];b?g=c(a,d,b):g||(g=this.programs[a]=c(a,d));return g},merge:function(d,b){var c=d||b;d&&(b&&d!==b)&&(c={},
a.extend(c,b),a.extend(c,d));return c},programWithDepth:f.VM.programWithDepth,noop:f.VM.noop,compilerInfo:null};return function(a,d){d=d||{};var c=d.partial?d:f,g,e;d.partial||(g=d.helpers,e=d.partials);c=b.call(k,c,a,g,e,d.data);d.partial||f.VM.checkRevision(k.compilerInfo);return c}};f.programWithDepth=function(a,d,b){var c=Array.prototype.slice.call(arguments,3),g=function(a,g){g=g||{};return d.apply(this,[a,g.data||b].concat(c))};g.program=a;g.depth=c.length;return g};f.program=c;f.invokePartial=
function(a,b,c,g,f,k){g={partial:!0,helpers:g,partials:f,data:k};if(void 0===a)throw new d("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g)};f.noop=function(){return""};return f}(c,f,a),b=function(a,d,b,c,f){var e=function(){var e=new a.HandlebarsEnvironment;c.extend(e,a);e.SafeString=d;e.Exception=b;e.Utils=c;e.VM=f;e.template=function(a){return f.template(a,e)};return e},h=e();h.create=e;return h}(a,b,f,c,e),c=function(a){function d(a){a=a||{};this.firstLine=a.first_line;
this.firstColumn=a.first_column;this.lastColumn=a.last_column;this.lastLine=a.last_line}var b={ProgramNode:function(a,c,g,f){var e;3===arguments.length?(f=g,g=null):2===arguments.length&&(f=c,c=null);d.call(this,f);this.type="program";this.statements=a;this.strip={};g?((e=g[0])?(e={first_line:e.firstLine,last_line:e.lastLine,last_column:e.lastColumn,first_column:e.firstColumn},this.inverse=new b.ProgramNode(g,c,e)):this.inverse=new b.ProgramNode(g,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},
MustacheNode:function(a,c,g,f,e){d.call(this,e);this.type="mustache";this.strip=f;null!=g&&g.charAt?(g=g.charAt(3)||g.charAt(2),this.escaped="{"!==g&&"&"!==g):this.escaped=!!g;this.sexpr=a instanceof b.SexprNode?a:new b.SexprNode(a,c);this.sexpr.isRoot=!0;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(a,b,c){d.call(this,c);this.type="sexpr";this.hash=b;c=this.id=a[0];
a=this.params=a.slice(1);this.isHelper=(this.eligibleHelper=c.isSimple)&&(a.length||b)},PartialNode:function(a,b,c,g){d.call(this,g);this.type="partial";this.partialName=a;this.context=b;this.strip=c},BlockNode:function(b,c,f,e,k){d.call(this,k);if(b.sexpr.id.original!==e.path.original)throw new a(b.sexpr.id.original+" doesn't match "+e.path.original,this);this.type="block";this.mustache=b;this.program=c;this.inverse=f;this.strip={left:b.strip.left,right:e.strip.right};(c||f).strip.left=b.strip.right;
(f||c).strip.right=e.strip.left;f&&!c&&(this.isInverse=!0)},ContentNode:function(a,b){d.call(this,b);this.type="content";this.string=a},HashNode:function(a,b){d.call(this,b);this.type="hash";this.pairs=a},IdNode:function(b,c){d.call(this,c);this.type="ID";for(var f="",e=[],k=0,h=0,r=b.length;h<r;h++){var u=b[h].part,f=f+((b[h].separator||"")+u);if(".."===u||"."===u||"this"===u){if(0<e.length)throw new a("Invalid path: "+f,this);".."===u?k++:this.isScoped=!0}else e.push(u)}this.original=f;this.parts=
e;this.string=e.join(".");this.depth=k;this.isSimple=1===b.length&&!this.isScoped&&0===k;this.stringModeValue=this.string},PartialNameNode:function(a,b){d.call(this,b);this.type="PARTIAL_NAME";this.name=a.original},DataNode:function(a,b){d.call(this,b);this.type="DATA";this.id=a},StringNode:function(a,b){d.call(this,b);this.type="STRING";this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,b){d.call(this,b);this.type="INTEGER";this.original=this.integer=a;this.stringModeValue=
Number(a)},BooleanNode:function(a,b){d.call(this,b);this.type="BOOLEAN";this.bool=a;this.stringModeValue="true"===a},CommentNode:function(a,b){d.call(this,b);this.type="comment";this.comment=a}};return b}(f),e=function(a,d){var b={};b.parser=a;b.parse=function(b){if(b.constructor===d.ProgramNode)return b;a.yy=d;return a.parse(b)};return b}(function(){return function(){function a(d,b){return{left:"~"===d.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function d(){this.yy={}}var b={trace:function(){},
yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,
ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,
3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(d,b,c,f,e,k,h){d=k.length-1;switch(e){case 1:return new f.ProgramNode(k[d-1],this._$);case 2:return new f.ProgramNode([],this._$);case 3:this.$=new f.ProgramNode([],k[d-1],k[d],this._$);break;case 4:this.$=new f.ProgramNode(k[d-2],k[d-1],k[d],this._$);break;case 5:this.$=new f.ProgramNode(k[d-
1],k[d],[],this._$);break;case 6:this.$=new f.ProgramNode(k[d],this._$);break;case 7:this.$=new f.ProgramNode([],this._$);break;case 8:this.$=new f.ProgramNode([],this._$);break;case 9:this.$=[k[d]];break;case 10:k[d-1].push(k[d]);this.$=k[d-1];break;case 11:this.$=new f.BlockNode(k[d-2],k[d-1].inverse,k[d-1],k[d],this._$);break;case 12:this.$=new f.BlockNode(k[d-2],k[d-1],k[d-1].inverse,k[d],this._$);break;case 13:this.$=k[d];break;case 14:this.$=k[d];break;case 15:this.$=new f.ContentNode(k[d],
this._$);break;case 16:this.$=new f.CommentNode(k[d],this._$);break;case 17:this.$=new f.MustacheNode(k[d-1],null,k[d-2],a(k[d-2],k[d]),this._$);break;case 18:this.$=new f.MustacheNode(k[d-1],null,k[d-2],a(k[d-2],k[d]),this._$);break;case 19:this.$={path:k[d-1],strip:a(k[d-2],k[d])};break;case 20:this.$=new f.MustacheNode(k[d-1],null,k[d-2],a(k[d-2],k[d]),this._$);break;case 21:this.$=new f.MustacheNode(k[d-1],null,k[d-2],a(k[d-2],k[d]),this._$);break;case 22:this.$=new f.PartialNode(k[d-2],k[d-1],
a(k[d-3],k[d]),this._$);break;case 23:this.$=a(k[d-1],k[d]);break;case 24:this.$=new f.SexprNode([k[d-2]].concat(k[d-1]),k[d],this._$);break;case 25:this.$=new f.SexprNode([k[d]],null,this._$);break;case 26:this.$=k[d];break;case 27:this.$=new f.StringNode(k[d],this._$);break;case 28:this.$=new f.IntegerNode(k[d],this._$);break;case 29:this.$=new f.BooleanNode(k[d],this._$);break;case 30:this.$=k[d];break;case 31:k[d-1].isHelper=!0;this.$=k[d-1];break;case 32:this.$=new f.HashNode(k[d],this._$);break;
case 33:this.$=[k[d-2],k[d]];break;case 34:this.$=new f.PartialNameNode(k[d],this._$);break;case 35:this.$=new f.PartialNameNode(new f.StringNode(k[d],this._$),this._$);break;case 36:this.$=new f.PartialNameNode(new f.IntegerNode(k[d],this._$));break;case 37:this.$=new f.DataNode(k[d],this._$);break;case 38:this.$=new f.IdNode(k[d],this._$);break;case 39:k[d-2].push({part:k[d],separator:k[d-1]});this.$=k[d-2];break;case 40:this.$=[{part:k[d]}];break;case 43:this.$=[];break;case 44:k[d-1].push(k[d]);
break;case 47:this.$=[k[d]];break;case 48:k[d-1].push(k[d])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},
{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,
40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],
19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,
46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],
20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,
17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],
36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,
27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,
72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,d){throw Error(a);},parse:function(a){var d=[0],b=[null],c=[],g=this.table,f="",k=0,e=0,h=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;
this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;c.push(a);var n=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var B,C,E,D,M={},z,v;;){E=d[d.length-1];if(this.defaultActions[E])D=this.defaultActions[E];else{if(null===B||"undefined"==typeof B)B=void 0,B=this.lexer.lex()||1,"number"!==typeof B&&(B=this.symbols_[B]||B);D=g[E]&&g[E][B]}if("undefined"===typeof D||!D.length||
!D[0]){var F="";if(!h){v=[];for(z in g[E])this.terminals_[z]&&2<z&&v.push("'"+this.terminals_[z]+"'");F=this.lexer.showPosition?"Parse error on line "+(k+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[B]||B)+"'":"Parse error on line "+(k+1)+": Unexpected "+(1==B?"end of input":"'"+(this.terminals_[B]||B)+"'");this.parseError(F,{text:this.lexer.match,token:this.terminals_[B]||B,line:this.lexer.yylineno,loc:a,expected:v})}}if(D[0]instanceof Array&&1<D.length)throw Error("Parse Error: multiple actions possible at state: "+
E+", token: "+B);switch(D[0]){case 1:d.push(B);b.push(this.lexer.yytext);c.push(this.lexer.yylloc);d.push(D[1]);B=null;C?(B=C,C=null):(e=this.lexer.yyleng,f=this.lexer.yytext,k=this.lexer.yylineno,a=this.lexer.yylloc,0<h&&h--);break;case 2:v=this.productions_[D[1]][1];M.$=b[b.length-v];M._$={first_line:c[c.length-(v||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(v||1)].first_column,last_column:c[c.length-1].last_column};n&&(M._$.range=[c[c.length-(v||1)].range[0],c[c.length-
1].range[1]]);E=this.performAction.call(M,f,e,k,this.yy,D[1],b,c);if("undefined"!==typeof E)return E;v&&(d=d.slice(0,-2*v),b=b.slice(0,-1*v),c=c.slice(0,-1*v));d.push(this.productions_[D[1]][0]);b.push(M.$);c.push(M._$);D=g[d[d.length-2]][d[d.length-1]];d.push(D);break;case 3:return!0}}return!0}},c=function(){return{EOF:1,parseError:function(a,d){if(this.yy.parser)this.yy.parser.parseError(a,d);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=
this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);
return a},unput:function(a){var d=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-d-1);this.offset-=d;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var c=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?
(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-d};this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-d]);return this},more:function(){this._more=!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,
20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),d=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+d+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,d,b;this._more||(this.match=this.yytext="");for(var c=this._currentRules(),g=0;g<c.length;g++)if((d=this._input.match(this.rules[c[g]]))&&(!a||d[0].length>a[0].length))if(a=d,b=g,!this.options.flex)break;if(a){if(d=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=
d.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,
this,c[b],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-
1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,d,b,c){function g(a,b){return d.yytext=d.yytext.substr(a,d.yyleng-b)}switch(b){case 0:"\\\\"===d.yytext.slice(-2)?(g(0,1),this.begin("mu")):"\\"===d.yytext.slice(-1)?(g(0,1),this.begin("emu")):this.begin("mu");if(d.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return g(0,4),this.popState(),15;case 4:return 35;
case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState();this.begin("com");break;case 14:return g(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return d.yytext=g(1,2).replace(/\\"/g,'"'),32;case 24:return d.yytext=g(1,2).replace(/\\'/g,"'"),32;case 25:return 42;
case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return d.yytext=g(1,2),40;case 31:return"INVALID";case 32:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,
/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}}}();
b.lexer=c;d.prototype=b;b.Parser=d;return new d}()}(),c),h=function(a){function d(){}var b={};b.Compiler=d;d.prototype={compiler:d,disassemble:function(){for(var a=this.opcodes,d,b=[],c,g,f=0,k=a.length;f<k;f++)if(d=a[f],"DECLARE"===d.opcode)b.push("DECLARE "+d.name+"="+d.value);else{c=[];for(var e=0;e<d.args.length;e++)g=d.args[e],"string"===typeof g&&(g='"'+g.replace("\n","\\n")+'"'),c.push(g);b.push(d.opcode+" "+c.join(" "))}return b.join("\n")},equals:function(a){var d=this.opcodes.length;if(a.opcodes.length!==
d)return!1;for(var b=0;b<d;b++){var c=this.opcodes[b],g=a.opcodes[b];if(c.opcode!==g.opcode||c.args.length!==g.args.length)return!1;for(var f=0;f<c.args.length;f++)if(c.args[f]!==g.args[f])return!1}d=this.children.length;if(a.children.length!==d)return!1;for(b=0;b<d;b++)if(!this.children[b].equals(a.children[b]))return!1;return!0},guid:0,compile:function(a,d){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=d;var b=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,
blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(b)for(var c in b)this.options.knownHelpers[c]=b[c];return this.accept(a)},accept:function(a){var d=a.strip||{};d.left&&this.opcode("strip");a=this[a.type](a);d.right&&this.opcode("strip");return a},program:function(a){a=a.statements;for(var d=0,b=a.length;d<b;d++)this.accept(a[d]);this.isSimple=1===b;this.depths.list=this.depths.list.sort(function(a,d){return a-d});return this},compileProgram:function(a){a=(new this.compiler).compile(a,
this.options);var d=this.guid++,b;this.usePartial=this.usePartial||a.usePartial;this.children[d]=a;for(var c=0,g=a.depths.list.length;c<g;c++)b=a.depths.list[c],2>b||this.addDepth(b-1);return d},block:function(a){var d=a.mustache,b=a.program;a=a.inverse;b&&(b=this.compileProgram(b));a&&(a=this.compileProgram(a));var d=d.sexpr,c=this.classifySexpr(d);"helper"===c?this.helperSexpr(d,b,a):"simple"===c?(this.simpleSexpr(d),this.opcode("pushProgram",b),this.opcode("pushProgram",a),this.opcode("emptyHash"),
this.opcode("blockValue")):(this.ambiguousSexpr(d,b,a),this.opcode("pushProgram",b),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(a){a=a.pairs;var d,b;this.opcode("pushHash");for(var c=0,g=a.length;c<g;c++)d=a[c],b=d[1],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this.accept(b),
this.opcode("assignToHash",d[0]);this.opcode("popHash")},partial:function(a){var d=a.partialName;this.usePartial=!0;a.context?this.ID(a.context):this.opcode("push","depth0");this.opcode("invokePartial",d.name);this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr);a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,d,b){a=a.id;var c=a.parts[0],g=null!=d||null!=b;this.opcode("getContext",
a.depth);this.opcode("pushProgram",d);this.opcode("pushProgram",b);this.opcode("invokeAmbiguous",c,g)},simpleSexpr:function(a){a=a.id;"DATA"===a.type?this.DATA(a):a.parts.length?this.ID(a):(this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperSexpr:function(d,b,c){b=this.setupFullMustacheParams(d,b,c);c=d.id.parts[0];if(this.options.knownHelpers[c])this.opcode("invokeKnownHelper",b.length,c);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+
c,d);this.opcode("invokeHelper",b.length,c,d.isRoot)}},sexpr:function(a){var d=this.classifySexpr(a);"simple"===d?this.simpleSexpr(a):"helper"===d?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth);this.opcode("getContext",a.depth);a.parts[0]?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var d=1,b=a.parts.length;d<b;d++)this.opcode("lookup",a.parts[d])},DATA:function(d){this.options.data=!0;if(d.id.isScoped||d.id.depth)throw new a("Scoped data references are not supported: "+
d.original,d);this.opcode("lookupData");d=d.id.parts;for(var b=0,c=d.length;b<c;b++)this.opcode("lookup",d[b])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,d){this.opcodes.push({opcode:"DECLARE",name:a,value:d})},addDepth:function(a){0!==a&&!this.depths[a]&&
(this.depths[a]=!0,this.depths.list.push(a))},classifySexpr:function(a){var d=a.isHelper,b=a.eligibleHelper,c=this.options;b&&!d&&(c.knownHelpers[a.id.parts[0]]?d=!0:c.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var d=a.length,b;d--;)if(b=a[d],this.options.stringParams)b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b);else this[b.type](b)},setupFullMustacheParams:function(a,
d,b){var c=a.params;this.pushParams(c);this.opcode("pushProgram",d);this.opcode("pushProgram",b);a.hash?this.hash(a.hash):this.opcode("emptyHash");return c}};b.precompile=function(d,b,c){if(null==d||"string"!==typeof d&&d.constructor!==c.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+d);b=b||{};"data"in b||(b.data=!0);d=c.parse(d);d=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(d,b)};b.compile=function(d,b,c){if(null==
d||"string"!==typeof d&&d.constructor!==c.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+d);b=b||{};"data"in b||(b.data=!0);var f;return function(a,g){if(!f){var k=c.parse(d),k=(new c.Compiler).compile(k,b),k=(new c.JavaScriptCompiler).compile(k,b,void 0,!0);f=c.template(k)}return f.call(this,a,g)}};return b}(f),f=function(a,d){function b(a){this.value=a}function c(){}var f=a.COMPILER_REVISION,e=a.REVISION_CHANGES,h=a.log;c.prototype={nameLookup:function(a,
d){var b,g;0===a.indexOf("depth")&&(b=!0);g=/^[0-9]+$/.test(d)?a+"["+d+"]":c.isValidJavaScriptVariableName(d)?a+"."+d:a+"['"+d+"']";return b?"("+a+" && "+g+")":g},compilerInfo:function(){return"this.compilerInfo = ["+f+",'"+e[f]+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,g){this.environment=
a;this.options=b||{};h("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!c;this.context=c||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(a,b);a=a.opcodes;this.i=0;for(c=a.length;this.i<c;this.i++)b=a[this.i],"DECLARE"===b.opcode?this[b.name]=b.value:this[b.opcode].apply(this,b.args),b.opcode!==this.stripNext&&
(this.stripNext=!1);this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new d("Compile completed with content left on stack");return this.createFunctionContext(g)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var d=this.namespace,b="helpers = this.merge(helpers, "+d+".helpers);";this.environment.usePartial&&(b=b+" partials = this.merge(partials, "+d+".partials);");this.options.data&&(b+=" data = data || {};");a.push(b)}this.environment.isSimple?
a.push(""):a.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=a},createFunctionContext:function(a){var d=this.stackVars.concat(this.registers.list);0<d.length&&(this.source[1]=this.source[1]+", "+d.join(", "));if(!this.isChild)for(var b in this.context.aliases)this.context.aliases.hasOwnProperty(b)&&(this.source[1]=this.source[1]+", "+b+"="+this.context.aliases[b]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+
this.context.programs.join("\n")+"\n");this.environment.isSimple||this.pushSource("return buffer;");d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];b=0;for(var c=this.environment.depths.list.length;b<c;b++)d.push("depth"+this.environment.depths.list[b]);b=this.mergeSource();this.isChild||(b=this.compilerInfo()+b);if(a)return d.push(b),Function.apply(this,d);a="function "+(this.name||"")+"("+d.join(",")+") {\n  "+b+"}";h("debug",a+"\n\n");return a},mergeSource:function(){for(var a=
"",d,b=0,c=this.source.length;b<c;b++){var g=this.source[b];g.appendToBuffer?d=d?d+"\n    + "+g.content:g.content:(d&&(a+="buffer += "+d+";\n  ",d=void 0),a+=g+"\n  ")}return a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);this.replaceStack(function(d){a.splice(1,0,d);return"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var a=["depth0"];this.setupParams(0,a);var d=this.topStack();a.splice(1,0,d);this.pushSource("if (!"+this.lastHelper+") { "+d+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a);this.stripNext&&(a=a.replace(/^\s+/,""));this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+
a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+
this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(d){return d+" == null || "+d+" === false ? "+d+" : "+this.nameLookup(d,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,d){this.pushStackLiteral("depth"+this.lastContext);this.pushString(d);"sexpr"!==d&&("string"===
typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop();this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}"));this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},
push:function(a){this.inlineStack.push(a);return a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,d,b){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");a=this.lastHelper=this.setupHelper(a,d,!0);d=this.nameLookup("depth"+this.lastContext,d,"context");d="helper = "+a.name+" || "+d;a.paramsInit&&(d+=","+a.paramsInit);this.push("("+
d+",helper ? helper.call("+a.callParams+") : helperMissing.call("+a.helperMissingParams+"))");b||this.flushInline()},invokeKnownHelper:function(a,d){var b=this.setupHelper(a,d);this.push(b.name+".call("+b.callParams+")")},invokeAmbiguous:function(a,d){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var b=this.setupHelper(0,a,d),c=this.lastHelper=this.nameLookup("helpers",a,"helper"),g=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();
b.paramsInit&&this.pushSource(b.paramsInit);this.pushSource("if (helper = "+c+") { "+f+" = helper.call("+b.callParams+"); }");this.pushSource("else { helper = "+g+"; "+f+" = typeof helper === functionType ? helper.call("+b.callParams+") : helper; }")},invokePartial:function(a){a=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&a.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+a.join(", ")+")")},assignToHash:function(a){var d=
this.popStack(),b,c;this.options.stringParams&&(c=this.popStack(),b=this.popStack());var g=this.hash;b&&g.contexts.push("'"+a+"': "+b);c&&g.types.push("'"+a+"': "+c);g.values.push("'"+a+"': ("+d+")")},compiler:c,compileChildren:function(a,d){for(var b=a.children,c,g,f=0,k=b.length;f<k;f++){c=b[f];g=new this.compiler;var e=this.matchExistingProgram(c);null==e?(this.context.programs.push(""),e=this.context.programs.length,c.index=e,c.name="program"+e,this.context.programs[e]=g.compile(c,d,this.context),
this.context.environments[e]=c):(c.index=e,c.name="program"+e)}},matchExistingProgram:function(a){for(var d=0,b=this.context.environments.length;d<b;d++){var c=this.context.environments[d];if(c&&c.equals(a))return d}},programExpression:function(a){this.context.aliases.self="this";if(null==a)return"self.noop";var d=this.environment.children[a];a=d.depths.list;for(var b=[d.index,d.name,"data"],c=0,g=a.length;c<g;c++)d=a[c],1===d?b.push("depth0"):b.push("depth"+(d-1));return(0===a.length?"self.program(":
"self.programWithDepth(")+b.join(", ")+")"},register:function(a,d){this.useRegister(a);this.pushSource(a+" = "+d+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new b(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0);a&&this.source.push(a)},pushStack:function(a){this.flushInline();var d=this.incrStack();
a&&this.pushSource(d+" = "+a+";");this.compileStack.push(d);return d},replaceStack:function(a){var d="",c=this.isInline(),g,f,e;c?(g=this.popStack(!0),g instanceof b?(g=g.value,e=!0):(f=!this.stackSlot,d=!f?this.topStackName():this.incrStack(),d="("+this.push(d)+" = "+g+"),",g=this.topStack())):g=this.topStack();a=a.call(this,g);c?(e||this.popStack(),f&&this.stackSlot--,this.push("("+d+a+")")):(/^stack/.test(g)||(g=this.nextStack()),this.pushSource(g+" = ("+d+a+");"));return g},nextStack:function(){return this.pushStack()},
incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var d=0,c=a.length;d<c;d++){var g=a[d];g instanceof b?this.compileStack.push(g):this.pushStack(g)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var c=this.isInline(),g=(c?this.inlineStack:
this.compileStack).pop();if(!a&&g instanceof b)return g.value;if(!c){if(!this.stackSlot)throw new d("Invalid stack pop");this.stackSlot--}return g},topStack:function(a){var d=this.isInline()?this.inlineStack:this.compileStack,d=d[d.length-1];return!a&&d instanceof b?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,d,b){var c=[];a=
this.setupParams(a,c,b);var g=this.nameLookup("helpers",d,"helper");return{params:c,paramsInit:a,name:g,callParams:["depth0"].concat(c).join(", "),helperMissingParams:b&&["depth0",this.quotedString(d)].concat(c).join(", ")}},setupOptions:function(a,d){var b=[],c=[],g=[],f,k;b.push("hash:"+this.popStack());this.options.stringParams&&(b.push("hashTypes:"+this.popStack()),b.push("hashContexts:"+this.popStack()));f=this.popStack();if((k=this.popStack())||f)k||(this.context.aliases.self="this",k="self.noop"),
f||(this.context.aliases.self="this",f="self.noop"),b.push("inverse:"+f),b.push("fn:"+k);for(k=0;k<a;k++)f=this.popStack(),d.push(f),this.options.stringParams&&(g.push(this.popStack()),c.push(this.popStack()));this.options.stringParams&&(b.push("contexts:["+c.join(",")+"]"),b.push("types:["+g.join(",")+"]"));this.options.data&&b.push("data:data");return b},setupParams:function(a,d,b){a="{"+this.setupOptions(a,d).join(",")+"}";if(b)return this.useRegister("options"),d.push("options"),"options="+a;
d.push(a);return""}};for(var m="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=c.RESERVED_WORDS={},r=0,u=m.length;r<u;r++)s[m[r]]=!0;c.isValidJavaScriptVariableName=
function(a){return!c.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)?!0:!1};return c}(a,f);return function(a,d,b,c,f){var e=b.parser,h=b.parse,m=c.Compiler,s=c.compile,r=c.precompile,u=a.create;b=function(){var a=u();a.compile=function(d,b){return s(d,b,a)};a.precompile=function(d,b){return r(d,b,a)};a.AST=d;a.Compiler=m;a.JavaScriptCompiler=f;a.Parser=e;a.parse=h;return a};a=b();a.create=b;return a}(b,c,e,h,f)}();
(function(){function b(a,d,b){b=(b||0)-1;for(var c=a?a.length:0;++b<c;)if(a[b]===d)return b;return-1}function c(a,d){var c=typeof d;if(a=a.l,"boolean"==c||null==d)return a[d]?0:-1;"number"!=c&&"string"!=c&&(c="object");var g="number"==c?d:y+d;return a=(a=a[c])&&a[g],"object"==c?a&&-1<b(a,d)?0:-1:a?0:-1}function f(a){var d=this.l,b=typeof a;if("boolean"==b||null==a)d[a]=!0;else{"number"!=b&&"string"!=b&&(b="object");var c="number"==b?a:y+a,d=d[b]||(d[b]={});"object"==b?(d[c]||(d[c]=[])).push(a):d[c]=
!0}}function a(a){return a.charCodeAt(0)}function e(a,d){for(var b=a.m,c=d.m,g=-1,f=b.length;++g<f;){var k=b[g],e=c[g];if(k!==e){if(k>e||"undefined"==typeof k)return 1;if(k<e||"undefined"==typeof e)return-1}}return a.n-d.n}function h(a){var d=-1,b=a.length,c=a[0],g=a[b/2|0],e=a[b-1];if(c&&"object"==typeof c&&g&&"object"==typeof g&&e&&"object"==typeof e)return!1;c=k();c["false"]=c["null"]=c["true"]=c.undefined=!1;g=k();g.k=a;g.l=c;for(g.push=f;++d<b;)g.push(a[d]);return g}function g(a){return"\\"+
fa[a]}function d(){return s.pop()||[]}function k(){return r.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function n(a){a.length=0;s.length<w&&s.push(a)}function p(a){var d=a.l;d&&p(d);a.k=a.l=a.m=a.object=a.number=a.string=a.o=null;r.length<w&&r.push(a)}function l(a,d,b){d||(d=0);"undefined"==typeof b&&(b=a?a.length:0);var c=-1;b=b-d||0;for(var g=Array(0>b?0:b);++c<b;)g[c]=a[d+c];return g}function q(f){function r(a,
d,b){if(!a||!aa[typeof a])return a;d=d&&"undefined"==typeof b?d:ca(d,b,3);for(var c=-1,g=aa[typeof a]&&ma(a),f=g?g.length:0;++c<f&&(b=g[c],!1!==d(a[b],b,a)););return a}function s(a,d,b){var c;if(!a||!aa[typeof a])return a;d=d&&"undefined"==typeof b?d:ca(d,b,3);for(c in a)if(!1===d(a[c],c,a))break;return a}function w(a,d,b){var c,g=a,f=g;if(!g)return f;for(var k=arguments,e=0,h="number"==typeof b?2:k.length;++e<h;)if((g=k[e])&&aa[typeof g])for(var r=-1,m=aa[typeof g]&&ma(g),q=m?m.length:0;++r<q;)c=
m[r],"undefined"==typeof f[c]&&(f[c]=g[c]);return f}function Y(a,d,b){var c,g=a,f=g;if(!g)return f;var k=arguments,e=0,h="number"==typeof b?2:k.length;if(3<h&&"function"==typeof k[h-2])var r=ca(k[--h-1],k[h--],2);else 2<h&&"function"==typeof k[h-1]&&(r=k[--h]);for(;++e<h;)if((g=k[e])&&aa[typeof g])for(var m=-1,q=aa[typeof g]&&ma(g),n=q?q.length:0;++m<n;)c=q[m],f[c]=r?r(f[c],g[c]):g[c];return f}function fa(a){var d,b=[];if(!a||!aa[typeof a])return b;for(d in a)na.call(a,d)&&b.push(d);return b}function t(a){return a&&
"object"==typeof a&&!ja(a)&&na.call(a,"__wrapped__")?a:new T(a)}function T(a,d){this.__chain__=!!d;this.__wrapped__=a}function ea(a){function d(){if(c){var a=l(c);Qa.apply(a,arguments)}if(this instanceof d){var f=ia(b.prototype),a=b.apply(f,a||arguments);return oa(a)?a:f}return b.apply(g,a||arguments)}var b=a[0],c=a[2],g=a[4];return jb(d,a),d}function X(a,b,c,g,f){if(c){var k=c(a);if("undefined"!=typeof k)return k}if(!oa(a))return a;var e=pa.call(a);if(!K[e])return a;var h=Aa[e];switch(e){case P:case Q:return new h(+a);
case L:case J:return new h(a);case I:return k=h(a.source,z.exec(a)),k.lastIndex=a.lastIndex,k}if(e=ja(a),b){var m=!g;g||(g=d());f||(f=d());for(var q=g.length;q--;)if(g[q]==a)return f[q];k=e?h(a.length):{}}else k=e?l(a):Y({},a);return e&&(na.call(a,"index")&&(k.index=a.index),na.call(a,"input")&&(k.input=a.input)),b?(g.push(a),f.push(k),(e?qa:r)(a,function(a,d){k[d]=X(a,b,c,g,f)}),m&&(n(g),n(f)),k):k}function ia(a){return oa(a)?ab(a):{}}function ca(a,d,b){if("function"!=typeof a)return kb;if("undefined"==
typeof d||!("prototype"in a))return a;var c=a.__bindData__;if("undefined"==typeof c&&(Ra.funcNames&&(c=!a.name),c=c||!Ra.funcDecomp,!c)){var g=Ub.call(a);Ra.funcNames||(c=!v.test(g));c||(c=O.test(g),jb(a,c))}if(!1===c||!0!==c&&1&c[1])return a;switch(b){case 1:return function(b){return a.call(d,b)};case 2:return function(b,c){return a.call(d,b,c)};case 3:return function(b,c,g){return a.call(d,b,c,g)};case 4:return function(b,c,g,f){return a.call(d,b,c,g,f)}}return wb(a,d)}function Fa(a){function d(){var a=
h?k:this;if(g){var p=l(g);Qa.apply(p,arguments)}return(f||m)&&(p||(p=l(arguments)),f&&Qa.apply(p,f),m&&p.length<e)?(c|=16,Fa([b,q?c:-4&c,p,null,k,e])):(p||(p=arguments),r&&(b=a[n]),this instanceof d?(a=ia(b.prototype),p=b.apply(a,p),oa(p)?p:a):b.apply(a,p))}var b=a[0],c=a[1],g=a[2],f=a[3],k=a[4],e=a[5],h=1&c,r=2&c,m=4&c,q=8&c,n=b;return jb(d,a),d}function ta(a,d){var g=-1,f=Ba(),k=a?a.length:0,e=k>=x&&f===b,r=[];if(e){var m=h(d);m?(f=c,d=m):e=!1}for(;++g<k;)m=a[g],0>f(d,m)&&r.push(m);return e&&p(d),
r}function ka(a,d,b,c){c=(c||0)-1;for(var g=a?a.length:0,f=[];++c<g;){var k=a[c];if(k&&"object"==typeof k&&"number"==typeof k.length&&(ja(k)||bb(k))){d||(k=ka(k,d,b));var e=-1,h=k.length,r=f.length;for(f.length+=h;++e<h;)f[r++]=k[e]}else b||f.push(k)}return f}function wa(a,b,c,g,f,k){if(c){var e=c(a,b);if("undefined"!=typeof e)return!!e}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&aa[typeof a]||b&&aa[typeof b]))return!1;if(null==a||null==b)return a===b;var h=pa.call(a),r=pa.call(b);if(h==S&&(h=
H),r==S&&(r=H),h!=r)return!1;switch(h){case P:case Q:return+a==+b;case L:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case I:case J:return a==Ga(b)}if(r=h==U,!r){var m=na.call(a,"__wrapped__"),q=na.call(b,"__wrapped__");if(m||q)return wa(m?a.__wrapped__:a,q?b.__wrapped__:b,c,g,f,k);if(h!=H||(h=a.constructor,m=b.constructor,h!=m&&!(ha(h)&&h instanceof h&&ha(m)&&m instanceof m)&&"constructor"in a&&"constructor"in b))return!1}h=!f;f||(f=d());k||(k=d());for(m=f.length;m--;)if(f[m]==a)return k[m]==b;var p=0,
e=!0;if(f.push(a),k.push(b),r){if(m=a.length,p=b.length,(e=p==m)||g)for(;p--;)if(r=m,q=b[p],g)for(;r--&&!(e=wa(a[r],q,c,g,f,k)););else if(!(e=wa(a[p],q,c,g,f,k)))break}else s(b,function(d,b,h){return na.call(h,b)?(p++,e=na.call(a,b)&&wa(a[b],d,c,g,f,k)):void 0}),e&&!g&&s(a,function(a,d,b){return na.call(b,d)?e=-1<--p:void 0});return f.pop(),k.pop(),h&&(n(f),n(k)),e}function ua(a,d,b,c,g){(ja(d)?qa:r)(d,function(d,f){var k,e,h=d,r=a[f];if(d&&((e=ja(d))||lb(d))){for(h=c.length;h--;)if(k=c[h]==d){r=
g[h];break}if(!k){var m;b&&(h=b(r,d),m="undefined"!=typeof h)&&(r=h);m||(r=e?ja(r)?r:[]:lb(r)?r:{});c.push(d);g.push(r);m||ua(r,d,b,c,g)}}else b&&(h=b(r,d),"undefined"==typeof h&&(h=d)),"undefined"!=typeof h&&(r=h);a[f]=r})}function Ja(a,d){return a+Vb(xb()*(d-a+1))}function Z(a,g,f){var k=-1,e=Ba(),r=a?a.length:0,m=[],q=!g&&r>=x&&e===b,u=f||q?d():m;for(q&&(u=h(u),e=c);++k<r;){var s=a[k],l=f?f(s,k,a):s;(g?!k||u[u.length-1]!==l:0>e(u,l))&&((f||q)&&u.push(l),m.push(s))}return q?(n(u.k),p(u)):f&&n(u),
m}function Ha(a){return function(d,b,c){var g={};b=t.createCallback(b,c,3);c=-1;var f=d?d.length:0;if("number"==typeof f)for(;++c<f;){var k=d[c];a(g,k,b(k,c,d),d)}else r(d,function(d,c,f){a(g,d,b(d,c,f),f)});return g}}function la(a,d,b,c,g,f){var k=1&d,e=4&d,h=16&d,r=32&d;if(!(2&d||ha(a)))throw new Ca;h&&!b.length&&(d&=-17,h=b=!1);r&&!c.length&&(d&=-33,r=c=!1);var m=a&&a.__bindData__;return m&&!0!==m?(m=l(m),m[2]&&(m[2]=l(m[2])),m[3]&&(m[3]=l(m[3])),!k||1&m[1]||(m[4]=g),!k&&1&m[1]&&(d|=8),!e||4&m[1]||
(m[5]=f),h&&Qa.apply(m[2]||(m[2]=[]),b),r&&Wb.apply(m[3]||(m[3]=[]),c),m[1]|=d,la.apply(null,m)):(1==d||17===d?ea:Fa)([a,d,b,c,g,f])}function Ka(a){return mb[a]}function Ba(){var a=(a=t.indexOf)===yb?b:a;return a}function ra(a){return"function"==typeof a&&Xb.test(a)}function La(a){var d,b;return a&&pa.call(a)==H&&(d=a.constructor,!ha(d)||d instanceof d)?(s(a,function(a,d){b=d}),"undefined"==typeof b||na.call(a,b)):!1}function Yb(a){return zb[a]}function bb(a){return a&&"object"==typeof a&&"number"==
typeof a.length&&pa.call(a)==S||!1}function Ab(a,d,b){var c=ma(a),g=c.length;for(d=ca(d,b,3);g--&&(b=c[g],!1!==d(a[b],b,a)););return a}function Sa(a){var d=[];return s(a,function(a,b){ha(a)&&d.push(b)}),d.sort()}function Bb(a){for(var d=-1,b=ma(a),c=b.length,g={};++d<c;){var f=b[d];g[a[f]]=f}return g}function ha(a){return"function"==typeof a}function oa(a){return!(!a||!aa[typeof a])}function Cb(a){return"number"==typeof a||a&&"object"==typeof a&&pa.call(a)==L||!1}function Ta(a){return"string"==typeof a||
a&&"object"==typeof a&&pa.call(a)==J||!1}function cb(a){for(var d=-1,b=ma(a),c=b.length,g=sa(c);++d<c;)g[d]=a[b[d]];return g}function Db(a,d,b){var c=-1,g=Ba(),f=a?a.length:0,k=!1;return b=(0>b?va(0,f+b):b)||0,ja(a)?k=-1<g(a,d,b):"number"==typeof f?k=-1<(Ta(a)?a.indexOf(d,b):g(a,d,b)):r(a,function(a){return++c<b?void 0:!(k=a===d)}),k}function Eb(a,d,b){var c=!0;d=t.createCallback(d,b,3);b=-1;var g=a?a.length:0;if("number"==typeof g)for(;++b<g&&(c=!!d(a[b],b,a)););else r(a,function(a,b,g){return c=
!!d(a,b,g)});return c}function db(a,d,b){var c=[];d=t.createCallback(d,b,3);b=-1;var g=a?a.length:0;if("number"==typeof g)for(;++b<g;){var f=a[b];d(f,b,a)&&c.push(f)}else r(a,function(a,b,g){d(a,b,g)&&c.push(a)});return c}function nb(a,d,b){d=t.createCallback(d,b,3);b=-1;var c=a?a.length:0;if("number"!=typeof c){var g;return r(a,function(a,b,c){return d(a,b,c)?(g=a,!1):void 0}),g}for(;++b<c;){var f=a[b];if(d(f,b,a))return f}}function qa(a,d,b){var c=-1,g=a?a.length:0;if(d=d&&"undefined"==typeof b?
d:ca(d,b,3),"number"==typeof g)for(;++c<g&&!1!==d(a[c],c,a););else r(a,d);return a}function eb(a,d,b){var c=a?a.length:0;if(d=d&&"undefined"==typeof b?d:ca(d,b,3),"number"==typeof c)for(;c--&&!1!==d(a[c],c,a););else{var g=ma(a),c=g.length;r(a,function(a,b,f){return b=g?g[--c]:--c,d(f[b],b,f)})}return a}function Ua(a,d,b){var c=-1,g=a?a.length:0;if(d=t.createCallback(d,b,3),"number"==typeof g)for(var f=sa(g);++c<g;)f[c]=d(a[c],c,a);else f=[],r(a,function(a,b,g){f[++c]=d(a,b,g)});return f}function Fb(d,
b,c){var g=-1/0,f=g;if("function"!=typeof b&&c&&c[b]===d&&(b=null),null==b&&ja(d)){c=-1;for(var k=d.length;++c<k;){var e=d[c];e>f&&(f=e)}}else b=null==b&&Ta(d)?a:t.createCallback(b,c,3),qa(d,function(a,d,c){d=b(a,d,c);d>g&&(g=d,f=a)});return f}function ob(a,d,b,c){if(!a)return b;var g=3>arguments.length;d=t.createCallback(d,c,4);var f=-1,k=a.length;if("number"==typeof k)for(g&&(b=a[++f]);++f<k;)b=d(b,a[f],f,a);else r(a,function(a,c,f){b=g?(g=!1,a):d(b,a,c,f)});return b}function Gb(a,d,b,c){var g=
3>arguments.length;return d=t.createCallback(d,c,4),eb(a,function(a,c,f){b=g?(g=!1,a):d(b,a,c,f)}),b}function Hb(a){var d=-1,b=a?a.length:0,c=sa("number"==typeof b?b:0);return qa(a,function(a){var b=Ja(0,++d);c[d]=c[b];c[b]=a}),c}function Ib(a,d,b){var c;d=t.createCallback(d,b,3);b=-1;var g=a?a.length:0;if("number"==typeof g)for(;++b<g&&!(c=d(a[b],b,a)););else r(a,function(a,b,g){return!(c=d(a,b,g))});return!!c}function pb(a,d,b){var c=0,g=a?a.length:0;if("number"!=typeof d&&null!=d){var f=-1;for(d=
t.createCallback(d,b,3);++f<g&&d(a[f],f,a);)c++}else if(c=d,null==c||b)return a?a[0]:m;return l(a,0,Va(va(0,c),g))}function yb(a,d,c){if("number"==typeof c){var g=a?a.length:0;c=0>c?va(0,g+c):c||0}else if(c)return c=Jb(a,d),a[c]===d?c:-1;return b(a,d,c)}function qb(a,d,b){if("number"!=typeof d&&null!=d){var c=0,g=-1,f=a?a.length:0;for(d=t.createCallback(d,b,3);++g<f&&d(a[g],g,a);)c++}else c=null==d||b?1:va(0,d);return l(a,c)}function Jb(a,d,b,c){var g=0,f=a?a.length:g;b=b?t.createCallback(b,c,1):
kb;for(d=b(d);g<f;)c=g+f>>>1,b(a[c])<d?g=c+1:f=c;return g}function Kb(a,d,b,c){return"boolean"!=typeof d&&null!=d&&(c=b,b="function"!=typeof d&&c&&c[d]===a?null:d,d=!1),null!=b&&(b=t.createCallback(b,c,3)),Z(a,d,b)}function Lb(){for(var a=1<arguments.length?arguments:arguments[0],d=-1,b=a?Fb(rb(a,"length")):0,c=sa(0>b?0:b);++d<b;)c[d]=rb(a,d);return c}function Mb(a,d){var b=-1,c=a?a.length:0,g={};for(d||!c||ja(a[0])||(d=[]);++b<c;){var f=a[b];d?g[f]=d[b]:f&&(g[f[0]]=f[1])}return g}function wb(a,d){return 2<
arguments.length?la(a,17,l(arguments,2),null,d):la(a,1,null,null,d)}function Nb(a,d,b){function c(){q&&fb(q);k=q=n=m;(s||u!==d)&&(p=Ia(),e=a.apply(r,f),q||k||(f=r=null))}function g(){var b=d-(Ia()-h);0<b?q=Wa(g,b):(k&&fb(k),b=n,k=q=n=m,b&&(p=Ia(),e=a.apply(r,f),q||k||(f=r=null)))}var f,k,e,h,r,q,n,p=0,u=!1,s=!0;if(!ha(a))throw new Ca;if(d=va(0,d)||0,!0===b)var l=!0,s=!1;else oa(b)&&(l=b.leading,u="maxWait"in b&&(va(d,b.maxWait)||0),s="trailing"in b?b.trailing:s);return function(){if(f=arguments,h=
Ia(),r=this,n=s&&(q||!l),!1===u)var b=l&&!q;else{k||l||(p=h);var m=u-(h-p),x=0>=m;x?(k&&(k=fb(k)),p=h,e=a.apply(r,f)):k||(k=Wa(c,m))}return x&&q?q=fb(q):q||d===u||(q=Wa(g,d)),b&&(x=!0,e=a.apply(r,f)),!x||q||k||(f=r=null),e}}function kb(a){return a}function sb(a,d,b){var c=!0,g=d&&Sa(d);d&&(b||g.length)||(null==b&&(b=d),f=T,d=a,a=t,g=Sa(d));!1===b?c=!1:oa(b)&&"chain"in b&&(c=b.chain);var f=a,k=ha(f);qa(g,function(b){var g=a[b]=d[b];k&&(f.prototype[b]=function(){var d=this.__chain__,b=this.__wrapped__,
k=[b];if(Qa.apply(k,arguments),k=g.apply(a,k),c||d){if(b===k&&oa(k))return this;k=new f(k);k.__chain__=d}return k})})}function Ob(){}function Pb(a){return function(d){return d[a]}}function Qb(){return this.__wrapped__}f=f?V.defaults(da.Object(),f,V.pick(da,W)):da;var sa=f.Array,Zb=f.Boolean,tb=f.Date,gb=f.Function,Xa=f.Math,$b=f.Number,Ma=f.Object,Ya=f.RegExp,Ga=f.String,Ca=f.TypeError,Na=[],Rb=Ma.prototype,ac=f._,pa=Rb.toString,Xb=Ya("^"+Ga(pa).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,
".*?")+"$"),bc=Xa.ceil,fb=f.clearTimeout,Vb=Xa.floor,Ub=gb.prototype.toString,Oa=ra(Oa=Ma.getPrototypeOf)&&Oa,na=Rb.hasOwnProperty,Qa=Na.push,Wa=f.setTimeout,Sb=Na.splice,Wb=Na.unshift,Tb=function(){try{var a={},d=ra(d=Ma.defineProperty)&&d,b=d(a,a,a)&&d}catch(c){}return b}(),ab=ra(ab=Ma.create)&&ab,ub=ra(ub=sa.isArray)&&ub,cc=f.isFinite,dc=f.isNaN,hb=ra(hb=Ma.keys)&&hb,va=Xa.max,Va=Xa.min,vb=f.parseInt,xb=Xa.random,Aa={};Aa[U]=sa;Aa[P]=Zb;Aa[Q]=tb;Aa[A]=gb;Aa[H]=Ma;Aa[L]=$b;Aa[I]=Ya;Aa[J]=Ga;T.prototype=
t.prototype;var Ra=t.support={};Ra.funcDecomp=!ra(f.a)&&O.test(q);Ra.funcNames="string"==typeof gb.name;t.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:F,variable:"",imports:{_:t}};ab||(ia=function(){function a(){}return function(d){if(oa(d)){a.prototype=d;var b=new a;a.prototype=null}return b||f.Object()}}());var jb=Tb?function(a,d){ya.value=d;Tb(a,"__bindData__",ya)}:Ob,ja=ub||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&pa.call(a)==U||
!1},ma=hb?function(a){return oa(a)?hb(a):[]}:fa,mb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zb=Bb(mb),ec=Ya("("+ma(zb).join("|")+")","g"),fc=Ya("["+ma(mb).join("")+"]","g"),lb=Oa?function(a){if(!a||pa.call(a)!=H)return!1;var d=a.valueOf,b=ra(d)&&(b=Oa(d))&&Oa(b);return b?a==b||Oa(a)==b:La(a)}:La,gc=Ha(function(a,d,b){na.call(a,b)?a[b]++:a[b]=1}),hc=Ha(function(a,d,b){(na.call(a,b)?a[b]:a[b]=[]).push(d)}),ic=Ha(function(a,d,b){a[b]=d}),rb=Ua,Ia=ra(Ia=tb.now)&&Ia||function(){return(new tb).getTime()},
jc=8==vb(B+"08")?vb:function(a,d){return vb(Ta(a)?a.replace(G,""):a,d||0)};return t.after=function(a,d){if(!ha(d))throw new Ca;return function(){return 1>--a?d.apply(this,arguments):void 0}},t.assign=Y,t.at=function(a){for(var d=arguments,b=-1,c=ka(d,!0,!1,1),d=d[2]&&d[2][d[1]]===a?1:c.length,g=sa(d);++b<d;)g[b]=a[c[b]];return g},t.bind=wb,t.bindAll=function(a){for(var d=1<arguments.length?ka(arguments,!0,!1,1):Sa(a),b=-1,c=d.length;++b<c;){var g=d[b];a[g]=la(a[g],1,null,null,a)}return a},t.bindKey=
function(a,d){return 2<arguments.length?la(d,19,l(arguments,2),null,a):la(d,3,null,null,a)},t.chain=function(a){return a=new T(a),a.__chain__=!0,a},t.compact=function(a){for(var d=-1,b=a?a.length:0,c=[];++d<b;){var g=a[d];g&&c.push(g)}return c},t.compose=function(){for(var a=arguments,d=a.length;d--;)if(!ha(a[d]))throw new Ca;return function(){for(var d=arguments,b=a.length;b--;)d=[a[b].apply(this,d)];return d[0]}},t.constant=function(a){return function(){return a}},t.countBy=gc,t.create=function(a,
d){var b=ia(a);return d?Y(b,d):b},t.createCallback=function(a,d,b){var c=typeof a;if(null==a||"function"==c)return ca(a,d,b);if("object"!=c)return Pb(a);var g=ma(a),f=g[0],k=a[f];return 1!=g.length||k!==k||oa(k)?function(d){for(var b=g.length,c=!1;b--&&(c=wa(d[g[b]],a[g[b]],null,!0)););return c}:function(a){return a=a[f],k===a&&(0!==k||1/k==1/a)}},t.curry=function(a,d){return d="number"==typeof d?d:+d||a.length,la(a,4,null,null,null,d)},t.debounce=Nb,t.defaults=w,t.defer=function(a){if(!ha(a))throw new Ca;
var d=l(arguments,1);return Wa(function(){a.apply(m,d)},1)},t.delay=function(a,d){if(!ha(a))throw new Ca;var b=l(arguments,2);return Wa(function(){a.apply(m,b)},d)},t.difference=function(a){return ta(a,ka(arguments,!0,!0,1))},t.filter=db,t.flatten=function(a,d,b,c){return"boolean"!=typeof d&&null!=d&&(c=b,b="function"!=typeof d&&c&&c[d]===a?null:d,d=!1),null!=b&&(a=Ua(a,b,c)),ka(a,d)},t.forEach=qa,t.forEachRight=eb,t.forIn=s,t.forInRight=function(a,d,b){var c=[];s(a,function(a,d){c.push(d,a)});var g=
c.length;for(d=ca(d,b,3);g--&&!1!==d(c[g--],c[g],a););return a},t.forOwn=r,t.forOwnRight=Ab,t.functions=Sa,t.groupBy=hc,t.indexBy=ic,t.initial=function(a,d,b){var c=0,g=a?a.length:0;if("number"!=typeof d&&null!=d){var f=g;for(d=t.createCallback(d,b,3);f--&&d(a[f],f,a);)c++}else c=null==d||b?1:d||c;return l(a,0,Va(va(0,g-c),g))},t.intersection=function(){for(var a=[],g=-1,f=arguments.length,k=d(),e=Ba(),r=e===b,m=d();++g<f;){var q=arguments[g];(ja(q)||bb(q))&&(a.push(q),k.push(r&&q.length>=x&&h(g?
a[g]:m)))}var r=a[0],u=-1,s=r?r.length:0,l=[];a:for(;++u<s;){var y=k[0],q=r[u];if(0>(y?c(y,q):e(m,q))){g=f;for((y||m).push(q);--g;)if(y=k[g],0>(y?c(y,q):e(a[g],q)))continue a;l.push(q)}}for(;f--;)(y=k[f])&&p(y);return n(k),n(m),l},t.invert=Bb,t.invoke=function(a,d){var b=l(arguments,2),c=-1,g="function"==typeof d,f=a?a.length:0,k=sa("number"==typeof f?f:0);return qa(a,function(a){k[++c]=(g?d:a[d]).apply(a,b)}),k},t.keys=ma,t.map=Ua,t.mapValues=function(a,d,b){var c={};return d=t.createCallback(d,
b,3),r(a,function(a,b,g){c[b]=d(a,b,g)}),c},t.max=Fb,t.memoize=function(a,d){function b(){var c=b.cache,g=d?d.apply(this,arguments):y+arguments[0];return na.call(c,g)?c[g]:c[g]=a.apply(this,arguments)}if(!ha(a))throw new Ca;return b.cache={},b},t.merge=function(a){var b=arguments,c=2;if(!oa(a))return a;if("number"!=typeof b[2]&&(c=b.length),3<c&&"function"==typeof b[c-2])var g=ca(b[--c-1],b[c--],2);else 2<c&&"function"==typeof b[c-1]&&(g=b[--c]);for(var b=l(arguments,1,c),f=-1,k=d(),e=d();++f<c;)ua(a,
b[f],g,k,e);return n(k),n(e),a},t.min=function(d,b,c){var g=1/0,f=g;if("function"!=typeof b&&c&&c[b]===d&&(b=null),null==b&&ja(d)){c=-1;for(var k=d.length;++c<k;){var e=d[c];e<f&&(f=e)}}else b=null==b&&Ta(d)?a:t.createCallback(b,c,3),qa(d,function(a,d,c){d=b(a,d,c);d<g&&(g=d,f=a)});return f},t.omit=function(a,d,b){var c={};if("function"!=typeof d){var g=[];s(a,function(a,d){g.push(d)});for(var g=ta(g,ka(arguments,!0,!1,1)),f=-1,k=g.length;++f<k;){var e=g[f];c[e]=a[e]}}else d=t.createCallback(d,b,
3),s(a,function(a,b,g){d(a,b,g)||(c[b]=a)});return c},t.once=function(a){var d,b;if(!ha(a))throw new Ca;return function(){return d?b:(d=!0,b=a.apply(this,arguments),a=null,b)}},t.pairs=function(a){for(var d=-1,b=ma(a),c=b.length,g=sa(c);++d<c;){var f=b[d];g[d]=[f,a[f]]}return g},t.partial=function(a){return la(a,16,l(arguments,1))},t.partialRight=function(a){return la(a,32,null,l(arguments,1))},t.pick=function(a,d,b){var c={};if("function"!=typeof d)for(var g=-1,f=ka(arguments,!0,!1,1),k=oa(a)?f.length:
0;++g<k;){var e=f[g];e in a&&(c[e]=a[e])}else d=t.createCallback(d,b,3),s(a,function(a,b,g){d(a,b,g)&&(c[b]=a)});return c},t.pluck=rb,t.property=Pb,t.pull=function(a){for(var d=arguments,b=0,c=d.length,g=a?a.length:0;++b<c;)for(var f=-1,k=d[b];++f<g;)a[f]===k&&(Sb.call(a,f--,1),g--);return a},t.range=function(a,d,b){a=+a||0;b="number"==typeof b?b:+b||1;null==d&&(d=a,a=0);var c=-1;d=va(0,bc((d-a)/(b||1)));for(var g=sa(d);++c<d;)g[c]=a,a+=b;return g},t.reject=function(a,d,b){return d=t.createCallback(d,
b,3),db(a,function(a,b,c){return!d(a,b,c)})},t.remove=function(a,d,b){var c=-1,g=a?a.length:0,f=[];for(d=t.createCallback(d,b,3);++c<g;)b=a[c],d(b,c,a)&&(f.push(b),Sb.call(a,c--,1),g--);return f},t.rest=qb,t.shuffle=Hb,t.sortBy=function(a,b,c){var g=-1,f=ja(b),h=a?a.length:0,r=sa("number"==typeof h?h:0);f||(b=t.createCallback(b,c,3));qa(a,function(a,c,e){var h=r[++g]=k();f?h.m=Ua(b,function(d){return a[d]}):(h.m=d())[0]=b(a,c,e);h.n=g;h.o=a});h=r.length;for(r.sort(e);h--;)a=r[h],r[h]=a.o,f||n(a.m),
p(a);return r},t.tap=function(a,d){return d(a),a},t.throttle=function(a,d,b){var c=!0,g=!0;if(!ha(a))throw new Ca;return!1===b?c=!1:oa(b)&&(c="leading"in b?b.leading:c,g="trailing"in b?b.trailing:g),ba.leading=c,ba.maxWait=d,ba.trailing=g,Nb(a,d,ba)},t.times=function(a,d,b){a=-1<(a=+a)?a:0;var c=-1,g=sa(a);for(d=ca(d,b,1);++c<a;)g[c]=d(c);return g},t.toArray=function(a){return a&&"number"==typeof a.length?l(a):cb(a)},t.transform=function(a,d,b,c){var g=ja(a);if(null==b)if(g)b=[];else{var f=a&&a.constructor;
b=ia(f&&f.prototype)}return d&&(d=t.createCallback(d,c,4),(g?qa:r)(a,function(a,c,g){return d(b,a,c,g)})),b},t.union=function(){return Z(ka(arguments,!0,!0))},t.uniq=Kb,t.values=cb,t.where=db,t.without=function(a){return ta(a,l(arguments,1))},t.wrap=function(a,d){return la(d,16,[a])},t.xor=function(){for(var a=-1,d=arguments.length;++a<d;){var b=arguments[a];if(ja(b)||bb(b))var c=c?Z(ta(c,b).concat(ta(b,c))):b}return c||[]},t.zip=Lb,t.zipObject=Mb,t.collect=Ua,t.drop=qb,t.each=qa,t.eachRight=eb,t.extend=
Y,t.methods=Sa,t.object=Mb,t.select=db,t.tail=qb,t.unique=Kb,t.unzip=Lb,sb(t),t.clone=function(a,d,b,c){return"boolean"!=typeof d&&null!=d&&(c=b,b=d,d=!1),X(a,d,"function"==typeof b&&ca(b,c,1))},t.cloneDeep=function(a,d,b){return X(a,!0,"function"==typeof d&&ca(d,b,1))},t.contains=Db,t.escape=function(a){return null==a?"":Ga(a).replace(fc,Ka)},t.every=Eb,t.find=nb,t.findIndex=function(a,d,b){var c=-1,g=a?a.length:0;for(d=t.createCallback(d,b,3);++c<g;)if(d(a[c],c,a))return c;return-1},t.findKey=function(a,
d,b){var c;return d=t.createCallback(d,b,3),r(a,function(a,b,g){return d(a,b,g)?(c=b,!1):void 0}),c},t.findLast=function(a,d,b){var c;return d=t.createCallback(d,b,3),eb(a,function(a,b,g){return d(a,b,g)?(c=a,!1):void 0}),c},t.findLastIndex=function(a,d,b){var c=a?a.length:0;for(d=t.createCallback(d,b,3);c--;)if(d(a[c],c,a))return c;return-1},t.findLastKey=function(a,d,b){var c;return d=t.createCallback(d,b,3),Ab(a,function(a,b,g){return d(a,b,g)?(c=b,!1):void 0}),c},t.has=function(a,d){return a?
na.call(a,d):!1},t.identity=kb,t.indexOf=yb,t.isArguments=bb,t.isArray=ja,t.isBoolean=function(a){return!0===a||!1===a||a&&"object"==typeof a&&pa.call(a)==P||!1},t.isDate=function(a){return a&&"object"==typeof a&&pa.call(a)==Q||!1},t.isElement=function(a){return a&&1===a.nodeType||!1},t.isEmpty=function(a){var d=!0;if(!a)return d;var b=pa.call(a),c=a.length;return b==U||b==J||b==S||b==H&&"number"==typeof c&&ha(a.splice)?!c:(r(a,function(){return d=!1}),d)},t.isEqual=function(a,d,b,c){return wa(a,
d,"function"==typeof b&&ca(b,c,2))},t.isFinite=function(a){return cc(a)&&!dc(parseFloat(a))},t.isFunction=ha,t.isNaN=function(a){return Cb(a)&&a!=+a},t.isNull=function(a){return null===a},t.isNumber=Cb,t.isObject=oa,t.isPlainObject=lb,t.isRegExp=function(a){return a&&"object"==typeof a&&pa.call(a)==I||!1},t.isString=Ta,t.isUndefined=function(a){return"undefined"==typeof a},t.lastIndexOf=function(a,d,b){var c=a?a.length:0;for("number"==typeof b&&(c=(0>b?va(0,c+b):Va(b,c-1))+1);c--;)if(a[c]===d)return c;
return-1},t.mixin=sb,t.noConflict=function(){return f._=ac,this},t.noop=Ob,t.now=Ia,t.parseInt=jc,t.random=function(a,d,b){var c=null==d;return null==b&&("boolean"==typeof a&&c?(b=a,a=1):c||"boolean"!=typeof d||(b=d,c=!0)),null==a&&c&&(d=1),a=+a||0,c?(d=a,a=0):d=+d||0,b||a%1||d%1?(b=xb(),Va(a+b*(d-a+parseFloat("1e-"+((b+"").length-1))),d)):Ja(a,d)},t.reduce=ob,t.reduceRight=Gb,t.result=function(a,d){if(a){var b=a[d];return ha(b)?a[d]():b}},t.runInContext=q,t.size=function(a){var d=a?a.length:0;return"number"==
typeof d?d:ma(a).length},t.some=Ib,t.sortedIndex=Jb,t.template=function(a,d,b){var c=t.templateSettings;a=Ga(a||"");b=w({},b,c);var f,k=w({},b.imports,c.imports),c=ma(k),k=cb(k),e=0,h=b.interpolate||N,r="__p+='",h=Ya((b.escape||N).source+"|"+h.source+"|"+(h===F?M:N).source+"|"+(b.evaluate||N).source+"|$","g");a.replace(h,function(d,b,c,k,h,m){return c||(c=k),r+=a.slice(e,m).replace(R,g),b&&(r+="'+__e("+b+")+'"),h&&(f=!0,r+="';"+h+";\n__p+='"),c&&(r+="'+((__t=("+c+"))==null?'':__t)+'"),e=m+d.length,
d});r+="';";(h=b=b.variable)||(b="obj",r="with("+b+"){"+r+"}");r=(f?r.replace(C,""):r).replace(E,"$1").replace(D,"$1;");r="function("+b+"){"+(h?"":b+"||("+b+"={});")+"var __t,__p='',__e=_.escape"+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+r+"return __p}";try{var q=gb(c,"return "+r).apply(m,k)}catch(n){throw n.source=r,n;}return d?q(d):(q.source=r,q)},t.unescape=function(a){return null==a?"":Ga(a).replace(ec,Yb)},t.uniqueId=function(a){var d=++u;return Ga(null==
a?"":a)+d},t.all=Eb,t.any=Ib,t.detect=nb,t.findWhere=nb,t.foldl=ob,t.foldr=Gb,t.include=Db,t.inject=ob,sb(function(){var a={};return r(t,function(d,b){t.prototype[b]||(a[b]=d)}),a}(),!1),t.first=pb,t.last=function(a,d,b){var c=0,g=a?a.length:0;if("number"!=typeof d&&null!=d){var f=g;for(d=t.createCallback(d,b,3);f--&&d(a[f],f,a);)c++}else if(c=d,null==c||b)return a?a[g-1]:m;return l(a,va(0,g-c))},t.sample=function(a,d,b){return a&&"number"!=typeof a.length&&(a=cb(a)),null==d||b?a?a[Ja(0,a.length-
1)]:m:(a=Hb(a),a.length=Va(va(0,d),a.length),a)},t.take=pb,t.head=pb,r(t,function(a,d){var b="sample"!==d;t.prototype[d]||(t.prototype[d]=function(d,c){var g=this.__chain__,f=a(this.__wrapped__,d,c);return g||null!=d&&(!c||b&&"function"==typeof d)?new T(f,g):f})}),t.VERSION="2.4.1",t.prototype.chain=function(){return this.__chain__=!0,this},t.prototype.toString=function(){return Ga(this.__wrapped__)},t.prototype.value=Qb,t.prototype.valueOf=Qb,qa(["join","pop","shift"],function(a){var d=Na[a];t.prototype[a]=
function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new T(b,a):b}}),qa(["push","reverse","sort","unshift"],function(a){var d=Na[a];t.prototype[a]=function(){return d.apply(this.__wrapped__,arguments),this}}),qa(["concat","slice","splice"],function(a){var d=Na[a];t.prototype[a]=function(){return new T(d.apply(this.__wrapped__,arguments),this.__chain__)}}),t}var m,s=[],r=[],u=0,y=+new Date+"",x=75,w=40,B=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",
C=/\b__p\+='';/g,E=/\b(__p\+=)''\+/g,D=/(__e\(.*?\)|\b__t\))\+'';/g,M=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,v=/^\s*function[ \n\r\t]+\w/,F=/<%=([\s\S]+?)%>/g,G=RegExp("^["+B+"]*0+(?=.$)"),N=/($^)/,O=/\bthis\b/,R=/['\n\r\t\u2028\u2029\\]/g,W="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),S="[object Arguments]",U="[object Array]",P="[object Boolean]",Q="[object Date]",A="[object Function]",L="[object Number]",
H="[object Object]",I="[object RegExp]",J="[object String]",K={};K[A]=!1;K[S]=K[U]=K[P]=K[Q]=K[L]=K[H]=K[I]=K[J]=!0;var ba={leading:!1,maxWait:0,trailing:!1},ya={configurable:!1,enumerable:!1,value:null,writable:!1},aa={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},da=aa[typeof window]&&window||this,Y=aa[typeof exports]&&exports&&!exports.nodeType&&exports,ea=aa[typeof module]&&module&&!module.nodeType&&
module,T=ea&&ea.exports===Y&&Y,X=aa[typeof global]&&global;!X||X.global!==X&&X.window!==X||(da=X);var V=q();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(da._=V,define(function(){return V})):Y&&ea?T?(ea.exports=V)._=V:Y._=V:da._=V}).call(this);
(function(b,c){if("function"===typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,f,h){b.Backbone=c(b,h,a,f)});else if("undefined"!==typeof exports){var f=require("underscore");c(b,exports,f)}else b.Backbone=c(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)})(this,function(b,c,f,a){var e=b.Backbone,h=[].slice;c.VERSION="1.1.2";c.$=a;c.noConflict=function(){b.Backbone=e;return this};c.emulateHTTP=!1;c.emulateJSON=!1;var g=c.Events={on:function(a,d,b){if(!k(this,"on",a,[d,b])||
!d)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:d,context:b,ctx:b||this});return this},once:function(a,d,b){if(!k(this,"once",a,[d,b])||!d)return this;var c=this,g=f.once(function(){c.off(a,g);d.apply(this,arguments)});g._callback=d;return this.on(a,g,b)},off:function(a,d,b){var c,g,e,h,r,m,q,n;if(!this._events||!k(this,"off",a,[d,b]))return this;if(!a&&!d&&!b)return this._events=void 0,this;h=a?[a]:f.keys(this._events);r=0;for(m=h.length;r<m;r++)if(a=
h[r],e=this._events[a]){this._events[a]=c=[];if(d||b){q=0;for(n=e.length;q<n;q++)g=e[q],(d&&d!==g.callback&&d!==g.callback._callback||b&&b!==g.context)&&c.push(g)}c.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var d=h.call(arguments,1);if(!k(this,"trigger",a,d))return this;var b=this._events[a],c=this._events.all;b&&n(b,d);c&&n(c,arguments);return this},stopListening:function(a,d,b){var c=this._listeningTo;if(!c)return this;var g=!d&&!b;!b&&"object"===
typeof d&&(b=this);a&&((c={})[a._listenId]=a);for(var k in c)a=c[k],a.off(d,b,this),(g||f.isEmpty(a._events))&&delete this._listeningTo[k];return this}},d=/\s+/,k=function(a,b,c,g){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(g));return!1}if(d.test(c)){c=c.split(d);f=0;for(var k=c.length;f<k;f++)a[b].apply(a,[c[f]].concat(g));return!1}return!0},n=function(a,d){var b,c=-1,g=a.length,f=d[0],k=d[1],e=d[2];switch(d.length){case 0:for(;++c<g;)(b=a[c]).callback.call(b.ctx);
break;case 1:for(;++c<g;)(b=a[c]).callback.call(b.ctx,f);break;case 2:for(;++c<g;)(b=a[c]).callback.call(b.ctx,f,k);break;case 3:for(;++c<g;)(b=a[c]).callback.call(b.ctx,f,k,e);break;default:for(;++c<g;)(b=a[c]).callback.apply(b.ctx,d)}};f.each({listenTo:"on",listenToOnce:"once"},function(a,d){g[d]=function(d,b,c){var g=this._listeningTo||(this._listeningTo={}),k=d._listenId||(d._listenId=f.uniqueId("l"));g[k]=d;!c&&"object"===typeof b&&(c=this);d[a](b,c,this);return this}});g.bind=g.on;g.unbind=
g.off;f.extend(c,g);var p=c.Model=function(a,d){var b=a||{};d||(d={});this.cid=f.uniqueId("c");this.attributes={};d.collection&&(this.collection=d.collection);d.parse&&(b=this.parse(b,d)||{});b=f.defaults({},b,f.result(this,"defaults"));this.set(b,d);this.changed={};this.initialize.apply(this,arguments)};f.extend(p.prototype,g,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return f.clone(this.attributes)},sync:function(){return c.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return f.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,d,b){var c,g,k,e,h,r,m;if(null==a)return this;"object"===typeof a?(g=a,b=d):(g={})[a]=d;b||(b={});if(!this._validate(g,b))return!1;k=b.unset;e=b.silent;a=[];h=this._changing;this._changing=!0;h||(this._previousAttributes=f.clone(this.attributes),this.changed={});m=this.attributes;r=this._previousAttributes;this.idAttribute in g&&(this.id=g[this.idAttribute]);
for(c in g)d=g[c],f.isEqual(m[c],d)||a.push(c),f.isEqual(r[c],d)?delete this.changed[c]:this.changed[c]=d,k?delete m[c]:m[c]=d;if(!e){a.length&&(this._pending=b);d=0;for(c=a.length;d<c;d++)this.trigger("change:"+a[d],this,m[a[d]],b)}if(h)return this;if(!e)for(;this._pending;)b=this._pending,this._pending=!1,this.trigger("change",this,b);this._changing=this._pending=!1;return this},unset:function(a,d){return this.set(a,void 0,f.extend({},d,{unset:!0}))},clear:function(a){var d={},b;for(b in this.attributes)d[b]=
void 0;return this.set(d,f.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var d,b=!1,c=this._changing?this._previousAttributes:this.attributes,g;for(g in a)if(!f.isEqual(c[g],d=a[g]))(b||(b={}))[g]=d;return b},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},
fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var d=this,b=a.success;a.success=function(c){if(!d.set(d.parse(c,a),a))return!1;b&&b(d,c,a);d.trigger("sync",d,c,a)};O(this,a);return this.sync("read",this,a)},save:function(a,d,b){var c,g=this.attributes;null==a||"object"===typeof a?(c=a,b=d):(c={})[a]=d;b=f.extend({validate:!0},b);if(c&&!b.wait){if(!this.set(c,b))return!1}else if(!this._validate(c,b))return!1;c&&b.wait&&(this.attributes=f.extend({},g,c));void 0===b.parse&&(b.parse=
!0);var k=this,e=b.success;b.success=function(a){k.attributes=g;var d=k.parse(a,b);b.wait&&(d=f.extend(c||{},d));if(f.isObject(d)&&!k.set(d,b))return!1;e&&e(k,a,b);k.trigger("sync",k,a,b)};O(this,b);a=this.isNew()?"create":b.patch?"patch":"update";"patch"===a&&(b.attrs=c);a=this.sync(a,this,b);c&&b.wait&&(this.attributes=g);return a},destroy:function(a){a=a?f.clone(a):{};var d=this,b=a.success,c=function(){d.trigger("destroy",d,d.collection,a)};a.success=function(g){(a.wait||d.isNew())&&c();b&&b(d,
g,a);d.isNew()||d.trigger("sync",d,g,a)};if(this.isNew())return a.success(),!1;O(this,a);var g=this.sync("delete",this,a);a.wait||c();return g},url:function(){var a=f.result(this,"urlRoot")||f.result(this.collection,"url")||N();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,d){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},f.extend(a||
{},{validate:!0}))},_validate:function(a,d){if(!d.validate||!this.validate)return!0;a=f.extend({},this.attributes,a);var b=this.validationError=this.validate(a,d)||null;if(!b)return!0;this.trigger("invalid",this,b,f.extend(d,{validationError:b}));return!1}});f.each("keys values pairs invert pick omit".split(" "),function(a){p.prototype[a]=function(){var d=h.call(arguments);d.unshift(this.attributes);return f[a].apply(f,d)}});var l=c.Collection=function(a,d){d||(d={});d.model&&(this.model=d.model);
void 0!==d.comparator&&(this.comparator=d.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,f.extend({silent:!0},d))},q={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};f.extend(l.prototype,g,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(d){return d.toJSON(a)})},sync:function(){return c.sync.apply(this,arguments)},add:function(a,d){return this.set(a,f.extend({merge:!1},d,m))},remove:function(a,d){var b=!f.isArray(a);a=b?[a]:f.clone(a);d||
(d={});var c,g,k,e;c=0;for(g=a.length;c<g;c++)if(e=a[c]=this.get(a[c]))delete this._byId[e.id],delete this._byId[e.cid],k=this.indexOf(e),this.models.splice(k,1),this.length--,d.silent||(d.index=k,e.trigger("remove",e,this,d)),this._removeReference(e,d);return b?a[0]:a},set:function(a,d){d=f.defaults({},d,q);d.parse&&(a=this.parse(a,d));var b=!f.isArray(a);a=b?a?[a]:[]:f.clone(a);var c,g,k,e,h,r,m=d.at,n=this.model,u=this.comparator&&null==m&&!1!==d.sort,s=f.isString(this.comparator)?this.comparator:
null,l=[],x=[],y={},w=d.add,B=d.merge,C=d.remove,D=!u&&w&&C?[]:!1;c=0;for(g=a.length;c<g;c++){h=a[c]||{};k=h instanceof p?e=h:h[n.prototype.idAttribute||"id"];if(k=this.get(k))C&&(y[k.cid]=!0),B&&(h=h===e?e.attributes:h,d.parse&&(h=k.parse(h,d)),k.set(h,d),u&&(!r&&k.hasChanged(s))&&(r=!0)),a[c]=k;else if(w){e=a[c]=this._prepareModel(h,d);if(!e)continue;l.push(e);this._addReference(e,d)}e=k||e;D&&(e.isNew()||!y[e.id])&&D.push(e);y[e.id]=!0}if(C){c=0;for(g=this.length;c<g;++c)y[(e=this.models[c]).cid]||
x.push(e);x.length&&this.remove(x,d)}if(l.length||D&&D.length)if(u&&(r=!0),this.length+=l.length,null!=m){c=0;for(g=l.length;c<g;c++)this.models.splice(m+c,0,l[c])}else{D&&(this.models.length=0);h=D||l;c=0;for(g=h.length;c<g;c++)this.models.push(h[c])}r&&this.sort({silent:!0});if(!d.silent){c=0;for(g=l.length;c<g;c++)(e=l[c]).trigger("add",e,this,d);(r||D&&D.length)&&this.trigger("sort",this,d)}return b?a[0]:a},reset:function(a,d){d||(d={});for(var b=0,c=this.models.length;b<c;b++)this._removeReference(this.models[b],
d);d.previousModels=this.models;this._reset();a=this.add(a,f.extend({silent:!0},d));d.silent||this.trigger("reset",this,d);return a},push:function(a,d){return this.add(a,f.extend({at:this.length},d))},pop:function(a){var d=this.at(this.length-1);this.remove(d,a);return d},unshift:function(a,d){return this.add(a,f.extend({at:0},d))},shift:function(a){var d=this.at(0);this.remove(d,a);return d},slice:function(){return h.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,d){return f.isEmpty(a)?d?void 0:[]:this[d?"find":"filter"](function(d){for(var b in a)if(a[b]!==d.get(b))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});f.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(f.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return f.invoke(this.models,"get",a)},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var d=a.success,b=this;a.success=function(c){b[a.reset?"reset":"set"](c,a);d&&d(b,c,a);b.trigger("sync",b,c,a)};O(this,a);return this.sync("read",this,a)},create:function(a,d){d=d?f.clone(d):{};if(!(a=this._prepareModel(a,d)))return!1;d.wait||this.add(a,d);var b=this,c=d.success;d.success=function(a,g){d.wait&&b.add(a,
d);c&&c(a,g,d)};a.save(null,d);return a},parse:function(a,d){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,d){if(a instanceof p)return a;d=d?f.clone(d):{};d.collection=this;var b=new this.model(a,d);if(!b.validationError)return b;this.trigger("invalid",this,b.validationError,d);return!1},_addReference:function(a,d){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,d){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,d,b,c){("add"===a||"remove"===a)&&b!==this||("destroy"===a&&this.remove(d,c),d&&a==="change:"+d.idAttribute&&(delete this._byId[d.previous(d.idAttribute)],null!=d.id&&(this._byId[d.id]=d)),this.trigger.apply(this,arguments))}});f.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){l.prototype[a]=function(){var d=h.call(arguments);d.unshift(this.models);return f[a].apply(f,d)}});f.each(["groupBy","countBy","sortBy","indexBy"],function(a){l.prototype[a]=function(d,b){var c=f.isFunction(d)?d:function(a){return a.get(d)};return f[a](this.models,c,b)}});a=c.View=function(a){this.cid=f.uniqueId("view");a||(a={});f.extend(this,f.pick(a,r));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var s=/^(\S+)\s*(.*)$/,r="model collection el id attributes className tagName events".split(" ");
f.extend(a.prototype,g,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,d){this.$el&&this.undelegateEvents();this.$el=a instanceof c.$?a:c.$(a);this.el=this.$el[0];!1!==d&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=f.result(this,"events")))return this;this.undelegateEvents();for(var d in a){var b=a[d];f.isFunction(b)||
(b=this[a[d]]);if(b){var c=d.match(s),g=c[1],c=c[2],b=f.bind(b,this),g=g+(".delegateEvents"+this.cid);if(""===c)this.$el.on(g,b);else this.$el.on(g,c,b)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(f.result(this,"el"),!1);else{var a=f.extend({},f.result(this,"attributes"));this.id&&(a.id=f.result(this,"id"));this.className&&(a["class"]=f.result(this,"className"));a=c.$("<"+f.result(this,"tagName")+
">").attr(a);this.setElement(a,!1)}}});c.sync=function(a,d,b){var g=y[a];f.defaults(b||(b={}),{emulateHTTP:c.emulateHTTP,emulateJSON:c.emulateJSON});var k={type:g,dataType:"json"};b.url||(k.url=f.result(d,"url")||N());if(null==b.data&&d&&("create"===a||"update"===a||"patch"===a))k.contentType="application/json",k.data=JSON.stringify(b.attrs||d.toJSON(b));b.emulateJSON&&(k.contentType="application/x-www-form-urlencoded",k.data=k.data?{model:k.data}:{});if(b.emulateHTTP&&("PUT"===g||"DELETE"===g||"PATCH"===
g)){k.type="POST";b.emulateJSON&&(k.data._method=g);var e=b.beforeSend;b.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g);if(e)return e.apply(this,arguments)}}"GET"!==k.type&&!b.emulateJSON&&(k.processData=!1);"PATCH"===k.type&&u&&(k.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=b.xhr=c.ajax(f.extend(k,b));d.trigger("request",d,a,b);return a};var u="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};c.ajax=function(){return c.$.ajax.apply(c.$,arguments)};var x=c.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},w=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;f.extend(x.prototype,g,{initialize:function(){},route:function(a,d,b){f.isRegExp(a)||(a=this._routeToRegExp(a));f.isFunction(d)&&(b=d,d="");b||(b=this[d]);var g=this;c.history.route(a,
function(f){f=g._extractParameters(a,f);g.execute(b,f);g.trigger.apply(g,["route:"+d].concat(f));g.trigger("route",d,f);c.history.trigger("route",g,d,f)});return this},execute:function(a,d){a&&a.apply(this,d)},navigate:function(a,d){c.history.navigate(a,d);return this},_bindRoutes:function(){if(this.routes){this.routes=f.result(this,"routes");for(var a,d=f.keys(this.routes);null!=(a=d.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(E,"\\$&").replace(w,"(?:$1)?").replace(B,
function(a,d){return d?a:"([^/?]+)"}).replace(C,"([^?]*?)");return RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,d){var b=a.exec(d).slice(1);return f.map(b,function(a,d){return d===b.length-1?a||null:a?decodeURIComponent(a):null})}});var D=c.History=function(){this.handlers=[];f.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,v=/msie [\w.]+/,F=/\/$/,G=/#.*$/;D.started=!1;f.extend(D.prototype,
g,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,d){if(null==a)if(this._hasPushState||!this._wantsHashChange||d){a=decodeURI(this.location.pathname+this.location.search);var b=this.root.replace(F,"");a.indexOf(b)||(a=a.slice(b.length))}else a=this.getHash();return a.replace(M,"")},start:function(a){if(D.started)throw Error("Backbone.history has already been started");
D.started=!0;this.options=f.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);a=this.getFragment();var d=document.documentMode,d=v.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(z,"/");d&&this._wantsHashChange&&(this.iframe=c.$('<iframe src="javascript:0" tabindex="-1">').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)c.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!d)c.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
(this.atRoot()&&a.hash)&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){c.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);D.started=!1},route:function(a,d){this.handlers.unshift({route:a,callback:d})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return f.any(this.handlers,function(d){if(d.route.test(a))return d.callback(a),!0})},navigate:function(a,d){if(!D.started)return!1;if(!d||!0===d)d={trigger:!!d};var b=this.root+(a=this.getFragment(a||""));a=a.replace(G,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==b&&(b=b.slice(0,-1));if(this._hasPushState)this.history[d.replace?"replaceState":"pushState"]({},
document.title,b);else if(this._wantsHashChange)this._updateHash(this.location,a,d.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(d.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,d.replace));else return this.location.assign(b);if(d.trigger)return this.loadUrl(a)}},_updateHash:function(a,d,b){b?(b=a.href.replace(/(javascript:|#).*$/,""),a.replace(b+"#"+d)):a.hash="#"+d}});c.history=new D;p.extend=l.extend=x.extend=a.extend=D.extend=function(a,
d){var b=this,c;c=a&&f.has(a,"constructor")?a.constructor:function(){return b.apply(this,arguments)};f.extend(c,b,d);var g=function(){this.constructor=c};g.prototype=b.prototype;c.prototype=new g;a&&f.extend(c.prototype,a);c.__super__=b.prototype;return c};var N=function(){throw Error('A "url" property or function must be specified');},O=function(a,d){var b=d.error;d.error=function(c){b&&b(a,c,d);a.trigger("error",a,c,d)}};return c});
!function(b,c){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,f){return b.Marionette=c(b,a,f)});else if("undefined"!=typeof exports){var f=require("backbone"),a=require("underscore");module.exports=c(b,f,a)}else b.Marionette=c(b,b.Backbone,b._)}(this,function(b,c,f){function a(a,b){var c=Error(a);throw c.name=b||"Error",c;}!function(a,b){var c=a.ChildViewContainer;return a.ChildViewContainer=function(a,d){var b=function(a){this._views={};this._indexByModel={};
this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(b.prototype,{add:function(a,d){var b=a.cid;return this._views[b]=a,a.model&&(this._indexByModel[a.model.cid]=b),d&&(this._indexByCustom[d]=b),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},
findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;return a.model&&delete this._indexByModel[a.model.cid],d.any(this._indexByCustom,function(a,d){return a===b?(delete this._indexByCustom[d],!0):void 0},this),delete this._views[b],this._updateLength(),this},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(c){d.isFunction(c[a])&&c[a].apply(c,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});return d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(a){b.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));return d[a].apply(d,b)}}),b}(a,b),a.ChildViewContainer.VERSION="0.1.4",a.ChildViewContainer.noConflict=function(){return a.ChildViewContainer=c,this},a.ChildViewContainer}(c,f);(function(a,b){var c=a.Wreqr,g=a.Wreqr={};return a.Wreqr.VERSION="1.3.1",a.Wreqr.noConflict=function(){return a.Wreqr=c,this},g.Handlers=function(a,d){var b=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&
this.initialize(a)};return b.extend=a.Model.extend,d.extend(b.prototype,a.Events,{setHandlers:function(a){d.each(a,function(a,b){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(b,a,c)},this)},setHandler:function(a,d,b){this._wreqrHandlers[a]={callback:d,context:b};this.trigger("handler:add",a,d,b)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var d=this._wreqrHandlers[a];if(d)return function(){var a=Array.prototype.slice.apply(arguments);
return d.callback.apply(d.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),b}(a,b),g.CommandStorage=function(){var c=function(a){this.options=a;this._commands={};b.isFunction(this.initialize)&&this.initialize(a)};return b.extend(c.prototype,a.Events,{getCommands:function(a){var d=this._commands[a];return d||(d={command:a,instances:[]},this._commands[a]=d),d},addCommand:function(a,d){this.getCommands(a).instances.push(d)},
clearCommands:function(a){this.getCommands(a).instances=[]}}),c}(),g.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(d){this.options=d||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,b)},execute:function(a,d){a=arguments[0];d=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,d):this.storage.addCommand(a,
d)},_executeCommands:function(a,d,c){var g=this.storage.getCommands(a);b.each(g.instances,function(a){d.apply(c,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=b.isFunction(a)?new a:a}})}(g),g.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],d=Array.prototype.slice.call(arguments,1);return this.hasHandler(a)?this.getHandler(a).apply(this,d):void 0}})}(g),g.EventAggregator=function(a,d){var b=
function(){};return b.extend=a.Model.extend,d.extend(b.prototype,a.Events),b}(a,b),g.Channel=function(){var c=function(b){this.vent=new a.Wreqr.EventAggregator;this.reqres=new a.Wreqr.RequestResponse;this.commands=new a.Wreqr.Commands;this.channelName=b};return b.extend(c.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(a,d){return this._connect("vent",a,d),this},connectCommands:function(a,
d){return this._connect("commands",a,d),this},connectRequests:function(a,d){return this._connect("reqres",a,d),this},_connect:function(a,d,c){if(d){c=c||this;var g="vent"===a?"on":"setHandler";b.each(d,function(d,f){this[a][g](f,b.bind(d,c))},this)}}}),c}(g),g.radio=function(a){var d=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};b.extend(d.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(d){var b=
this._channels[d];return b||(b=new a.Channel(d),this._channels[d]=b),b},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(c[a],function(d){this[a][d]=g(this,a,d)},this)},this)}});var c={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=function(a,d,b){return function(c){var g=a._getChannel(c)[d],
f=Array.prototype.slice.call(arguments,1);return g[b].apply(g,f)}};return new d}(g),a.Wreqr})(c,f);var e=b.Marionette,h=c.Marionette={};h.VERSION="2.0.3";h.noConflict=function(){return b.Marionette=e,this};c.Marionette=h;h.Deferred=c.$.Deferred;var g=Array.prototype.slice;return h.extend=c.Model.extend,h.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]},h.proxyGetOption=function(a){return h.getOption(this,a)},h.normalizeMethods=function(a){var b,c={};return f.each(a,
function(a,d){b=a;f.isFunction(b)||(b=this[b]);b&&(c[d]=b)},this),c},h.normalizeUIKeys=function(a,b){return"undefined"!=typeof a?(f.each(f.keys(a),function(c){var g=/@ui.[a-zA-Z_$0-9]*/g;c.match(g)&&(a[c.replace(g,function(a){return b[a.slice(4)]})]=a[c],delete a[c])}),a):void 0},h.actAsCollection=function(a,b){f.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(c){a[c]=function(){var a=
[f.values(f.result(this,b))].concat(f.toArray(arguments));return f[c].apply(f,a)}})},h.triggerMethod=function(){function a(d,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi;return function(c){var g,e=this["on"+c.replace(b,a)];return f.isFunction(e)&&(g=e.apply(this,f.tail(arguments))),f.isFunction(this.trigger)&&this.trigger.apply(this,arguments),g}}(),h.MonitorDOMRefresh=function(a){function b(c){c._isShown&&c._isRendered&&a.contains(c.el)&&f.isFunction(c.triggerMethod)&&c.triggerMethod("dom:refresh")}
return function(a){a.listenTo(a,"show",function(){a._isShown=!0;b(a)});a.listenTo(a,"render",function(){a._isRendered=!0;b(a)})}}(document.documentElement),function(d){function b(d,c,g,k){k=k.split(/\s+/);f.each(k,function(b){var f=d[b];f||a('Method "'+b+'" was configured as an event handler, but does not exist.');d.listenTo(c,g,f)})}function c(a,d,b,g){a.listenTo(d,b,g)}function g(a,d,b,c){c=c.split(/\s+/);f.each(c,function(c){a.stopListening(d,b,a[c])})}function e(a,d,b,c){a.stopListening(d,b,c)}
function h(a,d,b,c,g){d&&b&&(f.isFunction(b)&&(b=b.call(a)),f.each(b,function(b,k){f.isFunction(b)?c(a,d,k,b):g(a,d,k,b)}))}d.bindEntityEvents=function(a,d,g){h(a,d,g,c,b)};d.unbindEntityEvents=function(a,d,b){h(a,d,b,e,g)};d.proxyBindEntityEvents=function(a,b){return d.bindEntityEvents(this,a,b)};d.proxyUnbindEntityEvents=function(a,b){return d.unbindEntityEvents(this,a,b)}}(h),h.Callbacks=function(){this._deferred=h.Deferred();this._callbacks=[]},f.extend(h.Callbacks.prototype,{add:function(a,b){var c=
f.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});c.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=h.Deferred();this._callbacks=[];f.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),h.Controller=function(a){this.options=a||{};f.isFunction(this.initialize)&&this.initialize(this.options)},h.Controller.extend=h.extend,f.extend(h.Controller.prototype,
c.Events,{destroy:function(){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off()},triggerMethod:h.triggerMethod,getOption:h.proxyGetOption}),h.Region=function(d){if(this.options=d||{},this.el=this.getOption("el"),this.el=this.el instanceof c.$?this.el[0]:this.el,this.el||a('An "el" must be specified for a region.',"NoElError"),this.$el=this.getEl(this.el),this.initialize){var b=
Array.prototype.slice.apply(arguments);this.initialize.apply(this,b)}},f.extend(h.Region,{buildRegion:function(d,b){var g=f.isString(d),e=f.isString(d.selector),h=f.isUndefined(d.regionClass),q=f.isFunction(d);q||g||e||a("Region must be specified as a Region class,a selector string or an object with selector property");var m,s;g&&(m=d);d.selector&&(m=d.selector,delete d.selector);q&&(s=d);!q&&h&&(s=b);d.regionClass&&(s=d.regionClass,delete d.regionClass);(g||q)&&(d={});d.el=m;g=new s(d);return d.parentEl&&
(g.getEl=function(a){if(f.isObject(a))return c.$(a);var b=d.parentEl;return f.isFunction(b)&&(b=b()),b.find(a)}),g}}),f.extend(h.Region.prototype,c.Events,{show:function(a,b){this._ensureElement();var c=b||{},g=a!==this.currentView,e=!!c.forceShow,h=!!this.currentView;!c.preventDestroy&&g&&this.empty();return g||e?(a.once("destroy",f.bind(this.empty,this)),a.render(),h&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),f.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):
this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,h&&this.triggerMethod("swap",a),this.triggerMethod("show",a),f.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show"),this):this},_ensureElement:function(){f.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);this.$el&&0!==this.$el.length||a('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return c.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},
empty:function(){var a=this.currentView;a&&(this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView)},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el},getOption:h.proxyGetOption,triggerMethod:h.triggerMethod}),h.Region.extend=h.extend,h.RegionManager=function(a){var b=
a.Controller.extend({constructor:function(b){this._regions={};a.Controller.call(this,b)},addRegions:function(a,d){var b={};return f.each(a,function(a,c){f.isString(a)&&(a={selector:a});a.selector&&(a=f.defaults({},a,d));var g=this.addRegion(c,a);b[c]=g},this),b},addRegion:function(b,c){var g,k=f.isObject(c),e=f.isString(c),h=!!c.selector;return g=e||k&&h?a.Region.buildRegion(c,a.Region):f.isFunction(c)?a.Region.buildRegion(c,a.Region):c,this.triggerMethod("before:add:region",b,g),this._store(b,g),
this.triggerMethod("add:region",b,g),g},get:function(a){return this._regions[a]},getRegions:function(){return f.clone(this._regions)},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){f.each(this._regions,function(a,d){this._remove(d,a)},this)},emptyRegions:function(){f.each(this._regions,function(a){a.empty()},this)},destroy:function(){this.removeRegions();a.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,d){this._regions[a]=d;this._setLength()},
_remove:function(a,d){this.triggerMethod("before:remove:region",a,d);d.empty();d.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,d)},_setLength:function(){this.length=f.size(this._regions)}});return a.actAsCollection(b.prototype,"_regions"),b}(h),h.TemplateCache=function(a){this.templateId=a},f.extend(h.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new h.TemplateCache(a),this.templateCaches[a]=b),b.load()},
clear:function(){var a,b=g.call(arguments),c=b.length;if(0<c)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),f.extend(h.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(d){var b=c.$(d).html();return b&&0!==b.length||a('Could not find template: "'+d+'"',"NoTemplateError"),b},compileTemplate:function(a){return f.template(a)}}),
h.Renderer={render:function(d,b){d||a("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"==typeof d?d:h.TemplateCache.get(d))(b)}},h.View=c.View.extend({constructor:function(a){f.bindAll(this,"render");this.options=f.extend({},f.result(this,"options"),f.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(f.result(this,"events"));f.isObject(this.behaviors)&&new h.Behaviors(this);c.View.apply(this,arguments);h.MonitorDOMRefresh(this);
this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption("templateHelpers");return f.isFunction(b)&&(b=b.call(this)),f.extend(a,b)},normalizeUIKeys:function(a){var b=f.result(this,"ui"),c=f.result(this,"_uiBindings");return h.normalizeUIKeys(a,c||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(f.result(this,"triggers"));return f.each(b,function(b,c){var g=
f.isObject(b),k=g?b.event:b;a[c]=function(a){if(a){var d=a.preventDefault,c=a.stopPropagation,f=g?b.stopPropagation:c;(g?b.preventDefault:d)&&d&&d.apply(a);f&&c&&c.apply(a)}this.triggerMethod(k,{view:this,model:this.model,collection:this.collection})}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;
f.isFunction(a)&&(a=a.call(this));a=this.normalizeUIKeys(a);var b={},g=f.result(this,"behaviorEvents")||{},e=this.configureTriggers();f.extend(b,g,a,e);c.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);c.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"))},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");throw a.name="ViewDestroyedError",a;}},destroy:function(){if(!this.isDestroyed){var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove()}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=f.result(this,"_uiBindings");this.ui={};f.each(f.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(f.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:h.triggerMethod,normalizeMethods:h.normalizeMethods,getOption:h.proxyGetOption,bindEntityEvents:h.proxyBindEntityEvents,unbindEntityEvents:h.proxyUnbindEntityEvents}),h.ItemView=h.View.extend({constructor:function(){h.View.apply(this,arguments)},serializeData:function(){var a={};return this.model?a=this.model.toJSON():
this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=h.Renderer.render(b,a);return this.attachElContent(a),this.bindUIElements(),this.triggerMethod("render",this),this},attachElContent:function(a){return this.$el.html(a),this},destroy:function(){this.isDestroyed||h.View.prototype.destroy.apply(this,arguments)}}),h.CollectionView=
h.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=f.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();h.View.apply(this,arguments);this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,
this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&f.invoke(this._bufferedChildren,"triggerMethod","before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(f.each(this._bufferedChildren,function(a){f.isFunction(a.triggerMethod)?a.triggerMethod("show"):h.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),
this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){f.isFunction(a.triggerMethod)?
a.triggerMethod("show"):h.triggerMethod.call(a,"show")})},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return c&&c._index!==b},this)&&this.render()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",
this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new c.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&
(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,b){var c=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");f.isFunction(c)&&(c=c.call(this));c=this.buildChildView(a,b,c);this._isShown&&this.triggerMethod.call(c,"before:show");this.children.add(c);this.renderChildView(c,-1);this._isShown&&this.triggerMethod.call(c,"show")},getChildView:function(){var b=this.getOption("childView");return b||
a('A "childView" must be specified',"NoChildViewError"),b},addChild:function(a,b,c){var g=this.getOption("childViewOptions");f.isFunction(g)&&(g=g.call(this,a,c));a=this.buildChildView(a,b,g);return this._updateIndices(a,!0,c),this._addChildView(a,c),a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",
a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(f.isFunction(a.triggerMethod)?a.triggerMethod("show"):h.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b)},buildChildView:function(a,b,c){a=f.extend({model:a},c);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),
this.triggerMethod("remove:child",a),this._updateIndices(a,!1))},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;return this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===
b+1})),c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new c.ChildViewContainer},destroy:function(){this.isDestroyed||(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),h.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){this.children.each(this.removeChildView,this);this.checkEmpty()},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");
this.listenTo(a,"all",function(){var c=Array.prototype.slice.call(arguments),g=c[0],e=this.normalizeMethods(f.result(this,"childEvents"));c[0]=b+":"+g;c.splice(1,0,a);"undefined"!=typeof e&&f.isFunction(e[g])&&e[g].apply(this,c.slice(1));this.triggerMethod.apply(this,c)},this)}}),h.CompositeView=h.CollectionView.extend({constructor:function(){h.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),
this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var b=this.getOption("childView")||this.constructor;return b||a('A "childView" must be specified',"NoChildViewError"),b},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),
this.triggerMethod("before:render",this),this._renderRoot(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&h.CollectionView.prototype._renderChildren.call(this)},_renderRoot:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=h.Renderer.render(b,a);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){return this.$el.html(a),
this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(b){if("$childViewContainer"in b)return b.$childViewContainer;var c;(c=h.getOption(b,"childViewContainer"))?(c=f.isFunction(c)?c.call(b):c,c="@"===c.charAt(0)&&b.ui?b.ui[c.substr(4)]:b.$(c),0>=c.length&&a('The specified "childViewContainer" was not found: '+b.childViewContainer,"ChildViewContainerMissingError")):c=b.$el;return b.$childViewContainer=
c,c},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),h.LayoutView=h.ItemView.extend({regionClass:h.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);h.ItemView.call(this,a)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),h.ItemView.prototype.render.apply(this,arguments)},destroy:function(){this.isDestroyed||(this.regionManager.destroy(),h.ItemView.prototype.destroy.apply(this,
arguments))},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=f.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return this.triggerMethod("before:region:remove",a),delete this.regions[a],this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(a){var b=
this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=f.isFunction(this.regions)?this.regions(a):this.regions||{};var c=this.getOption.call(a,"regions");f.isFunction(c)&&(c=c.call(this,a));f.extend(b,c);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},getRegionManager:function(){return new h.RegionManager},
_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",
a,b)})}}),h.Behavior=function(a,b){function c(b,g){this.view=g;this.defaults=a.result(this,"defaults")||{};this.options=a.extend({},this.defaults,b);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}return a.extend(c.prototype,b.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:h.triggerMethod,getOption:h.proxyGetOption,bindEntityEvents:h.proxyBindEntityEvents,unbindEntityEvents:h.proxyUnbindEntityEvents}),c.extend=
h.extend,c}(f,c),h.Behaviors=function(a,b){function c(a,d){d=c.parseBehaviors(a,d||b.result(a,"behaviors"));c.wrap(a,d,b.keys(g))}var g={setElement:function(a,d){a.apply(this,b.tail(arguments,2));b.each(d,function(a){a.$el=this.$el},this)},destroy:function(a,d){var c=b.tail(arguments,2);a.apply(this,c);b.invoke(d,"destroy",c)},bindUIElements:function(a,d){a.apply(this);b.invoke(d,a)},unbindUIElements:function(a,d){a.apply(this);b.invoke(d,a)},triggerMethod:function(a,d){var c=b.tail(arguments,2);
a.apply(this,c);b.each(d,function(b){a.apply(b,c)})},delegateEvents:function(c,g){var f=b.tail(arguments,2);c.apply(this,f);b.each(g,function(b){a.bindEntityEvents(b,this.model,a.getOption(b,"modelEvents"));a.bindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},this)},undelegateEvents:function(c,g){var f=b.tail(arguments,2);c.apply(this,f);b.each(g,function(b){a.unbindEntityEvents(b,this.model,a.getOption(b,"modelEvents"));a.unbindEntityEvents(b,this.collection,a.getOption(b,"collectionEvents"))},
this)},behaviorEvents:function(c,g){var f={},e=b.result(this,"ui");return b.each(g,function(c,g){var h={},q=b.clone(b.result(c,"events"))||{},p=b.result(c,"ui"),p=b.extend({},e,p),q=a.normalizeUIKeys(q,p);b.each(b.keys(q),function(a){var d=Array(g+2).join(" "),d=a+d;a=b.isFunction(q[a])?q[a]:c[q[a]];h[d]=b.bind(a,c)});f=b.extend(f,h)}),f}};return b.extend(c,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,d){return a.behaviorClass?a.behaviorClass:b.isFunction(c.behaviorsLookup)?c.behaviorsLookup.apply(this,arguments)[d]:c.behaviorsLookup[d]},parseBehaviors:function(a,d){return b.chain(d).map(function(d,g){var f=new (c.getBehaviorClass(d,g))(d,a),e=c.parseBehaviors(a,b.result(f,"behaviors"));return[f].concat(e)}).flatten().value()},wrap:function(a,d,c){b.each(c,function(c){a[c]=b.partial(g[c],a[c],d)})}}),c}(h,f),h.AppRouter=c.Router.extend({constructor:function(a){c.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),g=this._getController();this.processAppRoutes(g,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var c=f.invert(this.appRoutes)[a];f.isFunction(this.onRoute)&&this.onRoute(a,c,b)},processAppRoutes:function(a,b){if(b){var c=f.keys(b).reverse();f.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(b,c,g){var e=b[g];e||a('Method "'+g+'" was not found on the controller');this.route(c,g,f.bind(e,b))},getOption:h.proxyGetOption}),h.Application=function(a){this._initRegionManager();this._initCallbacks=new h.Callbacks;var b=c.Wreqr.radio.channel("global");this.vent=b.vent;this.commands=b.commands;this.reqres=b.reqres;this.submodules={};f.extend(this,a)},f.extend(h.Application.prototype,c.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,
arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){this._regionManager.emptyRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,
b){var c=h.Module.getClass(b),f=g.call(arguments);return f.unshift(this),c.create.apply(c,f)},_initRegionManager:function(){this._regionManager=new h.RegionManager;this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,
"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},triggerMethod:h.triggerMethod}),h.Application.extend=h.extend,h.Module=function(a,b,c){this.moduleName=a;this.options=f.extend({},this.options,c);this.initialize=c.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;f.isFunction(this.initialize)&&this.initialize(a,b,this.options)},h.Module.extend=h.extend,f.extend(h.Module.prototype,c.Events,
{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(f.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),f.each(this.submodules,
function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var g=f.flatten([this,this.app,c,h,c.$,f,b]);a.apply(this,g)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new h.Callbacks;this._finalizerCallbacks=new h.Callbacks},triggerMethod:h.triggerMethod}),f.extend(h.Module,
{create:function(a,b,c){var e=a,h=g.call(arguments);h.splice(0,3);b=b.split(".");var q=[];return q[b.length-1]=c,f.each(b,function(b,g){var f=e;e=this._getModule(f,b,a,c);this._addModuleDefinition(f,e,q[g],h)},this),e},_getModule:function(a,b,c,g){var e=f.extend({},g);g=this.getClass(g);var h=a[b];return h||(h=new g(b,c,e),a[b]=h,a.submodules[b]=h),h},getClass:function(a){var b=h.Module;return a?a.prototype instanceof b?a:a.moduleClass||b:b},_addModuleDefinition:function(a,b,c,g){var f=this._getDefine(c);
c=this._getStartWithParent(c,b);f&&b.addDefinition(f,g);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var c;return f.isFunction(a)&&a.prototype instanceof h.Module?(c=b.constructor.prototype.startWithParent,f.isUndefined(c)?!0:c):f.isObject(a)?(c=a.startWithParent,f.isUndefined(c)?!0:c):!0},_getDefine:function(a){return!f.isFunction(a)||a.prototype instanceof h.Module?f.isObject(a)?a.define:null:a},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&
!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),h});!function(){function b(c,f,a){var e=b.resolve(c);if(null==e)throw a=a||c,f=f||"root",e=Error('Failed to require "'+a+'" from "'+f+'"'),e.path=a,e.parent=f,e.require=!0,e;f=b.modules[e];!f._resolving&&!f.exports&&(a={exports:{}},a.client=a.component=!0,f._resolving=!0,f.call(this,a.exports,b.relative(e),a),delete f._resolving,f.exports=a.exports);return f.exports}b.modules={};b.aliases={};b.resolve=function(c){"/"===c.charAt(0)&&(c=c.slice(1));for(var f=[c,c+".js",c+".json",c+"/index.js",c+"/index.json"],
a=0;a<f.length;a++){c=f[a];if(b.modules.hasOwnProperty(c))return c;if(b.aliases.hasOwnProperty(c))return b.aliases[c]}};b.normalize=function(b,f){var a=[];if("."!=f.charAt(0))return f;b=b.split("/");f=f.split("/");for(var e=0;e<f.length;++e)".."==f[e]?b.pop():"."!=f[e]&&""!=f[e]&&a.push(f[e]);return b.concat(a).join("/")};b.register=function(c,f){b.modules[c]=f};b.alias=function(c,f){if(!b.modules.hasOwnProperty(c))throw Error('Failed to alias "'+c+'", it does not exist');b.aliases[f]=c};b.relative=
function(c){function f(a){var h=f.resolve(a);return b(h,c,a)}var a=b.normalize(c,"..");return f.resolve=function(f){var h=f.charAt(0);if("/"==h)return f.slice(1);if("."==h)return b.normalize(a,f);var h=c.split("/"),g;a:{for(g=h.length;g--;)if("deps"===h[g])break a;g=-1}g+=1;return g||(g=0),h.slice(0,g+1).join("/")+"/deps/"+f},f.exists=function(a){return b.modules.hasOwnProperty(f.resolve(a))},f};b.register("component-emitter/index.js",function(b,f,a){function e(a){if(a)for(var b in e.prototype)a[b]=
e.prototype[b];else a=void 0;return a}a.exports=e;e.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this};e.prototype.once=function(a,b){function d(){c.off(a,d);b.apply(this,arguments)}var c=this;return this._callbacks=this._callbacks||{},b._off=d,this.on(a,d),this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};var d=this._callbacks[a];if(!d)return this;
if(1==arguments.length)return delete this._callbacks[a],this;var c=d.indexOf(b._off||b);return~c&&d.splice(c,1),this};e.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),d=this._callbacks[a];if(d)for(var d=d.slice(0),c=0,f=d.length;f>c;++c)d[c].apply(this,b);return this};e.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]};e.prototype.hasListeners=function(a){return!!this.listeners(a).length}});b.register("dropzone/index.js",
function(b,f,a){a.exports=f("./lib/dropzone.js")});b.register("dropzone/lib/dropzone.js",function(b,f,a){(function(){var b,c,g,d,k,n={}.hasOwnProperty,p=function(a,b){function d(){this.constructor=a}for(var c in b)n.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},l=[].slice;c="undefined"!=typeof Emitter&&null!==Emitter?Emitter:f("emitter");d=function(){};b=function(a){function b(a,d){var g,f,e;if(this.element=a,this.version=b.version,this.defaultOptions.previewTemplate=
this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw Error("Invalid dropzone element.");if(this.element.dropzone)throw Error("Dropzone already attached.");if(b.instances.push(this),this.element.dropzone=this,g=null!=(e=b.optionsForElement(this.element))?e:{},this.options=c({},this.defaultOptions,g,null!=d?d:
{}),this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes);
this.options.method=this.options.method.toUpperCase();(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f);this.previewsContainer=this.options.previewsContainer?b.getElement(this.options.previewsContainer,"previewsContainer"):this.element;this.options.clickable&&(this.clickableElements=!0===this.options.clickable?[this.element]:b.getElements(this.options.clickable,"clickable"));this.init()}var c;return p(b,a),b.prototype.events="drop dragstart dragend dragenter dragover dragleave selectedfiles addedfile removedfile thumbnail error errormultiple processing processingmultiple uploadprogress totaluploadprogress sending sendingmultiple success successmultiple canceled canceledmultiple complete completemultiple reset maxfilesexceeded".split(" "),
b.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",
dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can only upload {{maxFiles}} files.",
accept:function(a,b){return b()},init:function(){return d},forceFallback:!1,fallback:function(){var a,d,c,g,f,e;this.element.className=""+this.element.className+" dz-browser-not-supported";e=this.element.getElementsByTagName("div");g=0;for(f=e.length;f>g;g++)a=e[g],/(^| )dz-message($| )/.test(a.className)&&(d=a,a.className="dz-message");return d||(d=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(d)),c=d.getElementsByTagName("span")[0],c&&(c.textContent=this.options.dictFallbackMessage),
this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,d,c;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},d=a.width/a.height,c=this.options.thumbnailWidth/this.options.thumbnailHeight,a.height<this.options.thumbnailHeight||a.width<this.options.thumbnailWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):d>c?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*c):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/c),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,
b},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:d,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},
addedfile:function(a){var d,c,g,f,e=this;a.previewElement=b.createElement(this.options.previewTemplate.trim());a.previewTemplate=a.previewElement;this.previewsContainer.appendChild(a.previewElement);f=a.previewElement.querySelectorAll("[data-dz-name]");c=0;for(g=f.length;g>c;c++)d=f[c],d.textContent=a.name;f=a.previewElement.querySelectorAll("[data-dz-size]");c=0;for(g=f.length;g>c;c++)d=f[c],d.innerHTML=this.filesize(a.size);return this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;">'+
this.options.dictRemoveFile+"</a>"),a._removeLink.addEventListener("click",function(d){return d.preventDefault(),d.stopPropagation(),a.status===b.UPLOADING?b.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(a)}):e.options.dictRemoveFileConfirmation?b.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(a)}):e.removeFile(a)}),a.previewElement.appendChild(a._removeLink)),this._updateMaxFilesReachedClass()},removedfile:function(a){var b;return null!=
(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var d,c,g,f,e;a.previewElement.classList.remove("dz-file-preview");a.previewElement.classList.add("dz-image-preview");f=a.previewElement.querySelectorAll("[data-dz-thumbnail]");e=[];c=0;for(g=f.length;g>c;c++)d=f[c],d.alt=a.name,e.push(d.src=b);return e},error:function(a,b){var d,c,g,f,e;a.previewElement.classList.add("dz-error");f=a.previewElement.querySelectorAll("[data-dz-errormessage]");
e=[];c=0;for(g=f.length;g>c;c++)d=f[c],e.push(d.textContent=b);return e},errormultiple:d,processing:function(a){return a.previewElement.classList.add("dz-processing"),a._removeLink?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:d,uploadprogress:function(a,b){var d,c,g,f,e;f=a.previewElement.querySelectorAll("[data-dz-uploadprogress]");e=[];c=0;for(g=f.length;g>c;c++)d=f[c],e.push(d.style.width=""+b+"%");return e},totaluploadprogress:d,sending:d,sendingmultiple:d,
success:function(a){return a.previewElement.classList.add("dz-success")},successmultiple:d,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:d,complete:function(a){return a._removeLink?a._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:d,maxfilesexceeded:d,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>\u2714</span></div>\n  <div class="dz-error-mark"><span>\u2718</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},
c=function(){var a,b,d,c,g,f,e;c=arguments[0];d=2<=arguments.length?l.call(arguments,1):[];f=0;for(e=d.length;e>f;f++)for(a in b=d[f],b)g=b[a],c[a]=g;return c},b.prototype.getAcceptedFiles=function(){var a,b,d,c,g;c=this.files;g=[];b=0;for(d=c.length;d>b;b++)a=c[b],a.accepted&&g.push(a);return g},b.prototype.getRejectedFiles=function(){var a,b,d,c,g;c=this.files;g=[];b=0;for(d=c.length;d>b;b++)a=c[b],a.accepted||g.push(a);return g},b.prototype.getQueuedFiles=function(){var a,d,c,g,f;g=this.files;
f=[];d=0;for(c=g.length;c>d;d++)a=g[d],a.status===b.QUEUED&&f.push(a);return f},b.prototype.getUploadingFiles=function(){var a,d,c,g,f;g=this.files;f=[];d=0;for(c=g.length;c>d;d++)a=g[d],a.status===b.UPLOADING&&f.push(a);return f},b.prototype.init=function(){var a,d,c,g,f,e,k=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data");this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+
this.options.dictDefaultMessage+"</span></div>"));this.clickableElements.length&&(c=function(){return k.hiddenFileInput&&document.body.removeChild(k.hiddenFileInput),k.hiddenFileInput=document.createElement("input"),k.hiddenFileInput.setAttribute("type","file"),(null==k.options.maxFiles||1<k.options.maxFiles)&&k.hiddenFileInput.setAttribute("multiple","multiple"),null!=k.options.acceptedFiles&&k.hiddenFileInput.setAttribute("accept",k.options.acceptedFiles),k.hiddenFileInput.style.visibility="hidden",
k.hiddenFileInput.style.position="absolute",k.hiddenFileInput.style.top="0",k.hiddenFileInput.style.left="0",k.hiddenFileInput.style.height="0",k.hiddenFileInput.style.width="0",document.body.appendChild(k.hiddenFileInput),k.hiddenFileInput.addEventListener("change",function(){var a;return a=k.hiddenFileInput.files,a.length&&(k.emit("selectedfiles",a),k.handleFiles(a)),c()})},c());this.URL=null!=(a=window.URL)?a:window.webkitURL;e=this.events;g=0;for(f=e.length;f>g;g++)a=e[g],this.on(a,this.options[a]);
return this.on("uploadprogress",function(){return k.updateTotalUploadProgress()}),this.on("removedfile",function(){return k.updateTotalUploadProgress()}),this.on("canceled",function(a){return k.emit("complete",a)}),d=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return k.emit("dragstart",a)},dragenter:function(a){return d(a),k.emit("dragenter",a)},dragover:function(a){return d(a),k.emit("dragover",
a)},dragleave:function(a){return k.emit("dragleave",a)},drop:function(a){return d(a),k.drop(a)},dragend:function(a){return k.emit("dragend",a)}}}],this.clickableElements.forEach(function(a){return k.listeners.push({element:a,events:{click:function(d){return a!==k.element||d.target===k.element||b.elementInside(d.target,k.element.querySelector(".dz-message"))?k.hiddenFileInput.click():void 0}}})}),this.enable(),this.options.init.call(this)},b.prototype.destroy=function(){var a;return this.disable(),
this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone},b.prototype.updateTotalUploadProgress=function(){var a,b,d,c,g,f;if(d=0,b=0,a=this.getAcceptedFiles(),a.length){f=this.getAcceptedFiles();c=0;for(g=f.length;g>c;c++)a=f[c],d+=a.upload.bytesSent,b+=a.upload.total;a=100*d/b}else a=100;return this.emit("totaluploadprogress",a,b,d)},b.prototype.getFallbackForm=
function(){var a,d,c,g;return(a=this.getExistingFallback())?a:(c='<div class="dz-fallback">',this.options.dictFallbackText&&(c+="<p>"+this.options.dictFallbackText+"</p>"),c+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',d=b.createElement(c),"FORM"!==this.element.tagName?(g=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+
this.options.method+'"></form>'),g.appendChild(d)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=g?g:d)},b.prototype.getExistingFallback=function(){var a,b,d,c,g,f;b=function(a){var b,d,c;d=0;for(c=a.length;c>d;d++)if(b=a[d],/(^| )fallback($| )/.test(b.className))return b};f=["div","form"];c=0;for(g=f.length;g>c;c++)if(d=f[c],a=b(this.element.getElementsByTagName(d)))return a},b.prototype.setupEventListeners=function(){var a,
b,d,c,g,f,e;f=this.listeners;e=[];c=0;for(g=f.length;g>c;c++)a=f[c],e.push(function(){var c,g;c=a.events;g=[];for(b in c)d=c[b],g.push(a.element.addEventListener(b,d,!1));return g}());return e},b.prototype.removeEventListeners=function(){var a,b,d,c,g,f,e;f=this.listeners;e=[];c=0;for(g=f.length;g>c;c++)a=f[c],e.push(function(){var c,g;c=a.events;g=[];for(b in c)d=c[b],g.push(a.element.removeEventListener(b,d,!1));return g}());return e},b.prototype.disable=function(){var a,b,d,c,g;this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")});
this.removeEventListeners();c=this.files;g=[];b=0;for(d=c.length;d>b;b++)a=c[b],g.push(this.cancelUpload(a));return g},b.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},b.prototype.filesize=function(a){var b;return 1E11<=a?(a/=1E11,b="TB"):1E8<=a?(a/=1E8,b="GB"):1E5<=a?(a/=1E5,b="MB"):100<=a?(a/=100,b="KB"):(a*=10,b="b"),"<strong>"+Math.round(a)/10+"</strong> "+b},b.prototype._updateMaxFilesReachedClass=
function(){return this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?this.element.classList.add("dz-max-files-reached"):this.element.classList.remove("dz-max-files-reached")},b.prototype.drop=function(a){var b,d;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,this.emit("selectedfiles",b),b.length&&(d=a.dataTransfer.items,d&&d.length&&(null!=d[0].webkitGetAsEntry||null!=d[0].getAsEntry)?this.handleItems(d):this.handleFiles(b)))},b.prototype.handleFiles=function(a){var b,
d,c,g;g=[];d=0;for(c=a.length;c>d;d++)b=a[d],g.push(this.addFile(b));return g},b.prototype.handleItems=function(a){var b,d,c,g;c=0;for(g=a.length;g>c;c++)d=a[c],null!=d.webkitGetAsEntry?(b=d.webkitGetAsEntry(),b.isFile?this.addFile(d.getAsFile()):b.isDirectory&&this.addDirectory(b,b.name)):this.addFile(d.getAsFile())},b.prototype.accept=function(a,d){return a.size>1048576*this.options.maxFilesize?d(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",
this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(d(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,d):d(this.options.dictInvalidFileType)},b.prototype.addFile=function(a){var d=this;return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=b.ADDED,this.emit("addedfile",a),this.options.createImageThumbnails&&
a.type.match(/image.*/)&&a.size<=1048576*this.options.maxThumbnailFilesize&&this.createThumbnail(a),this.accept(a,function(b){return b?(a.accepted=!1,d._errorProcessing([a],b)):d.enqueueFile(a)})},b.prototype.enqueueFiles=function(a){var b,d,c;d=0;for(c=a.length;c>d;d++)b=a[d],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){var d=this;if(a.accepted=!0,a.status!==b.ADDED)throw Error("This file can't be queued because it has already been processed or was rejected.");return a.status=
b.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return d.processQueue()},1):void 0},b.prototype.addDirectory=function(a,b){var d,c,g=this;return d=a.createReader(),c=function(d){var c,f;c=0;for(f=d.length;f>c;c++)a=d[c],a.isFile?a.file(function(a){return g.options.ignoreHiddenFiles&&"."===a.name.substring(0,1)?void 0:(a.fullPath=""+b+"/"+a.name,g.addFile(a))}):a.isDirectory&&g.addDirectory(a,""+b+"/"+a.name)},d.readEntries(c,function(a){return"undefined"!=typeof console&&null!==console?
"function"==typeof console.log?console.log(a):void 0:void 0})},b.prototype.removeFile=function(a){return a.status===b.UPLOADING&&this.cancelUpload(a),this.files=k(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},b.prototype.removeAllFiles=function(a){var d,c,g,f;null==a&&(a=!1);f=this.files.slice();c=0;for(g=f.length;g>c;c++)d=f[c],(d.status!==b.UPLOADING||a)&&this.removeFile(d);return null},b.prototype.createThumbnail=function(a){var b,d=this;return b=new FileReader,
b.onload=function(){var c;return c=new Image,c.onload=function(){var b,g,f,e,k,h,q,m;return a.width=c.width,a.height=c.height,f=d.options.resize.call(d,a),null==f.trgWidth&&(f.trgWidth=d.options.thumbnailWidth),null==f.trgHeight&&(f.trgHeight=d.options.thumbnailHeight),b=document.createElement("canvas"),g=b.getContext("2d"),b.width=f.trgWidth,b.height=f.trgHeight,g.drawImage(c,null!=(k=f.srcX)?k:0,null!=(h=f.srcY)?h:0,f.srcWidth,f.srcHeight,null!=(q=f.trgX)?q:0,null!=(m=f.trgY)?m:0,f.trgWidth,f.trgHeight),
e=b.toDataURL("image/png"),d.emit("thumbnail",a,e)},c.src=b.result},b.readAsDataURL(a)},b.prototype.processQueue=function(){var a,b,d,c;if(b=this.options.parallelUploads,d=this.getUploadingFiles().length,a=d,!(d>=b)&&(c=this.getQueuedFiles(),0<c.length)){if(this.options.uploadMultiple)return this.processFiles(c.slice(0,b-d));for(;b>a&&c.length;)this.processFile(c.shift()),a++}},b.prototype.processFile=function(a){return this.processFiles([a])},b.prototype.processFiles=function(a){var d,c,g;c=0;for(g=
a.length;g>c;c++)d=a[c],d.processing=!0,d.status=b.UPLOADING,this.emit("processing",d);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},b.prototype._getFilesWithXhr=function(a){var b,d,c,g,f;g=this.files;f=[];d=0;for(c=g.length;c>d;d++)b=g[d],b.xhr===a&&f.push(b);return f},b.prototype.cancelUpload=function(a){var d,c,g,f;if(a.status===b.UPLOADING){c=this._getFilesWithXhr(a.xhr);g=0;for(f=c.length;f>g;g++)d=c[g],d.status=b.CANCELED;a.xhr.abort();a=0;for(g=
c.length;g>a;a++)d=c[a],this.emit("canceled",d);this.options.uploadMultiple&&this.emit("canceledmultiple",c)}else((d=a.status)===b.ADDED||d===b.QUEUED)&&(a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},b.prototype.uploadFile=function(a){return this.uploadFiles([a])},b.prototype.uploadFiles=function(a){var d,g,f,e,k,h,q,p,n,l,v,F,G,N=this;n=new XMLHttpRequest;e=0;for(k=a.length;k>
e;e++)d=a[e],d.xhr=n;n.open(this.options.method,this.options.url,!0);n.withCredentials=!!this.options.withCredentials;q=null;f=function(){var b,c,g;g=[];b=0;for(c=a.length;c>b;b++)d=a[b],g.push(N._errorProcessing(a,q||N.options.dictResponseError.replace("{{statusCode}}",n.status),n));return g};p=function(b){var c,g,f;if(null!=b){c=100*b.loaded/b.total;g=0;for(f=a.length;f>g;g++)d=a[g],d.upload={progress:c,total:b.total,bytesSent:b.loaded}}else{b=!0;c=100;g=0;for(f=a.length;f>g;g++)d=a[g],(100!==d.upload.progress||
d.upload.bytesSent!==d.upload.total)&&(b=!1),d.upload.progress=c,d.upload.bytesSent=d.upload.total;if(b)return}f=[];b=0;for(g=a.length;g>b;b++)d=a[b],f.push(N.emit("uploadprogress",d,c,d.upload.bytesSent));return f};n.onload=function(d){var c;if(a[0].status!==b.CANCELED&&4===n.readyState){if(q=n.responseText,n.getResponseHeader("content-type")&&~n.getResponseHeader("content-type").indexOf("application/json"))try{q=JSON.parse(q)}catch(g){d=g,q="Invalid JSON response from server."}return p(),200<=(c=
n.status)&&300>c?N._finished(a,q,d):f()}};n.onerror=function(){return a[0].status!==b.CANCELED?f():void 0};(null!=(l=n.upload)?l:n).onprogress=p;k={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&c(k,this.options.headers);for(g in k)e=k[g],n.setRequestHeader(g,e);if(g=new FormData,this.options.params)for(h in k=this.options.params,k)e=k[h],g.append(h,e);h=0;for(e=a.length;e>h;h++)d=a[h],this.emit("sending",d,n,g);if(this.options.uploadMultiple&&
this.emit("sendingmultiple",a,n,g),"FORM"===this.element.tagName){G=this.element.querySelectorAll("input, textarea, select, button");l=0;for(F=G.length;F>l;l++)h=G[l],e=h.getAttribute("name"),k=h.getAttribute("type"),(!k||"checkbox"!==(v=k.toLowerCase())&&"radio"!==v||h.checked)&&g.append(e,h.value)}v=0;for(h=a.length;h>v;v++)d=a[v],g.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),d,d.name);return n.send(g)},b.prototype._finished=function(a,d,c){var g,f,e;f=0;for(e=a.length;e>
f;f++)g=a[f],g.status=b.SUCCESS,this.emit("success",g,d,c),this.emit("complete",g);return this.options.uploadMultiple&&(this.emit("successmultiple",a,d,c),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b.prototype._errorProcessing=function(a,d,c){var g,f,e;f=0;for(e=a.length;e>f;f++)g=a[f],g.status=b.ERROR,this.emit("error",g,d,c),this.emit("complete",g);return this.options.uploadMultiple&&(this.emit("errormultiple",a,d,c),this.emit("completemultiple",a)),
this.options.autoProcessQueue?this.processQueue():void 0},b}(c);b.version="3.7.4-dev";b.options={};b.optionsForElement=function(a){return a.id?b.options[g(a.id)]:void 0};b.instances=[];b.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");
return a.dropzone};b.autoDiscover=!0;b.discover=function(){var a,d,c,g,f;document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],a=function(a){var b,c,g,f;f=[];c=0;for(g=a.length;g>c;c++)b=a[c],/(^| )dropzone($| )/.test(b.className)?f.push(d.push(b)):f.push(void 0);return f},a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form")));f=[];c=0;for(g=d.length;g>c;c++)a=d[c],!1!==b.optionsForElement(a)?f.push(new b(a)):f.push(void 0);return f};b.blacklistedBrowsers=
[/opera.*Macintosh.*version\/12/i];b.isBrowserSupported=function(){var a,d,c,g,f;if(a=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){f=b.blacklistedBrowsers;c=0;for(g=f.length;g>c;c++)d=f[c],d.test(navigator.userAgent)&&(a=!1)}else a=!1;else a=!1;return a};k=function(a,b){var d,c,g,f;f=[];c=0;for(g=a.length;g>c;c++)d=a[c],d!==b&&f.push(d);return f};g=function(a){return a.replace(/[\-_](\w)/g,function(a){return a[1].toUpperCase()})};
b.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]};b.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1};b.getElement=function(a,b){var d;if("string"==typeof a?d=document.querySelector(a):null!=a.nodeType&&(d=a),null==d)throw Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return d};b.getElements=function(a,b){var d,c,g,f,e;if(a instanceof Array){c=[];try{g=
0;for(f=a.length;f>g;g++)d=a[g],c.push(this.getElement(d,b))}catch(k){c=null}}else if("string"==typeof a){c=[];e=document.querySelectorAll(a);g=0;for(f=e.length;f>g;g++)d=e[g],c.push(d)}else null!=a.nodeType&&(c=[a]);if(null==c||!c.length)throw Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return c};b.confirm=function(a,b,d){return window.confirm(a)?b():null!=d?d():void 0};b.isValidFile=function(a,b){var d,c,g,f,e;if(!b)return!0;
b=b.split(",");c=a.type;d=c.replace(/\/.*$/,"");f=0;for(e=b.length;e>f;f++)if(g=b[f],g=g.trim(),"."===g.charAt(0)){if(-1!==a.name.toLowerCase().indexOf(g.toLowerCase(),a.name.length-g.length))return!0}else if(/\/\*$/.test(g)){if(d===g.replace(/\/.*$/,""))return!0}else if(c===g)return!0;return!1};"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(a){return this.each(function(){return new b(this,a)})});"undefined"!=typeof a&&null!==a?a.exports=b:window.Dropzone=b;b.ADDED="added";
b.QUEUED="queued";b.ACCEPTED=b.QUEUED;b.UPLOADING="uploading";b.PROCESSING=b.UPLOADING;b.CANCELED="canceled";b.ERROR="error";b.SUCCESS="success";b._autoDiscoverFunction=function(){return b.autoDiscover?b.discover():void 0};(function(a,b){var d,c,g,f,e,k,h,p,n;if(g=!1,n=!0,c=a.document,p=c.documentElement,d=c.addEventListener?"addEventListener":"attachEvent",h=c.addEventListener?"removeEventListener":"detachEvent",k=c.addEventListener?"":"on",f=function(d){return"readystatechange"!==d.type||"complete"===
c.readyState?(("load"===d.type?a:c)[h](k+d.type,f,!1),!g&&(g=!0)?b.call(a,d.type||d):void 0):void 0},e=function(){try{p.doScroll("left")}catch(a){return setTimeout(e,50),void 0}return f("poll")},"complete"!==c.readyState){if(c.createEventObject&&p.doScroll){try{n=!a.frameElement}catch(l){}n&&e()}return c[d](k+"DOMContentLoaded",f,!1),c[d](k+"readystatechange",f,!1),a[d](k+"load",f,!1)}})(window,b._autoDiscoverFunction)}).call(this)});b.alias("component-emitter/index.js","dropzone/deps/emitter/index.js");
b.alias("component-emitter/index.js","emitter/index.js");"object"==typeof exports?module.exports=b("dropzone"):"function"==typeof define&&define.amd?define(function(){return b("dropzone")}):this.Dropzone=b("dropzone")}();
(function(){function b(){}function c(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function f(a){return function(){return this[a].apply(this,arguments)}}var a=b.prototype;a.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a)for(c in b={},d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c]);else b=d[a]||(d[a]=[]);return b};a.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c};a.getListenersAsObject=function(a){var b,
c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c};a.addListener=function(a,b){var g,d=this.getListenersAsObject(a),f="object"==typeof b;for(g in d)d.hasOwnProperty(g)&&-1===c(d[g],b)&&d[g].push(f?b:{listener:b,once:!1});return this};a.on=f("addListener");a.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};a.once=f("addOnceListener");a.defineEvent=function(a){return this.getListeners(a),this};a.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);
return this};a.removeListener=function(a,b){var g,d,f=this.getListenersAsObject(a);for(d in f)f.hasOwnProperty(d)&&(g=c(f[d],b),-1!==g&&f[d].splice(g,1));return this};a.off=f("removeListener");a.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};a.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};a.manipulateListeners=function(a,b,c){var d,f,n=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof
RegExp)for(d=c.length;d--;)n.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(f=b[d])&&("function"==typeof f?n.call(this,d,f):a.call(this,d,f));return this};a.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this};a.removeAllListeners=f("removeEvent");a.emitEvent=function(a,b){var c,d,f,n,p=this.getListenersAsObject(a);for(f in p)if(p.hasOwnProperty(f))for(d=
p[f].length;d--;)c=p[f][d],!0===c.once&&this.removeListener(a,c.listener),n=c.listener.apply(this,b||[]),n===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this};a.trigger=f("emitEvent");a.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};a.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};a._getEvents=function(){return this._events||
(this._events={})};"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof module&&module.exports?module.exports=b:this.EventEmitter=b}).call(this);
(function(b){var c=document.documentElement,f=function(){};c.addEventListener?f=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(f=function(a,c,g){a[c+g]=g.handleEvent?function(){var a=b.event;a.target=a.target||a.srcElement;g.handleEvent.call(g,a)}:function(){var d=b.event;d.target=d.target||d.srcElement;g.call(a,d)};a.attachEvent("on"+c,a[c+g])});var a=function(){};c.removeEventListener?a=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(a=function(a,b,c){a.detachEvent("on"+
b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});c={bind:f,unbind:a};"function"==typeof define&&define.amd?define(c):b.eventie=c})(this);
(function(b){function c(a,b){for(var d in b)a[d]=b[d];return a}function f(a){var b=[];if("[object Array]"===d.call(a))b=a;else if("number"==typeof a.length)for(var c=0,g=a.length;g>c;c++)b.push(a[c]);else b.push(a);return b}function a(a,b){function d(a,b,g){if(!(this instanceof d))return new d(a,b);"string"==typeof a&&(a=document.querySelectorAll(a));this.elements=f(a);this.options=c({},this.options);"function"==typeof b?g=b:c(this.options,b);g&&this.on("always",g);this.getImages();e&&(this.jqDeferred=
new e.Deferred);var k=this;setTimeout(function(){k.check()})}function l(a){this.img=a}d.prototype=new a;d.prototype.options={};d.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var d=this.elements[a];"IMG"===d.nodeName&&this.addImage(d);for(var d=d.querySelectorAll("img"),c=0,g=d.length;g>c;c++)this.addImage(d[c])}};d.prototype.addImage=function(a){a=new l(a);this.images.push(a)};d.prototype.check=function(){function a(f,e){return b.options.debug&&g&&h.log("confirm",
f,e),b.progress(f),d++,d===c&&b.complete(),!0}var b=this,d=0,c=this.images.length;if(this.hasAnyBroken=!1,!c)return this.complete(),void 0;for(var f=0;c>f;f++){var e=this.images[f];e.on("confirm",a);e.check()}};d.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a);b.jqDeferred&&b.jqDeferred.notify(b,a)})};d.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,
b),b.emit("always",b),b.jqDeferred)b.jqDeferred[b.hasAnyBroken?"reject":"resolve"](b)})};e&&(e.fn.imagesLoaded=function(a,b){return(new d(this,a,b)).jqDeferred.promise(e(this))});var q={};return l.prototype=new a,l.prototype.check=function(){var a=q[this.img.src];if(a)return this.useCached(a),void 0;if(q[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;a=this.proxyImage=new Image;b.bind(a,"load",this);b.bind(a,
"error",this);a.src=this.img.src},l.prototype.useCached=function(a){if(a.isConfirmed)this.confirm(a.isLoaded,"cached was confirmed");else{var b=this;a.on("confirm",function(a){return b.confirm(a.isLoaded,"cache emitted confirmed"),!0})}},l.prototype.confirm=function(a,b){this.isConfirmed=!0;this.isLoaded=a;this.emit("confirm",this,b)},l.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},l.prototype.onload=function(){this.confirm(!0,"onload");this.unbindProxyEvents()},l.prototype.onerror=
function(){this.confirm(!1,"onerror");this.unbindProxyEvents()},l.prototype.unbindProxyEvents=function(){b.unbind(this.proxyImage,"load",this);b.unbind(this.proxyImage,"error",this)},d}var e=b.jQuery,h=b.console,g=void 0!==h,d=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],a):b.imagesLoaded=a(b.EventEmitter,b.eventie)})(window);
(function(){Backbone.InfiniScroll=function(b,c){function f(b){b={};a.options.includePage&&(b.p=g+1);return b}c=c||{};var a={},e,h,g,d,k=0;d=b.length||25;a.collection=b;a.options=_.defaults(c,{success:function(){},error:function(){},onFetch:function(){},target:$(window),extraParams:{},pageSize:d,scrollOffset:100,remove:!1,strict:!1,includePage:!1});a.destroy=function(){e.off("scroll",a.watchScroll);a.disableFetch()};a.enableFetch=function(){h=!0};a.disableFetch=function(){h=!1};a.onFetch=function(){a.options.onFetch()};
a.fetchSuccess=function(b,d){a.options.strict&&b.length>=(g+1)*a.options.pageSize||!a.options.strict&&0<d.length?(a.enableFetch(),g+=1):a.disableFetch();a.options.success(b,d)};a.fetchError=function(b,d){a.enableFetch();a.options.error(b,d)};a.watchScroll=function(b){b=e.scrollTop()+e.height();var d=e.get(0).scrollHeight;d||(d=$(document).height());if(b>=d-a.options.scrollOffset&&h&&k<=b){d=a.collection.last();if(!d)return;a.onFetch();a.disableFetch();a.collection.fetch({success:a.fetchSuccess,error:a.fetchError,
remove:a.options.remove,data:$.extend(f(d),a.options.extraParams)})}k=b};e=$(a.options.target);h=!0;g=1;e.on("scroll",a.watchScroll);return a}})();
(function(b,c){function f(c,d){var f,e,h,l=c.nodeName.toLowerCase();return"area"===l?(f=c.parentNode,e=f.name,c.href&&e&&"map"===f.nodeName.toLowerCase()?(h=b("img[usemap=#"+e+"]")[0],!!h&&a(h)):!1):(/input|select|textarea|button|object/.test(l)?!c.disabled:"a"===l?c.href||d:d)&&a(c)}function a(a){return b.expr.filters.visible(a)&&!b(a).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var e=0,h=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,
COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(a){return function(d,c){return"number"==typeof d?this.each(function(){var a=this;setTimeout(function(){b(a).focus();c&&c.call(a)},d)}):a.apply(this,arguments)}}(b.fn.focus),scrollParent:function(){var a;return a=b.ui.ie&&/(static|relative)/.test(this.css("position"))||
/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(a!==c)return this.css("zIndex",a);if(this.length){var d,
f;for(a=b(this[0]);a.length&&a[0]!==document;){if(d=a.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(f=parseInt(a.css("zIndex"),10),!isNaN(f)&&0!==f))return f;a=a.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){h.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(d){return!!b.data(d,a)}}):
function(a,d,c){return!!b.data(a,c[3])},focusable:function(a){return f(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),c=isNaN(d);return(c||0<=d)&&f(a,!c)}});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(a,d){function f(a,d,c,g){return b.each(e,function(){d-=parseFloat(b.css(a,"padding"+this))||0;c&&(d-=parseFloat(b.css(a,"border"+this+"Width"))||0);g&&(d-=parseFloat(b.css(a,"margin"+this))||0)}),d}var e="Width"===d?["Left","Right"]:["Top","Bottom"],
h=d.toLowerCase(),l={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(a){return a===c?l["inner"+d].call(this):this.each(function(){b(this).css(h,f(this,a)+"px")})};b.fn["outer"+d]=function(a,c){return"number"!=typeof a?l["outer"+d].call(this,a):this.each(function(){b(this).css(h,f(this,a,!0,c)+"px")})}});b.fn.addBack||(b.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(a){return function(d){return arguments.length?a.call(this,b.camelCase(d)):a.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
b.extend(b.ui,{plugin:{add:function(a,d,c){var f;a=b.ui[a].prototype;for(f in c)a.plugins[f]=a.plugins[f]||[],a.plugins[f].push([d,c[f]])},call:function(a,b,c){var f=a.plugins[b];if(f&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;f.length>b;b++)a.options[f[b][0]]&&f[b][1].apply(a.element,c)}},hasScroll:function(a,d){if("hidden"===b(a).css("overflow"))return!1;var c=d&&"left"===d?"scrollLeft":"scrollTop";return 0<a[c]?!0:(a[c]=1,a[c]=0,!1)}})})(jQuery);
(function(b,c){var f=0,a=Array.prototype.slice,e=b.cleanData;b.cleanData=function(a){for(var c,d=0;null!=(c=a[d]);d++)try{b(c).triggerHandler("remove")}catch(f){}e(a)};b.widget=function(a,g,d){var f,e,p,l,q={},m=a.split(".")[0];a=a.split(".")[1];f=m+"-"+a;d||(d=g,g=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[m]=b[m]||{};e=b[m][a];p=b[m][a]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),c):new p(a,b)};b.extend(p,e,{version:d.version,
_proto:b.extend({},d),_childConstructors:[]});l=new g;l.options=b.widget.extend({},l.options);b.each(d,function(a,d){return b.isFunction(d)?(q[a]=function(){var b=function(){return g.prototype[a].apply(this,arguments)},c=function(b){return g.prototype[a].apply(this,b)};return function(){var a,g=this._super,f=this._superApply;return this._super=b,this._superApply=c,a=d.apply(this,arguments),this._super=g,this._superApply=f,a}}(),c):(q[a]=d,c)});p.prototype=b.widget.extend(l,{widgetEventPrefix:e?l.widgetEventPrefix:
a},q,{constructor:p,namespace:m,widgetName:a,widgetFullName:f});e?(b.each(e._childConstructors,function(a,d){var c=d.prototype;b.widget(c.namespace+"."+c.widgetName,p,d._proto)}),delete e._childConstructors):g._childConstructors.push(p);b.widget.bridge(a,p)};b.widget.extend=function(f){for(var g,d,e=a.call(arguments,1),n=0,p=e.length;p>n;n++)for(g in e[n])d=e[n][g],e[n].hasOwnProperty(g)&&d!==c&&(f[g]=b.isPlainObject(d)?b.isPlainObject(f[g])?b.widget.extend({},f[g],d):b.widget.extend({},d):d);return f};
b.widget.bridge=function(f,g){var d=g.prototype.widgetFullName||f;b.fn[f]=function(e){var n="string"==typeof e,p=a.call(arguments,1),l=this;return e=!n&&p.length?b.widget.extend.apply(null,[e].concat(p)):e,n?this.each(function(){var a,g=b.data(this,d);return g?b.isFunction(g[e])&&"_"!==e.charAt(0)?(a=g[e].apply(g,p),a!==g&&a!==c?(l=a&&a.jquery?l.pushStack(a.get()):a,!1):c):b.error("no such method '"+e+"' for "+f+" widget instance"):b.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+
e+"'")}):this.each(function(){var a=b.data(this,d);a?a.option(e||{})._init():b.data(this,d,new g(e,this))}),l}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,c){c=b(c||this.defaultElement||this)[0];this.element=b(c);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),a);
this.bindings=b();this.hoverable=b();this.focusable=b();c!==this&&(b.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=b(c.style?c.ownerDocument:c.document||c),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();
this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(a,g){var d,f,e,p=a;
if(0===arguments.length)return b.widget.extend({},this.options);if("string"==typeof a)if(p={},d=a.split("."),a=d.shift(),d.length){f=p[a]=b.widget.extend({},this.options[a]);for(e=0;d.length-1>e;e++)f[d[e]]=f[d[e]]||{},f=f[d[e]];if(a=d.pop(),g===c)return f[a]===c?null:f[a];f[a]=g}else{if(g===c)return this.options[a]===c?null:this.options[a];p[a]=g}return this._setOptions(p),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=
b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,g,d){var f,e=this;"boolean"!=typeof a&&(d=g,g=a,a=!1);d?(g=f=b(g),this.bindings=this.bindings.add(g)):(d=g,g=this.element,f=this.widget());b.each(d,function(d,
l){function q(){return a||!0!==e.options.disabled&&!b(this).hasClass("ui-state-disabled")?("string"==typeof l?e[l]:l).apply(e,arguments):c}"string"!=typeof l&&(q.guid=l.guid=l.guid||q.guid||b.guid++);var m=d.match(/^(\w+)\s*(.*)$/),s=m[1]+e.eventNamespace;(m=m[2])?f.delegate(m,s,q):g.bind(s,q)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var d=this;return setTimeout(function(){return("string"==typeof a?
d[a]:a).apply(d,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,c,d){var f,e=this.options[a];
if(d=d||{},c=b.Event(c),c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c.target=this.element[0],a=c.originalEvent)for(f in a)f in c||(c[f]=a[f]);return this.element.trigger(c,d),!(b.isFunction(e)&&!1===e.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(a,c){b.Widget.prototype["_"+a]=function(d,f,e){"string"==typeof f&&(f={effect:f});var p,l=f?!0===f||"number"==typeof f?c:f.effect||c:a;f=f||{};"number"==typeof f&&
(f={duration:f});p=!b.isEmptyObject(f);f.complete=e;f.delay&&d.delay(f.delay);p&&b.effects&&b.effects.effect[l]?d[a](f):l!==a&&d[l]?d[l](f.duration,f.easing,e):d.queue(function(c){b(this)[a]();e&&e.call(d[0]);c()})}})})(jQuery);
(function(b){var c=!1;b(document).mouseup(function(){c=!1});b.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(a){return!0===b.data(a.target,c.widgetName+".preventClickEvent")?(b.removeData(a.target,c.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1):void 0});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(f){if(!c){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var a=this,e=1===f.which,h="string"==typeof this.options.cancel&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:!1;return e&&!h&&this._mouseCapture(f)?(this.mouseDelayMet=
!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&(this._mouseStarted=!1!==this._mouseStart(f),!this._mouseStarted)?(f.preventDefault(),!0):(!0===b.data(f.target,this.widgetName+".preventClickEvent")&&b.removeData(f.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return a._mouseMove(b)},this._mouseUpDelegate=function(b){return a._mouseUp(b)},
b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),f.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(c){return b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!c.button?this._mouseUp(c):this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),
!this._mouseStarted)},_mouseUp:function(c){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var f=this.options;return this.helper||f.disabled||0<b(c.target).closest(".ui-resizable-handle").length?
!1:(this.handle=this._getHandle(c),this.handle?(b(!0===f.iframeFix?"iframe":f.iframeFix).each(function(){b("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(c){var f=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,b.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt),this._setContainment(),!1===this._trigger("start",c)?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!f.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(c,
f){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(c),this.positionAbs=this._convertPositionTo("absolute"),!f){var a=this._uiHash();if(!1===this._trigger("drag",c,a))return this._mouseUp({}),!1;this.position=a.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),b.ui.ddmanager&&
b.ui.ddmanager.drag(this,c),!1},_mouseStop:function(c){var f=this,a=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(a=b.ui.ddmanager.drop(this,c)),this.dropped&&(a=this.dropped,this.dropped=!1),"original"!==this.options.helper||b.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?b(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",c)&&f._clear()}):!1!==this._trigger("stop",c)&&this._clear(),!1):!1},_mouseUp:function(c){return b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,c),b.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(c){return this.options.handle?
!!b(c.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(c){var f=this.options;c=b.isFunction(f.helper)?b(f.helper.apply(this.element[0],[c])):"clone"===f.helper?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo("parent"===f.appendTo?this.element[0].parentNode:f.appendTo),c[0]===this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute"),c},_adjustOffsetFromHelper:function(c){"string"==
typeof c&&(c=c.split(" "));b.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){var c=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
b.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.ui.ie)&&(c={top:0,left:0}),{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.element.position();
return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,f,a,e=this.options;return e.containment?"window"===e.containment?(this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,b(document).width()-this.helperProportions.width-this.margins.left,(b(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),f=b(e.containment),a=f[0],a&&(c="hidden"!==f.css("overflow"),this.containment=[(parseInt(f.css("borderLeftWidth"),
10)||0)+(parseInt(f.css("paddingLeft"),10)||0),(parseInt(f.css("borderTopWidth"),10)||0)+(parseInt(f.css("paddingTop"),10)||0),(c?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(f.css("borderRightWidth"),10)||0)-(parseInt(f.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(f.css("borderBottomWidth"),10)||0)-(parseInt(f.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=f),void 0):(this.containment=null,void 0)},_convertPositionTo:function(c,f){f||(f=this.position);var a="absolute"===c?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:f.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===
this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*a,left:f.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*a}},_generatePosition:function(c){var f,a,e,h,g=this.options,d="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,k=c.pageX,n=c.pageY;return this.offset.scroll||(this.offset.scroll=
{top:d.scrollTop(),left:d.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(a=this.relative_container.offset(),f=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):f=this.containment,c.pageX-this.offset.click.left<f[0]&&(k=f[0]+this.offset.click.left),c.pageY-this.offset.click.top<f[1]&&(n=f[1]+this.offset.click.top),c.pageX-this.offset.click.left>f[2]&&(k=f[2]+this.offset.click.left),c.pageY-this.offset.click.top>
f[3]&&(n=f[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((n-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,n=f?e-this.offset.click.top>=f[1]||e-this.offset.click.top>f[3]?e:e-this.offset.click.top>=f[1]?e-g.grid[1]:e+g.grid[1]:e,h=g.grid[0]?this.originalPageX+Math.round((k-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,k=f?h-this.offset.click.left>=f[0]||h-this.offset.click.left>f[2]?h:h-this.offset.click.left>=f[0]?h-g.grid[0]:h+g.grid[0]:
h)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(c,f,a){return a=a||this._uiHash(),b.ui.plugin.call(this,c,[f,a]),"drag"===c&&(this.positionAbs=this._convertPositionTo("absolute")),b.Widget.prototype._trigger.call(this,c,f,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(c,f){var a=b(this).data("ui-draggable"),e=a.options,h=b.extend({},f,{item:a.element});a.sortables=
[];b(e.connectToSortable).each(function(){var g=b.data(this,"ui-sortable");g&&!g.options.disabled&&(a.sortables.push({instance:g,shouldRevert:g.options.revert}),g.refreshPositions(),g._trigger("activate",c,h))})},stop:function(c,f){var a=b(this).data("ui-draggable"),e=b.extend({},f,{item:a.element});b.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),
this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,e))})},drag:function(c,f){var a=b(this).data("ui-draggable"),e=this;b.each(a.sortables,function(){var h=!1,g=this;this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=a.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&
(h=!0,b.each(a.sortables,function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&b.contains(g.instance.element[0],this.instance.element[0])&&(h=!1),h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=
this.instance.options.helper,this.instance.options.helper=function(){return f.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",c),a.dropped=
this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),
a._trigger("fromSortable",c),a.dropped=!1)})}});b.ui.plugin.add("draggable","cursor",{start:function(){var c=b("body"),f=b(this).data("ui-draggable").options;c.css("cursor")&&(f._cursor=c.css("cursor"));c.css("cursor",f.cursor)},stop:function(){var c=b(this).data("ui-draggable").options;c._cursor&&b("body").css("cursor",c._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(c,f){var a=b(f.helper),e=b(this).data("ui-draggable").options;a.css("opacity")&&(e._opacity=a.css("opacity"));a.css("opacity",
e.opacity)},stop:function(c,f){var a=b(this).data("ui-draggable").options;a._opacity&&b(f.helper).css("opacity",a._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var c=b(this).data("ui-draggable");c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(c){var f=b(this).data("ui-draggable"),a=f.options,e=!1;f.scrollParent[0]!==document&&"HTML"!==f.scrollParent[0].tagName?(a.axis&&"x"===a.axis||(f.overflowOffset.top+
f.scrollParent[0].offsetHeight-c.pageY<a.scrollSensitivity?f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop+a.scrollSpeed:c.pageY-f.overflowOffset.top<a.scrollSensitivity&&(f.scrollParent[0].scrollTop=e=f.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(f.overflowOffset.left+f.scrollParent[0].offsetWidth-c.pageX<a.scrollSensitivity?f.scrollParent[0].scrollLeft=e=f.scrollParent[0].scrollLeft+a.scrollSpeed:c.pageX-f.overflowOffset.left<a.scrollSensitivity&&(f.scrollParent[0].scrollLeft=
e=f.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(c.pageY-b(document).scrollTop()<a.scrollSensitivity?e=b(document).scrollTop(b(document).scrollTop()-a.scrollSpeed):b(window).height()-(c.pageY-b(document).scrollTop())<a.scrollSensitivity&&(e=b(document).scrollTop(b(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(c.pageX-b(document).scrollLeft()<a.scrollSensitivity?e=b(document).scrollLeft(b(document).scrollLeft()-a.scrollSpeed):b(window).width()-(c.pageX-b(document).scrollLeft())<
a.scrollSensitivity&&(e=b(document).scrollLeft(b(document).scrollLeft()+a.scrollSpeed))));!1!==e&&b.ui.ddmanager&&!a.dropBehaviour&&b.ui.ddmanager.prepareOffsets(f,c)}});b.ui.plugin.add("draggable","snap",{start:function(){var c=b(this).data("ui-draggable"),f=c.options;c.snapElements=[];b(f.snap.constructor!==String?f.snap.items||":data(ui-draggable)":f.snap).each(function(){var a=b(this),f=a.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),
top:f.top,left:f.left})})},drag:function(c,f){var a,e,h,g,d,k,n,p,l,q,m=b(this).data("ui-draggable"),s=m.options,r=s.snapTolerance,u=f.offset.left,y=u+m.helperProportions.width,x=f.offset.top,w=x+m.helperProportions.height;for(l=m.snapElements.length-1;0<=l;l--)d=m.snapElements[l].left,k=d+m.snapElements[l].width,n=m.snapElements[l].top,p=n+m.snapElements[l].height,d-r>y||u>k+r||n-r>w||x>p+r||!b.contains(m.snapElements[l].item.ownerDocument,m.snapElements[l].item)?(m.snapElements[l].snapping&&m.options.snap.release&&
m.options.snap.release.call(m.element,c,b.extend(m._uiHash(),{snapItem:m.snapElements[l].item})),m.snapElements[l].snapping=!1):("inner"!==s.snapMode&&(a=r>=Math.abs(n-w),e=r>=Math.abs(p-x),h=r>=Math.abs(d-y),g=r>=Math.abs(k-u),a&&(f.position.top=m._convertPositionTo("relative",{top:n-m.helperProportions.height,left:0}).top-m.margins.top),e&&(f.position.top=m._convertPositionTo("relative",{top:p,left:0}).top-m.margins.top),h&&(f.position.left=m._convertPositionTo("relative",{top:0,left:d-m.helperProportions.width}).left-
m.margins.left),g&&(f.position.left=m._convertPositionTo("relative",{top:0,left:k}).left-m.margins.left)),q=a||e||h||g,"outer"!==s.snapMode&&(a=r>=Math.abs(n-x),e=r>=Math.abs(p-w),h=r>=Math.abs(d-u),g=r>=Math.abs(k-y),a&&(f.position.top=m._convertPositionTo("relative",{top:n,left:0}).top-m.margins.top),e&&(f.position.top=m._convertPositionTo("relative",{top:p-m.helperProportions.height,left:0}).top-m.margins.top),h&&(f.position.left=m._convertPositionTo("relative",{top:0,left:d}).left-m.margins.left),
g&&(f.position.left=m._convertPositionTo("relative",{top:0,left:k-m.helperProportions.width}).left-m.margins.left)),!m.snapElements[l].snapping&&(a||e||h||g||q)&&m.options.snap.snap&&m.options.snap.snap.call(m.element,c,b.extend(m._uiHash(),{snapItem:m.snapElements[l].item})),m.snapElements[l].snapping=a||e||h||g||q)}});b.ui.plugin.add("draggable","stack",{start:function(){var c,f=this.data("ui-draggable").options,f=b.makeArray(b(f.stack)).sort(function(a,c){return(parseInt(b(a).css("zIndex"),10)||
0)-(parseInt(b(c).css("zIndex"),10)||0)});f.length&&(c=parseInt(b(f[0]).css("zIndex"),10)||0,b(f).each(function(a){b(this).css("zIndex",c+a)}),this.css("zIndex",c+f.length))}});b.ui.plugin.add("draggable","zIndex",{start:function(c,f){var a=b(f.helper),e=b(this).data("ui-draggable").options;a.css("zIndex")&&(e._zIndex=a.css("zIndex"));a.css("zIndex",e.zIndex)},stop:function(c,f){var a=b(this).data("ui-draggable").options;a._zIndex&&b(f.helper).css("zIndex",a._zIndex)}})})(jQuery);
(function(b){function c(a){return parseInt(a,10)||0}function f(a){return!isNaN(parseInt(a,10))}b.widget("ui.resizable",b.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var a,c,f,g,d,k=this,n=this.options;if(this.element.addClass("ui-resizable"),
b.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),
this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");a=this.handles.split(",");this.handles={};for(c=0;a.length>c;c++)f=b.trim(a[c]),d="ui-resizable-"+f,g=b("<div class='ui-resizable-handle "+d+"'></div>"),g.css({zIndex:n.zIndex}),"se"===f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(g)}this._renderAxis=function(a){var d,c,g,f;a=a||this.element;for(d in this.handles)this.handles[d].constructor===
String&&(this.handles[d]=b(this.handles[d],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(c=b(this.handles[d],this.element),f=/sw|ne|nw|se|n|s/.test(d)?c.outerHeight():c.outerWidth(),g=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join(""),a.css(g,f),this._proportionallyResize()),b(this.handles[d]).length};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){k.resizing||(this.className&&(g=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),k.axis=g&&g[1]?g[1]:"se")});n.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(b(this).removeClass("ui-resizable-autohide"),k._handles.show())}).mouseleave(function(){n.disabled||k.resizing||(b(this).addClass("ui-resizable-autohide"),k._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var a,c=function(a){b(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),a=this.element,this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")}).insertAfter(a),a.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),
this},_mouseCapture:function(a){var c,f,g=!1;for(c in this.handles)f=b(this.handles[c])[0],(f===a.target||b.contains(f,a.target))&&(g=!0);return!this.options.disabled&&g},_mouseStart:function(a){var f,h,g,d=this.options,k=this.element.position(),n=this.element;return this.resizing=!0,/absolute/.test(n.css("position"))?n.css({position:"absolute",top:n.css("top"),left:n.css("left")}):n.is(".ui-draggable")&&n.css({position:"absolute",top:k.top,left:k.left}),this._renderProxy(),f=c(this.helper.css("left")),
h=c(this.helper.css("top")),d.containment&&(f+=b(d.containment).scrollLeft()||0,h+=b(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:h},this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalPosition={left:f,top:h},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-
n.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1,g=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===g?this.axis+"-resize":g),n.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(a){var c,f=this.helper,g={},d=this.originalMousePosition,k=this.position.top,n=this.position.left,p=this.size.width,l=this.size.height,
q=a.pageX-d.left||0,d=a.pageY-d.top||0,m=this._change[this.axis];return m?(c=m.apply(this,[a,q,d]),this._updateVirtualBoundaries(a.shiftKey),(this._aspectRatio||a.shiftKey)&&(c=this._updateRatio(c,a)),c=this._respectSize(c,a),this._updateCache(c),this._propagate("resize",a),this.position.top!==k&&(g.top=this.position.top+"px"),this.position.left!==n&&(g.left=this.position.left+"px"),this.size.width!==p&&(g.width=this.size.width+"px"),this.size.height!==l&&(g.height=this.size.height+"px"),f.css(g),
!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(g)||this._trigger("resize",a,this.ui()),!1):!1},_mouseStop:function(a){this.resizing=!1;var c,f,g,d,k,n,p,l=this.options;return this._helper&&(c=this._proportionallyResizeElements,f=c.length&&/textarea/i.test(c[0].nodeName),g=f&&b.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,d=f?0:this.sizeDiff.width,k={width:this.helper.width()-d,height:this.helper.height()-g},n=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,p=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,l.animate||this.element.css(b.extend(k,{top:p,left:n})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!l.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",a),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,
c,g,d,k;k=this.options;k={minWidth:f(k.minWidth)?k.minWidth:0,maxWidth:f(k.maxWidth)?k.maxWidth:1/0,minHeight:f(k.minHeight)?k.minHeight:0,maxHeight:f(k.maxHeight)?k.maxHeight:1/0};(this._aspectRatio||a)&&(b=k.minHeight*this.aspectRatio,g=k.minWidth/this.aspectRatio,c=k.maxHeight*this.aspectRatio,d=k.maxWidth/this.aspectRatio,b>k.minWidth&&(k.minWidth=b),g>k.minHeight&&(k.minHeight=g),k.maxWidth>c&&(k.maxWidth=c),k.maxHeight>d&&(k.maxHeight=d));this._vBoundaries=k},_updateCache:function(a){this.offset=
this.helper.offset();f(a.left)&&(this.position.left=a.left);f(a.top)&&(this.position.top=a.top);f(a.height)&&(this.size.height=a.height);f(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,g=this.axis;return f(a.height)?a.width=a.height*this.aspectRatio:f(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===g&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===g&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=
this._vBoundaries,c=this.axis,g=f(a.width)&&b.maxWidth&&b.maxWidth<a.width,d=f(a.height)&&b.maxHeight&&b.maxHeight<a.height,k=f(a.width)&&b.minWidth&&b.minWidth>a.width,n=f(a.height)&&b.minHeight&&b.minHeight>a.height,p=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,q=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);return k&&(a.width=b.minWidth),n&&(a.height=b.minHeight),g&&(a.width=b.maxWidth),d&&(a.height=b.maxHeight),k&&q&&(a.left=p-b.minWidth),g&&q&&(a.left=p-b.maxWidth),
n&&c&&(a.top=l-b.minHeight),d&&c&&(a.top=l-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,g,d,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(d=this._proportionallyResizeElements[a],!this.borderDif){this.borderDif=[];c=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")];
g=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];for(b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(g[b],10)||0)}d.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+
c}},se:function(a,c,f){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,c,f]))},sw:function(a,c,f){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,c,f]))},ne:function(a,c,f){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,c,f]))},nw:function(a,c,f){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,c,f]))}},_propagate:function(a,c){b.ui.plugin.call(this,a,[c,this.ui()]);
"resize"!==a&&this._trigger(a,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","animate",{stop:function(a){var c=b(this).data("ui-resizable"),f=c.options,g=c._proportionallyResizeElements,d=g.length&&/textarea/i.test(g[0].nodeName),k=d&&b.ui.hasScroll(g[0],"left")?0:c.sizeDiff.height,d=
{width:c.size.width-(d?0:c.sizeDiff.width),height:c.size.height-k},k=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,n=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(b.extend(d,n&&k?{top:n,left:k}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),
10)};g&&g.length&&b(g[0]).css({width:d.width,height:d.height});c._updateCache(d);c._propagate("resize",a)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var a,f,h,g,d,k,n,p=b(this).data("ui-resizable"),l=p.element,q=p.options.containment;(l=q instanceof b?q.get(0):/parent/.test(q)?l.parent().get(0):q)&&(p.containerElement=b(l),/document/.test(q)||q===document?(p.containerOffset={left:0,top:0},p.containerPosition={left:0,top:0},p.parentData={element:b(document),left:0,top:0,width:b(document).width(),
height:b(document).height()||document.body.parentNode.scrollHeight}):(a=b(l),f=[],b(["Top","Right","Left","Bottom"]).each(function(b,d){f[b]=c(a.css("padding"+d))}),p.containerOffset=a.offset(),p.containerPosition=a.position(),p.containerSize={height:a.innerHeight()-f[3],width:a.innerWidth()-f[1]},h=p.containerOffset,g=p.containerSize.height,d=p.containerSize.width,k=b.ui.hasScroll(l,"left")?l.scrollWidth:d,n=b.ui.hasScroll(l)?l.scrollHeight:g,p.parentData={element:l,left:h.left,top:h.top,width:k,
height:n}))},resize:function(a){var c,f,g,d,k=b(this).data("ui-resizable");c=k.options;f=k.containerOffset;g=k.position;a=k._aspectRatio||a.shiftKey;d={top:0,left:0};var n=k.containerElement;n[0]!==document&&/static/.test(n.css("position"))&&(d=f);g.left<(k._helper?f.left:0)&&(k.size.width+=k._helper?k.position.left-f.left:k.position.left-d.left,a&&(k.size.height=k.size.width/k.aspectRatio),k.position.left=c.helper?f.left:0);g.top<(k._helper?f.top:0)&&(k.size.height+=k._helper?k.position.top-f.top:
k.position.top,a&&(k.size.width=k.size.height*k.aspectRatio),k.position.top=k._helper?f.top:0);k.offset.left=k.parentData.left+k.position.left;k.offset.top=k.parentData.top+k.position.top;c=Math.abs(k.offset.left-d.left+k.sizeDiff.width);f=Math.abs((k._helper?k.offset.top-d.top:k.offset.top-f.top)+k.sizeDiff.height);g=k.containerElement.get(0)===k.element.parent().get(0);d=/relative|absolute/.test(k.containerElement.css("position"));g&&d&&(c-=k.parentData.left);c+k.size.width>=k.parentData.width&&
(k.size.width=k.parentData.width-c,a&&(k.size.height=k.size.width/k.aspectRatio));f+k.size.height>=k.parentData.height&&(k.size.height=k.parentData.height-f,a&&(k.size.width=k.size.height*k.aspectRatio))},stop:function(){var a=b(this).data("ui-resizable"),c=a.options,f=a.containerOffset,g=a.containerPosition,d=a.containerElement,k=b(a.helper),n=k.offset(),p=k.outerWidth()-a.sizeDiff.width,k=k.outerHeight()-a.sizeDiff.height;a._helper&&!c.animate&&/relative/.test(d.css("position"))&&b(this).css({left:n.left-
g.left-f.left,width:p,height:k});a._helper&&!c.animate&&/static/.test(d.css("position"))&&b(this).css({left:n.left-g.left-f.left,width:p,height:k})}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var a=b(this).data("ui-resizable").options,c=function(a){b(a).each(function(){var a=b(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!=typeof a.alsoResize||a.alsoResize.parentNode?
c(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],c(a.alsoResize)):b.each(a.alsoResize,function(a){c(a)})},resize:function(a,c){var f=b(this).data("ui-resizable"),g=f.options,d=f.originalSize,k=f.originalPosition,n={height:f.size.height-d.height||0,width:f.size.width-d.width||0,top:f.position.top-k.top||0,left:f.position.left-k.left||0},p=function(a,d){b(a).each(function(){var a=b(this),g=b(this).data("ui-resizable-alsoresize"),f={},k=d&&d.length?d:a.parents(c.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(k,function(a,b){var d=(g[b]||0)+(n[b]||0);d&&0<=d&&(f[b]=d||null)});a.css(f)})};"object"!=typeof g.alsoResize||g.alsoResize.nodeType?p(g.alsoResize):b.each(g.alsoResize,function(a,b){p(a,b)})},stop:function(){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","ghost",{start:function(){var a=b(this).data("ui-resizable"),c=a.options,f=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",
height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=b(this).data("ui-resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=b(this).data("ui-resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(){var a=b(this).data("ui-resizable"),
c=a.options,f=a.size,g=a.originalSize,d=a.originalPosition,k=a.axis,n="number"==typeof c.grid?[c.grid,c.grid]:c.grid,p=n[0]||1,l=n[1]||1,q=Math.round((f.width-g.width)/p)*p,f=Math.round((f.height-g.height)/l)*l,m=g.width+q,g=g.height+f,s=c.maxWidth&&m>c.maxWidth,r=c.maxHeight&&g>c.maxHeight,u=c.minWidth&&c.minWidth>m,y=c.minHeight&&c.minHeight>g;c.grid=n;u&&(m+=p);y&&(g+=l);s&&(m-=p);r&&(g-=l);/^(se|s|e)$/.test(k)?(a.size.width=m,a.size.height=g):/^(ne)$/.test(k)?(a.size.width=m,a.size.height=g,a.position.top=
d.top-f):/^(sw)$/.test(k)?(a.size.width=m,a.size.height=g,a.position.left=d.left-q):(a.size.width=m,a.size.height=g,a.position.top=d.top-f,a.position.left=d.left-q)}})})(jQuery);
(function(b,c){function f(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";
this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",
firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,
onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};b.extend(this._defaults,this.regional[""]);this.dpDiv=a(b("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(a){return a.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseout",function(){b(this).removeClass("ui-state-hover");
-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){b.datepicker._isDisabledDatepicker(h.inline?a.parent()[0]:h.input[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),b(this).addClass("ui-state-hover"),
-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))})}function e(a,d){b.extend(a,d);for(var c in d)null==d[c]&&(a[c]=d[c]);return a}b.extend(b.ui,{datepicker:{version:"1.10.3"}});var h;b.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(a,
d){var c,f,e;c=a.nodeName.toLowerCase();f="div"===c||"span"===c;a.id||(this.uuid+=1,a.id="dp"+this.uuid);e=this._newInst(b(a),f);e.settings=b.extend({},d||{});"input"===c?this._connectDatepicker(a,e):f&&this._inlineDatepicker(a,e)},_newInst:function(c,d){return{id:c[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:d,dpDiv:d?a(b("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(a,d){var c=b(a);d.append=b([]);d.trigger=b([]);c.hasClass(this.markerClassName)||(this._attachments(c,d),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(d),b.data(a,"datepicker",d),d.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,d){var c,f,e;c=this._get(d,"appendText");var h=this._get(d,"isRTL");d.append&&d.append.remove();c&&(d.append=b("<span class='"+this._appendClass+
"'>"+c+"</span>"),a[h?"before":"after"](d.append));a.unbind("focus",this._showDatepicker);d.trigger&&d.trigger.remove();c=this._get(d,"showOn");("focus"===c||"both"===c)&&a.focus(this._showDatepicker);("button"===c||"both"===c)&&(f=this._get(d,"buttonText"),e=this._get(d,"buttonImage"),d.trigger=b(this._get(d,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:e,alt:f,title:f}):b("<button type='button'></button>").addClass(this._triggerClass).html(e?b("<img/>").attr({src:e,alt:f,
title:f}):f)),a[h?"before":"after"](d.trigger),d.trigger.click(function(){return b.datepicker._datepickerShowing&&b.datepicker._lastInput===a[0]?b.datepicker._hideDatepicker():b.datepicker._datepickerShowing&&b.datepicker._lastInput!==a[0]?(b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(a[0])):b.datepicker._showDatepicker(a[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,f,e,h=new Date(2009,11,20),q=this._get(a,"dateFormat");q.match(/[DM]/)&&(b=function(a){for(e=
f=c=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,f=e);return f},h.setMonth(b(this._get(a,q.match(/MM/)?"monthNames":"monthNamesShort"))),h.setDate(b(this._get(a,q.match(/DD/)?"dayNames":"dayNamesShort"))+20-h.getDay()));a.input.attr("size",this._formatDate(a,h).length)}},_inlineDatepicker:function(a,c){var f=b(a);f.hasClass(this.markerClassName)||(f.addClass(this.markerClassName).append(c.dpDiv),b.data(a,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),
c.settings.disabled&&this._disableDatepicker(a),c.dpDiv.css("display","block"))},_dialogDatepicker:function(a,c,f,h,p){var l,q,m,s,r;a=this._dialogInst;return a||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=b("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),b("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},b.data(this._dialogInput[0],"datepicker",a)),e(a.settings,
h||{}),c=c&&c.constructor===Date?this._formatDate(a,c):c,this._dialogInput.val(c),this._pos=p?p.length?p:[p.pageX,p.pageY]:null,this._pos||(q=document.documentElement.clientWidth,m=document.documentElement.clientHeight,s=document.documentElement.scrollLeft||document.body.scrollLeft,r=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[q/2-100+s,m/2-150+r]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=f,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),
this._showDatepicker(this._dialogInput[0]),b.blockUI&&b.blockUI(this.dpDiv),b.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(a){var c,f=b(a),e=b.data(a,"datepicker");f.hasClass(this.markerClassName)&&(c=a.nodeName.toLowerCase(),b.removeData(a,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),f.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):
("div"===c||"span"===c)&&f.removeClass(this.markerClassName).empty())},_enableDatepicker:function(a){var c,f,e=b(a),h=b.data(a,"datepicker");e.hasClass(this.markerClassName)&&(c=a.nodeName.toLowerCase(),"input"===c?(a.disabled=!1,h.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(f=e.children("."+this._inlineClass),f.children().removeClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1)),this._disabledInputs=b.map(this._disabledInputs,function(b){return b===a?null:b}))},_disableDatepicker:function(a){var c,f,e=b(a),h=b.data(a,"datepicker");e.hasClass(this.markerClassName)&&(c=a.nodeName.toLowerCase(),"input"===c?(a.disabled=!0,h.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(f=e.children("."+this._inlineClass),f.children().addClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0)),this._disabledInputs=b.map(this._disabledInputs,function(b){return b===a?null:b}),this._disabledInputs[this._disabledInputs.length]=a)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(a){try{return b.data(a,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,d,f){var h,p,l,q,m=this._getInst(a);return 2===arguments.length&&"string"==
typeof d?"defaults"===d?b.extend({},b.datepicker._defaults):m?"all"===d?b.extend({},m.settings):this._get(m,d):null:(h=d||{},"string"==typeof d&&(h={},h[d]=f),m&&(this._curInst===m&&this._hideDatepicker(),p=this._getDateDatepicker(a,!0),l=this._getMinMaxDate(m,"min"),q=this._getMinMaxDate(m,"max"),e(m.settings,h),null!==l&&h.dateFormat!==c&&h.minDate===c&&(m.settings.minDate=this._formatDate(m,l)),null!==q&&h.dateFormat!==c&&h.maxDate===c&&(m.settings.maxDate=this._formatDate(m,q)),"disabled"in h&&
(h.disabled?this._disableDatepicker(a):this._enableDatepicker(a)),this._attachments(b(a),m),this._autoSize(m),this._setDate(m,p),this._updateAlternate(m),this._updateDatepicker(m)),c)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=
this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var c,f,e,h=b.datepicker._getInst(a.target),l=!0,q=h.dpDiv.is(".ui-datepicker-rtl");if(h._keyEvent=!0,b.datepicker._datepickerShowing)switch(a.keyCode){case 9:b.datepicker._hideDatepicker();l=!1;break;case 13:return e=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",h.dpDiv),e[0]&&b.datepicker._selectDay(a.target,h.selectedMonth,h.selectedYear,e[0]),c=b.datepicker._get(h,
"onSelect"),c?(f=b.datepicker._formatDate(h),c.apply(h.input?h.input[0]:null,[f,h])):b.datepicker._hideDatepicker(),!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(a.target,a.ctrlKey?-b.datepicker._get(h,"stepBigMonths"):-b.datepicker._get(h,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(a.target,a.ctrlKey?+b.datepicker._get(h,"stepBigMonths"):+b.datepicker._get(h,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&b.datepicker._clearDate(a.target);
l=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&b.datepicker._gotoToday(a.target);l=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&b.datepicker._adjustDate(a.target,q?1:-1,"D");l=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&b.datepicker._adjustDate(a.target,a.ctrlKey?-b.datepicker._get(h,"stepBigMonths"):-b.datepicker._get(h,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&b.datepicker._adjustDate(a.target,-7,"D");l=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&
b.datepicker._adjustDate(a.target,q?-1:1,"D");l=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&b.datepicker._adjustDate(a.target,a.ctrlKey?+b.datepicker._get(h,"stepBigMonths"):+b.datepicker._get(h,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&b.datepicker._adjustDate(a.target,7,"D");l=a.ctrlKey||a.metaKey;break;default:l=!1}else 36===a.keyCode&&a.ctrlKey?b.datepicker._showDatepicker(this):l=!1;l&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var d,f,e=b.datepicker._getInst(a.target);
return b.datepicker._get(e,"constrainInput")?(d=b.datepicker._possibleChars(b.datepicker._get(e,"dateFormat")),f=String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),a.ctrlKey||a.metaKey||" ">f||!d||-1<d.indexOf(f)):c},_doKeyUp:function(a){var c;a=b.datepicker._getInst(a.target);if(a.input.val()!==a.lastVal)try{(c=b.datepicker.parseDate(b.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,b.datepicker._getFormatConfig(a)))&&(b.datepicker._setDateFromField(a),b.datepicker._updateAlternate(a),
b.datepicker._updateDatepicker(a))}catch(f){}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!==a.nodeName.toLowerCase()&&(a=b("input",a.parentNode)[0]),!b.datepicker._isDisabledDatepicker(a)&&b.datepicker._lastInput!==a){var c,f,h,p,l,q;c=b.datepicker._getInst(a);b.datepicker._curInst&&b.datepicker._curInst!==c&&(b.datepicker._curInst.dpDiv.stop(!0,!0),c&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0]));f=(f=b.datepicker._get(c,"beforeShow"))?
f.apply(a,[a,c]):{};!1!==f&&(e(c.settings,f),c.lastVal=null,b.datepicker._lastInput=a,b.datepicker._setDateFromField(c),b.datepicker._inDialog&&(a.value=""),b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(a),b.datepicker._pos[1]+=a.offsetHeight),h=!1,b(a).parents().each(function(){return h|="fixed"===b(this).css("position"),!h}),p={left:b.datepicker._pos[0],top:b.datepicker._pos[1]},b.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),
b.datepicker._updateDatepicker(c),p=b.datepicker._checkOffset(c,p,h),c.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":h?"fixed":"absolute",display:"none",left:p.left+"px",top:p.top+"px"}),c.inline||(l=b.datepicker._get(c,"showAnim"),q=b.datepicker._get(c,"duration"),c.dpDiv.zIndex(b(a).zIndex()+1),b.datepicker._datepickerShowing=!0,b.effects&&b.effects.effect[l]?c.dpDiv.show(l,b.datepicker._get(c,"showOptions"),q):c.dpDiv[l||"show"](l?q:null),b.datepicker._shouldFocusInput(c)&&c.input.focus(),
b.datepicker._curInst=c))}},_updateDatepicker:function(a){this.maxRows=4;h=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,f=this._getNumberOfMonths(a),e=f[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<e&&a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");a.dpDiv[(1!==f[0]||1!==f[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,
"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a===b.datepicker._curInst&&b.datepicker._datepickerShowing&&b.datepicker._shouldFocusInput(a)&&a.input.focus();a.yearshtml&&(c=a.yearshtml,setTimeout(function(){c===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);c=a.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(a,c,f){var e=a.dpDiv.outerWidth(),
h=a.dpDiv.outerHeight(),l=a.input?a.input.outerWidth():0,q=a.input?a.input.outerHeight():0,m=document.documentElement.clientWidth+(f?0:b(document).scrollLeft()),s=document.documentElement.clientHeight+(f?0:b(document).scrollTop());return c.left-=this._get(a,"isRTL")?e-l:0,c.left-=f&&c.left===a.input.offset().left?b(document).scrollLeft():0,c.top-=f&&c.top===a.input.offset().top+q?b(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>m&&m>e?Math.abs(c.left+e-m):0),c.top-=Math.min(c.top,c.top+
h>s&&s>h?Math.abs(h+q):0),c},_findPos:function(a){for(var c,f=this._getInst(a),f=this._get(f,"isRTL");a&&("hidden"===a.type||1!==a.nodeType||b.expr.filters.hidden(a));)a=a[f?"previousSibling":"nextSibling"];return c=b(a).offset(),[c.left,c.top]},_hideDatepicker:function(a){var c,f,e,h,l=this._curInst;!l||a&&l!==b.data(a,"datepicker")||this._datepickerShowing&&(c=this._get(l,"showAnim"),f=this._get(l,"duration"),e=function(){b.datepicker._tidyDialog(l)},b.effects&&(b.effects.effect[c]||b.effects[c])?
l.dpDiv.hide(c,b.datepicker._get(l,"showOptions"),f,e):l.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?f:null,e),c||e(),this._datepickerShowing=!1,h=this._get(l,"onClose"),h&&h.apply(l.input?l.input[0]:null,[l.input?l.input.val():"",l]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(b.datepicker._curInst){a=b(a.target);var c=b.datepicker._getInst(a[0]);(a[0].id!==b.datepicker._mainDivId&&0===a.parents("#"+b.datepicker._mainDivId).length&&!a.hasClass(b.datepicker.markerClassName)&&!a.closest("."+b.datepicker._triggerClass).length&&b.datepicker._datepickerShowing&&(!b.datepicker._inDialog||!b.blockUI)||a.hasClass(b.datepicker.markerClassName)&&b.datepicker._curInst!==c)&&b.datepicker._hideDatepicker()}},_adjustDate:function(a,c,f){a=b(a);var e=
this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,c+("M"===f?this._get(e,"showCurrentAtPos"):0),f),this._updateDatepicker(e))},_gotoToday:function(a){var c;a=b(a);var f=this._getInst(a[0]);this._get(f,"gotoCurrent")&&f.currentDay?(f.selectedDay=f.currentDay,f.drawMonth=f.selectedMonth=f.currentMonth,f.drawYear=f.selectedYear=f.currentYear):(c=new Date,f.selectedDay=c.getDate(),f.drawMonth=f.selectedMonth=c.getMonth(),f.drawYear=f.selectedYear=c.getFullYear());this._notifyChange(f);
this._adjustDate(a)},_selectMonthYear:function(a,c,f){a=b(a);var e=this._getInst(a[0]);e["selected"+("M"===f?"Month":"Year")]=e["draw"+("M"===f?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,c,f,e){var h,l=b(a);b(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(l[0])||(h=this._getInst(l[0]),h.selectedDay=h.currentDay=b("a",e).html(),h.selectedMonth=h.currentMonth=c,h.selectedYear=h.currentYear=f,this._selectDate(a,
this._formatDate(h,h.currentDay,h.currentMonth,h.currentYear)))},_clearDate:function(a){a=b(a);this._selectDate(a,"")},_selectDate:function(a,c){var f;f=b(a);var e=this._getInst(f[0]);c=null!=c?c:this._formatDate(e);e.input&&e.input.val(c);this._updateAlternate(e);(f=this._get(e,"onSelect"))?f.apply(e.input?e.input[0]:null,[c,e]):e.input&&e.input.trigger("change");e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=
null)},_updateAlternate:function(a){var c,f,e,h=this._get(a,"altField");h&&(c=this._get(a,"altFormat")||this._get(a,"dateFormat"),f=this._getDate(a),e=this.formatDate(c,f,this._getFormatConfig(a)),b(h).each(function(){b(this).val(e)}))},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b;a=new Date(a.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),b=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,d,
f){if(null==a||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var e,h,l,q,m=0,s=(f?f.shortYearCutoff:null)||this._defaults.shortYearCutoff,s="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10),r=(f?f.dayNamesShort:null)||this._defaults.dayNamesShort,u=(f?f.dayNames:null)||this._defaults.dayNames,y=(f?f.monthNamesShort:null)||this._defaults.monthNamesShort;f=(f?f.monthNames:null)||this._defaults.monthNames;var x=-1,w=-1,B=-1,C=-1,E=!1,D=function(b){b=
a.length>e+1&&a.charAt(e+1)===b;return b&&e++,b},M=function(a){var b=D(a);a=RegExp("^\\d{1,"+("@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2)+"}");a=d.substring(m).match(a);if(!a)throw"Missing number at position "+m;return m+=a[0].length,parseInt(a[0],10)},z=function(a,f,g){var e=-1;a=b.map(D(a)?g:f,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(b.each(a,function(a,b){var f=b[1];return d.substr(m,f.length).toLowerCase()===f.toLowerCase()?(e=b[0],m+=f.length,
!1):c}),-1!==e)return e+1;throw"Unknown name at position "+m;},v=function(){if(d.charAt(m)!==a.charAt(e))throw"Unexpected literal at position "+m;m++};for(e=0;a.length>e;e++)if(E)"'"!==a.charAt(e)||D("'")?v():E=!1;else switch(a.charAt(e)){case "d":B=M("d");break;case "D":z("D",r,u);break;case "o":C=M("o");break;case "m":w=M("m");break;case "M":w=z("M",y,f);break;case "y":x=M("y");break;case "@":q=new Date(M("@"));x=q.getFullYear();w=q.getMonth()+1;B=q.getDate();break;case "!":q=new Date((M("!")-this._ticksTo1970)/
1E4);x=q.getFullYear();w=q.getMonth()+1;B=q.getDate();break;case "'":D("'")?v():E=!0;break;default:v()}if(d.length>m&&(l=d.substr(m),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;if(-1===x?x=(new Date).getFullYear():100>x&&(x+=(new Date).getFullYear()-(new Date).getFullYear()%100+(s>=x?0:-100)),-1<C){w=1;for(B=C;!(h=this._getDaysInMonth(x,w-1),h>=B);)w++,B-=h}if(q=this._daylightSavingAdjust(new Date(x,w-1,B)),q.getFullYear()!==x||q.getMonth()+1!==w||q.getDate()!==B)throw"Invalid date";
return q},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var f,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,q=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;
c=(c?c.monthNames:null)||this._defaults.monthNames;var m=function(b){b=a.length>f+1&&a.charAt(f+1)===b;return b&&f++,b},s=function(a,b,c){b=""+b;if(m(a))for(;c>b.length;)b="0"+b;return b},r=function(a,b,c,d){return m(a)?d[b]:c[b]},u="",y=!1;if(b)for(f=0;a.length>f;f++)if(y)"'"!==a.charAt(f)||m("'")?u+=a.charAt(f):y=!1;else switch(a.charAt(f)){case "d":u+=s("d",b.getDate(),2);break;case "D":u+=r("D",b.getDay(),e,h);break;case "o":u+=s("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":u+=s("m",b.getMonth()+1,2);break;case "M":u+=r("M",b.getMonth(),q,c);break;case "y":u+=m("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":u+=b.getTime();break;case "!":u+=1E4*b.getTime()+this._ticksTo1970;break;case "'":m("'")?u+="'":y=!0;break;default:u+=a.charAt(f)}return u},_possibleChars:function(a){var b,c="",f=!1,e=function(c){c=a.length>b+1&&a.charAt(b+1)===c;return c&&b++,c};for(b=0;a.length>
b;b++)if(f)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):f=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":e("'")?c+="'":f=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return a.settings[b]!==c?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),h=e,q=this._getFormatConfig(a);
try{h=this.parseDate(c,f,q)||e}catch(m){f=b?"":f}a.selectedDay=h.getDate();a.drawMonth=a.selectedMonth=h.getMonth();a.drawYear=a.selectedYear=h.getFullYear();a.currentDay=f?h.getDate():0;a.currentMonth=f?h.getMonth():0;a.currentYear=f?h.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,c,f){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},h=function(c){try{return b.datepicker.parseDate(b.datepicker._get(a,
"dateFormat"),c,b.datepicker._getFormatConfig(a))}catch(d){}for(var f=(c.toLowerCase().match(/^c/)?b.datepicker._getDate(a):null)||new Date,e=f.getFullYear(),h=f.getMonth(),f=f.getDate(),k=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,p=k.exec(c);p;){switch(p[2]||"d"){case "d":case "D":f+=parseInt(p[1],10);break;case "w":case "W":f+=7*parseInt(p[1],10);break;case "m":case "M":h+=parseInt(p[1],10);f=Math.min(f,b.datepicker._getDaysInMonth(e,h));break;case "y":case "Y":e+=parseInt(p[1],10),f=Math.min(f,b.datepicker._getDaysInMonth(e,
h))}p=k.exec(c)}return new Date(e,h,f)};c=null==c||""===c?f:"string"==typeof c?h(c):"number"==typeof c?isNaN(c)?f:e(c):new Date(c.getTime());return c=c&&"Invalid Date"==""+c?f:c,c&&(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)),this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){return a?(a.setHours(12<a.getHours()?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var f=!b,e=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));
a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e===a.selectedMonth&&h===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(f?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var c=this._get(a,"stepMonths"),
f="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){b(this).bind(this.getAttribute("data-event"),{prev:function(){b.datepicker._adjustDate(f,-c,"M")},next:function(){b.datepicker._adjustDate(f,+c,"M")},hide:function(){b.datepicker._hideDatepicker()},today:function(){b.datepicker._gotoToday(f)},selectDay:function(){return b.datepicker._selectDay(f,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return b.datepicker._selectMonthYear(f,
this,"M"),!1},selectYear:function(){return b.datepicker._selectMonthYear(f,this,"Y"),!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,f,e,h,q,m,s,r,u,y,x,w,B,C,E,D,M,z,v,F,G,N,O,R,W,S,U=new Date,U=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),P=this._get(a,"isRTL");q=this._get(a,"showButtonPanel");f=this._get(a,"hideIfNoPrevNext");h=this._get(a,"navigationAsDateFormat");var Q=this._getNumberOfMonths(a),A=this._get(a,"showCurrentAtPos");
e=this._get(a,"stepMonths");var L=1!==Q[0]||1!==Q[1],H=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),I=this._getMinMaxDate(a,"min"),J=this._getMinMaxDate(a,"max"),A=a.drawMonth-A,K=a.drawYear;if(0>A&&(A+=12,K--),J){b=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Q[0]*Q[1]+1,J.getDate()));for(b=I&&I>b?I:b;this._daylightSavingAdjust(new Date(K,A,1))>b;)A--,0>A&&(A=11,K--)}a.drawMonth=A;a.drawYear=K;b=this._get(a,"prevText");
b=h?this.formatDate(b,this._daylightSavingAdjust(new Date(K,A-e,1)),this._getFormatConfig(a)):b;b=this._canAdjustMonth(a,-1,K,A)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+b+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+b+"</span></a>":f?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+b+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+b+"</span></a>";c=this._get(a,"nextText");c=h?this.formatDate(c,
this._daylightSavingAdjust(new Date(K,A+e,1)),this._getFormatConfig(a)):c;f=this._canAdjustMonth(a,1,K,A)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+c+"</span></a>":f?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+c+"</span></a>";e=this._get(a,"currentText");c=this._get(a,"gotoCurrent")&&
a.currentDay?H:U;e=h?this.formatDate(e,c,this._getFormatConfig(a)):e;h=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>";q=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(P?h:"")+(this._isInRange(a,c)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+
e+"</button>":"")+(P?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;e=this._get(a,"showWeek");c=this._get(a,"dayNames");m=this._get(a,"dayNamesMin");s=this._get(a,"monthNames");r=this._get(a,"monthNamesShort");u=this._get(a,"beforeShowDay");y=this._get(a,"showOtherMonths");x=this._get(a,"selectOtherMonths");w=this._getDefaultDate(a);B="";for(E=0;Q[0]>E;E++){D="";this.maxRows=4;for(M=0;Q[1]>M;M++){if(z=this._daylightSavingAdjust(new Date(K,A,a.selectedDay)),C=" ui-corner-all",
v="",L){if(v+="<div class='ui-datepicker-group",1<Q[1])switch(M){case 0:v+=" ui-datepicker-group-first";C=" ui-corner-"+(P?"right":"left");break;case Q[1]-1:v+=" ui-datepicker-group-last";C=" ui-corner-"+(P?"left":"right");break;default:v+=" ui-datepicker-group-middle",C=""}v+="'>"}v+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===E?P?f:b:"")+(/all|right/.test(C)&&0===E?P?b:f:"")+this._generateMonthYearHeader(a,A,K,I,J,0<E||0<M,s,r)+"</div><table class='ui-datepicker-calendar'><thead><tr>";
F=e?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(C=0;7>C;C++)G=(C+h)%7,F+="<th"+(5<=(C+h+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+c[G]+"'>"+m[G]+"</span></th>";v+=F+"</tr></thead><tbody>";F=this._getDaysInMonth(K,A);K===a.selectedYear&&A===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,F));C=(this._getFirstDayOfMonth(K,A)-h+7)%7;F=Math.ceil((C+F)/7);this.maxRows=F=L?this.maxRows>F?this.maxRows:F:F;G=this._daylightSavingAdjust(new Date(K,
A,1-C));for(N=0;F>N;N++){v+="<tr>";O=e?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(G)+"</td>":"";for(C=0;7>C;C++)R=u?u.apply(a.input?a.input[0]:null,[G]):[!0,""],S=(W=G.getMonth()!==A)&&!x||!R[0]||I&&I>G||J&&G>J,O+="<td class='"+(5<=(C+h+6)%7?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(G.getTime()===z.getTime()&&A===a.selectedMonth&&a._keyEvent||w.getTime()===G.getTime()&&w.getTime()===z.getTime()?" "+this._dayOverClass:"")+(S?" "+this._unselectableClass+
" ui-state-disabled":"")+(W&&!y?"":" "+R[1]+(G.getTime()===H.getTime()?" "+this._currentClass:"")+(G.getTime()===U.getTime()?" ui-datepicker-today":""))+"'"+(W&&!y||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(S?"":" data-handler='selectDay' data-event='click' data-month='"+G.getMonth()+"' data-year='"+G.getFullYear()+"'")+">"+(W&&!y?"&#xa0;":S?"<span class='ui-state-default'>"+G.getDate()+"</span>":"<a class='ui-state-default"+(G.getTime()===U.getTime()?" ui-state-highlight":"")+(G.getTime()===
H.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+"' href='#'>"+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G);v+=O+"</tr>"}A++;11<A&&(A=0,K++);v+="</tbody></table>"+(L?"</div>"+(0<Q[0]&&M===Q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");D+=v}B+=D}return B+=q,a._keyEvent=!1,B},_generateMonthYearHeader:function(a,b,c,f,e,h,q,m){var s,r,u,y=this._get(a,"changeMonth"),x=this._get(a,"changeYear"),w=this._get(a,"showMonthAfterYear"),
B="<div class='ui-datepicker-title'>",C="";if(h||!y)C+="<span class='ui-datepicker-month'>"+q[b]+"</span>";else{q=f&&f.getFullYear()===c;s=e&&e.getFullYear()===c;C+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(r=0;12>r;r++)(!q||r>=f.getMonth())&&(!s||e.getMonth()>=r)&&(C+="<option value='"+r+"'"+(r===b?" selected='selected'":"")+">"+m[r]+"</option>");C+="</select>"}if(w||(B+=C+(!h&&y&&x?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",h||!x)B+="<span class='ui-datepicker-year'>"+
c+"</span>";else{m=this._get(a,"yearRange").split(":");u=(new Date).getFullYear();q=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?u+parseInt(a,10):parseInt(a,10);return isNaN(a)?u:a};b=q(m[0]);m=Math.max(b,q(m[1]||""));b=f?Math.max(b,f.getFullYear()):b;m=e?Math.min(m,e.getFullYear()):m;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=b;b++)a.yearshtml+="<option value='"+b+"'"+(b===c?" selected='selected'":
"")+">"+b+"</option>";a.yearshtml+="</select>";B+=a.yearshtml;a.yearshtml=null}return B+=this._get(a,"yearSuffix"),w&&(B+=(!h&&y&&x?"":"&#xa0;")+C),B+="</div>"},_adjustInstDate:function(a,b,c){var f=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(f,e))+("D"===c?b:0);f=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(f,e,b)));a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();("M"===
c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),c=c&&c>b?c:b;return f&&c>f?f:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},
_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,f){var e=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,f+(0>b?b:e[0]*e[1]),1));return 0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c,f,e=this._getMinMaxDate(a,"min"),h=this._getMinMaxDate(a,"max"),q=null,m=null,s=
this._get(a,"yearRange");return s&&(c=s.split(":"),f=(new Date).getFullYear(),q=parseInt(c[0],10),m=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(q+=f),c[1].match(/[+\-].*/)&&(m+=f)),(!e||b.getTime()>=e.getTime())&&(!h||b.getTime()<=h.getTime())&&(!q||b.getFullYear()>=q)&&(!m||m>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,
"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,f){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(f,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});b.fn.datepicker=function(a){if(!this.length)return this;
b.datepicker.initialized||(b(document).mousedown(b.datepicker._checkExternalClick),b.datepicker.initialized=!0);0===b("#"+b.datepicker._mainDivId).length&&b("body").append(b.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!==a&&"getDate"!==a&&"widget"!==a?"option"===a&&2===arguments.length&&"string"==typeof arguments[1]?b.datepicker["_"+a+"Datepicker"].apply(b.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof a?b.datepicker["_"+
a+"Datepicker"].apply(b.datepicker,[this].concat(c)):b.datepicker._attachDatepicker(this,a)}):b.datepicker["_"+a+"Datepicker"].apply(b.datepicker,[this[0]].concat(c))};b.datepicker=new f;b.datepicker.initialized=!1;b.datepicker.uuid=(new Date).getTime();b.datepicker.version="1.10.3"})(jQuery);
!function(b){var c={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,
nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4E3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};b.fn.bxSlider=function(f){if(0==this.length)return this;if(1<this.length)return this.each(function(){b(this).bxSlider(f)}),
this;var a={},e=this,h=b(window).width(),g=b(window).height(),d=function(){a.settings=b.extend({},c,f);a.settings.slideWidth=parseInt(a.settings.slideWidth);a.children=e.children(a.settings.slideSelector);a.children.length<a.settings.minSlides&&(a.settings.minSlides=a.children.length);a.children.length<a.settings.maxSlides&&(a.settings.maxSlides=a.children.length);a.settings.randomStart&&(a.settings.startSlide=Math.floor(Math.random()*a.children.length));a.active={index:a.settings.startSlide};a.carousel=
1<a.settings.minSlides||1<a.settings.maxSlides;a.carousel&&(a.settings.preloadImages="all");a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin;a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin;a.working=!1;a.controls={};a.interval=null;a.animProp="vertical"==a.settings.mode?"top":"left";a.usingCSS=a.settings.useCSS&&"fade"!=a.settings.mode&&function(){var b=document.createElement("div"),
c=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],d;for(d in c)if(void 0!==b.style[c[d]])return a.cssPrefix=c[d].replace("Perspective","").toLowerCase(),a.animProp="-"+a.cssPrefix+"-transform",!0;return!1}();"vertical"==a.settings.mode&&(a.settings.maxSlides=a.settings.minSlides);e.data("origStyle",e.attr("style"));e.children(a.settings.slideSelector).each(function(){b(this).data("origStyle",b(this).attr("style"))});k()},k=function(){e.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');
a.viewport=e.parent();a.loader=b('<div class="bx-loading" />');a.viewport.prepend(a.loader);e.css({width:"horizontal"==a.settings.mode?100*a.children.length+215+"%":"auto",position:"relative"});a.usingCSS&&a.settings.easing?e.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing):a.settings.easing||(a.settings.easing="swing");s();a.viewport.css({width:"100%",overflow:"hidden",position:"relative"});a.viewport.parent().css({maxWidth:q()});a.settings.pager||a.viewport.parent().css({margin:"0 auto 0px"});
a.children.css({"float":"horizontal"==a.settings.mode?"left":"none",listStyle:"none",position:"relative"});a.children.css("width",m());"horizontal"==a.settings.mode&&0<a.settings.slideMargin&&a.children.css("marginRight",a.settings.slideMargin);"vertical"==a.settings.mode&&0<a.settings.slideMargin&&a.children.css("marginBottom",a.settings.slideMargin);"fade"==a.settings.mode&&(a.children.css({position:"absolute",zIndex:0,display:"none"}),a.children.eq(a.settings.startSlide).css({zIndex:50,display:"block"}));
a.controls.el=b('<div class="bx-controls" />');a.settings.captions&&B();a.active.last=a.settings.startSlide==r()-1;a.settings.video&&e.fitVids();var c=a.children.eq(a.settings.startSlide);"all"==a.settings.preloadImages&&(c=a.children);a.settings.ticker?a.settings.pager=!1:(a.settings.pager&&(a.settings.pagerCustom?a.pagerEl=b(a.settings.pagerCustom):(a.pagerEl=b('<div class="bx-pager" />'),a.settings.pagerSelector?b(a.settings.pagerSelector).html(a.pagerEl):a.controls.el.addClass("bx-has-pager").append(a.pagerEl),
w()),a.pagerEl.delegate("a","click",z)),a.settings.controls&&(a.controls.next=b('<a class="bx-next" href="">'+a.settings.nextText+"</a>"),a.controls.prev=b('<a class="bx-prev" href="">'+a.settings.prevText+"</a>"),a.controls.next.bind("click",C),a.controls.prev.bind("click",E),a.settings.nextSelector&&b(a.settings.nextSelector).append(a.controls.next),a.settings.prevSelector&&b(a.settings.prevSelector).append(a.controls.prev),a.settings.nextSelector||a.settings.prevSelector||(a.controls.directionEl=
b('<div class="bx-controls-direction" />'),a.controls.directionEl.append(a.controls.prev).append(a.controls.next),a.controls.el.addClass("bx-has-controls-direction").append(a.controls.directionEl))),a.settings.auto&&a.settings.autoControls&&(a.controls.start=b('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+a.settings.startText+"</a></div>"),a.controls.stop=b('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+a.settings.stopText+"</a></div>"),a.controls.autoEl=b('<div class="bx-controls-auto" />'),
a.controls.autoEl.delegate(".bx-start","click",D),a.controls.autoEl.delegate(".bx-stop","click",M),a.settings.autoControlsCombine?a.controls.autoEl.append(a.controls.start):a.controls.autoEl.append(a.controls.start).append(a.controls.stop),a.settings.autoControlsSelector?b(a.settings.autoControlsSelector).html(a.controls.autoEl):a.controls.el.addClass("bx-has-controls-auto").append(a.controls.autoEl),G(a.settings.autoStart?"stop":"start")),(a.settings.controls||a.settings.autoControls||a.settings.pager)&&
a.viewport.after(a.controls.el));n(c,p)},n=function(a,c){var d=a.find("img, iframe").length;if(0==d)return c(),void 0;var f=0;a.find("img, iframe").each(function(){b(this).one("load",function(){++f==d&&c()}).each(function(){this.complete&&b(this).load()})})},p=function(){if(a.settings.infiniteLoop&&"fade"!=a.settings.mode&&!a.settings.ticker){var c="vertical"==a.settings.mode?a.settings.minSlides:a.settings.maxSlides,d=a.children.slice(0,c).clone().addClass("bx-clone"),c=a.children.slice(-c).clone().addClass("bx-clone");
e.append(d).prepend(c)}a.loader.remove();y();"vertical"==a.settings.mode&&(a.settings.adaptiveHeight=!0);a.viewport.height(l());e.redrawSlider();a.settings.onSliderLoad(a.active.index);a.initialized=!0;a.settings.responsive&&b(window).bind("resize",Q);a.settings.auto&&a.settings.autoStart&&O();a.settings.ticker&&R();a.settings.pager&&v(a.settings.startSlide);a.settings.controls&&N();a.settings.touchEnabled&&!a.settings.ticker&&(a.touch={start:{x:0,y:0},end:{x:0,y:0}},a.viewport.bind("touchstart",
S))},l=function(){var c=0,d=b();if("vertical"==a.settings.mode||a.settings.adaptiveHeight)if(a.carousel){var f=1==a.settings.moveSlides?a.active.index:a.active.index*u(),d=a.children.eq(f);for(i=1;i<=a.settings.maxSlides-1;i++)d=f+i>=a.children.length?d.add(a.children.eq(i-1)):d.add(a.children.eq(f+i))}else d=a.children.eq(a.active.index);else d=a.children;return"vertical"==a.settings.mode?(d.each(function(){c+=b(this).outerHeight()}),0<a.settings.slideMargin&&(c+=a.settings.slideMargin*(a.settings.minSlides-
1))):c=Math.max.apply(Math,d.map(function(){return b(this).outerHeight(!1)}).get()),c},q=function(){return"100%"},m=function(){var b=a.settings.slideWidth,c=a.viewport.width();return 0==a.settings.slideWidth||a.settings.slideWidth>c&&!a.carousel||"vertical"==a.settings.mode?b=c:1<a.settings.maxSlides&&"horizontal"==a.settings.mode&&(c>a.maxThreshold||c<a.minThreshold&&(b=(c-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides)),b},s=function(){var b=1;"horizontal"==a.settings.mode&&
0<a.settings.slideWidth?a.viewport.width()<a.minThreshold?b=a.settings.minSlides:a.viewport.width()>a.maxThreshold?b=a.settings.maxSlides:(b=a.children.first().width(),b=Math.floor(a.viewport.width()/b)):"vertical"==a.settings.mode&&(b=a.settings.minSlides);return b},r=function(){var b=0;if(0<a.settings.moveSlides)if(a.settings.infiniteLoop)b=a.children.length/u();else for(var c=0,d=0;c<a.children.length;)++b,c=d+s(),d+=a.settings.moveSlides<=s()?a.settings.moveSlides:s();else b=Math.ceil(a.children.length/
s());return b},u=function(){return 0<a.settings.moveSlides&&a.settings.moveSlides<=s()?a.settings.moveSlides:s()},y=function(){if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop)if("horizontal"==a.settings.mode){var b=a.children.last(),c=b.position();x(-(c.left-(a.viewport.width()-b.width())),"reset",0)}else"vertical"==a.settings.mode&&(c=a.children.eq(a.children.length-a.settings.minSlides).position(),x(-c.top,"reset",0));else c=a.children.eq(a.active.index*u()).position(),
a.active.index==r()-1&&(a.active.last=!0),void 0!=c&&("horizontal"==a.settings.mode?x(-c.left,"reset",0):"vertical"==a.settings.mode&&x(-c.top,"reset",0))},x=function(b,c,d,f){if(a.usingCSS)b="vertical"==a.settings.mode?"translate3d(0, "+b+"px, 0)":"translate3d("+b+"px, 0, 0)",e.css("-"+a.cssPrefix+"-transition-duration",d/1E3+"s"),"slide"==c?(e.css(a.animProp,b),e.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");
F()})):"reset"==c?e.css(a.animProp,b):"ticker"==c&&(e.css("-"+a.cssPrefix+"-transition-timing-function","linear"),e.css(a.animProp,b),e.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");x(f.resetValue,"reset",0);W()}));else{var g={};g[a.animProp]=b;"slide"==c?e.animate(g,d,a.settings.easing,function(){F()}):"reset"==c?e.css(a.animProp,b):"ticker"==c&&e.animate(g,speed,"linear",function(){x(f.resetValue,
"reset",0);W()})}},w=function(){for(var c="",d=r(),f=0;d>f;f++){var g="";a.settings.buildPager&&b.isFunction(a.settings.buildPager)?(g=a.settings.buildPager(f),a.pagerEl.addClass("bx-custom-pager")):(g=f+1,a.pagerEl.addClass("bx-default-pager"));c+='<div class="bx-pager-item"><a href="" data-slide-index="'+f+'" class="bx-pager-link">'+g+"</a></div>"}a.pagerEl.html(c)},B=function(){a.children.each(function(){var a=b(this).find("img:first").attr("title");void 0!=a&&(""+a).length&&b(this).append('<div class="bx-caption"><span>'+
a+"</span></div>")})},C=function(b){a.settings.auto&&e.stopAuto();e.goToNextSlide();b.preventDefault()},E=function(b){a.settings.auto&&e.stopAuto();e.goToPrevSlide();b.preventDefault()},D=function(a){e.startAuto();a.preventDefault()},M=function(a){e.stopAuto();a.preventDefault()},z=function(c){a.settings.auto&&e.stopAuto();var d=b(c.currentTarget),d=parseInt(d.attr("data-slide-index"));d!=a.active.index&&e.goToSlide(d);c.preventDefault()},v=function(c){var d=a.children.length;return"short"==a.settings.pagerType?
(1<a.settings.maxSlides&&(d=Math.ceil(a.children.length/a.settings.maxSlides)),a.pagerEl.html(c+1+a.settings.pagerShortSeparator+d),void 0):(a.pagerEl.find("a").removeClass("active"),a.pagerEl.each(function(a,d){b(d).find("a").eq(c).addClass("active")}),void 0)},F=function(){if(a.settings.infiniteLoop){var b="";0==a.active.index?b=a.children.eq(0).position():a.active.index==r()-1&&a.carousel?b=a.children.eq((r()-1)*u()).position():a.active.index==a.children.length-1&&(b=a.children.eq(a.children.length-
1).position());"horizontal"==a.settings.mode?x(-b.left,"reset",0):"vertical"==a.settings.mode&&x(-b.top,"reset",0)}a.working=!1;a.settings.onSlideAfter(a.children.eq(a.active.index),a.oldIndex,a.active.index)},G=function(b){a.settings.autoControlsCombine?a.controls.autoEl.html(a.controls[b]):(a.controls.autoEl.find("a").removeClass("active"),a.controls.autoEl.find("a:not(.bx-"+b+")").addClass("active"))},N=function(){1==r()?(a.controls.prev.addClass("disabled"),a.controls.next.addClass("disabled")):
!a.settings.infiniteLoop&&a.settings.hideControlOnEnd&&(0==a.active.index?(a.controls.prev.addClass("disabled"),a.controls.next.removeClass("disabled")):a.active.index==r()-1?(a.controls.next.addClass("disabled"),a.controls.prev.removeClass("disabled")):(a.controls.prev.removeClass("disabled"),a.controls.next.removeClass("disabled")))},O=function(){0<a.settings.autoDelay?setTimeout(e.startAuto,a.settings.autoDelay):e.startAuto();a.settings.autoHover&&e.hover(function(){a.interval&&(e.stopAuto(!0),
a.autoPaused=!0)},function(){a.autoPaused&&(e.startAuto(!0),a.autoPaused=null)})},R=function(){var c=0;"next"==a.settings.autoDirection?e.append(a.children.clone().addClass("bx-clone")):(e.prepend(a.children.clone().addClass("bx-clone")),c=a.children.first().position(),c="horizontal"==a.settings.mode?-c.left:-c.top);x(c,"reset",0);a.settings.pager=!1;a.settings.controls=!1;a.settings.autoControls=!1;a.settings.tickerHover&&!a.usingCSS&&a.viewport.hover(function(){e.stop()},function(){var c=0;a.children.each(function(){c+=
"horizontal"==a.settings.mode?b(this).outerWidth(!0):b(this).outerHeight(!0)});var d=a.settings.speed/c*(c-Math.abs(parseInt(e.css("horizontal"==a.settings.mode?"left":"top"))));W(d)});W()},W=function(b){speed=b?b:a.settings.speed;b={left:0,top:0};var c={left:0,top:0};"next"==a.settings.autoDirection?b=e.find(".bx-clone").first().position():c=a.children.first().position();x("horizontal"==a.settings.mode?-b.left:-b.top,"ticker",speed,{resetValue:"horizontal"==a.settings.mode?-c.left:-c.top})},S=function(b){a.working?
b.preventDefault():(a.touch.originalPos=e.position(),b=b.originalEvent,a.touch.start.x=b.changedTouches[0].pageX,a.touch.start.y=b.changedTouches[0].pageY,a.viewport.bind("touchmove",U),a.viewport.bind("touchend",P))},U=function(b){var c=b.originalEvent,d=Math.abs(c.changedTouches[0].pageX-a.touch.start.x),f=Math.abs(c.changedTouches[0].pageY-a.touch.start.y);if(3*d>f&&a.settings.preventDefaultSwipeX?b.preventDefault():3*f>d&&a.settings.preventDefaultSwipeY&&b.preventDefault(),"fade"!=a.settings.mode&&
a.settings.oneToOneTouch)b=0,"horizontal"==a.settings.mode?(c=c.changedTouches[0].pageX-a.touch.start.x,b=a.touch.originalPos.left+c):(c=c.changedTouches[0].pageY-a.touch.start.y,b=a.touch.originalPos.top+c),x(b,"reset",0)},P=function(b){a.viewport.unbind("touchmove",U);var c=b.originalEvent;b=0;(a.touch.end.x=c.changedTouches[0].pageX,a.touch.end.y=c.changedTouches[0].pageY,"fade"==a.settings.mode)?(c=Math.abs(a.touch.start.x-a.touch.end.x),c>=a.settings.swipeThreshold&&(a.touch.start.x>a.touch.end.x?
e.goToNextSlide():e.goToPrevSlide(),e.stopAuto())):(c=0,"horizontal"==a.settings.mode?(c=a.touch.end.x-a.touch.start.x,b=a.touch.originalPos.left):(c=a.touch.end.y-a.touch.start.y,b=a.touch.originalPos.top),!a.settings.infiniteLoop&&(0==a.active.index&&0<c||a.active.last&&0>c)?x(b,"reset",200):Math.abs(c)>=a.settings.swipeThreshold?(0>c?e.goToNextSlide():e.goToPrevSlide(),e.stopAuto()):x(b,"reset",200));a.viewport.unbind("touchend",P)},Q=function(){var a=b(window).width(),c=b(window).height();(h!=
a||g!=c)&&(h=a,g=c,e.redrawSlider())};return e.goToSlide=function(c,d){if(!a.working&&a.active.index!=c)if(a.working=!0,a.oldIndex=a.active.index,a.active.index=0>c?r()-1:c>=r()?0:c,a.settings.onSlideBefore(a.children.eq(a.active.index),a.oldIndex,a.active.index),"next"==d?a.settings.onSlideNext(a.children.eq(a.active.index),a.oldIndex,a.active.index):"prev"==d&&a.settings.onSlidePrev(a.children.eq(a.active.index),a.oldIndex,a.active.index),a.active.last=a.active.index>=r()-1,a.settings.pager&&v(a.active.index),
a.settings.controls&&N(),"fade"==a.settings.mode)a.settings.adaptiveHeight&&a.viewport.height()!=l()&&a.viewport.animate({height:l()},a.settings.adaptiveHeightSpeed),a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0}),a.children.eq(a.active.index).css("zIndex",51).fadeIn(a.settings.speed,function(){b(this).css("zIndex",50);F()});else{a.settings.adaptiveHeight&&a.viewport.height()!=l()&&a.viewport.animate({height:l()},a.settings.adaptiveHeightSpeed);var f=0,g={left:0,top:0};if(!a.settings.infiniteLoop&&
a.carousel&&a.active.last)if("horizontal"==a.settings.mode)var h=a.children.eq(a.children.length-1),g=h.position(),f=a.viewport.width()-h.outerWidth();else g=a.children.eq(a.children.length-a.settings.minSlides).position();else a.carousel&&a.active.last&&"prev"==d?(g=1==a.settings.moveSlides?a.settings.maxSlides-u():(r()-1)*u()-(a.children.length-a.settings.maxSlides),h=e.children(".bx-clone").eq(g),g=h.position()):"next"==d&&0==a.active.index?(g=e.find("> .bx-clone").eq(a.settings.maxSlides).position(),
a.active.last=!1):0<=c&&(g=c*u(),g=a.children.eq(g).position());"undefined"!=typeof g&&x("horizontal"==a.settings.mode?-(g.left-f):-g.top,"slide",a.settings.speed)}},e.goToNextSlide=function(){if(a.settings.infiniteLoop||!a.active.last){var b=parseInt(a.active.index)+1;e.goToSlide(b,"next")}},e.goToPrevSlide=function(){if(a.settings.infiniteLoop||0!=a.active.index){var b=parseInt(a.active.index)-1;e.goToSlide(b,"prev")}},e.startAuto=function(b){a.interval||(a.interval=setInterval(function(){"next"==
a.settings.autoDirection?e.goToNextSlide():e.goToPrevSlide()},a.settings.pause),a.settings.autoControls&&1!=b&&G("stop"))},e.stopAuto=function(b){a.interval&&(clearInterval(a.interval),a.interval=null,a.settings.autoControls&&1!=b&&G("start"))},e.getCurrentSlide=function(){return a.active.index},e.getSlideCount=function(){return a.children.length},e.redrawSlider=function(){a.children.add(e.find(".bx-clone")).outerWidth(m());a.viewport.css("height",l());a.settings.ticker||y();a.active.last&&(a.active.index=
r()-1);a.active.index>=r()&&(a.active.last=!0);a.settings.pager&&!a.settings.pagerCustom&&(w(),v(a.active.index))},e.destroySlider=function(){a.initialized&&(a.initialized=!1,b(".bx-clone",this).remove(),a.children.each(function(){void 0!=b(this).data("origStyle")?b(this).attr("style",b(this).data("origStyle")):b(this).removeAttr("style")}),void 0!=b(this).data("origStyle")?this.attr("style",b(this).data("origStyle")):b(this).removeAttr("style"),b(this).unwrap().unwrap(),a.controls.el&&a.controls.el.remove(),
a.controls.next&&a.controls.next.remove(),a.controls.prev&&a.controls.prev.remove(),a.pagerEl&&a.pagerEl.remove(),b(".bx-caption",this).remove(),a.controls.autoEl&&a.controls.autoEl.remove(),clearInterval(a.interval),a.settings.responsive&&b(window).unbind("resize",Q))},e.reloadSlider=function(a){void 0!=a&&(f=a);e.destroySlider();d()},d(),this}}(jQuery);
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){function c(a){return a}function f(a){return decodeURIComponent(a.replace(e," "))}function a(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return h.json?JSON.parse(a):a}catch(b){}}var e=/\+/g,h=b.cookie=function(g,d,e){if(void 0!==d){e=b.extend({},h.defaults,e);if("number"===typeof e.expires){var n=e.expires,p=e.expires=new Date;p.setDate(p.getDate()+n)}d=h.json?
JSON.stringify(d):String(d);return document.cookie=[h.raw?g:encodeURIComponent(g),"=",h.raw?d:encodeURIComponent(d),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")}d=h.raw?c:f;e=document.cookie.split("; ");for(var n=g?void 0:{},p=0,l=e.length;p<l;p++){var q=e[p].split("="),m=d(q.shift()),q=d(q.join("="));if(g&&g===m){n=a(q);break}g||(n[m]=a(q))}return n};h.defaults={};b.removeCookie=function(a,c){return void 0!==
b.cookie(a)?(b.cookie(a,"",b.extend({},c,{expires:-1})),!0):!1}});
(function(b){function c(a){null!=h&&(a.dropClass&&h.removeClass(a.dropClass),h=null);null!=e&&a.canDropClass&&e.removeClass(a.canDropClass)}var f={makeClone:!1,sourceClass:null,sourceHide:!1,dragClass:null,canDropClass:null,dropClass:null,isActive:!0,container:null,canDrag:function(a,b){return a},canDrop:function(a){return a.hasClass("drop")||0<a.parents(".drop").size()},didDrop:function(a,b){a.appendTo(b)}},a=null,e=null,h=null,g,d,k,n=!1,p=!1,l={init:function(a){a=b.extend({},f,a);this.data("options",
a);this.bind("mousedown.dragdrop touchstart.dragdrop",l.onStart);return this},destroy:function(){this.unbind("mousedown.dragdrop touchstart.dragdrop");return this},on:function(){this.data("options").isActive=!0},off:function(){this.data("options").isActive=!1},onStart:function(c){var f=b(this),h=f.data("options");if(h.isActive){var r=h.canDrag(f,c);n=!0;p=!1;if(r){a=r;var u=a.position(),y=a.width(),x=a.height();"touchstart"==c.type?(g=c.originalEvent.touches[0].clientX-u.left,d=c.originalEvent.touches[0].clientY-
u.top):(g=c.pageX-u.left,d=c.pageY-u.top);h.makeClone?(e=a.clone(!1),e.appendTo(r.parent()),h.sourceClass?a.addClass(h.sourceClass):h.sourceHide&&a.css("visibility","hidden")):e=a;e.css({position:"absolute",left:u.left,top:u.top,width:y,height:x});h.dragClass&&e.addClass(h.dragClass);if(h=h.container)u=h.position(),k={minX:u.left,minY:u.top,maxX:u.left+h.outerWidth()-r.outerWidth(),maxY:u.top+h.outerHeight()-r.outerHeight()};b(window).bind("mousemove.dragdrop touchmove.dragdrop",{source:f},l.onMove).bind("mouseup.dragdrop touchend.dragdrop",
{source:f},l.onEnd);c.stopPropagation();return!1}}},onMove:function(a){if(e){var f=a.data.source.data("options"),l,r;p=!0;n=!1;console.log("move");"touchmove"==a.type?(l=a.originalEvent.touches[0].clientX,r=a.originalEvent.touches[0].clientY):(l=a.pageX,r=a.pageY);e.css("display","none");var u=document.elementFromPoint(l-document.documentElement.scrollLeft-document.body.scrollLeft,r-document.documentElement.scrollTop-document.body.scrollTop);e.css("display","");l-=g;r-=d;k&&(l=Math.min(Math.max(l,
k.minX),k.maxX),r=Math.min(Math.max(r,k.minY),k.maxY));e.css({left:l,top:r});if(u){if(null==h||h.get(0)!=u)l=b(u),f.canDrop(l)?(f.dropClass&&(null!=h&&h.removeClass(f.dropClass),l.addClass(f.dropClass)),f.canDropClass&&e.addClass(f.canDropClass),h=l):null!=h&&c(f)}else null!=h&&c(f);a.stopPropagation();return!1}},onEnd:function(d){if(e){d=d.data.source.data("options");if(e.closest(".popupwin_add-trip").length&&!0==n&&!1==p){var f=parseInt(e.data("step"))+1,f=e.closest(".popupwin_add-trip").find(".trip-step__block:nth-child("+
f+")");f.length&&e.closest(".popupwin__viewport").animate({scrollTop:f.position().top})}h&&d.didDrop(a,h);c(d);d.makeClone?(e.remove(),d.sourceClass?a.removeClass(d.sourceClass):d.sourceHide&&a.css("visibility","visible")):(e.css("position","static"),e.css("width",""),e.css("height",""),d.dragClass&&e.removeClass(d.dragClass));b(window).unbind("mousemove.dragdrop touchmove.dragdrop");b(window).unbind("mouseup.dragdrop touchend.dragdrop");a=e=k=null}}};b.fn.dragdrop=function(a){if(l[a])return l[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return l.init.apply(this,arguments);b.error("Method "+a+" does not exist on jQuery.dragdrop")}})(jQuery);
(function(b,c,f,a){var e=f(b),h=f(c),g=f.fancybox=function(){g.open.apply(this,arguments)},d=navigator.userAgent.match(/msie/),k=null,n=c.createTouch!==a,p=function(a){return a&&a.hasOwnProperty&&a instanceof f},l=function(a){return a&&"string"===f.type(a)},q=function(a){return l(a)&&0<a.indexOf("%")},m=function(a,b){var c=parseInt(a,10)||0;b&&q(a)&&(c*=g.getViewport()[b]/100);return Math.ceil(c)},s=function(a,b){return m(a,b)+"px"};f.extend(g,{version:"2.1.4",defaults:{padding:15,margin:20,width:800,
height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!n,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",
34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(d?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,
openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,
isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(b,c){if(b&&(f.isPlainObject(c)||(c={}),!1!==g.close(!0)))return f.isArray(b)||(b=p(b)?f(b).get():[b]),f.each(b,function(d,e){var h={},k,q,m,s,n;"object"===f.type(e)&&(e.nodeType&&(e=f(e)),p(e)?(h={href:e.data("fancybox-href")||e.attr("href"),title:e.data("fancybox-title")||e.attr("title"),isDom:!0,element:e},f.metadata&&f.extend(!0,h,
e.metadata())):h=e);k=c.href||h.href||(l(e)?e:null);q=c.title!==a?c.title:h.title||"";s=(m=c.content||h.content)?"html":c.type||h.type;!s&&h.isDom&&(s=e.data("fancybox-type"),s||(s=(s=e.prop("class").match(/fancybox\.(\w+)/))?s[1]:null));l(k)&&(s||(g.isImage(k)?s="image":g.isSWF(k)?s="swf":"#"===k.charAt(0)?s="inline":l(e)&&(s="html",m=e)),"ajax"===s&&(n=k.split(/\s+/,2),k=n.shift(),n=n.shift()));m||("inline"===s?k?m=f(l(k)?k.replace(/.*(?=#[^\s]+$)/,""):k):h.isDom&&(m=e):"html"===s?m=k:!s&&(!k&&
h.isDom)&&(s="inline",m=e));f.extend(h,{href:k,type:s,content:m,title:q,selector:n});b[d]=h}),g.opts=f.extend(!0,{},g.defaults,c),c.keys!==a&&(g.opts.keys=c.keys?f.extend({},g.defaults.keys,c.keys):!1),g.group=b,g._start(g.opts.index)},cancel:function(){var a=g.coming;a&&!1!==g.trigger("onCancel")&&(g.hideLoading(),g.ajaxLoad&&g.ajaxLoad.abort(),g.ajaxLoad=null,g.imgPreload&&(g.imgPreload.onload=g.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),g.coming=null,g.current||
g._afterZoomOut(a))},close:function(a){g.cancel();!1!==g.trigger("beforeClose")&&(g.unbindEvents(),g.isActive&&(!g.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),g._afterZoomOut()):(g.isOpen=g.isOpened=!1,g.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),g.wrap.stop(!0,!0).removeClass("fancybox-opened"),g.transitions[g.current.closeMethod]())))},play:function(a){var b=function(){clearTimeout(g.player.timer)},c=function(){b();g.current&&g.player.isActive&&(g.player.timer=
setTimeout(g.next,g.current.playSpeed))},d=function(){b();f("body").unbind(".player");g.player.isActive=!1;g.trigger("onPlayEnd")};if(!0===a||!g.player.isActive&&!1!==a){if(g.current&&(g.current.loop||g.current.index<g.group.length-1))g.player.isActive=!0,f("body").bind({"afterShow.player onUpdate.player":c,"onCancel.player beforeClose.player":d,"beforeLoad.player":b}),c(),g.trigger("onPlayStart")}else d()},next:function(a){var b=g.current;b&&(l(a)||(a=b.direction.next),g.jumpto(b.index+1,a,"next"))},
prev:function(a){var b=g.current;b&&(l(a)||(a=b.direction.prev),g.jumpto(b.index-1,a,"prev"))},jumpto:function(b,c,d){var f=g.current;f&&(b=m(b),g.direction=c||f.direction[b>=f.index?"next":"prev"],g.router=d||"jumpto",f.loop&&(0>b&&(b=f.group.length+b%f.group.length),b%=f.group.length),f.group[b]!==a&&(g.cancel(),g._start(b)))},reposition:function(a,b){var c=g.current,d=c?c.wrap:null,e;d&&(e=g._getPosition(b),a&&"scroll"===a.type?(delete e.position,d.stop(!0,!0).animate(e,200)):(d.css(e),c.pos=f.extend({},
c.dim,e)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(k),k=null);g.isOpen&&!k&&(k=setTimeout(function(){var d=g.current;d&&!g.isClosing&&(g.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&g._setDimension(),"scroll"===b&&d.canShrink||g.reposition(a),g.trigger("onUpdate"),k=null)},c&&!n?0:300))},toggle:function(a){g.isOpen&&(g.current.fitToView="boolean"===f.type(a)?a:!g.current.fitToView,n&&(g.wrap.removeAttr("style").addClass("fancybox-tmp"),
g.trigger("onUpdate")),g.update())},hideLoading:function(){h.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,b;g.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(g.cancel).appendTo("body");h.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),g.cancel()});g.defaults.fixed||(b=g.getViewport(),a.css({position:"absolute",top:0.5*b.h+b.y,left:0.5*b.w+b.x}))},getViewport:function(){var a=g.current&&g.current.locked||
!1,c={x:e.scrollLeft(),y:e.scrollTop()};a?(c.w=a[0].clientWidth,c.h=a[0].clientHeight):(c.w=n&&b.innerWidth?b.innerWidth:e.width(),c.h=n&&b.innerHeight?b.innerHeight:e.height());return c},unbindEvents:function(){g.wrap&&p(g.wrap)&&g.wrap.unbind(".fb");h.unbind(".fb");e.unbind(".fb")},bindEvents:function(){var b=g.current,c;b&&(e.bind("orientationchange.fb"+(n?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),g.update),(c=b.keys)&&h.bind("keydown.fb",function(d){var e=d.which||d.keyCode,h=
d.target||d.srcElement;if(27===e&&g.coming)return!1;!d.ctrlKey&&(!d.altKey&&!d.shiftKey&&!d.metaKey&&(!h||!h.type&&!f(h).is("[contenteditable]")))&&f.each(c,function(c,h){if(1<b.group.length&&h[e]!==a)return g[c](h[e]),d.preventDefault(),!1;if(-1<f.inArray(e,h))return g[c](),d.preventDefault(),!1})}),f.fn.mousewheel&&b.mouseWheel&&g.wrap.bind("mousewheel.fb",function(a,c,d,e){for(var h=f(a.target||null),k=!1;h.length&&!k&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)k=h[0]&&!(h[0].style.overflow&&
"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!k&&1<g.group.length&&!b.canShrink){if(0<e||0<d)g.prev(0<e?"down":"left");else if(0>e||0>d)g.next(0>e?"up":"right");a.preventDefault()}}))},trigger:function(a,b){var c,d=b||g.coming||g.current;if(d){f.isFunction(d[a])&&(c=d[a].apply(d,Array.prototype.slice.call(arguments,1)));if(!1===c)return!1;d.helpers&&f.each(d.helpers,function(b,
c){c&&(g.helpers[b]&&f.isFunction(g.helpers[b][a]))&&(c=f.extend(!0,{},g.helpers[b].defaults,c),g.helpers[b][a](c,d))});f.event.trigger(a+".fb")}},isImage:function(a){return l(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(a){return l(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b={},c,d;a=m(a);c=g.group[a]||null;if(!c)return!1;b=f.extend(!0,{},g.opts,c);c=b.margin;d=b.padding;"number"===f.type(c)&&(b.margin=[c,c,c,c]);"number"===f.type(d)&&
(b.padding=[d,d,d,d]);b.modal&&f.extend(!0,b,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});b.autoSize&&(b.autoWidth=b.autoHeight=!0);"auto"===b.width&&(b.autoWidth=!0);"auto"===b.height&&(b.autoHeight=!0);b.group=g.group;b.index=a;g.coming=b;if(!1===g.trigger("beforeLoad"))g.coming=null;else{d=b.type;c=b.href;if(!d)return g.coming=null,g.current&&g.router&&"jumpto"!==g.router?(g.current.index=a,g[g.router](g.direction)):!1;g.isActive=
!0;if("image"===d||"swf"===d)b.autoHeight=b.autoWidth=!1,b.scrolling="visible";"image"===d&&(b.aspectRatio=!0);"iframe"===d&&n&&(b.scrolling="scroll");b.wrap=f(b.tpl.wrap).addClass("fancybox-"+(n?"mobile":"desktop")+" fancybox-type-"+d+" fancybox-tmp "+b.wrapCSS).appendTo(b.parent||"body");f.extend(b,{skin:f(".fancybox-skin",b.wrap),outer:f(".fancybox-outer",b.wrap),inner:f(".fancybox-inner",b.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,c){b.skin.css("padding"+c,s(b.padding[a]))});g.trigger("onReady");
if("inline"===d||"html"===d){if(!b.content||!b.content.length)return g._error("content")}else if(!c)return g._error("href");"image"===d?g._loadImage():"ajax"===d?g._loadAjax():"iframe"===d?g._loadIframe():g._afterLoad()}},_error:function(a){f.extend(g.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:g.coming.tpl.error});g._afterLoad()},_loadImage:function(){var a=g.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;g.coming.width=
this.width;g.coming.height=this.height;g._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;g._error("image")};a.src=g.coming.href;!0!==a.complete&&g.showLoading()},_loadAjax:function(){var a=g.coming;g.showLoading();g.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,b){g.coming&&"abort"!==b?g._error("ajax",a):g.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,g._afterLoad())}}))},_loadIframe:function(){var a=g.coming,b=f(a.tpl.iframe.replace(/\{rnd\}/g,
(new Date).getTime())).attr("scrolling",n?"auto":a.iframe.scrolling).attr("src",a.href);f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(g.showLoading(),b.one("load",function(){f(this).data("ready",1);n||f(this).bind("load.fb",g.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();g._afterLoad()}));a.content=b.appendTo(a.inner);a.iframe.preload||g._afterLoad()},_preloadImages:function(){var a=
g.group,b=g.current,c=a.length,d=b.preload?Math.min(b.preload,c-1):0,f,e;for(e=1;e<=d;e+=1)f=a[(b.index+e)%c],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=g.coming,b=g.current,c,d,e,h,k;g.hideLoading();if(a&&!1!==g.isActive)if(!1===g.trigger("afterLoad",a,b))a.wrap.stop(!0).trigger("onReset").remove(),g.coming=null;else{b&&(g.trigger("beforeChange",b),b.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());g.unbindEvents();
c=a.content;d=a.type;e=a.scrolling;f.extend(g,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:b});h=a.href;switch(d){case "inline":case "ajax":case "html":a.selector?c=f("<div>").html(c).find(a.selector):p(c)&&(c.data("fancybox-placeholder")||c.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(c).hide()),c=c.show().detach(),a.wrap.bind("onReset",function(){f(this).find(c).length&&c.hide().replaceAll(c.data("fancybox-placeholder")).data("fancybox-placeholder",
!1)}));break;case "image":c=a.tpl.image.replace("{href}",h);break;case "swf":c='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+h+'"></param>',k="",f.each(a.swf,function(a,b){c+='<param name="'+a+'" value="'+b+'"></param>';k+=" "+a+'="'+b+'"'}),c+='<embed src="'+h+'" type="application/x-shockwave-flash" width="100%" height="100%"'+k+"></embed></object>"}(!p(c)||!c.parent().is(a.inner))&&a.inner.append(c);g.trigger("beforeShow");
a.inner.css("overflow","yes"===e?"scroll":"no"===e?"hidden":e);g._setDimension();g.reposition();g.isOpen=!1;g.coming=null;g.bindEvents();if(g.isOpened){if(b.prevMethod)g.transitions[b.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();g.transitions[g.isOpened?a.nextMethod:a.openMethod]();g._preloadImages()}},_setDimension:function(){var a=g.getViewport(),b=0,c=!1,d=!1,c=g.wrap,e=g.skin,h=g.inner,k=g.current,d=k.width,l=k.height,p=k.minWidth,n=k.minHeight,z=k.maxWidth,
v=k.maxHeight,F=k.scrolling,G=k.scrollOutside?k.scrollbarWidth:0,N=k.margin,O=m(N[1]+N[3]),R=m(N[0]+N[2]),W,S,U,P,Q,A,L,H,I;c.add(e).add(h).width("auto").height("auto").removeClass("fancybox-tmp");N=m(e.outerWidth(!0)-e.width());W=m(e.outerHeight(!0)-e.height());S=O+N;U=R+W;P=q(d)?(a.w-S)*m(d)/100:d;Q=q(l)?(a.h-U)*m(l)/100:l;if("iframe"===k.type){if(I=k.content,k.autoHeight&&1===I.data("ready"))try{I[0].contentWindow.document.location&&(h.width(P).height(9999),A=I.contents().find("body"),G&&A.css("overflow-x",
"hidden"),Q=A.height())}catch(J){}}else if(k.autoWidth||k.autoHeight)h.addClass("fancybox-tmp"),k.autoWidth||h.width(P),k.autoHeight||h.height(Q),k.autoWidth&&(P=h.width()),k.autoHeight&&(Q=h.height()),h.removeClass("fancybox-tmp");d=m(P);l=m(Q);H=P/Q;p=m(q(p)?m(p,"w")-S:p);z=m(q(z)?m(z,"w")-S:z);n=m(q(n)?m(n,"h")-U:n);v=m(q(v)?m(v,"h")-U:v);A=z;L=v;k.fitToView&&(z=Math.min(a.w-S,z),v=Math.min(a.h-U,v));S=a.w-O;R=a.h-R;k.aspectRatio?(d>z&&(d=z,l=m(d/H)),l>v&&(l=v,d=m(l*H)),d<p&&(d=p,l=m(d/H)),l<n&&
(l=n,d=m(l*H))):(d=Math.max(p,Math.min(d,z)),k.autoHeight&&"iframe"!==k.type&&(h.width(d),l=h.height()),l=Math.max(n,Math.min(l,v)));if(k.fitToView)if(h.width(d).height(l),c.width(d+N),a=c.width(),O=c.height(),k.aspectRatio)for(;(a>S||O>R)&&(d>p&&l>n)&&!(19<b++);)l=Math.max(n,Math.min(v,l-10)),d=m(l*H),d<p&&(d=p,l=m(d/H)),d>z&&(d=z,l=m(d/H)),h.width(d).height(l),c.width(d+N),a=c.width(),O=c.height();else d=Math.max(p,Math.min(d,d-(a-S))),l=Math.max(n,Math.min(l,l-(O-R)));G&&("auto"===F&&l<Q&&d+N+
G<S)&&(d+=G);h.width(d).height(l);c.width(d+N);a=c.width();O=c.height();c=(a>S||O>R)&&d>p&&l>n;d=k.aspectRatio?d<A&&l<L&&d<P&&l<Q:(d<A||l<L)&&(d<P||l<Q);f.extend(k,{dim:{width:s(a),height:s(O)},origWidth:P,origHeight:Q,canShrink:c,canExpand:d,wPadding:N,hPadding:W,wrapSpace:O-e.outerHeight(!0),skinSpace:e.height()-l});!I&&(k.autoHeight&&l>n&&l<v&&!d)&&h.height("auto")},_getPosition:function(a){var b=g.current,c=g.getViewport(),d=b.margin,f=g.wrap.width()+d[1]+d[3],e=g.wrap.height()+d[0]+d[2],d={position:"absolute",
top:d[0],left:d[3]};b.autoCenter&&b.fixed&&!a&&e<=c.h&&f<=c.w?d.position="fixed":b.locked||(d.top+=c.y,d.left+=c.x);d.top=s(Math.max(d.top,d.top+(c.h-e)*b.topRatio));d.left=s(Math.max(d.left,d.left+(c.w-f)*b.leftRatio));return d},_afterZoomIn:function(){var a=g.current;a&&(g.isOpen=g.isOpened=!0,g.wrap.css("overflow","visible").addClass("fancybox-opened"),g.update(),(a.closeClick||a.nextClick&&1<g.group.length)&&g.inner.css("cursor","pointer").bind("click.fb",function(b){!f(b.target).is("a")&&!f(b.target).parent().is("a")&&
(b.preventDefault(),g[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(g.skin).bind("click.fb",function(a){a.preventDefault();g.close()}),a.arrows&&1<g.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(g.outer).bind("click.fb",g.prev),(a.loop||a.index<g.group.length-1)&&f(a.tpl.next).appendTo(g.outer).bind("click.fb",g.next)),g.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?g.play(!1):g.opts.autoPlay&&!g.player.isActive&&(g.opts.autoPlay=!1,g.play()))},_afterZoomOut:function(a){a=
a||g.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(g,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});g.trigger("afterClose",a)}});g.transitions={getOrigPosition:function(){var a=g.current,b=a.element,c=a.orig,d={},f=50,e=50,h=a.hPadding,k=a.wPadding,m=g.getViewport();!c&&(a.isDom&&b.is(":visible"))&&(c=b.find("img:first"),c.length||(c=b));p(c)?(d=c.offset(),c.is("img")&&(f=c.outerWidth(),e=c.outerHeight())):
(d.top=m.y+(m.h-e)*a.topRatio,d.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===g.wrap.css("position")||a.locked)d.top-=m.y,d.left-=m.x;return d={top:s(d.top-h*a.topRatio),left:s(d.left-k*a.leftRatio),width:s(f+k),height:s(e+h)}},step:function(a,b){var c,d,f=b.prop;d=g.current;var e=d.wrapSpace,h=d.skinSpace;if("width"===f||"height"===f)c=b.end===b.start?1:(a-b.start)/(b.end-b.start),g.isClosing&&(c=1-c),d="width"===f?d.wPadding:d.hPadding,d=a-d,g.skin[f](m("width"===f?d:d-e*c)),g.inner[f](m("width"===
f?d:d-e*c-h*c))},zoomIn:function(){var a=g.current,b=a.pos,c=a.openEffect,d="elastic"===c,e=f.extend({opacity:1},b);delete e.position;d?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=0.1)):"fade"===c&&(b.opacity=0.1);g.wrap.css(b).animate(e,{duration:"none"===c?0:a.openSpeed,easing:a.openEasing,step:d?this.step:null,complete:g._afterZoomIn})},zoomOut:function(){var a=g.current,b=a.closeEffect,c="elastic"===b,d={opacity:0.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=0.1));g.wrap.animate(d,
{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:g._afterZoomOut})},changeIn:function(){var a=g.current,b=a.nextEffect,c=a.pos,d={opacity:1},f=g.direction,e;c.opacity=0.1;"elastic"===b&&(e="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(c[e]=s(m(c[e])-200),d[e]="+=200px"):(c[e]=s(m(c[e])+200),d[e]="-=200px"));"none"===b?g._afterZoomIn():g.wrap.css(c).animate(d,{duration:a.nextSpeed,easing:a.nextEasing,complete:g._afterZoomIn})},changeOut:function(){var a=
g.previous,b=a.prevEffect,c={opacity:0.1},d=g.direction;"elastic"===b&&(c["down"===d||"up"===d?"top":"left"]=("up"===d||"left"===d?"-":"+")+"=200px");a.wrap.animate(c,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};g.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!n,fixed:!0},overlay:null,fixed:!1,create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=f('<div class="fancybox-overlay"></div>').appendTo("body");
this.fixed=!1;a.fixed&&g.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(e.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){f(a.target).hasClass("fancybox-overlay")&&(g.isActive?g.close():b.close())});this.overlay.css(a.css).show()},
close:function(){f(".fancybox-overlay").remove();e.unbind("resize.overlay");this.overlay=null;!1!==this.margin&&(f("body").css("margin-right",this.margin),this.margin=!1);this.el&&this.el.removeClass("fancybox-lock")},update:function(){var a="100%",b;this.overlay.width(a).height("100%");d?(b=Math.max(c.documentElement.offsetWidth,c.body.offsetWidth),h.width()>b&&(a=h.width())):h.width()>e.width()&&(a=h.width());this.overlay.width(a).height(h.height())},onReady:function(a,b){f(".fancybox-overlay").stop(!0,
!0);this.overlay||(this.margin=h.height()>e.height()||"scroll"===f("body").css("overflow-y")?f("body").css("margin-right"):!1,this.el=c.all&&!c.querySelector?f("html"):f("body"),this.create(a));a.locked&&this.fixed&&(b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){b.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&f("body").css("margin-right",m(this.margin)+b.scrollbarWidth));this.open(a)},onUpdate:function(){this.fixed||
this.update()},afterClose:function(a){this.overlay&&!g.isActive&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};g.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var b=g.current,c=b.title,e=a.type;f.isFunction(c)&&(c=c.call(b.element,b));if(l(c)&&""!==f.trim(c)){b=f('<div class="fancybox-title fancybox-title-'+e+'-wrap">'+c+"</div>");switch(e){case "inside":e=g.skin;break;case "outside":e=g.wrap;break;case "over":e=g.inner;break;default:e=g.skin,b.appendTo("body"),
d&&b.width(b.width()),b.wrapInner('<span class="child"></span>'),g.current.margin[2]+=Math.abs(m(b.css("margin-bottom")))}b["top"===a.position?"prependTo":"appendTo"](e)}}};f.fn.fancybox=function(a){var b,c=f(this),d=this.selector||"",e=function(e){var h=f(this).blur(),k=b,m,q;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey)&&!h.is(".fancybox-wrap")&&(m=a.groupAttr||"data-fancybox-group",q=h.attr(m),q||(m="rel",q=h.get(0)[m]),q&&(""!==q&&"nofollow"!==q)&&(h=d.length?f(d):c,h=h.filter("["+m+'="'+q+
'"]'),k=h.index(this)),a.index=k,!1!==g.open(h,a)&&e.preventDefault())};a=a||{};b=a.index||0;!d||!1===a.live?c.unbind("click.fb-start").bind("click.fb-start",e):h.undelegate(d,"click.fb-start").delegate(d+":not('.fancybox-item, .fancybox-nav')","click.fb-start",e);this.filter("[data-fancybox-start=1]").trigger("click");return this};h.ready(function(){f.scrollbarWidth===a&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),
b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});f.support.fixedPosition===a&&(f.support.fixedPosition=function(){var a=f('<div style="position:fixed;top:20px;"></div>').appendTo("body"),b=20===a[0].offsetTop||15===a[0].offsetTop;a.remove();return b}());f.extend(g.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")})})})(window,document,jQuery);
!function(b,c,f){b.fn.jScrollPane=function(a){function e(a,g){function d(c){var g,m,l,s,n,r=!1,x=!1;if(A=c,L===f)s=a.scrollTop(),n=a.scrollLeft(),a.css({overflow:"hidden",padding:0}),H=a.innerWidth()+ua,I=a.innerHeight(),a.width(H),L=b('<div class="jspPane" />').css("padding",wa).append(a.children()),J=b('<div class="jspContainer" />').css({width:H+"px",height:I+"px"}).append(L).appendTo(a);else{if(a.css("width",""),r=A.stickToBottom&&G(),x=A.stickToRight&&N(),l=a.innerWidth()+ua!=H||a.outerHeight()!=
I,l&&(H=a.innerWidth()+ua,I=a.innerHeight(),J.css({width:H+"px",height:I+"px"})),!l&&Ja==K&&L.outerHeight()==ba)return a.width(H),void 0;Ja=K;L.css("width","");a.width(H);J.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}L.css("overflow","auto");K=c.contentWidth?c.contentWidth:L[0].scrollWidth;ba=L[0].scrollHeight;L.css("overflow","");ya=K/H;aa=ba/I;fa=1<aa;(da=1<ya)||fa?(a.addClass("jspScrollable"),(c=A.maintainPosition&&(T||ga))&&(g=v(),m=F()),e(),p(),q(),c&&(M(x?K-H:g,!1),D(r?ba-I:m,
!1)),W(),O(),Q(),A.enableKeyboardNavigation&&S(),A.clickOnTrack&&u(),U(),A.hijackInternalLinks&&P()):(a.removeClass("jspScrollable"),L.css({top:0,left:0,width:J.width()-ua}),J.unbind(La),L.find(":input,a").unbind("focus.jsp"),a.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),y());A.autoReinitialise&&!ka?ka=setInterval(function(){d(A)},A.autoReinitialiseDelay):!A.autoReinitialise&&ka&&clearInterval(ka);s&&a.scrollTop(0)&&D(s,!1);n&&a.scrollLeft(0)&&M(n,!1);a.trigger("jsp-initialised",
[da||fa])}function e(){fa&&(J.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),Za=J.find(">.jspVerticalBar"),xa=Za.find(">.jspTrack"),Y=xa.find(">.jspDrag"),A.showArrows&&(t=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",s(0,-1)).bind("click.jsp",R),Pa=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
s(0,1)).bind("click.jsp",R),A.arrowScrollOnHover&&(t.bind("mouseover.jsp",s(0,-1,t)),Pa.bind("mouseover.jsp",s(0,1,Pa))),m(xa,A.verticalArrowPositions,t,Pa)),Da=I,J.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){Da-=b(this).outerHeight()}),Y.hover(function(){Y.addClass("jspHover")},function(){Y.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",R);Y.addClass("jspActive");var c=a.pageY-Y.position().top;return b("html").bind("mousemove.jsp",
function(a){w(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",x),!1}),n())}function n(){xa.height(Da+"px");T=0;ib=A.verticalGutter+xa.outerWidth();L.width(H-ib-ua);try{0===Za.position().left&&L.css("margin-left",ib+"px")}catch(a){}}function p(){da&&(J.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),
$a=J.find(">.jspHorizontalBar"),za=$a.find(">.jspTrack"),X=za.find(">.jspDrag"),A.showArrows&&(Fa=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",s(-1,0)).bind("click.jsp",R),ta=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",s(1,0)).bind("click.jsp",R),A.arrowScrollOnHover&&(Fa.bind("mouseover.jsp",s(-1,0,Fa)),ta.bind("mouseover.jsp",s(1,0,ta))),m(za,A.horizontalArrowPositions,Fa,ta)),X.hover(function(){X.addClass("jspHover")},function(){X.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){b("html").bind("dragstart.jsp selectstart.jsp",R);X.addClass("jspActive");var c=a.pageX-X.position().left;return b("html").bind("mousemove.jsp",function(a){C(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",x),!1}),ia=J.innerWidth(),l())}function l(){J.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ia-=b(this).outerWidth()});za.width(ia+"px");ga=0}function q(){if(da&&fa){var a=za.outerHeight(),c=xa.outerWidth();Da-=a;b($a).find(">.jspCap:visible,>.jspArrow").each(function(){ia+=
b(this).outerWidth()});ia-=c;I-=c;H-=a;za.parent().append(b('<div class="jspCorner" />').css("width",a+"px"));n();l()}da&&L.width(J.outerWidth()-ua+"px");ba=L.outerHeight();aa=ba/I;da&&(ca=Math.ceil(1/ya*ia),ca>A.horizontalDragMaxWidth?ca=A.horizontalDragMaxWidth:ca<A.horizontalDragMinWidth&&(ca=A.horizontalDragMinWidth),X.width(ca+"px"),V=ia-ca,E(ga));fa&&(Ea=Math.ceil(1/aa*Da),Ea>A.verticalDragMaxHeight?Ea=A.verticalDragMaxHeight:Ea<A.verticalDragMinHeight&&(Ea=A.verticalDragMinHeight),Y.height(Ea+
"px"),ea=Da-Ea,B(T))}function m(a,b,c,d){var f,g="before",e="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split");b==g?e=b:b==e&&(g=b,f=c,c=d,d=f);a[g](c)[e](d)}function s(a,b,c){return function(){return r(a,b,this,c),this.blur(),!1}}function r(a,c,d,f){d=b(d).addClass("jspActive");var g,e,h=!0,k=function(){0!==a&&Z.scrollByX(a*A.arrowButtonSpeed);0!==c&&Z.scrollByY(c*A.arrowButtonSpeed);e=setTimeout(k,h?A.initialDelay:A.arrowRepeatFreq);h=!1};k();g=f?"mouseout.jsp":"mouseup.jsp";f=
f||b("html");f.bind(g,function(){d.removeClass("jspActive");e&&clearTimeout(e);e=null;f.unbind(g)})}function u(){y();fa&&xa.bind("mousedown.jsp",function(a){if(a.originalTarget===f||a.originalTarget==a.currentTarget){var c,d=b(this),g=d.offset(),e=a.pageY-g.top-T,h=!0,k=function(){var b=d.offset(),b=a.pageY-b.top-Ea/2,f=I*A.scrollPagePercent,g=ea*f/(ba-I);if(0>e)T-g>b?Z.scrollByY(-f):w(b);else{if(!(0<e))return m(),void 0;b>T+g?Z.scrollByY(f):w(b)}c=setTimeout(k,h?A.initialDelay:A.trackClickRepeatFreq);
h=!1},m=function(){c&&clearTimeout(c);c=null;b(document).unbind("mouseup.jsp",m)};return k(),b(document).bind("mouseup.jsp",m),!1}});da&&za.bind("mousedown.jsp",function(a){if(a.originalTarget===f||a.originalTarget==a.currentTarget){var c,d=b(this),g=d.offset(),e=a.pageX-g.left-ga,h=!0,k=function(){var b=d.offset(),b=a.pageX-b.left-ca/2,f=H*A.scrollPagePercent,g=V*f/(K-H);if(0>e)ga-g>b?Z.scrollByX(-f):C(b);else{if(!(0<e))return m(),void 0;b>ga+g?Z.scrollByX(f):C(b)}c=setTimeout(k,h?A.initialDelay:
A.trackClickRepeatFreq);h=!1},m=function(){c&&clearTimeout(c);c=null;b(document).unbind("mouseup.jsp",m)};return k(),b(document).bind("mouseup.jsp",m),!1}})}function y(){za&&za.unbind("mousedown.jsp");xa&&xa.unbind("mousedown.jsp")}function x(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");Y&&Y.removeClass("jspActive");X&&X.removeClass("jspActive")}function w(a,b){fa&&(0>a?a=0:a>ea&&(a=ea),b===f&&(b=A.animateScroll),b?Z.animate(Y,"top",a,B):(Y.css("top",
a),B(a)))}function B(b){b===f&&(b=Y.position().top);J.scrollTop(0);T=b;var c=0===T,d=T==ea;b=-(b/ea)*(ba-I);(Ha!=c||Ka!=d)&&(Ha=c,Ka=d,a.trigger("jsp-arrow-change",[Ha,Ka,la,Ba]));A.showArrows&&(t[c?"addClass":"removeClass"]("jspDisabled"),Pa[d?"addClass":"removeClass"]("jspDisabled"));L.css("top",b);a.trigger("jsp-scroll-y",[-b,c,d]).trigger("scroll")}function C(a,b){da&&(0>a?a=0:a>V&&(a=V),b===f&&(b=A.animateScroll),b?Z.animate(X,"left",a,E):(X.css("left",a),E(a)))}function E(b){b===f&&(b=X.position().left);
J.scrollTop(0);ga=b;var c=0===ga,d=ga==V;b=-(b/V)*(K-H);(la!=c||Ba!=d)&&(la=c,Ba=d,a.trigger("jsp-arrow-change",[Ha,Ka,la,Ba]));A.showArrows&&(Fa[c?"addClass":"removeClass"]("jspDisabled"),ta[d?"addClass":"removeClass"]("jspDisabled"));L.css("left",b);a.trigger("jsp-scroll-x",[-b,c,d]).trigger("scroll")}function D(a,b){w(a/(ba-I)*ea,b)}function M(a,b){C(a/(K-H)*V,b)}function z(a,c,d){var f,g,e,h,k,m,q=k=0;try{f=b(a)}catch(l){return}g=f.outerHeight();a=f.outerWidth();J.scrollTop(0);for(J.scrollLeft(0);!f.is(".jspPane");)if(k+=
f.position().top,q+=f.position().left,f=f.offsetParent(),/^body|html$/i.test(f[0].nodeName))return;f=F();h=f+I;f>k||c?e=k-A.horizontalGutter:k+g>h&&(e=k-I+g+A.horizontalGutter);isNaN(e)||D(e,d);e=v();k=e+H;e>q||c?m=q-A.horizontalGutter:q+a>k&&(m=q-H+a+A.horizontalGutter);isNaN(m)||M(m,d)}function v(){return-L.position().left}function F(){return-L.position().top}function G(){var a=ba-I;return 20<a&&10>a-F()}function N(){var a=K-H;return 20<a&&10>a-v()}function O(){J.unbind(La).bind(La,function(a,b,
c,d){a=ga;b=T;return Z.scrollBy(c*A.mouseWheelSpeed,-d*A.mouseWheelSpeed,!1),a==ga&&b==T})}function R(){return!1}function W(){L.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){z(a.target,!1)})}function S(){function c(){var a=ga,b=T;switch(d){case 40:Z.scrollByY(A.keyboardSpeed,!1);break;case 38:Z.scrollByY(-A.keyboardSpeed,!1);break;case 34:case 32:Z.scrollByY(I*A.scrollPagePercent,!1);break;case 33:Z.scrollByY(-I*A.scrollPagePercent,!1);break;case 39:Z.scrollByX(A.keyboardSpeed,
!1);break;case 37:Z.scrollByX(-A.keyboardSpeed,!1)}return f=a!=ga||b!=T}var d,f,g=[];da&&g.push($a[0]);fa&&g.push(Za[0]);L.focus(function(){a.focus()});a.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(a){if(a.target===this||g.length&&b(a.target).closest(g).length){var e=ga,h=T;switch(a.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=a.keyCode;c();break;case 35:D(ba-I);d=null;break;case 36:D(0),d=null}return f=a.keyCode==d&&e!=ga||h!=T,!f}}).bind("keypress.jsp",
function(a){return a.keyCode==d&&c(),!f});A.hideFocus?(a.css("outline","none"),"hideFocus"in J[0]&&a.attr("hideFocus",!0)):(a.css("outline",""),"hideFocus"in J[0]&&a.attr("hideFocus",!1))}function U(){if(location.hash&&1<location.hash.length){var a,c,d=escape(location.hash.substr(1));try{a=b("#"+d+', a[name="'+d+'"]')}catch(f){return}a.length&&L.find(d)&&(0===J.scrollTop()?c=setInterval(function(){0<J.scrollTop()&&(z(a,!0),b(document).scrollTop(J.position().top),clearInterval(c))},50):(z(a,!0),b(document).scrollTop(J.position().top)))}}
function P(){b(document.body).data("jspHijack")||(b(document.body).data("jspHijack",!0),b(document.body).delegate("a[href*=#]","click",function(a){var d,f,g,e,h,k;d=this.href.substr(0,this.href.indexOf("#"));var m=location.href;if(-1!==location.href.indexOf("#")&&(m=location.href.substr(0,location.href.indexOf("#"))),d===m){d=escape(this.href.substr(this.href.indexOf("#")+1));try{f=b("#"+d+', a[name="'+d+'"]')}catch(q){return}f.length&&(g=f.closest(".jspScrollable"),e=g.data("jsp"),e.scrollToElement(f,
!0),g[0].scrollIntoView&&(h=b(c).scrollTop(),k=f.offset().top,(h>k||k>h+b(c).height())&&g[0].scrollIntoView()),a.preventDefault())}}))}function Q(){var a,b,c,d,f,g=!1;J.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];a=v();b=F();c=e.pageX;d=e.pageY;f=!1;g=!0}).bind("touchmove.jsp",function(e){if(g){e=e.originalEvent.touches[0];var h=ga,k=T;return Z.scrollTo(a+c-e.pageX,b+d-e.pageY),f=f||5<Math.abs(c-e.pageX)||
5<Math.abs(d-e.pageY),h==ga&&k==T}}).bind("touchend.jsp",function(){g=!1}).bind("click.jsp-touchclick",function(){return f?(f=!1,!1):void 0})}var A,L,H,I,J,K,ba,ya,aa,fa,da,Y,ea,T,X,V,ga,Za,xa,ib,Da,Ea,t,Pa,$a,za,ia,ca,Fa,ta,ka,wa,ua,Ja,Z=this,Ha=!0,la=!0,Ka=!1,Ba=!1,ra=a.clone(!1,!1).empty(),La=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===a.css("box-sizing")?(wa=0,ua=0):(wa=a.css("paddingTop")+" "+a.css("paddingRight")+" "+a.css("paddingBottom")+" "+a.css("paddingLeft"),ua=
(parseInt(a.css("paddingLeft"),10)||0)+(parseInt(a.css("paddingRight"),10)||0));b.extend(Z,{reinitialise:function(a){a=b.extend({},A,a);d(a)},scrollToElement:function(a,b,c){z(a,b,c)},scrollTo:function(a,b,c){M(a,c);D(b,c)},scrollToX:function(a,b){M(a,b)},scrollToY:function(a,b){D(a,b)},scrollToPercentX:function(a,b){M(a*(K-H),b)},scrollToPercentY:function(a,b){D(a*(ba-I),b)},scrollBy:function(a,b,c){Z.scrollByX(a,c);Z.scrollByY(b,c)},scrollByX:function(a,b){var c=(v()+Math[0>a?"floor":"ceil"](a))/
(K-H);C(c*V,b)},scrollByY:function(a,b){var c=(F()+Math[0>a?"floor":"ceil"](a))/(ba-I);w(c*ea,b)},positionDragX:function(a,b){C(a,b)},positionDragY:function(a,b){w(a,b)},animate:function(a,b,c,d){var f={};f[b]=c;a.animate(f,{duration:A.animateDuration,easing:A.animateEase,queue:!1,step:d})},getContentPositionX:function(){return v()},getContentPositionY:function(){return F()},getContentWidth:function(){return K},getContentHeight:function(){return ba},getPercentScrolledX:function(){return v()/(K-H)},
getPercentScrolledY:function(){return F()/(ba-I)},getIsScrollableH:function(){return da},getIsScrollableV:function(){return fa},getContentPane:function(){return L},scrollToBottom:function(a){w(ea,a)},hijackInternalLinks:b.noop,destroy:function(){var b=F(),c=v();a.removeClass("jspScrollable").unbind(".jsp");a.replaceWith(ra.append(L.children()));ra.scrollTop(b);ra.scrollLeft(c);ka&&clearInterval(ka)}});d(g)}return a=b.extend({},b.fn.jScrollPane.defaults,a),b.each(["arrowButtonSpeed","trackClickSpeed",
"keyboardSpeed"],function(){a[this]=a[this]||a.speed}),this.each(function(){var c=b(this),f=c.data("jsp");f?f.reinitialise(a):(b("script",c).filter('[type="text/javascript"],:not([type])').remove(),f=new e(c,a),c.data("jsp",f))})};b.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:f,
animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}}(jQuery,this);
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?module.exports=b:b(jQuery)})(function(b){function c(a){var c=a||window.event,f=[].slice.call(arguments,1),g=0,l=0,q=0,m=0,m=0;a=b.event.fix(c);a.type="mousewheel";c.wheelDelta&&(g=c.wheelDelta);c.detail&&(g=-1*c.detail);c.deltaY&&(g=q=-1*c.deltaY);c.deltaX&&(l=c.deltaX,g=-1*l);void 0!==c.wheelDeltaY&&(q=c.wheelDeltaY);void 0!==c.wheelDeltaX&&(l=-1*c.wheelDeltaX);m=Math.abs(g);if(!e||m<e)e=m;m=Math.max(Math.abs(q),
Math.abs(l));if(!h||m<h)h=m;c=0<g?"floor":"ceil";g=Math[c](g/e);l=Math[c](l/h);q=Math[c](q/h);f.unshift(a,g,l,q);return(b.event.dispatch||b.event.handle).apply(this,f)}var f=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],e,h;if(b.event.fixHooks)for(var g=f.length;g;)b.event.fixHooks[f[--g]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=
a.length;b;)this.addEventListener(a[--b],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var b=a.length;b;)this.removeEventListener(a[--b],c,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
(function(b){if("object"==typeof exports)b(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],b);else{if(!window.Spinner)throw Error("Spin.js not present");b(window.jQuery,window.Spinner)}})(function(b,c){b.fn.spin=function(f,a){return this.each(function(){var e=b(this),h=e.data();h.spinner&&(h.spinner.stop(),delete h.spinner);!1!==f&&(f=b.extend({color:a||e.css("color")},b.fn.spin.presets[f]||f),h.spinner=(new c(f)).spin(this))})};b.fn.spin.presets=
{tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}});
jQuery(function(b){b.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),monthNamesShort:"\u042f\u043d\u0432 \u0424\u0435\u0432 \u041c\u0430\u0440 \u0410\u043f\u0440 \u041c\u0430\u0439 \u0418\u044e\u043d \u0418\u044e\u043b \u0410\u0432\u0433 \u0421\u0435\u043d \u041e\u043a\u0442 \u041d\u043e\u044f \u0414\u0435\u043a".split(" "),
dayNames:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),dayNamesShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),
dayNamesMin:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),weekHeader:"\u041d\u0435\u0434",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};b.datepicker.setDefaults(b.datepicker.regional.ru)});
(function(b){function c(b){if(b){if("string"==typeof a[b])return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c,g=0,d=f.length;d>g;g++)if(c=f[g]+b,"string"==typeof a[c])return c}}var f=["Webkit","Moz","ms","Ms","O"],a=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return c}):b.getStyleProperty=c})(window);
(function(b){function c(a){var b=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(b)&&b}function f(a){var b,f=a("boxSizing");return function(){if(f){var a=document.createElement("div");a.style.width="200px";a.style.padding="1px 2px 3px 4px";a.style.borderStyle="solid";a.style.borderWidth="1px 2px 3px 4px";a.style[f]="border-box";var d=document.body||document.documentElement;d.appendChild(a);var g=h(a);b=200===c(g.width);d.removeChild(a)}}(),function(a){if("string"==typeof a&&(a=document.querySelector(a)),
a&&"object"==typeof a&&a.nodeType){var d=h(a);if("none"===d.display){for(var q={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},d=0,m=g.length;m>d;d++)q[g[d]]=0;return q}q={};q.width=a.offsetWidth;q.height=a.offsetHeight;for(var m=q.isBorderBox=!(!f||!d[f]||"border-box"!==d[f]),s=0,r=g.length;r>s;s++){var u=g[s],y=d[u];var x=a,w=y;if(e||-1===w.indexOf("%"))y=w;else var y=x.style,B=y.left,C=x.runtimeStyle,E=C&&C.left,y=(E&&(C.left=x.currentStyle.left),y.left=w,w=y.pixelLeft,
y.left=B,E&&(C.left=E),w);x=parseFloat(y);q[u]=isNaN(x)?0:x}a=q.paddingLeft+q.paddingRight;s=q.paddingTop+q.paddingBottom;r=q.marginLeft+q.marginRight;u=q.marginTop+q.marginBottom;x=q.borderLeftWidth+q.borderRightWidth;w=q.borderTopWidth+q.borderBottomWidth;m=m&&b;y=c(d.width);!1!==y&&(q.width=y+(m?0:a+x));d=c(d.height);return!1!==d&&(q.height=d+(m?0:s+w)),q.innerWidth=q.width-(a+x),q.innerHeight=q.height-(s+w),q.outerWidth=q.width+r,q.outerHeight=q.height+u,q}}}var a=document.defaultView,e=a&&a.getComputedStyle,
h=e?function(b){return a.getComputedStyle(b,null)}:function(a){return a.currentStyle},g="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],f):b.getSize=f(b.getStyleProperty)})(window);
(function(b){var c=document.documentElement,f=function(){};c.addEventListener?f=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(f=function(a,c,f){a[c+f]=f.handleEvent?function(){var a=b.event;a.target=a.target||a.srcElement;f.handleEvent.call(f,a)}:function(){var c=b.event;c.target=c.target||c.srcElement;f.call(a,c)};a.attachEvent("on"+c,a[c+f])});var a=function(){};c.removeEventListener?a=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(a=function(a,b,c){a.detachEvent("on"+
b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});c={bind:f,unbind:a};"function"==typeof define&&define.amd?define(c):b.eventie=c})(this);
(function(b){function c(a){"function"==typeof a&&(c.isReady?a():h.push(a))}function f(a){a="readystatechange"===a.type&&"complete"!==e.readyState;if(!c.isReady&&!a){c.isReady=!0;a=0;for(var b=h.length;b>a;a++)(0,h[a])()}}function a(a){return a.bind(e,"DOMContentLoaded",f),a.bind(e,"readystatechange",f),a.bind(b,"load",f),c}var e=b.document,h=[];c.isReady=!1;"function"==typeof define&&define.amd?(c.isReady="function"==typeof requirejs,define(["eventie/eventie"],a)):b.docReady=a(b.eventie)})(this);
(function(){function b(){}function c(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function f(a){return function(){return this[a].apply(this,arguments)}}var a=b.prototype;a.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a)for(c in b={},d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c]);else b=d[a]||(d[a]=[]);return b};a.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c};a.getListenersAsObject=function(a){var b,
c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c};a.addListener=function(a,b){var f,d=this.getListenersAsObject(a),k="object"==typeof b;for(f in d)d.hasOwnProperty(f)&&-1===c(d[f],b)&&d[f].push(k?b:{listener:b,once:!1});return this};a.on=f("addListener");a.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};a.once=f("addOnceListener");a.defineEvent=function(a){return this.getListeners(a),this};a.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);
return this};a.removeListener=function(a,b){var f,d,k=this.getListenersAsObject(a);for(d in k)k.hasOwnProperty(d)&&(f=c(k[d],b),-1!==f&&k[d].splice(f,1));return this};a.off=f("removeListener");a.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};a.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};a.manipulateListeners=function(a,b,c){var d,f,n=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof
RegExp)for(d=c.length;d--;)n.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(f=b[d])&&("function"==typeof f?n.call(this,d,f):a.call(this,d,f));return this};a.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this};a.removeAllListeners=f("removeEvent");a.emitEvent=function(a,b){var c,d,f,n,p=this.getListenersAsObject(a);for(f in p)if(p.hasOwnProperty(f))for(d=
p[f].length;d--;)c=p[f][d],!0===c.once&&this.removeListener(a,c.listener),n=c.listener.apply(this,b||[]),n===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this};a.trigger=f("emitEvent");a.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};a.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};a._getEvents=function(){return this._events||
(this._events={})};"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof module&&module.exports?module.exports=b:this.EventEmitter=b}).call(this);
(function(b){function c(){}function f(b){function f(a){a.prototype.option||(a.prototype.option=function(a){b.isPlainObject(a)&&(this.options=b.extend(!0,this.options,a))})}function g(c,f){b.fn[c]=function(g){if("string"==typeof g){for(var h=a.call(arguments,1),q=0,m=this.length;m>q;q++){var s=b.data(this[q],c);if(s)if(b.isFunction(s[g])&&"_"!==g.charAt(0)){if(s=s[g].apply(s,h),void 0!==s)return s}else d("no such method '"+g+"' for "+c+" instance");else d("cannot call methods on "+c+" prior to initialization; attempted to call '"+
g+"'")}return this}return this.each(function(){var a=b.data(this,c);a?(a.option(g),a._init()):(a=new f(this,g),b.data(this,c,a))})}}if(b){var d="undefined"==typeof console?c:function(a){console.error(a)};b.bridget=function(a,b){f(b);g(a,b)}}}var a=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],f):f(b.jQuery)})(window);
(function(b,c){function f(a,b){return a[g](b)}function a(a,b){a.parentNode||document.createDocumentFragment().appendChild(a);for(var c=a.parentNode.querySelectorAll(b),d=0,f=c.length;f>d;d++)if(c[d]===a)return!0;return!1}function e(a,b){a.parentNode||document.createDocumentFragment().appendChild(a);return f(a,b)}var h,g=function(){if(c.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],b=0,d=a.length;d>b;b++){var f=a[b]+"MatchesSelector";if(c[f])return f}}();if(g){var d=document.createElement("div");
h=f(d,"div")?f:e}else h=a;"function"==typeof define&&define.amd?define(function(){return h}):window.matchesSelector=h})(this,Element.prototype);
(function(b){function c(a,b){for(var c in b)a[c]=b[c];return a}function f(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function a(a,b,e){function n(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var p=e("transition"),l=e("transform"),q=p&&l,m=!!e("perspective"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[p],r=["transform","transition","transitionDuration","transitionProperty"],
u=function(){for(var a={},b=0,c=r.length;c>b;b++){var d=r[b],f=e(d);f&&f!==d&&(a[d]=f)}return a}();c(n.prototype,a.prototype);n.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};n.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)};n.prototype.getSize=function(){this.size=b(this.element)};n.prototype.css=function(a){var b=this.element.style,c;for(c in a)b[u[c]||c]=a[c]};n.prototype.getPosition=function(){var a=
h(this.element),b=this.layout.options,c=b.isOriginLeft,b=b.isOriginTop,d=parseInt(a[c?"left":"right"],10),a=parseInt(a[b?"top":"bottom"],10),d=isNaN(d)?0:d,a=isNaN(a)?0:a,f=this.layout.size,d=d-(c?f.paddingLeft:f.paddingRight),a=a-(b?f.paddingTop:f.paddingBottom);this.position.x=d;this.position.y=a};n.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",
c.left="");b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top="");this.css(c);this.emitEvent("layout",[this])};var y=m?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};n.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,f=parseInt(a,10),g=parseInt(b,10),f=f===this.position.x&&g===this.position.y;if(this.setPosition(a,b),f&&!this.isTransitioning)return this.layoutPosition(),
void 0;c=a-c;d=b-d;f={};g=this.layout.options;c=g.isOriginLeft?c:-c;d=g.isOriginTop?d:-d;f.transform=y(c,d);this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})};n.prototype.goTo=function(a,b){this.setPosition(a,b);this.layoutPosition()};n.prototype.moveTo=q?n.prototype._transitionTo:n.prototype.goTo;n.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10);this.position.y=parseInt(b,10)};n.prototype._nonTransition=function(a){this.css(a.to);a.isCleaning&&
this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)};n.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(a),void 0;var b=this._transition,c;for(c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);a.from&&this.css(a.from);this.enableTransition(a.to);this.css(a.to);this.isTransitioning=!0};var x=l&&f(l)+",opacity";n.prototype.enableTransition=
function(){this.isTransitioning||(this.css({transitionProperty:x,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(s,this,!1))};n.prototype.transition=n.prototype[p?"_transition":"_nonTransition"];n.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)};n.prototype.onotransitionend=function(a){this.ontransitionend(a)};var w={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};n.prototype.ontransitionend=function(a){if(a.target===
this.element){var b=this._transition,c=w[a.propertyName]||a.propertyName;delete b.ingProperties[c];var d;a:{for(d in b.ingProperties){d=!1;break a}d=!0}if(d&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd)b.onEnd[c].call(this),delete b.onEnd[c];this.emitEvent("transitionEnd",[this])}};n.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(s,this,!1);this.isTransitioning=!1};n.prototype._removeStyles=
function(a){var b={},c;for(c in a)b[c]="";this.css(b)};var B={transitionProperty:"",transitionDuration:""};return n.prototype.removeTransitionStyles=function(){this.css(B)},n.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},n.prototype.remove=function(){if(!p||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0});this.hide()},n.prototype.reveal=
function(){delete this.isHidden;this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},n.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})},n.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}
var e=document.defaultView,h=e&&e.getComputedStyle?function(a){return e.getComputedStyle(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],a):(b.Outlayer={},b.Outlayer.Item=a(b.EventEmitter,b.getSize,b.getStyleProperty))})(window);
(function(b){function c(a,b){for(var c in b)a[c]=b[c];return a}function f(a){var b=[];if("[object Array]"===p.call(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function a(a,b){var c=q(b,a);-1!==c&&b.splice(c,1)}function e(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function h(h,q,p,u,y,x){function w(a,b){if("string"==typeof a&&(a=g.querySelector(a)),!a||!l(a))return d&&d.error("Bad "+this.settings.namespace+
" element: "+a),void 0;this.element=a;this.options=c({},this.options);this.option(b);var f=++C;this.element.outlayerGUID=f;E[f]=this;this._create();this.options.isInitLayout&&this.layout()}function B(a,b){a.prototype[b]=c({},w.prototype[b])}var C=0,E={};return w.prototype.settings={namespace:"outlayer",item:x},w.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},
visibleStyle:{opacity:1,transform:"scale(1)"}},c(w.prototype,p.prototype),w.prototype.option=function(a){c(this.options,a)},w.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);c(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},w.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},w.prototype._itemize=function(a){a=this._filterFindItemElements(a);for(var b=this.settings.item,c=[],
d=0,f=a.length;f>d;d++){var g=new b(a[d],this);c.push(g)}return c},w.prototype._filterFindItemElements=function(a){a=f(a);for(var b=this.options.itemSelector,c=[],d=0,g=a.length;g>d;d++){var e=a[d];if(l(e))if(b){y(e,b)&&c.push(e);for(var e=e.querySelectorAll(b),h=0,k=e.length;k>h;h++)c.push(e[h])}else c.push(e)}return c},w.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},w.prototype.layout=function(){this._resetLayout();this._manageStamps();
this.layoutItems(this.items,void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0},w.prototype._init=w.prototype.layout,w.prototype._resetLayout=function(){this.getSize()},w.prototype.getSize=function(){this.size=u(this.element)},w.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):l(d)&&(c=d),this[a]=c?u(c)[b]:d):this[a]=0},w.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a);
this._layoutItems(a,b);this._postLayout()},w.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c];f.isIgnored||b.push(f)}return b},w.prototype._layoutItems=function(a,b){if(!a||!a.length)return this.emitEvent("layoutComplete",[this,a]),void 0;this._itemsOn(a,"layout",function(){this.emitEvent("layoutComplete",[this,a])});for(var c=[],d=0,f=a.length;f>d;d++){var g=a[d],e=this._getItemLayoutPosition(g);e.item=g;e.isInstant=b;c.push(e)}this._processLayoutQueue(c)},
w.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},w.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},w.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},w.prototype._postLayout=function(){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))},w.prototype._getContainerSize=n,w.prototype._setContainerMeasure=function(a,b){if(void 0!==
a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth);a=Math.max(a,0);this.element.style[b?"width":"height"]=a+"px"}},w.prototype._itemsOn=function(a,b,c){function d(){return f++,f===g&&c.call(e),!0}for(var f=0,g=a.length,e=this,h=0,k=a.length;k>h;h++)a[h].on(b,d)},w.prototype.ignore=function(a){(a=this.getItem(a))&&(a.isIgnored=!0)},w.prototype.unignore=function(a){(a=this.getItem(a))&&
delete a.isIgnored},w.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++)this.ignore(a[b])}},w.prototype.unstamp=function(b){if(b=this._find(b))for(var c=0,d=b.length;d>c;c++){var f=b[c];a(f,this.stamps);this.unignore(f)}},w.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),f(a)):void 0},w.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=
0,b=this.stamps.length;b>a;a++)this._manageStamp(this.stamps[a])}},w.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},w.prototype._manageStamp=n,w.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect;a=u(a);
return{left:b.left-c.left-a.marginLeft,top:b.top-c.top-a.marginTop,right:c.right-b.right-a.marginRight,bottom:c.bottom-b.bottom-a.marginBottom}},w.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},w.prototype.bindResize=function(){this.isResizeBound||(h.bind(b,"resize",this),this.isResizeBound=!0)},w.prototype.unbindResize=function(){h.unbind(b,"resize",this);this.isResizeBound=!1},w.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var a=this;
this.resizeTimeout=setTimeout(function(){a.resize();delete a.resizeTimeout},100)},w.prototype.resize=function(){var a=u(this.element);this.size&&a&&a.innerWidth===this.size.innerWidth||this.layout()},w.prototype.addItems=function(a){a=this._itemize(a);return a.length&&(this.items=this.items.concat(a)),a},w.prototype.appended=function(a){a=this.addItems(a);a.length&&(this.layoutItems(a,!0),this.reveal(a))},w.prototype.prepended=function(a){a=this._itemize(a);if(a.length){var b=this.items.slice(0);
this.items=a.concat(b);this._resetLayout();this._manageStamps();this.layoutItems(a,!0);this.reveal(a);this.layoutItems(b)}},w.prototype.reveal=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++)a[b].reveal()},w.prototype.hide=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++)a[b].hide()},w.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},w.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>
c;c++){var f=this.getItem(a[c]);f&&b.push(f)}return b}},w.prototype.remove=function(b){b=f(b);var c=this.getItems(b);if(c&&c.length){this._itemsOn(c,"remove",function(){this.emitEvent("removeComplete",[this,c])});b=0;for(var d=c.length;d>b;b++){var g=c[b];g.remove();a(g,this.items)}}},w.prototype.destroy=function(){var a=this.element.style;a.height="";a.position="";a.width="";for(var a=0,b=this.items.length;b>a;a++)this.items[a].destroy();this.unbindResize();delete this.element.outlayerGUID;k&&k.removeData(this.element,
this.settings.namespace)},w.data=function(a){return(a=a&&a.outlayerGUID)&&E[a]},w.create=function(a,b){function f(){w.apply(this,arguments)}return c(f.prototype,w.prototype),B(f,"options"),B(f,"settings"),c(f.prototype.options,b),f.prototype.settings.namespace=a,f.data=w.data,f.Item=function(){x.apply(this,arguments)},f.Item.prototype=new x,f.prototype.settings.item=f.Item,q(function(){for(var b=e(a),c=g.querySelectorAll(".js-"+b),b="data-"+b+"-options",h=0,m=c.length;m>h;h++){var q,l=c[h],p=l.getAttribute(b);
try{q=p&&JSON.parse(p)}catch(s){d&&d.error("Error parsing "+b+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+s);continue}p=new f(l,q);k&&k.data(l,a,p)}}),k&&k.bridget&&k.bridget(a,f),f},w.Item=x,w}var g=b.document,d=b.console,k=b.jQuery,n=function(){},p=Object.prototype.toString,l="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},q=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:
function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),h):b.Outlayer=h(b.eventie,b.docReady,b.EventEmitter,b.getSize,b.matchesSelector,b.Outlayer.Item)})(window);
(function(b){function c(a,b){var c=a.create("masonry");return c.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},c.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0];this.columnWidth=(a=a&&a.element)&&b(a).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;
this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},c.prototype.getContainerWidth=function(){var a=b(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=a&&a.innerWidth},c.prototype._getItemLayoutPosition=function(a){a.getSize();var b=Math.ceil(a.size.outerWidth/this.columnWidth),b=Math.min(b,this.cols),c=this._getColGroup(b),e=Math.min.apply(Math,c),b=f(c,e),h={x:this.columnWidth*b,y:e};a=e+a.size.outerHeight;c=this.cols+
1-c.length;for(e=0;c>e;e++)this.colYs[b+e]=a;return h},c.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,f=0;c>f;f++){var e=this.colYs.slice(f,f+a);b[f]=Math.max.apply(Math,e)}return b},c.prototype._manageStamp=function(a){var c=b(a);a=this._getElementOffset(a);var f=this.options.isOriginLeft?a.left:a.right,h=f+c.outerWidth,f=Math.floor(f/this.columnWidth),f=Math.max(0,f),h=Math.floor(h/this.columnWidth),h=Math.min(this.cols-1,h),c=(this.options.isOriginTop?
a.top:a.bottom)+c.outerHeight;for(a=f;h>=a;a++)this.colYs[a]=Math.max(c,this.colYs[a])},c.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},c.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},c.prototype.resize=function(){var a=this.containerWidth;this.getContainerWidth();a!==
this.containerWidth&&this.layout()},c}var f=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,f=a.length;f>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],c):b.Masonry=c(b.Outlayer,b.getSize)})(window);
+function(b){var c=function(a,c){this.options=c;this.$element=b(a);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,b.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};c.prototype.toggle=function(a){return this[!this.isShown?"show":"hide"](a)};c.prototype.show=function(a){var c=this,f=b.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(f);!this.isShown&&!f.isDefaultPrevented()&&
(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',b.proxy(this.hide,this)),this.backdrop(function(){var f=b.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show().scrollTop(0);f&&c.$element[0].offsetWidth;c.$element.addClass("in").attr("aria-hidden",!1);c.enforceFocus();var d=b.Event("shown.bs.modal",{relatedTarget:a});f?c.$element.find(".modal-dialog").one(b.support.transition.end,
function(){c.$element.focus().trigger(d)}).emulateTransitionEnd(300):c.$element.focus().trigger(d)}))};c.prototype.hide=function(a){a&&a.preventDefault();a=b.Event("hide.bs.modal");this.$element.trigger(a);this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),b(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),b.support.transition&&this.$element.hasClass("fade")?this.$element.one(b.support.transition.end,b.proxy(this.hideModal,
this)).emulateTransitionEnd(300):this.hideModal())};c.prototype.enforceFocus=function(){b(document).off("focusin.bs.modal").on("focusin.bs.modal",b.proxy(function(a){this.$element[0]!==a.target&&!this.$element.has(a.target).length&&this.$element.focus()},this))};c.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.bs.modal",b.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keyup.dismiss.bs.modal")};c.prototype.hideModal=
function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};c.prototype.backdrop=function(a){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=b.support.transition&&c;this.$backdrop=b('<div class="modal-backdrop '+c+'" />').appendTo(document.body);this.$element.on("click.dismiss.modal",b.proxy(function(a){a.target===
a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this));f&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");a&&(f?this.$backdrop.one(b.support.transition.end,a).emulateTransitionEnd(150):a())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,a).emulateTransitionEnd(150):a()):a&&a()};var f=b.fn.modal;b.fn.modal=
function(a,f){return this.each(function(){var h=b(this),g=h.data("bs.modal"),d=b.extend({},c.DEFAULTS,h.data(),"object"==typeof a&&a);g||h.data("bs.modal",g=new c(this,d));if("string"==typeof a)g[a](f);else d.show&&g.show(f)})};b.fn.modal.Constructor=c;b.fn.modal.noConflict=function(){b.fn.modal=f;return this};b(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var c=b(this),f=c.attr("href"),g=b(c.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),f=g.data("bs.modal")?
"toggle":b.extend({remote:!/#/.test(f)&&f},g.data(),c.data());c.is("a")&&a.preventDefault();g.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})});b(document).on("show.bs.modal",".modal",function(){b(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){b(document.body).removeClass("modal-open")})}(jQuery);
(function(b,c){"object"===typeof exports?module.exports=c(require("moment")):"function"===typeof define&&define.amd?define("moment-range",["moment"],c):b.moment=c(b.moment)})(this,function(b){var c,f;f={year:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0};c=function(){function a(a,c){this.start=b(a);this.end=b(c)}a.prototype.contains=function(b){return b instanceof a?this.start<=b.start&&this.end>=b.end:this.start<=b&&b<=this.end};a.prototype._by_string=function(a,c){var f,d;f=b(this.start);
for(d=[];this.contains(f);)c.call(this,f.clone()),d.push(f.add(a,1));return d};a.prototype._by_range=function(a,c){var f,d,k,n;d=Math.round(this/a);if(Infinity===d)return this;n=[];for(f=k=0;0<=d?k<=d:k>=d;f=0<=d?++k:--k)n.push(c.call(this,b(this.start.valueOf()+a.valueOf()*f)));return n};a.prototype.overlaps=function(a){return null!==this.intersect(a)};a.prototype.intersect=function(b){var c,f,d,k,n,p,l,q;return this.start<=(f=b.start)&&f<(c=this.end)&&c<b.end?new a(b.start,this.end):b.start<(k=
this.start)&&k<(d=b.end)&&d<=this.end?new a(this.start,b.end):b.start<(p=this.start)&&p<(n=this.end)&&n<b.end?this:this.start<=(q=b.start)&&q<(l=b.end)&&l<=this.end?b:null};a.prototype.subtract=function(b){var c,f,d,k,n,p,l,q;if(null===this.intersect(b))return[this];if(b.start<=(f=this.start)&&f<(c=this.end)&&c<=b.end)return[];if(b.start<=(k=this.start)&&k<(d=b.end)&&d<this.end)return[new a(b.end,this.end)];if(this.start<(p=b.start)&&p<(n=this.end)&&n<=b.end)return[new a(this.start,b.start)];if(this.start<
(q=b.start)&&q<(l=b.end)&&l<this.end)return[new a(this.start,b.start),new a(b.end,this.end)]};a.prototype.by=function(a,b){"string"===typeof a?this._by_string(a,b):this._by_range(a,b);return this};a.prototype.valueOf=function(){return this.end-this.start};a.prototype.toDate=function(){return[this.start.toDate(),this.end.toDate()]};a.prototype.isSame=function(a){return this.start.isSame(a.start)&&this.end.isSame(a.end)};a.prototype.diff=function(a){null==a&&(a=void 0);return this.end.diff(this.start,
a)};return a}();b.fn.range=function(a,e){return a in f?new c(b(this).startOf(a),b(this).endOf(a)):new c(a,e)};b.range=function(a,b){return new c(a,b)};b.fn.within=function(a){return a.contains(this._d)};return b});
(function(b){function c(){this===f.elem&&(f.pos=[-260,-260],f.elem=!1,a=3)}var f={pos:[-260,-260]},a=3,e=document,h=e.documentElement,g=e.body,d,k;b.event.special.mwheelIntent={setup:function(){var a=b(this).bind("mousewheel",b.event.special.mwheelIntent.handler);this!==e&&(this!==h&&this!==g)&&a.bind("mouseleave",c);return!0},teardown:function(){b(this).unbind("mousewheel",b.event.special.mwheelIntent.handler).unbind("mouseleave",c);return!0},handler:function(c,g){var e=[c.clientX,c.clientY];if(this===
f.elem||Math.abs(f.pos[0]-e[0])>a||Math.abs(f.pos[1]-e[1])>a)return f.elem=this,f.pos=e,a=250,clearTimeout(k),k=setTimeout(function(){a=10},200),clearTimeout(d),d=setTimeout(function(){a=3},1500),c=b.extend({},c,{type:"mwheelIntent"}),(b.event.dispatch||b.event.handle).apply(this,arguments)}};b.fn.extend({mwheelIntent:function(a){return a?this.bind("mwheelIntent",a):this.trigger("mwheelIntent")},unmwheelIntent:function(a){return this.unbind("mwheelIntent",a)}});b(function(){g=e.body;b(e).bind("mwheelIntent.mwheelIntentDefault",
b.noop)})})(jQuery);!function(b){"undefined"==typeof b.fn.each2&&b.extend(b.fn,{each2:function(c){for(var f=b([0]),a=-1,e=this.length;++a<e&&(f.context=f[0]=this[a])&&!1!==c.call(f[0],a,f););return this}})}(jQuery);
(function(b,c){function f(a){var c=b(document.createTextNode(""));a.before(c);c.before(a);c.remove()}function a(a){var b,c,d,f;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;d>c;c++)f=a.charAt(c),b+=P[f]||f;return b}function e(a,b){for(var c=0,d=b.length;d>c;c+=1)if(g(a,b[c]))return c;return-1}function h(){var a=b(U);a.appendTo("body");var c={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};return a.remove(),c}function g(a,b){return a===b?!0:a===c||b===c?!1:null===a||null===
b?!1:a.constructor===String?a+""==b+"":b.constructor===String?b+""==a+"":!1}function d(a,c){var d,f,g;if(null===a||1>a.length)return[];d=a.split(c);f=0;for(g=d.length;g>f;f+=1)d[f]=b.trim(d[f]);return d}function k(a){a.on("keydown",function(){b.data(a,"keyup-change-value")===c&&b.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var d=b.data(a,"keyup-change-value");d!==c&&a.val()!==d&&(b.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}function n(a){a.on("mousemove",function(a){var d=
S;(d===c||d.x!==a.pageX||d.y!==a.pageY)&&b(a.target).trigger("mousemove-filtered",a)})}function p(a,b,d){d=d||c;var f;return function(){var c=arguments;window.clearTimeout(f);f=window.setTimeout(function(){b.apply(d,c)},a)}}function l(a){var b,c=!1;return function(){return!1===c&&(b=a(),c=!0),b}}function q(a,b){var c=p(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){0<=e(a.target,b.get())&&c(a)})}function m(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,
c=a[0],d=a.val().length;a.focus();(0<c.offsetWidth||0<c.offsetHeight)&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function s(a){a.preventDefault();a.stopPropagation()}function r(a,c,d){var f,g,e=[];(f=a.attr("class"))&&(f=""+f,b(f.split(" ")).each2(function(){0===this.indexOf("select2-")&&e.push(this)}));(f=c.attr("class"))&&(f=""+f,b(f.split(" ")).each2(function(){0!==this.indexOf("select2-")&&
(g=d(this),g&&e.push(g))}));a.attr("class",e.join(" "))}function u(b,c,d,f){var g=a(b.toUpperCase()).indexOf(a(c.toUpperCase()));c=c.length;return 0>g?(d.push(f(b)),void 0):(d.push(f(b.substring(0,g))),d.push("<span class='select2-match'>"),d.push(f(b.substring(g,g+c))),d.push("</span>"),d.push(f(b.substring(g+c,b.length))),void 0)}function y(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}
function x(a){var d,f=null,g=a.quietMillis||100,e=a.url,h=this;return function(k){window.clearTimeout(d);d=window.setTimeout(function(){var d=a.data,g=e,q=a.transport||b.fn.select2.ajaxDefaults.transport,m=b.extend({},b.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||c,dataType:a.dataType||"json"}),d=d?d.call(h,k.term,k.page,k.context):null,g="function"==typeof g?g.call(h,k.term,k.page,k.context):g;f&&"function"==typeof f.abort&&f.abort();a.params&&
(b.isFunction(a.params)?b.extend(m,a.params.call(h)):b.extend(m,a.params));b.extend(m,{url:g,dataType:a.dataType,data:d,success:function(b){b=a.results(b,k.page);k.callback(b)}});f=q.call(h,m)},g)}}function w(a){var c,d,f=a,g=function(a){return""+a.text};b.isArray(f)&&(d=f,f={results:d});!1===b.isFunction(f)&&(d=f,f=function(){return d});a=f();return a.text&&(g=a.text,b.isFunction(g)||(c=a.text,g=function(a){return a[c]})),function(a){var c,d=a.term,e={results:[]};return""===d?(a.callback(f()),void 0):
(c=function(f,e){var h,k;if(f=f[0],f.children){h={};for(k in f)f.hasOwnProperty(k)&&(h[k]=f[k]);h.children=[];b(f.children).each2(function(a,b){c(b,h.children)});(h.children.length||a.matcher(d,g(h),f))&&e.push(h)}else a.matcher(d,g(f),f)&&e.push(f)},b(f().results).each2(function(a,b){c(b,e.results)}),a.callback(e),void 0)}}function B(a){var d=b.isFunction(a);return function(f){var g=f.term,e={results:[]};b(d?a():a).each(function(){var a=this.text!==c,b=a?this.text:this;(""===g||f.matcher(g,b))&&
e.results.push(a?this:{id:this,text:this})});f.callback(e)}}function C(a,c){if(b.isFunction(a))return!0;if(!a)return!1;if("string"==typeof a)return!0;throw Error(c+" must be a string, function, or falsy value");}function E(a){if(b.isFunction(a)){var c=Array.prototype.slice.call(arguments,1);return a.apply(null,c)}return a}function D(a){var c=0;return b.each(a,function(a,b){b.children?c+=D(b.children):c++}),c}function M(a,b,d,f){var e,h,k,q,m,l=a;h=!1;if(!f.createSearchChoice||!f.tokenSeparators||
1>f.tokenSeparators.length)return c;for(;;){h=-1;k=0;for(q=f.tokenSeparators.length;q>k&&(m=f.tokenSeparators[k],h=a.indexOf(m),!(0<=h));k++);if(0>h)break;if(e=a.substring(0,h),a=a.substring(h+m.length),0<e.length&&(e=f.createSearchChoice.call(this,e,b),e!==c&&null!==e&&f.id(e)!==c&&null!==f.id(e))){h=!1;k=0;for(q=b.length;q>k;k++)if(g(f.id(e),f.id(b[k]))){h=!0;break}h||d(e)}}return l!==a?a:void 0}function z(a,c){var d=function(){};return d.prototype=new a,d.prototype.constructor=d,d.prototype.parent=
a.prototype,d.prototype=b.extend(d.prototype,c),d}if(window.Select2===c){var v,F,G,N,O,R,W,S={x:0,y:0};v={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a.which?a.which:a){case v.LEFT:case v.RIGHT:case v.UP:case v.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case v.SHIFT:case v.CTRL:case v.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=
a.which?a.which:a,112<=a&&123>=a}};var U="<div class='select2-measure-scrollbar'></div>",P={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A",
"\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D",
"\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F",
"\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I",
"\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L",
"\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O",
"\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P",
"\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S",
"\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U",
"\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y",
"\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a",
"\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c",
"\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e",
"\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h",
"\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k",
"\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n",
"\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o",
"\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r",
"\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t",
"\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v",
"\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z",
"\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};F=b(document);O=function(){var a=1;return function(){return a++}}();F.on("mousemove",function(a){S.x=a.pageX;S.y=a.pageY});F=z(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var d,f;this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==c&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();
this.liveRegion=b("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body);this.containerId="s2id_"+(a.element.attr("id")||"autogen"+O()).replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.containerSelector="#"+this.containerId;this.container.attr("id",this.containerId);this.body=l(function(){return a.element.closest("body")});r(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",a.element.attr("style"));
this.container.css(E(a.containerCss));this.container.addClass(E(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",s);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");r(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(E(a.dropdownCssClass));this.dropdown.data("select2",this);this.dropdown.on("click",
s);this.results=d=this.container.find(".select2-results");this.search=f=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",s);n(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));this.dropdown.on("touchend",".select2-results",this.bind(this.selectHighlighted));this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved));
this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved));q(80,this.results);this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));b(this.container).on("change",".select2-input",function(a){a.stopPropagation()});b(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});b.fn.mousewheel&&d.mousewheel(function(a,b,c,f){b=d.scrollTop();0<f&&0>=b-f?(d.scrollTop(0),s(a)):0>f&&d.get(0).scrollHeight-d.scrollTop()+f<=
d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),s(a))});k(f);f.on("keyup-change input paste",this.bind(this.updateResults));f.on("focus",function(){f.addClass("select2-focused")});f.on("blur",function(){f.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<b(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown focusin",function(a){a.stopPropagation()});
this.nextSearchTerm=c;b.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var g=a.element.prop("disabled");g===c&&(g=!1);this.enable(!g);g=a.element.prop("readonly");g===c&&(g=!1);this.readonly(g);W=W||h();this.autofocus=a.element.prop("autofocus");a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.search.attr("placeholder",a.searchInputPlaceholder)},destroy:function(){var a=
this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);b!==c&&(b.container.remove(),b.liveRegion.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),
css:a.attr("class"),disabled:a.prop("disabled"),locked:g(a.attr("locked"),"locked")||g(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(a){var f,e,h,k,q=this;if(f=a.element,"select"===f.get(0).tagName.toLowerCase()&&(this.select=e=a.element),e&&b.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");
}),a=b.extend({},{populateResults:function(d,f,g){var e,h=this.opts.id,k=this.liveRegion;e=function(d,f,m){var l,p,s,r,n,u,x,w;d=a.sortResults(d,f,g);l=0;for(p=d.length;p>l;l+=1)s=d[l],n=!0===s.disabled,r=!n&&h(s)!==c,u=s.children&&0<s.children.length,x=b("<li></li>"),x.addClass("select2-results-dept-"+m),x.addClass("select2-result"),x.addClass(r?"select2-result-selectable":"select2-result-unselectable"),n&&x.addClass("select2-disabled"),u&&x.addClass("select2-result-with-children"),x.addClass(q.opts.formatResultCssClass(s)),
x.attr("role","presentation"),r=b(document.createElement("div")),r.addClass("select2-result-label"),r.attr("id","select2-result-label-"+O()),r.attr("role","option"),n=a.formatResult(s,r,g,q.opts.escapeMarkup),n!==c&&(r.html(n),x.append(r)),u&&(w=b("<ul></ul>"),w.addClass("select2-result-sub"),e(s.children,w,m+1),x.append(w)),x.data("select2-data",s),f.append(x);k.text(a.formatMatches(d.length))};e(f,d,0)}},b.fn.select2.defaults,a),"function"!=typeof a.id&&(h=a.id,a.id=function(a){return a[h]}),b.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(e?(a.query=this.bind(function(a){var b,d,g,e={results:[],more:!1},h=a.term;g=function(b,c){var d;b.is("option")?a.matcher(h,b.text(),b)&&c.push(q.optionToData(b)):b.is("optgroup")&&(d=q.optionToData(b),b.children().each2(function(a,b){g(b,d.children)}),0<d.children.length&&c.push(d))};b=f.children();this.getPlaceholder()!==c&&0<b.length&&(d=this.getPlaceholderOption(),
d&&(b=b.not(d)));b.each2(function(a,b){g(b,e.results)});a.callback(e)}),a.id=function(a){return a.id}):"query"in a||("ajax"in a?(k=a.element.data("ajax-url"),k&&0<k.length&&(a.ajax.url=k),a.query=x.call(a.element,a.ajax)):"data"in a?a.query=w(a.data):"tags"in a&&(a.query=B(a.tags),a.createSearchChoice===c&&(a.createSearchChoice=function(a){return{id:b.trim(a),text:b.trim(a)}}),a.initSelection===c&&(a.initSelection=function(c,f){var e=[];b(d(c.val(),a.separator)).each(function(){var c={id:this,text:this},
d=a.tags;b.isFunction(d)&&(d=d());b(d).each(function(){return g(this.id,c.id)?(c=this,!1):void 0});e.push(c)});f(e)}))),"function"!=typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");if("top"===a.createSearchChoicePosition)a.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===a.createSearchChoicePosition)a.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof a.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";
return a},monitorSource:function(){var a,b,d=this.opts.element;d.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}));a=this.bind(function(){var a=d.prop("disabled");a===c&&(a=!1);this.enable(!a);a=d.prop("readonly");a===c&&(a=!1);this.readonly(a);r(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(E(this.opts.containerCssClass));r(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);
this.dropdown.addClass(E(this.opts.dropdownCssClass))});d.on("propertychange.select2",a);this.mutationCallback===c&&(this.mutationCallback=function(b){b.forEach(a)});b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;b!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new b(this.mutationCallback),this.propertyObserver.observe(d.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=b.Event("select2-selecting",
{val:this.id(a),object:a});return this.opts.element.trigger(a),!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=b.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;
return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",!a),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===c&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===c&&(a=!1);this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container.hasClass("select2-dropdown-open")},
positionDropdown:function(){var a,c,d,f,g=this.dropdown,e=this.container.offset(),h=this.container.outerHeight(!1),k=this.container.outerWidth(!1),q=g.outerHeight(!1),m=b(window),l=m.width(),p=m.height(),s=m.scrollLeft()+l,r=m.scrollTop()+p,p=e.top+h,n=e.left,r=r>=p+q,u=e.top-q>=m.scrollTop(),x=g.outerWidth(!1),w=s>=n+x;g.hasClass("select2-drop-above")?(c=!0,!u&&r&&(d=!0,c=!1)):(c=!1,!r&&u&&(d=!0,c=!0));d&&(g.hide(),e=this.container.offset(),h=this.container.outerHeight(!1),k=this.container.outerWidth(!1),
q=g.outerHeight(!1),s=m.scrollLeft()+l,m.scrollTop(),p=e.top+h,n=e.left,x=g.outerWidth(!1),w=s>=n+x,g.show());this.opts.dropdownAutoWidth?(f=b(".select2-results",g)[0],g.addClass("select2-drop-auto-width"),g.css("width",""),x=g.outerWidth(!1)+(f.scrollHeight===f.clientHeight?0:W.width),x>k?k=x:x=k,w=s>=n+x):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(a=this.body().offset(),p-=a.top,n-=a.left);w||(n=e.left+this.container.outerWidth(!1)-x);a={left:n,
width:k};c?(a.top=e.top-q,a.bottom="auto",this.container.addClass("select2-drop-above"),g.addClass("select2-drop-above")):(a.top=p,a.bottom="auto",this.container.removeClass("select2-drop-above"),g.removeClass("select2-drop-above"));a=b.extend(a,E(this.opts.dropdownCss));g.css(a)},shouldOpen:function(){var a;return this.opened()?!1:!1===this._enabled||!0===this._readonly?!1:(a=b.Event("select2-opening"),this.opts.element.trigger(a),!a.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");
this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var a,c=this.containerId,d="scroll."+c,g="resize."+c,e="orientationchange."+c;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=b("#select2-drop-mask");0==a.length&&(a=b(document.createElement("div")),
a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),a.on("mousedown touchstart click",function(c){f(a);var d,g=b("#select2-drop");0<g.length&&(d=g.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),c.preventDefault(),c.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);b("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();
this.positionDropdown();this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){b(this).on(g+" "+d+" "+e,function(){h.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,c="scroll."+a,d="resize."+a,f="orientationchange."+a;this.container.parents().add(window).each(function(){b(this).off(c).off(d).off(f)});this.clearDropdownAlignmentPreference();b("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();
this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(b.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return E(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a,c,d,f,g,e=this.results;if(c=this.highlight(),!(0>
c)){if(0==c)return e.scrollTop(0),void 0;a=this.findHighlightableChoices().find(".select2-result-label");d=b(a[c]);f=d.offset().top+d.outerHeight(!0);c===a.length-1&&(g=e.find("li.select2-more-results"),0<g.length&&(f=g.offset().top+g.outerHeight(!0)));a=e.offset().top+e.outerHeight(!0);f>a&&e.scrollTop(e.scrollTop()+(f-a));f=d.offset().top-e.offset().top;0>f&&"none"!=d.css("display")&&e.scrollTop(e.scrollTop()+f)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},
moveHighlight:function(a){for(var c=this.findHighlightableChoices(),d=this.highlight();-1<d&&d<c.length;){var d=d+a,f=b(c[d]);if(f.hasClass("select2-result-selectable")&&!f.hasClass("select2-disabled")&&!f.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(a){var c,d,f=this.findHighlightableChoices();return 0===arguments.length?e(f.filter(".select2-highlighted")[0],f.get()):(a>=f.length&&(a=f.length-1),0>a&&(a=0),this.removeHighlight(),c=b(f[a]),c.addClass("select2-highlighted"),
this.search.attr("aria-activedescendant",c.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(c.text()),d=c.data("select2-data"),d&&this.opts.element.trigger({type:"select2-highlight",val:this.id(d),choice:d}),void 0)},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},
highlightUnderEvent:function(a){a=b(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var c=this.findHighlightableChoices();this.highlight(c.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find("li.select2-more-results"),d=this.resultsPage+1,f=this,g=this.search.val(),e=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),a<=this.opts.loadMorePadding&&(c.addClass("select2-active"),
this.opts.query({element:this.opts.element,term:g,page:d,context:e,matcher:this.opts.matcher,callback:this.bind(function(a){f.opened()&&(f.opts.populateResults.call(this,b,a.results,{term:g,page:d,context:e}),f.postprocessResults(a,!1,!1),!0===a.more?(c.detach().appendTo(b).text(E(f.opts.formatLoadMore,d+1)),window.setTimeout(function(){f.loadMoreIfNeeded()},10)):c.remove(),f.positionDropdown(),f.resultsPage=d,f.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})})))},
tokenize:function(){},updateResults:function(a){function d(){k.removeClass("select2-active");l.positionDropdown();q.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.liveRegion.text(q.text()):l.liveRegion.text(l.opts.formatMatches(q.find(".select2-result-selectable").length))}function f(a){q.html(a);d()}var e,h,k=this.search,q=this.results,m=this.opts,l=this,p=k.val(),s=b.data(this.container,"select2-last-term");if((!0===a||!s||!g(p,s))&&(b.data(this.container,"select2-last-term",
p),!0===a||!1!==this.showSearchInput&&this.opened())){h=++this.queryCount;p=this.getMaximumSelectionSize();if(1<=p&&(e=this.data(),b.isArray(e)&&e.length>=p&&C(m.formatSelectionTooBig,"formatSelectionTooBig")))return f("<li class='select2-selection-limit'>"+E(m.formatSelectionTooBig,p)+"</li>"),void 0;if(k.val().length<m.minimumInputLength)return C(m.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+E(m.formatInputTooShort,k.val(),m.minimumInputLength)+"</li>"):f(""),
a&&this.showSearch&&this.showSearch(!0),void 0;if(m.maximumInputLength&&k.val().length>m.maximumInputLength)return C(m.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+E(m.formatInputTooLong,k.val(),m.maximumInputLength)+"</li>"):f(""),void 0;m.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+E(m.formatSearching)+"</li>");k.addClass("select2-active");this.removeHighlight();e=this.tokenize();e!=c&&null!=e&&k.val(e);this.resultsPage=
1;m.query({element:m.element,term:k.val(),page:this.resultsPage,context:null,matcher:m.matcher,callback:this.bind(function(e){var p;if(h==this.queryCount){if(!this.opened())return this.search.removeClass("select2-active"),void 0;if(this.context=e.context===c?null:e.context,this.opts.createSearchChoice&&""!==k.val()&&(p=this.opts.createSearchChoice.call(l,k.val(),e.results),p!==c&&null!==p&&l.id(p)!==c&&null!==l.id(p)&&0===b(e.results).filter(function(){return g(l.id(this),l.id(p))}).length&&this.opts.createSearchChoicePosition(e.results,
p)),0===e.results.length&&C(m.formatNoMatches,"formatNoMatches"))return f("<li class='select2-no-results'>"+E(m.formatNoMatches,k.val())+"</li>"),void 0;q.empty();l.opts.populateResults.call(this,q,e.results,{term:k.val(),page:this.resultsPage,context:null});!0===e.more&&C(m.formatLoadMore,"formatLoadMore")&&(q.append("<li class='select2-more-results'>"+l.opts.escapeMarkup(E(m.formatLoadMore,this.resultsPage))+"</li>"),window.setTimeout(function(){l.loadMoreIfNeeded()},10));this.postprocessResults(e,
a);d();this.opts.element.trigger({type:"select2-loaded",items:e})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){m(this.search)},selectHighlighted:function(a){if(this._touchMoved)return this.clearTouchMoved(),
void 0;var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==c?a.text():c)},getPlaceholderOption:function(){if(this.select){var a=this.select.children("option").first();
if(this.opts.placeholderOption!==c)return"first"===this.opts.placeholderOption&&a||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,d,f,g,e,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(a=this.opts.element.attr("style"),
a!==c){d=a.split(";");g=0;for(e=d.length;e>g;g+=1)if(h=d[g].replace(/\s/g,""),f=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==f&&1<=f.length)return f[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return b.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==a&&this.container.css("width",a)}});G=z(F,{createContainer:function(){return b(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span></a><label for='' class='select2-offscreen'></label><input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' /><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <label for='' class='select2-offscreen'></label>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'       aria-autocomplete='list' />   </div>   <ul class='select2-results' role='listbox'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,d,f;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(d=a.createTextRange(),d.collapse(!1),d.select()):a.setSelectionRange&&(f=this.search.val().length,a.setSelectionRange(f,
f));""===this.search.val()&&this.nextSearchTerm!=c&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(b.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&
this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",!1);this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){b("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,c;c=this.container;var d=this.dropdown,g=O();0>this.opts.minimumResultsForSearch?
this.showSearch(!1):this.showSearch(!0);this.selection=a=c.find(".select2-choice");this.focusser=c.find(".select2-focusser");a.find(".select2-chosen").attr("id","select2-chosen-"+g);this.focusser.attr("aria-labelledby","select2-chosen-"+g);this.results.attr("id","select2-results-"+g);this.search.attr("aria-owns","select2-results-"+g);this.focusser.attr("id","s2id_autogen"+g);c=b("label[for='"+this.opts.element.attr("id")+"']");this.focusser.prev().text(c.text()).attr("for",this.focusser.attr("id"));
g=this.opts.element.attr("title");this.opts.element.attr("title",g||c.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(b("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===v.PAGE_UP||a.which===v.PAGE_DOWN)return s(a),void 0;switch(a.which){case v.UP:case v.DOWN:return this.moveHighlight(a.which===
v.UP?-1:1),s(a),void 0;case v.ENTER:return this.selectHighlighted(),s(a),void 0;case v.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case v.ESC:return this.cancel(a),s(a),void 0}}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==v.TAB&&!v.isControl(a)&&!v.isFunctionKey(a)&&a.which!==
v.ESC)return!1===this.opts.openOnEnter&&a.which===v.ENTER?(s(a),void 0):a.which==v.DOWN||a.which==v.UP||a.which==v.ENTER&&this.opts.openOnEnter?a.altKey||a.ctrlKey||a.shiftKey||a.metaKey?void 0:(this.open(),s(a),void 0):a.which==v.DELETE||a.which==v.BACKSPACE?(this.opts.allowClear&&this.clear(),s(a),void 0):void 0}));k(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&!(a.stopPropagation(),this.opened())&&this.open()}));a.on("mousedown touchstart",
"abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown touchstart",this.bind(function(c){f(a);this.container.hasClass("select2-container-active")||this.opts.element.trigger(b.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();s(c)}));d.on("mousedown touchstart",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){s(a)}));
this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(b.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(b.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(b.Event("select2-focus"));
this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var c=this.selection.data("select2-data");if(c){var d=b.Event("select2-clearing");if(!(this.opts.element.trigger(d),d.isDefaultPrevented()))d=this.getPlaceholderOption(),this.opts.element.val(d?d.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",
val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==c&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(b,a.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()?(a=this.getPlaceholderOption())!==
c&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===c||null===this.opts.element.val():!1},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in a&&(a.initSelection=a.initSelection||function(c,d){var f=c.val(),e=null;a.query({matcher:function(b,c,d){b=
g(f,a.id(d));return b&&(e=d),b},callback:b.isFunction(d)?function(){d(e)}:b.noop})}),a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===c?c:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&a!==c&&!(this.select&&this.getPlaceholderOption()===c)&&(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},
postprocessResults:function(a,b,c){var d=0,f=this;if(this.findHighlightableChoices().each2(function(a,b){return g(f.id(b.data("select2-data")),f.opts.element.val())?(d=a,!1):void 0}),!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0)),!0===b)b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(D(a.results)>=b)},showSearch:function(a){this.showSearchInput!==a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",
!a),b(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val());this.close();b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus();g(c,this.id(a))||this.triggerChange({added:a,
removed:d})}},updateSelection:function(a){var b,d=this.selection.find(".select2-chosen");this.selection.data("select2-data",a);d.empty();null!==a&&(b=this.opts.formatSelection(a,d,this.opts.escapeMarkup));b!==c&&d.append(b);a=this.opts.formatSelectionCssClass(a,d);a!==c&&d.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==c&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,d=null,f=this,g=this.data();if(0===arguments.length)return this.opts.element.val();
if(a=arguments[0],1<arguments.length&&(b=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=f.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),b&&this.triggerChange({added:d,removed:g});else{if(!a&&0!==a)return this.clear(b),void 0;if(this.opts.initSelection===c)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){f.opts.element.val(a?
f.id(a):"");f.updateSelection(a);f.setPlaceholder();b&&f.triggerChange({added:a,removed:g})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,d=!1;return 0===arguments.length?(b=this.selection.data("select2-data"),b==c&&(b=null),b):(1<arguments.length&&(d=arguments[1]),a?(b=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:b})):this.clear(d),void 0)}});N=z(F,{createContainer:function(){return b(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <label for='' class='select2-offscreen'></label>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))});b(d)}:"data"in a&&(a.initSelection=a.initSelection||function(c,f){var e=d(c.val(),a.separator),h=[];a.query({matcher:function(c,d,f){c=b.grep(e,function(b){return g(b,a.id(f))}).length;return c&&h.push(f),
c},callback:b.isFunction(f)?function(){for(var b=[],c=0;c<e.length;c++)for(var d=e[c],k=0;k<h.length;k++){var m=h[k];if(g(d,a.id(m))){b.push(m);h.splice(k,1);break}}f(b)}:b.noop})}),a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",
a)))},destroy:function(){b("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var c=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){c.search[0].focus();c.selectChoice(b(this))});this.search.attr("id","s2id_autogen"+O());this.search.prev().text(b("label[for='"+
this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(c){var d,f;if(this.isInterfaceEnabled()){++this.keydowns;var g=a.find(".select2-search-choice-focus"),e=g.prev(".select2-search-choice:not(.select2-locked)"),h=g.next(".select2-search-choice:not(.select2-locked)");
d=this.search;d=b(d)[0];var k=0;f=0;"selectionStart"in d?(k=d.selectionStart,f=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),f=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-f);d=k;if(g.length&&(c.which==v.LEFT||c.which==v.RIGHT||c.which==v.BACKSPACE||c.which==v.DELETE||c.which==v.ENTER))return f=g,c.which==v.LEFT&&e.length?f=e:c.which==v.RIGHT?f=h.length?h:null:c.which===v.BACKSPACE?this.unselect(g.first())&&
(this.search.width(10),f=e.length?e:h):c.which==v.DELETE?this.unselect(g.first())&&(this.search.width(10),f=h.length?h:null):c.which==v.ENTER&&(f=null),this.selectChoice(f),s(c),f&&f.length||this.open(),void 0;if((c.which===v.BACKSPACE&&1==this.keydowns||c.which==v.LEFT)&&0==d&&!f)return this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),s(c),void 0;if(this.selectChoice(null),this.opened())switch(c.which){case v.UP:case v.DOWN:return this.moveHighlight(c.which===v.UP?
-1:1),s(c),void 0;case v.ENTER:return this.selectHighlighted(),s(c),void 0;case v.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case v.ESC:return this.cancel(c),s(c),void 0}if(c.which!==v.TAB&&(!v.isControl(c)&&!v.isFunctionKey(c)&&c.which!==v.BACKSPACE&&c.which!==v.ESC)&&!(c.which===v.ENTER&&(!1===this.opts.openOnEnter||c.altKey||c.ctrlKey||c.shiftKey||c.metaKey)))this.open(),(c.which===v.PAGE_UP||c.which===v.PAGE_DOWN)&&s(c),c.which===v.ENTER&&s(c)}}));this.search.on("keyup",
this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(b.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&(0<b(a.target).closest(".select2-search-choice").length||(this.selectChoice(null),
this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(b.Event("select2-focus")),this.open(),this.focusSearch(),a.preventDefault()))}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(b.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));
this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==c&&
null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();a!==c&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();
this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();""===this.search.val()&&this.nextSearchTerm!=c&&(this.search.val(this.nextSearchTerm),this.search.select());this.updateResults(!0);this.search.focus();this.opts.element.trigger(b.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var c=
[],d=[],f=this;b(a).each(function(){0>e(f.id(this),c)&&(c.push(f.id(this)),d.push(this))});a=d;this.selection.find(".select2-search-choice").remove();b(a).each(function(){f.addSelectedChoice(this)});f.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&a!=c&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",
val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=c&&(this.search.val(this.nextSearchTerm),
this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),b&&b.noFocus||this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var d,f=!a.locked,g=b("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),e=b("<li class='select2-search-choice select2-locked'><div></div></li>"),g=f?g:e,e=this.id(a),h=this.getVal();
d=this.opts.formatSelection(a,g.find("div"),this.opts.escapeMarkup);d!=c&&g.find("div").replaceWith("<div>"+d+"</div>");d=this.opts.formatSelectionCssClass(a,g.find("div"));d!=c&&g.addClass(d);f&&g.find(".select2-search-choice-close").on("mousedown",s).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(this.unselect(b(a.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),s(a),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&
(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));g.data("select2-data",a);g.insertBefore(this.searchContainer);h.push(e);this.setVal(h)},unselect:function(a){var c,d,f=this.getVal();if(a=a.closest(".select2-search-choice"),0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){d=b.Event("select2-removing");if(d.val=this.id(c),d.choice=c,this.opts.element.trigger(d),d.isDefaultPrevented())return!1;
for(;0<=(d=e(this.id(c),f));)f.splice(d,1),this.setVal(f),this.select&&this.postprocessResults();return a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}),!0}},postprocessResults:function(a,b,c){var d=this.getVal();b=this.results.find(".select2-result");var f=this.results.find(".select2-result-with-children"),g=this;b.each2(function(a,b){var c=g.id(b.data("select2-data"));0<=e(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});
f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&g.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&C(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+E(g.opts.formatNoMatches,g.search.val())+
"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,c,d,f,g=this.search.outerWidth(!1)-this.search.width();a=this.search;R||(d=a[0].currentStyle||window.getComputedStyle(a[0],null),R=b(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:d.fontSize,fontFamily:d.fontFamily,fontStyle:d.fontStyle,fontWeight:d.fontWeight,letterSpacing:d.letterSpacing,
textTransform:d.textTransform,whiteSpace:"nowrap"}),R.attr("class","select2-sizer"),b("body").append(R));a=(R.text(a.val()),R.width())+10;c=this.search.offset().left;d=this.selection.width();f=this.selection.offset().left;c=d-(c-f)-g;a>c&&(c=d-g);40>c&&(c=d-g);0>=c&&(c=a);this.search.width(Math.floor(c))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),d(a,this.opts.separator))},setVal:function(a){var c;this.select?this.select.val(a):(c=[],
b(a).each(function(){0>e(this,c)&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){b=b.slice(0);a=a.slice(0);for(var c=0;c<b.length;c++)for(var d=0;d<a.length;d++)g(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,d){var f,g=this;if(0===arguments.length)return this.getVal();if(f=this.data(),f.length||(f=[]),!a&&0!==a)return this.opts.element.val(""),this.updateSelection([]),
this.clearSearch(),d&&this.triggerChange({added:this.data(),removed:f}),void 0;if(this.setVal(a),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(f,this.data()));else{if(this.opts.initSelection===c)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(a){var c=b.map(a,g.id);g.setVal(c);g.updateSelection(a);g.clearSearch();d&&g.triggerChange(g.buildChangeDetails(f,
g.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],c=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(c.opts.id(b(this).data("select2-data")))});this.setVal(a);
this.triggerChange()},data:function(a,c){var d,f,g=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return b(this).data("select2-data")}).get():(f=this.data(),a||(a=[]),d=b.map(a,function(a){return g.opts.id(a)}),this.setVal(d),this.updateSelection(a),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(f,this.data())),void 0)}});b.fn.select2=function(){var a,d,f,g,h,k=Array.prototype.slice.call(arguments,0),m="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),
q=["opened","isFocused","container","dropdown"],l=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===k.length||"object"==typeof k[0])a=0===k.length?{}:b.extend({},k[0]),a.element=b(this),"select"===a.element.get(0).tagName.toLowerCase()?h=a.element.prop("multiple"):(h=a.multiple||!1,"tags"in a&&(a.multiple=h=!0)),d=h?new window.Select2["class"].multi:new window.Select2["class"].single,d.init(a);else{if("string"!=typeof k[0])throw"Invalid arguments to select2 plugin: "+k;
if(0>e(k[0],m))throw"Unknown method: "+k[0];if(!(g=c,d=b(this).data("select2"),d===c))if(f=k[0],"container"===f?g=d.container:"dropdown"===f?g=d.dropdown:(p[f]&&(f=p[f]),g=d[f].apply(d,k.slice(1))),0<=e(k[0],q)||e(k[0],l)&&1==k.length)return!1}}),g===c?this:g};b.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];return u(a.text,c.term,b,d),b.join("")},formatSelection:function(a,
b,d){return a?d(a.text):c},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return c},formatMatches:function(a){return a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+
(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==c?null:a.id},matcher:function(b,c){return 0<=a(""+c).toUpperCase().indexOf(a(""+b).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:y,blurOnChange:!1,
selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return c},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){return 0>a.opts.minimumResultsForSearch?!1:!0}};b.fn.select2.ajaxDefaults={transport:b.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:x,local:w,tags:B},util:{debounce:p,markMatch:u,escapeMarkup:y,stripDiacritics:a},"class":{"abstract":F,single:G,
multi:N}}}})(jQuery);var TINY=TINY||{},T$=T$||function(b){return document.getElementById(b)},T$$$=T$$$||function(){return document.all?1:0};
TINY.editor=function(){function b(a,b){this.n=a;window[a]=this;this.t=T$(b.id);this.obj=b;this.xhtml=b.xhtml;var h=document.createElement("div"),g=document.createElement("div"),d=document.createElement("div"),k=b.controls.length,n=0;this.i=document.createElement("iframe");this.i.width=b.width||"500";this.i.height=b.height||"250";this.ie=T$$$();d.className=b.rowclass||"tinyeditor-header";h.className=b.cssclass||"tinyeditor";h.style.width=this.i.width+"px";h.appendChild(d);for(n;n<k;n++){var p=b.controls[n];
if("n"==p)d=document.createElement("div"),d.className=b.rowclass||"tinyeditor-header",h.appendChild(d);else if("|"==p){var l=document.createElement("div");l.className=b.dividerclass||"tinyeditor-divider";d.appendChild(l)}else if("font"==p){var p=document.createElement("select"),q=b.fonts||["Verdana","Arial","Georgia"],m=q.length,l=0;p.className="tinyeditor-font";p.onchange=new Function(this.n+'.ddaction(this, "fontname")');p.options[0]=new Option("Font","");for(l;l<m;l++){var s=q[l];p.options[l+1]=
new Option(s,s)}d.appendChild(p)}else if("size"==p){p=document.createElement("select");m=b.sizes||[1,2,3,4,5,6,7];q=m.length;l=0;p.className="tinyeditor-size";p.onchange=new Function(this.n+'.ddaction(this, "fontsize")');for(l;l<q;l++)s=m[l],p.options[l]=new Option(s,s);d.appendChild(p)}else if("style"==p){p=document.createElement("select");m=b.styles||[["Style",""],["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6",
"<h6>"]];q=m.length;l=0;p.className="tinyeditor-style";p.onchange=new Function(this.n+'.ddaction(this, "formatblock")');for(l;l<q;l++)s=m[l],p.options[l]=new Option(s[0],s[1]);d.appendChild(p)}else c[p]&&(q=document.createElement("div"),l=c[p],s=l[2],m=l[0]*f,q.className=b.controlclass,q.unselectable="on",q.style.backgroundPosition="0px "+m+"px",q.title=l[1],l="a"==s?'.action("'+l[3]+'", 0, '+(l[4]||0)+")":'.insert("'+l[4]+'", "'+l[5]+'", "'+l[3]+'")',q.onmousedown=new Function(this.n+("print"==p?
".print()":l)),q.onmouseover=new Function(this.n+".hover(this, "+m+", 1)"),q.onmouseout=new Function(this.n+".hover(this, "+m+", 0)"),d.appendChild(q),this.ie&&(q.unselectable="on"))}this.t.parentNode.insertBefore(h,this.t);this.t.style.width=this.i.width+"px";g.appendChild(this.t);g.appendChild(this.i);h.appendChild(g);this.t.style.display="none";b.footer&&(g=document.createElement("div"),g.className=b.footerclass||"tinyeditor-footer",b.toggle&&(d=b.toggle,k=document.createElement("div"),k.className=
d.cssclass||"toggle",k.innerHTML=b.toggletext||"source",k.onclick=new Function(this.n+".toggle(0, this);return false"),g.appendChild(k)),b.resize&&(d=b.resize,k=document.createElement("div"),k.className=d.cssclass||"resize",k.onmousedown=new Function("event",this.n+".resize(event);return false"),k.onselectstart=function(){return!1},g.appendChild(k)),h.appendChild(g));this.e=this.i.contentWindow.document;this.e.open();h="<html><head>";g=b.bodyid?' id="'+b.bodyid+'"':"";b.cssfile&&(h+='<link rel="stylesheet" href="'+
b.cssfile+'" />');b.css&&(h+='<style type="text/css">'+b.css+"</style>");h+="</head><body"+g+' contenteditable="true">'+(b.content||this.t.value);this.e.write(h+"</body></html>");this.e.close();this.e.designMode="On";this.d=1;if(this.xhtml)try{this.e.execCommand("styleWithCSS",0,0)}catch(r){try{this.e.execCommand("useCSS",0,1)}catch(u){}}}var c=[],f=-30;c.bold=[4,"Bold","a","bold"];c.italic=[5,"Italic","a","italic"];c.underline=[6,"Underline","a","underline"];c.strikethrough=[7,"Strikethrough","a",
"strikethrough"];c.subscript=[8,"Subscript","a","subscript"];c.superscript=[9,"Superscript","a","superscript"];c.orderedlist=[10,"Insert Ordered List","a","insertorderedlist"];c.unorderedlist=[11,"Insert Unordered List","a","insertunorderedlist"];c.outdent=[12,"Outdent","a","outdent"];c.indent=[13,"Indent","a","indent"];c.leftalign=[14,"Left Align","a","justifyleft"];c.centeralign=[15,"Center Align","a","justifycenter"];c.rightalign=[16,"Right Align","a","justifyright"];c.blockjustify=[17,"Block Justify",
"a","justifyfull"];c.undo=[18,"Undo","a","undo"];c.redo=[19,"Redo","a","redo"];c.image=[20,"Insert Image","i","insertimage","Enter Image URL:","http://"];c.hr=[21,"Insert Horizontal Rule","a","inserthorizontalrule"];c.link=[22,"Insert Hyperlink","i","createlink","Enter URL:","http://"];c.unlink=[23,"Remove Hyperlink","a","unlink"];c.unformat=[24,"Remove Formatting","a","removeformat"];c.print=[25,"Print","a","print"];b.prototype.print=function(){this.i.contentWindow.print()};b.prototype.hover=function(a,
b,c){this.getSelection();a.style.backgroundPosition=(c?"34px ":"0px ")+b+"px"};b.prototype.getSelection=function(){this.ie&&this.e.getSelection&&(this.sel=this.e.getSelection(),this.sel.getRangeAt&&this.sel.rangeCount&&(this.range=this.sel.getRangeAt(0)))};b.prototype.restoreSelection=function(){this.range&&this.ie&&this.e.getSelection&&(this.sel=this.e.getSelection(),this.sel.removeAllRanges(),this.sel.addRange(this.range))};b.prototype.ddaction=function(a,b){this.action(b,a.options[a.selectedIndex].value)};
b.prototype.action=function(a,b,c){c&&!this.ie?alert("Your browser does not support this function."):(this.restoreSelection(),this.e.execCommand(a,0,b||null))};b.prototype.insert=function(a,b,c){a=prompt(a,b);null!=a&&""!=a&&this.e.execCommand(c,0,a)};b.prototype.setfont=function(){this.restoreSelection();execCommand("formatblock",0,hType)};b.prototype.resize=function(a){this.mv&&this.freeze();this.i.bcs=TINY.cursor.top(a);this.mv=new Function("event",this.n+".move(event)");this.sr=new Function(this.n+
".freeze()");this.ie?(document.attachEvent("onmousemove",this.mv),document.attachEvent("onmouseup",this.sr)):(document.addEventListener("mousemove",this.mv,1),document.addEventListener("mouseup",this.sr,1))};b.prototype.move=function(a){a=TINY.cursor.top(a);this.i.height=parseInt(this.i.height)+a-this.i.bcs;this.i.bcs=a};b.prototype.freeze=function(){this.ie?(document.detachEvent("onmousemove",this.mv),document.detachEvent("onmouseup",this.sr)):(document.removeEventListener("mousemove",this.mv,1),
document.removeEventListener("mouseup",this.sr,1))};b.prototype.toggle=function(a,b){if(this.d)c=this.e.body.innerHTML,this.xhtml&&(c=c.replace(/<span class="apple-style-span">(.*)<\/span>/gi,"$1"),c=c.replace(/ class="apple-style-span"/gi,""),c=c.replace(/<span style="">/gi,""),c=c.replace(/<br>/gi,"<br />"),c=c.replace(/<br ?\/?>$/gi,""),c=c.replace(/^<br ?\/?>/gi,""),c=c.replace(/(<img [^>]+[^\/])>/gi,"$1 />"),c=c.replace(/<b\b[^>]*>(.*?)<\/b[^>]*>/gi,"<strong>$1</strong>"),c=c.replace(/<i\b[^>]*>(.*?)<\/i[^>]*>/gi,
"<em>$1</em>"),c=c.replace(/<u\b[^>]*>(.*?)<\/u[^>]*>/gi,'<span style="text-decoration:underline">$1</span>'),c=c.replace(/<(b|strong|em|i|u) style="font-weight:normal;?">(.*)<\/(b|strong|em|i|u)>/gi,"$2"),c=c.replace(/<(b|strong|em|i|u) style="(.*)">(.*)<\/(b|strong|em|i|u)>/gi,'<span style="$2"><$4>$3</$4></span>'),c=c.replace(/<span style="font-weight:normal;?">(.*)<\/span>/gi,"$1"),c=c.replace(/<span style="font-weight:bold;?">(.*)<\/span>/gi,"<strong>$1</strong>"),c=c.replace(/<span style="font-style:italic;?">(.*)<\/span>/gi,
"<em>$1</em>"),c=c.replace(/<span style="font-weight:bold;?">(.*)<\/span>|<b\b[^>]*>(.*?)<\/b[^>]*>/gi,"<strong>$1</strong>")),b&&(b.innerHTML=this.obj.toggletext||"wysiwyg"),this.t.value=c,a||(this.t.style.height=this.i.height+"px",this.i.style.display="none",this.t.style.display="block",this.d=0);else{var c=this.t.value;b&&(b.innerHTML=this.obj.toggletext||"source");this.xhtml&&!this.ie&&(c=c.replace(/<strong>(.*)<\/strong>/gi,'<span style="font-weight:bold;">$1</span>'),c=c.replace(/<em>(.*)<\/em>/gi,
'<span style="font-weight:italic;">$1</span>'));this.e.body.innerHTML=c;this.t.style.display="none";this.i.style.display="block";this.d=1}};b.prototype.post=function(){this.d&&this.toggle(1)};return{edit:b}}();TINY.cursor=function(){return{top:function(b){return T$$$()?window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop:b.clientY+window.scrollY}}}();
+function(b){var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};c.prototype.init=function(a,c,f){this.enabled=!0;this.type=a;this.$element=b(c);this.options=this.getOptions(f);a=this.options.trigger.split(" ");
for(c=a.length;c--;)if(f=a[c],"click"==f)this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this));else if("manual"!=f){var g="hover"==f?"mouseleave":"blur";this.$element.on(("hover"==f?"mouseenter":"focus")+"."+this.type,this.options.selector,b.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,b.proxy(this.leave,this))}this.options.selector?this._options=b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};c.prototype.getDefaults=
function(){return c.DEFAULTS};c.prototype.getOptions=function(a){return a=b.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a};c.prototype.getDelegateOptions=function(){var a={},c=this.getDefaults();return this._options&&b.each(this._options,function(b,f){c[b]!=f&&(a[b]=f)}),a};c.prototype.enter=function(a){var c=a instanceof this.constructor?a:b(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
clearTimeout(c.timeout);c.hoverState="in";if(!c.options.delay||!c.options.delay.show)return c.show();c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)};c.prototype.leave=function(a){var c=a instanceof this.constructor?a:b(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(c.timeout);c.hoverState="out";if(!c.options.delay||!c.options.delay.hide)return c.hide();c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)};
c.prototype.show=function(){var a=b.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(a),!a.isDefaultPrevented())){var c=this.tip();this.setContent();this.options.animation&&c.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(a);g&&(a=a.replace(f,"")||"top");c.detach().css({top:0,left:0,display:"block"}).addClass(a);this.options.container?c.appendTo(this.options.container):
c.insertAfter(this.$element);var f=this.getPosition(),d=c[0].offsetWidth,k=c[0].offsetHeight;if(g){var n=this.$element.parent(),g=a,p=document.documentElement.scrollTop||document.body.scrollTop,l="body"==this.options.container?window.innerWidth:n.outerWidth(),q="body"==this.options.container?window.innerHeight:n.outerHeight(),n="body"==this.options.container?0:n.offset().left,a="bottom"==a&&f.top+f.height+k-p>q?"top":"top"==a&&0>f.top-p-k?"bottom":"right"==a&&f.right+d>l?"left":"left"==a&&f.left-
d<n?"right":a;c.removeClass(g).addClass(a)}c=this.getCalculatedOffset(a,f,d,k);this.applyPlacement(c,a);this.$element.trigger("shown.bs."+this.type)}};c.prototype.applyPlacement=function(a,b){var c,f=this.tip(),d=f[0].offsetWidth,k=f[0].offsetHeight,n=parseInt(f.css("margin-top"),10),p=parseInt(f.css("margin-left"),10);isNaN(n)&&(n=0);isNaN(p)&&(p=0);a.top+=n;a.left+=p;f.offset(a).addClass("in");n=f[0].offsetWidth;p=f[0].offsetHeight;"top"==b&&p!=k&&(c=!0,a.top=a.top+k-p);/bottom|top/.test(b)?(k=
0,0>a.left&&(k=-2*a.left,a.left=0,f.offset(a),n=f[0].offsetWidth),this.replaceArrow(k-d+n,n,"left")):this.replaceArrow(p-k,p,"top");c&&f.offset(a)};c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")};c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};c.prototype.hide=function(){function a(){"in"!=c.hoverState&&f.detach()}var c=this,f=this.tip(),
g=b.Event("hide.bs."+this.type);this.$element.trigger(g);if(!g.isDefaultPrevented())return f.removeClass("in"),b.support.transition&&this.$tip.hasClass("fade")?f.one(b.support.transition.end,a).emulateTransitionEnd(150):a(),this.$element.trigger("hidden.bs."+this.type),this};c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};c.prototype.hasContent=function(){return this.getTitle()};
c.prototype.getPosition=function(){var a=this.$element[0];return b.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},this.$element.offset())};c.prototype.getCalculatedOffset=function(a,b,c,f){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-f,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-f/2,left:b.left-c}:{top:b.top+b.height/2-f/2,left:b.left+b.width}};c.prototype.getTitle=function(){var a,
b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title),a};c.prototype.tip=function(){return this.$tip=this.$tip||b(this.options.template)};c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};c.prototype.enable=function(){this.enabled=!0};c.prototype.disable=function(){this.enabled=
!1};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(a){a=a?b(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;a.tip().hasClass("in")?a.leave(a):a.enter(a)};c.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var f=b.fn.tooltip;b.fn.tooltip=function(a){return this.each(function(){var f=b(this),h=f.data("bs.tooltip"),g="object"==typeof a&&a;h||f.data("bs.tooltip",h=new c(this,
g));"string"==typeof a&&h[a]()})};b.fn.tooltip.Constructor=c;b.fn.tooltip.noConflict=function(){return b.fn.tooltip=f,this}}(window.jQuery);(function(){window.DEBUG=!1}).call(this);this.Templates=this.Templates||{};this.Templates.AddEventLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="event-step event-step_name" id="event-name-region"></div>\n<div class="event-step event-step_what" id="event-what-region"></div>\n'});
this.Templates.EventStepName=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=f.helperMissing,g=this.escapeExpression;b='<div class="popupwin__title clearfix">\n  <div class="steps">\n    <ul class="steps__list steps__list_event">\n      <li class="steps__item active">1</li>\n      <li class="steps__item">2</li>\n    </ul>\n  </div>\n</div>\n<div class="popupwin__container clearfix">\n  <div class="form">\n    <form action="/">\n      <div class="form__field form__field_name">\n        <label>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f:</label>\n        <input type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0414\u043e\u043c\u0438\u043a \u041f\u0435\u0442\u0440\u0430" value=';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'>\n        <span class="star">*</span>\n        \x3c!--\n        <div class="already-added hide">\n          <div class="already-added__title">\u0423\u0436\u0435 \u0435\u0441\u0442\u044c!</div>\n          <ul class="already-added__list">\n            <li class="already-added__item">\n              <a href="#?" class="already-added__link">\n                <img src="media/uploads/added-1.png" alt="" class="img">\n                <span class="name">\u0421\u043e\u0444\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440</span>\n                <span class="city">\u0433.\u0412\u043e\u043b\u043e\u0433\u0434\u0430</span>\n              </a>\n            </li>\n            <li class="already-added__item active">\n              <a href="#?" class="already-added__link">\n                <img src="media/uploads/added-2.png" alt="" class="img">\n                <span class="name">\u0421\u043e\u0444\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440</span>\n                <span class="city">\u0433.\u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434</span>\n              </a>\n            </li>\n            <li class="already-added__item">\n              <a href="#?" class="already-added__link">\n                <img src="media/uploads/added-1.png" alt="" class="img">\n                <span class="name">\u0421\u043e\u0444\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440</span>\n                <span class="city">\u0433.\u041a\u0438\u0435\u0432</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n        --\x3e\n      </div>\n      <div class="form__field form__field_date clearfix">\n        <label>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f:</label>\n        <div class="item">\n          <input value="';
if((a=f["if"].call(c,c&&c.dt_start,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;e={hash:{format:"DD.MM.YYYY"},data:b};return g((c=f.dateFormat||a&&a.dateFormat,c?c.call(a,a&&a.dt_start,e):h.call(a,"dateFormat",a&&a.dt_start,e)))},e),data:e}))||0===a)b+=a;b+='" id="dt_start" type="text" class="js-datapicker" placeholder="\u0434\u0434.\u043c\u043c.\u0433\u0433\u0433\u0433">\n        </div> &mdash;\n        <div class="item">\n          <input value="';if((a=f["if"].call(c,c&&c.dt_end,
{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;e={hash:{format:"DD.MM.YYYY"},data:b};return g((c=f.dateFormat||a&&a.dateFormat,c?c.call(a,a&&a.dt_end,e):h.call(a,"dateFormat",a&&a.dt_end,e)))},e),data:e}))||0===a)b+=a;b+='" id="dt_end" type="text" class="js-datapicker" placeholder="\u0434\u0434.\u043c\u043c.\u0433\u0433\u0433\u0433">\n        </div>\n      </div>\n      <div class="form__field form__field_description">\n        <label>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430:</label>\n        <textarea placeholder="\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u044d\u0442\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0442\u0430\u043a,\u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0445\u043e\u0442\u0435\u043b\u043e\u0441\u044c \u0432 \u043d\u0435\u043c \u043f\u043e\u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c">';
(a=f.description)?a=a.call(c,{hash:{},data:e}):(a=c&&c.description,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=g(a)+'</textarea>\n      </div>\n    </form>\n  </div>\n  <div class="photo-upload">\n    <form action="/photos/add" class="dropzone clearfix" id="place-dropzone">\n      <div class="fallback">\n        <input name="file" type="file" multiple />\n      </div>\n    </form>\n  </div>\n</div>\n<div class="popupwin__footer clearfix">\n  <a href="#?" class="btn btn_color_blue right js-next">\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433</a>\n</div>\n'});
this.Templates.EventStepWhat=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    <div class="steps">\n      <ul class="steps__list steps__list_event">\n        <li class="steps__item active">1</li>\n        <li class="steps__item active">2</li>\n      </ul>\n    </div>\n  </div>\n  <div class="popupwin__container clearfix">\n    <div class="field field_tags">\n      <div class="field__title">\n        \u041c\u043e\u0436\u0435\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0438\u043f \u043c\u0435\u0441\u0442\u0430:\n      </div>\n      <div class="select-type"></div>\n      <ul class="tags">\n        ';
if((c=f.each.call(c,c&&c.additionalLabels,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n        <li class="tags__item">\n          <a href="#" class="tags__link" title="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'"\n            data-parent="';(e=f.parent)?e=e.call(a,{hash:{},data:b}):(e=a&&a.parent,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" data-id="';(e=f.id)?e=e.call(a,{hash:{},
data:b}):(e=a&&a.id,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" data-style="';(e=f.style)?e=e.call(a,{hash:{},data:b}):(e=a&&a.style,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'">';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=h(e)+"</a>\n        </li>\n        "},e),data:e}))||0===c)b+=c;return b+'\n      </ul>\n    </div>\n    <div class="field">\n      <div class="field__title">\u0413\u0434\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442\u044c:</div>\n      <div class="map open map_popupwin mb10">\n        <div class="map__container" id="map-event-add"></div>\n      </div>\n      <div class="field__input-place">\n        <input class="select-type" type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438\u043b\u0438 \u0433\u043e\u0440\u043e\u0434, \u0443\u043b\u0438\u0446\u0443, \u0434\u043e\u043c">\n      </div>\n    </div>\n  </div>\n  <div class="popupwin__footer clearfix">\n    <a href="#" class="btn btn_color_green left js-back">\u041d\u0430\u0437\u0430\u0434</a>\n    <button class="btn btn_color_blue right js-next">\u0413\u043e\u0442\u043e\u0432\u043e</button>\n  </div>\n</div>\n\n<div id="points-region"></div>\n'});
this.Templates.PointList=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n      <li class="item">\n        <a href="/point/';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'" class="link">\n          ';if((e=f["if"].call(a,a&&a.imgs,{hash:{},inverse:p.program(5,d,b),fn:p.program(3,g,b),data:b}))||0===e)c+=e;c+='\n          <span data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===k?e.call(a,{hash:{},data:b}):
e);return c+=n(e)+'" class="icon icon_delete sprite-delete-added-photo js-delete"></span>\n        </a>\n      </li>\n      '}function g(a,b){var c,d;c=""+('\n          <img src="'+n((d=(d=(d=a&&a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail104x104),typeof d===k?d.apply(a):d))+'" alt="');(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===k?d.call(a,{hash:{},data:b}):d);c+=n(d)+" ";(d=f.address)?d=d.call(a,{hash:{},data:b}):(d=a&&a.address,d=typeof d===k?d.call(a,{hash:{},
data:b}):d);return c+=n(d)+'" class="img">\n          '}function d(a,b){var c,d;c='\n          <img src="/static/images/place-unknown.png" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===k?d.call(a,{hash:{},data:b}):d);c+=n(d)+" ";(d=f.address)?d=d.call(a,{hash:{},data:b}):(d=a&&a.address,d=typeof d===k?d.call(a,{hash:{},data:b}):d);return c+=n(d)+'" class="img">\n          '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var k="function",n=this.escapeExpression,
p=this;if((c=f["if"].call(c,c&&c.points,{hash:{},inverse:p.noop,fn:p.program(1,function(a,b){var c,d;c='\n<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    <div class="steps__title">\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430</div>\n  </div>\n  <div class="already-added-photos">\n    <ul class="list clearfix">\n      ';if((d=f.each.call(a,a&&a.points,{hash:{},inverse:p.noop,fn:p.program(2,h,b),data:b}))||0===
d)c+=d;return c+"\n    </ul>\n  </div>\n</div>\n"},e),data:e}))||0===c)b+=c;return b+"\n"});
this.Templates.PlaceToTripAside=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e,h;c='\n    <li data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===m?e.call(a,{hash:{},data:b}):e);c+=s(e)+'" data-type="';(e=f.type_of_item)?e=e.call(a,{hash:{},data:b}):(e=a&&a.type_of_item,e=typeof e===m?e.call(a,{hash:{},data:b}):e);c+=s(e)+'" class="item">\n      <span class="drag"></span>\n      <span class="number">';h={hash:{},inverse:u.noop,fn:u.program(3,g,b),data:b};if((h=
(e=f.plus||a&&a.plus,e?e.call(a,(e=b,null==e||!1===e?e:e.index),1,h):r.call(a,"plus",(e=b,null==e||!1===e?e:e.index),1,h)))||0===h)c+=h;c+='</span>\n      <img src="';if((h=f["if"].call(a,a&&a.imgs,{hash:{},inverse:u.program(7,k,b),fn:u.program(5,d,b),data:b}))||0===h)c+=h;c+='" alt="';(h=f.name)?h=h.call(a,{hash:{},data:b}):(h=a&&a.name,h=typeof h===m?h.call(a,{hash:{},data:b}):h);c+=s(h)+'" class="img">\n      <div class="text">\n        <span class="text__place">';(h=f.name)?h=h.call(a,{hash:{},
data:b}):(h=a&&a.name,h=typeof h===m?h.call(a,{hash:{},data:b}):h);c+=s(h)+"</span>\n        ";h={hash:{},inverse:u.noop,fn:u.program(9,n,b),data:b};if((h=(e=f.ifEquals||a&&a.ifEquals,e?e.call(a,a&&a.type_of_item,"point",h):r.call(a,"ifEquals",a&&a.type_of_item,"point",h)))||0===h)c+=h;c+="\n        ";h={hash:{},inverse:u.noop,fn:u.program(11,p,b),data:b};if((h=(e=f.ifEquals||a&&a.ifEquals,e?e.call(a,a&&a.type_of_item,"event",h):r.call(a,"ifEquals",a&&a.type_of_item,"event",h)))||0===h)c+=h;c+='\n      </div>\n      <a data-id="';
(h=f.id)?h=h.call(a,{hash:{},data:b}):(h=a&&a.id,h=typeof h===m?h.call(a,{hash:{},data:b}):h);return c+=s(h)+'" href="#" class="delete-item js-delete"></a>\n    </li>\n    '}function g(a,b){return""}function d(a,b){var c;return s((c=(c=(c=a&&a.imgs,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail104x104),typeof c===m?c.apply(a):c))}function k(a,b){return"/static/images/place-unknown.png"}function n(a,b){return'\n        <span class="text__type c-place">\u043c\u0435\u0441\u0442\u043e</span>\n        '}
function p(a,b){var c,d;c='\n        <span class="text__type c-place">\n          \u0441\u043e\u0431\u044b\u0442\u0438\u0435 ';if((d=f["if"].call(a,a&&a.dt_start,{hash:{},inverse:u.noop,fn:u.program(12,l,b),data:b}))||0===d)c+=d;if((d=f["if"].call(a,a&&a.dt_end,{hash:{},inverse:u.noop,fn:u.program(14,q,b),data:b}))||0===d)c+=d;return c+"\n        </span>\n        "}function l(a,b){var c,d;c={hash:{format:"D.MM"},data:b};return c=""+(s((d=f.dateFormat||a&&a.dateFormat,d?d.call(a,a&&a.dt_start,c):r.call(a,
"dateFormat",a&&a.dt_start,c)))+"&mdash;")}function q(a,b){var c,d;d={hash:{format:"D.MM"},data:b};return s((c=f.dateFormat||a&&a.dateFormat,c?c.call(a,a&&a.dt_end,d):r.call(a,"dateFormat",a&&a.dt_end,d)))}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var m="function",s=this.escapeExpression,r=f.helperMissing,u=this;if((c=f["if"].call(c,c&&c.points,{hash:{},inverse:u.program(16,function(a,b){return'\n<div class="empty-sidebar box empty">\n  <div class="js-popupwin-add-trip">\n    <div class="box__img">\n    </div>\n    <div class="box__description" style="padding:100px 5px;">\n      <div class="name" style="text-align: center; font-size:20px; line-height:140%;">\u0414\u043e\u0431\u0430\u0432\u044c \u043c\u0435\u0441\u0442\u0430 \u0438&nbsp;\u0441\u043e\u0437\u0434\u0430\u0439 \u0441\u0432\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</div>\n    </div>\n  </div>\n</div>\n'},
e),fn:u.program(1,function(a,b){var c,d;c='\n<div class="route-list route-list_deleteable route-list_draggable mb20">\n  <div class="title">\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430</div>\n  <ul class="list">\n    ';if((d=f.each.call(a,a&&a.points,{hash:{},inverse:u.noop,fn:u.program(2,h,b),data:b}))||0===d)c+=d;return c+'\n  </ul>\n</div>\x3c!-- class="route-list" --\x3e\n<div class="trip-ctrls">\n  <button class="btn btn_color_blue btn_finish js-finish-adding">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</button>\n  <br>\n  <button href="#" class="btn btn_color_green btn_show_map js-show-map">\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u0443</button>\n</div>\n'},
e),data:e}))||0===c)b+=c;return b+"\n"});
this.Templates.PlaceToTripContent=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="popupwin__title clearfix">\n  <div class="steps">\n    <div class="steps__title">\n      <span class="title-place">\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0441\u0432\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</span>\n    </div>\n  </div>\n</div>\n\n<div class="route-search">\n  <input type="text" placeholder="\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043c\u0435\u0441\u0442\u0430\u043c \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c">\n</div>\n\n\x3c!--\n<div class="route-categories">\n  <ul class="categories">\n    ';if((c=
f.each.call(c,c&&c.tags,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n      <li class="categories__item">\n        <a href="#" class="categories__link sprite-filter-photo ';(e=f.style)?e=e.call(a,{hash:{},data:b}):(e=a&&a.style,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" data-toggle="tooltip" data-placement="bottom" title="';(e=
f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=h(e)+'"></a>\n      </li>\n    '},e),data:e}))||0===c)b+=c;return b+'\n    <li class="categories__item"><a href="#?" class="categories__link categories__link_type_all sprite-filter-all"></a></li>\n  </ul>\n</div>\n--\x3e\n\n<div class="map map_popupwin map_route">\n  <div class="map__container" id="map-route"></div>\n  <a href="#" class="map__open js-map-open">\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n  <a href="#" class="map__close sprite-close js-map-close"></a>\n</div>\n\n<div id="trip-grid-region"></div>\n'});
this.Templates.PlaceToTripLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="trip-add-place clearfix">\n  <div id="placetotrip-aside-region"></div>\n  <div id="placetotrip-content-region"></div>\n</div>\x3c!-- class="route-step route-step_place" --\x3e\n'});this.Templates.AddPointLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="place-step place-step_name" id="point-name-region"></div>\n<div class="place-step place-step_what" id="point-what-region"></div>\n<div class="place-step place-step_commerce" id="point-commers-region"></div>\n'});
this.Templates.PointStepCommers=Handlebars.template(function(b,c,f,a,e){function h(a,b){return'checked="checked"'}function g(a,b){return""}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var d,k=f.helperMissing,n=this.escapeExpression;b=""+('<div class="popupwin__title clearfix">\n  <div class="steps">\n    <ul class="steps__list steps__list_place">\n      <li class="steps__item active">1</li>\n      <li class="steps__item active">2</li>\n      <li class="steps__item active">3</li>\n    </ul>\n  </div>\n</div>\n<div class="popupwin__container clearfix">\n  <section class="toggle-list">\n    <div class="toggle-list__item">\n      <div class="toggle-list__title">\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</div>\n      <div class="toggle-list__body">\n      <div class="form">\n        <div class="field clearfix">\n          <div class="item item_add-cont">\n            <label>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</label>\n            <input name="phone" type="text" value="'+
n((d=(d=c&&c.additional,null==d||!1===d?d:d.phone),"function"===typeof d?d.apply(c):d))+'">\n          </div>\n          <div class="item item_add-cont">\n            <label>\u0413\u0440\u0443\u043f\u043f\u0430 vkontakte:</label>\n            <input name="vk" type="text" placeholder="vk.com/groupname" value="'+n((d=(d=c&&c.additional,null==d||!1===d?d:d.vk),"function"===typeof d?d.apply(c):d))+'">\n          </div>\n        </div>\n        <div class="field clearfix">\n          <div class="item item_add-cont">\n            <label>\u0412\u0435\u0431-\u0441\u0430\u0439\u0442:</label>\n            <input name="website" type="text" placeholder="example.com" value="'+
n((d=(d=c&&c.additional,null==d||!1===d?d:d.website),"function"===typeof d?d.apply(c):d))+'">\n          </div>\n          <div class="item item_add-cont">\n            <label>Twitter:</label>\n            <input name="twitter" type="text" placeholder="@twittername" value="'+n((d=(d=c&&c.additional,null==d||!1===d?d:d.twitter),"function"===typeof d?d.apply(c):d))+'">\n          </div>\n        </div>\n      </div>\n\n      </div>\n    </div>\n    <div class="toggle-list__item">\n      <div class="toggle-list__title">\u0412\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b</div>\n      <div class="toggle-list__body">\n        <section class="working-period clearfix">\n          <div class="working-period__choice">\n            <ul class="working-days">\n              <li class="working-days__item active" data-number="1">\u041f\u041d</li>\n              <li class="working-days__item active" data-number="2">\u0412\u0422</li>\n              <li class="working-days__item active" data-number="3">\u0421\u0420</li>\n              <li class="working-days__item active" data-number="4">\u0427\u0422</li>\n              <li class="working-days__item active" data-number="5">\u041f\u0422</li>\n              <li class="working-days__item" data-number="6">\u0421\u0411</li>\n              <li class="working-days__item" data-number="7">\u0412\u0421</li>\n            </ul>\n            <div class="working-time clearfix">\n              <input type="text" value="10:00" class="start-time">&nbsp;&nbsp;&mdash;&nbsp;&nbsp;<input type="text" value="18:00" class="end-time">\n              <a href="#" class="btn btn_color_green js-add-days">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</a>\n            </div>\n            <div class="note">\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043d\u0435\u0439</div>\n          </div>\n          <ul class="working-period__result">\n            ');
if((a=f.each.call(c,(d=c&&c.additional,null==d||!1===d?d:d.working_hours),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,d;c={hash:{},data:b};return c='\n              <li class="item">\n                '+(n((d=f.working_hours||a&&a.working_hours,d?d.call(a,a,c):k.call(a,"working_hours",a,c)))+'\n                <input type="hidden" name="working_hours" value="'+n("function"===typeof a?a.apply(a):a)+'">\n                <a href="#" class="delete js-delete"></a>\n              </li>\n            ')},
e),data:e}))||0===a)b+=a;b+='\n          </ul>\n        </section>\n      </div>\n    </div>\n    <div class="toggle-list__item">\n      <div class="toggle-list__title">\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438</div>\n      <div class="toggle-list__body">\n        <div class="form-detail">\n          <div class="field field_price clearfix">\n            <label>\u0426\u0435\u043d\u0430:</label>\n            <div class="input-wrap right">\n              \u043e\u0442 <input name="price_start" type="text" value="'+
n((d=(d=c&&c.additional,null==d||!1===d?d:d.price_start),"function"===typeof d?d.apply(c):d))+'">&nbsp;&nbsp;&nbsp;&nbsp;\n              \u0434\u043e <input name="price_end" type="text" value="'+n((d=(d=c&&c.additional,null==d||!1===d?d:d.price_end),"function"===typeof d?d.apply(c):d))+'">&nbsp;<span class="sprite-ruble-dark"></span>\n            </div>\n          </div>\n          <div class="field clearfix">\n            <label>\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f:</label>\n            <div class="input-wrap right">\n              <div class="select-quasi">\n                <div class="select-quasi__btn js-select-quasi">\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430</div>\n                <ul class="select-quasi__list">\n                  <li class="select-quasi__item">\n                    <label>\n                      <input name="services" value="\u0417\u0430\u0432\u0442\u0440\u0430\u043a" type="checkbox" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifContains||c&&c.ifContains,d?d.call(c,"\u0417\u0430\u0432\u0442\u0440\u0430\u043a",(d=c&&c.additional,null==d||!1===d?d:d.services),a):k.call(c,"ifContains","\u0417\u0430\u0432\u0442\u0440\u0430\u043a",(d=c&&c.additional,null==d||!1===d?d:d.services),a)))||0===a)b+=a;b+='>\n                      <span></span> \u0417\u0430\u0432\u0442\u0440\u0430\u043a\n                    </label>\n                  </li>\n                  <li class="select-quasi__item">\n                    <label>\n                      <input name="services" value="\u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u0430\u043d\u0447" type="checkbox" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifContains||c&&c.ifContains,d?d.call(c,"\u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u0430\u043d\u0447",(d=c&&c.additional,null==d||!1===d?d:d.services),a):k.call(c,"ifContains","\u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u0430\u043d\u0447",(d=c&&c.additional,null==d||!1===d?d:d.services),a)))||0===a)b+=a;b+='>\n                      <span></span> \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u0430\u043d\u0447\n                    </label>\n                  </li>\n                  <li class="select-quasi__item">\n                    <label>\n                      <input name="services" value="\u041b\u0438\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0430\u0447\u0438 \u0435\u0434\u044b" type="checkbox" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifContains||c&&c.ifContains,d?d.call(c,"\u041b\u0438\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0430\u0447\u0438 \u0435\u0434\u044b",(d=c&&c.additional,null==d||!1===d?d:d.services),a):k.call(c,"ifContains","\u041b\u0438\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0430\u0447\u0438 \u0435\u0434\u044b",(d=c&&c.additional,null==d||!1===d?d:d.services),a)))||0===a)b+=a;b+='>\n                      <span></span> \u041b\u0438\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0430\u0447\u0438 \u0435\u0434\u044b\n                    </label>\n                  </li>\n                  <li class="select-quasi__item">\n                    <label>\n                      <input name="services" value="\u0423\u0436\u0438\u043d" type="checkbox" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifContains||c&&c.ifContains,d?d.call(c,"\u0423\u0436\u0438\u043d",(d=c&&c.additional,null==d||!1===d?d:d.services),a):k.call(c,"ifContains","\u0423\u0436\u0438\u043d",(d=c&&c.additional,null==d||!1===d?d:d.services),a)))||0===a)b+=a;b+='>\n                      <span></span> \u0423\u0436\u0438\u043d\n                    </label>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div class="field field_sub clearfix">\n            <label>\u041a\u0440\u0435\u0434\u0438\u0442\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u044b:</label>\n            <div class="input-wrap input-wrap_radio right">\n              <label>\n                <input type="radio" name="credit_card" value="\u0414\u0430" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.credit_card),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.credit_card),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u0414\u0430\n              </label>\n              <label>\n                <input type="radio" name="credit_card" value="\u041d\u0435\u0442" ';a={hash:{},inverse:this.program(3,h,e),fn:this.program(5,
g,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.credit_card),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.credit_card),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u041d\u0435\u0442\n              </label>\n            </div>\n            <div class="input-wrap input-wrap_checkbox clear clearfix">\n              <label><input name="credit_card_type" value="Visa" type="checkbox"><span></span> Visa</label>\n              <label><input name="credit_card_type" value="MasterCard" type="checkbox"><span></span> MasterCard</label>\n              <label><input name="credit_card_type" value="American Express" type="checkbox"><span></span> American Express</label>\n              <label><input name="credit_card_type" value="Discover" type="checkbox"><span></span> Discover</label>\n            </div>\n          </div>\n          <div class="field clearfix">\n            <label>\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435:</label>\n            <div class="input-wrap input-wrap_radio right">\n              <label>\n                <input type="radio" name="booking" value="\u0414\u0430" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.booking),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.booking),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u0414\u0430\n              </label>\n              <label>\n                <input type="radio" name="booking" value="\u041d\u0435\u0442" ';a={hash:{},inverse:this.program(3,h,e),fn:this.program(5,
g,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.booking),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.booking),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u041d\u0435\u0442\n              </label>\n            </div>\n          </div>\n          <div class="field field_sub clearfix">\n            <label>WiFi:</label>\n            <div class="input-wrap input-wrap_radio right">\n              <label>\n                <input type="radio" name="wifi" value="\u0414\u0430" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.wifi),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.wifi),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u0414\u0430\n              </label>\n              <label>\n                <input type="radio" name="wifi" value="\u041d\u0435\u0442" ';a={hash:{},inverse:this.program(3,h,e),fn:this.program(5,g,e),
data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.wifi),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.wifi),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u041d\u0435\u0442\n              </label>\n            </div>\n            <div class="input-wrap input-wrap_checkbox clear clearfix">\n              <label><input name="wifi_type" value="\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439" type="checkbox"><span></span> \u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439</label>\n              <label><input name="wifi_type" value="\u041f\u043b\u0430\u0442\u043d\u044b\u0439" type="checkbox"><span></span> \u041f\u043b\u0430\u0442\u043d\u044b\u0439</label>\n            </div>\n          </div>\n          <div class="field clearfix">\n            <label>\u0423\u043b\u0438\u0447\u043d\u0430\u044f \u0432\u0435\u0440\u0430\u043d\u0434\u0430:</label>\n            <div class="input-wrap input-wrap_radio right">\n              <label>\n                <input type="radio" name="terrace" value="\u0414\u0430" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.terrace),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.terrace),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u0414\u0430\n              </label>\n              <label>\n                <input type="radio" name="terrace" value="\u041d\u0435\u0442" ';a={hash:{},inverse:this.program(3,h,e),fn:this.program(5,
g,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.terrace),"\u0414\u0410",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.terrace),"\u0414\u0410",a)))||0===a)b+=a;b+='>\n                <span></span>\u041d\u0435\u0442\n              </label>\n            </div>\n          </div>\n          <div class="field field_price clearfix">\n            <label>\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:</label>\n            <div class="input-wrap input-wrap_radio right">\n              <label>\n                <input type="radio" name="delivery" value="\u0414\u0430" ';
a={hash:{},inverse:this.noop,fn:this.program(3,h,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.delivery),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.delivery),"\u0414\u0430",a)))||0===a)b+=a;b+='>\n                <span></span>\u0414\u0430\n              </label>\n              <label>\n                <input type="radio" name="delivery" value="\u041d\u0435\u0442" ';a={hash:{},inverse:this.program(3,h,e),fn:this.program(5,
g,e),data:e};if((a=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.additional,null==d||!1===d?d:d.delivery),"\u0414\u0430",a):k.call(c,"ifEquals",(d=c&&c.additional,null==d||!1===d?d:d.delivery),"\u0414\u0430",a)))||0===a)b+=a;return b+'>\n                <span></span>\u041d\u0435\u0442\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\x3c!-- class="toggle-list" --\x3e\n</div>\n<div class="popupwin__footer clearfix">\n  <a href="#" class="btn btn_color_green left js-back">\u041d\u0430\u0437\u0430\u0434</a>\n  <button href="#" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</button>\n</div>\n'});
this.Templates.PointStepName=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b='<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    <div class="steps">\n      <ul class="steps__list steps__list_place">\n        <li class="steps__item active">1</li>\n        <li class="steps__item">2</li>\n        ';if((a=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.dealer),{hash:{},inverse:this.noop,
fn:this.program(1,function(a,b){return'\n        <li class="steps__item">3</li>\n        '},e),data:e}))||0===a)b+=a;b+='\n      </ul>\n    </div>\n  </div>\n  <div class="popupwin__container clearfix">\n    <div class="form">\n      <form action="/">\n        <div class="form__field form__field_name">\n          <label>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430:</label>\n          <input type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0414\u043e\u043c\u0438\u043a \u041f\u0435\u0442\u0440\u0430" value="';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'">\n          <span class="star">*</span>\n          \x3c!--\n          <div class="already-added hide">\n            <div class="already-added__title">\u0423\u0436\u0435 \u0435\u0441\u0442\u044c!</div>\n            <ul class="already-added__list">\n              <li class="already-added__item">\n                <a href="#?" class="already-added__link">\n                  <img src="media/uploads/added-1.png" alt="" class="img">\n                  <span class="name">\u0421\u043e\u0444\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440</span>\n                  <span class="city">\u0433.\u0412\u043e\u043b\u043e\u0433\u0434\u0430</span>\n                </a>\n              </li>\n              <li class="already-added__item active">\n                <a href="#?" class="already-added__link">\n                  <img src="media/uploads/added-2.png" alt="" class="img">\n                  <span class="name">\u0421\u043e\u0444\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440</span>\n                  <span class="city">\u0433.\u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434</span>\n                </a>\n              </li>\n              <li class="already-added__item">\n                <a href="#?" class="already-added__link">\n                  <img src="media/uploads/added-1.png" alt="" class="img">\n                  <span class="name">\u0421\u043e\u0444\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440</span>\n                  <span class="city">\u0433.\u041a\u0438\u0435\u0432</span>\n                </a>\n              </li>\n            </ul>\n          </div>\n          --\x3e\n        </div>\n        <div class="form__field form__field_description">\n          <label>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430:</label>\n          <textarea placeholder="\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u044d\u0442\u043e\u0442 \u043c\u0435\u0441\u0442\u043e \u0442\u0430\u043a,\u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0445\u043e\u0442\u0435\u043b\u043e\u0441\u044c \u0442\u0443\u0434\u0430 \u043f\u043e\u0435\u0445\u0430\u0442\u044c">';
(a=f.description)?a=a.call(c,{hash:{},data:e}):(a=c&&c.description,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=g(a)+'</textarea>\n        </div>\n      </form>\n    </div>\n    <div class="photo-upload">\n      <form action="/photos/add" class="dropzone clearfix" id="place-dropzone">\n        <div class="fallback">\n          <input name="file" type="file" multiple />\n        </div>\n      </form>\n    </div>\n  </div>\n  <div class="popupwin__footer clearfix">\n    <a href="#?" class="btn btn_color_blue right js-next">\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433</a>\n  </div>\n</div>\n'});
this.Templates.PointStepWhat=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b='<div class="popupwin__title clearfix">\n  <div class="steps">\n    <ul class="steps__list steps__list_place">\n      <li class="steps__item active">1</li>\n      <li class="steps__item active">2</li>\n      ';if((a=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.dealer),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return'\n      <li class="steps__item">3</li>\n      '},
e),data:e}))||0===a)b+=a;b+='\n    </ul>\n  </div>\n</div>\n<div class="popupwin__container clearfix">\n  <div class="field">\n    <div class="field__title">\u0423\u043a\u0430\u0436\u0438\u0442\u0435, \u0447\u0442\u043e \u0437\u0430 \u043c\u0435\u0441\u0442\u043e:</div>\n    <ul class="categories categories_tag">\n      ';if((a=f.each.call(c,c&&c.rootLabels,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;c='\n      <li class="categories__item">\n      <a href="#" class="categories__link sprite-filter-photo ';
(e=f.style)?e=e.call(a,{hash:{},data:b}):(e=a&&a.style,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'"\n        data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'" data-style="';(e=f.style)?e=e.call(a,{hash:{},data:b}):(e=a&&a.style,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'" data-text="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):
e);c+=g(e)+'"\n        data-placement="bottom" title="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=g(e)+'"></a>\n      </li>\n      '},e),data:e}))||0===a)b+=a;b+='\n    </ul>\n  </div>\n  <div class="field field_tags hide">\n    <input type="text" class="select-type tags-additional" placeholder="\u041c\u043e\u0436\u0435\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0442\u044d\u0433\u0438 \u043c\u0435\u0441\u0442\u0430">\n    <ul class="tags">\n      ';
if((a=f.each.call(c,c&&c.additionalLabels,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,e;c='\n      <li class="tags__item">\n        <a href="#" class="tags__link" title="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'"\n          data-parent="';(e=f.parent)?e=e.call(a,{hash:{},data:b}):(e=a&&a.parent,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'" data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):
(e=a&&a.id,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'" data-style="';(e=f.style)?e=e.call(a,{hash:{},data:b}):(e=a&&a.style,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=g(e)+'">';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=g(e)+"</a>\n      </li>\n      "},e),data:e}))||0===a)b+=a;b+='\n    </ul>\n  </div>\n\n  <div class="field">\n    <div class="map open map_popupwin mb10">\n      <div class="map__container" id="map-point-add"></div>\n    </div>\n    <div class="point-address-input field__input-map">\n      <input name="address" type="text" placeholder="\u0413\u043e\u0440\u043e\u0434, \u0443\u043b\u0438\u0446\u0430, \u0434\u043e\u043c" value="';
(a=f.address)?a=a.call(c,{hash:{},data:e}):(a=c&&c.address,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'">\n    </div>\n  </div>\n\n</div>\n<div class="popupwin__footer clearfix">\n  <a href="#" class="btn btn_color_green left js-back">\u041d\u0430\u0437\u0430\u0434</a>\n  ';if((a=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.dealer),{hash:{},inverse:this.program(9,function(a,b){return'\n  <button href="#" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</button>\n  '},
e),fn:this.program(7,function(a,b){return'\n  <a href="#" class="btn btn_color_blue right js-next">\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433</a>\n  '},e),data:e}))||0===a)b+=a;return b+"\n</div>\n"});this.Templates.AddRouteLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="place-step place-step_name" id="route-name-region"></div>\n<div class="" id="route-what-region"></div>\n<div class="place-step place-step_commerce" id="route-commers-region"></div>\n'});
this.Templates.ImgsList=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n      <li class="item mb10">\n        <a href="#" class="link">\n          <img src="';(e=f.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail104x104,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" alt="" class="img">\n          <span data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="icon icon_delete sprite-delete-added-photo js-delete"></span>\n        </a>\n      </li>\n      '}
this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var g="function",d=this.escapeExpression,k=this;if((c=f["if"].call(c,c&&c.imgs,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d;c='\n<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    <div class="steps__title">\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438</div>\n  </div>\n  <div class="already-added-photos">\n    <ul class="list clearfix">\n      ';
if((d=f.each.call(a,a&&a.imgs,{hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b}))||0===d)c+=d;return c+"\n    </ul>\n  </div>\n</div>\n"},e),data:e}))||0===c)b+=c;return b+"\n"});this.Templates.RouteStepName=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'\x3c!--<div class="popupwin popupwin_add-route active" style="display: block">\n      <div class="popupwin__viewport">\n        <div class="popupwin__scrollbox">\n          <a href="#?" class="popupwin__close"></a>--\x3e\n          <div class="route-step route-step_name">\n            <div class="popupwin__content popupwin__content_route_name clearfix">\n              <div class="popupwin__title clearfix">\n                <div class="steps">\n                  <ul class="steps__list steps__list_route">\n                    <li class="steps__item active">1</li>\n                    <li class="steps__item">2</li>\n                    <li class="steps__item">3</li>\n                  </ul>\n                </div>\n              </div>\n              <div class="form">\n                <form action="/">\n                  <div class="form__field form__field_name form__field_name_route error">\n                    <label>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:</label>\n                    <input type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0412\u043e\u043b\u043e\u0433\u0434\u0430-\u041c\u043e\u0441\u043a\u0432\u0430">\n                    <span class="star">*</span>\n                  </div>\n                  <div class="form__field form__field_description">\n                    <label>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430:</label>\n                    <textarea placeholder="\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u044d\u0442\u043e\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0442\u0430\u043a,\u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0445\u043e\u0442\u0435\u043b\u043e\u0441\u044c \u043f\u043e \u043d\u0435\u043c\u0443 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c"></textarea>\n                  </div>\n                </form>\n              </div>\n              <div class="btn-wrap">\n                <a href="#?" class="btn btn_color_blue js-next-step">\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433</a>\n              </div>\n            </div>\x3c!-- class="popup-content" --\x3e\n          </div>\x3c!-- class="route-step route-step_name" --\x3e\n          \x3c!-- class="route-step route-step_place" --\x3e\n        \x3c!--</div>\n      </div>\n    </div>--\x3e'});
this.Templates.RouteStepWhat=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'            <div class="route-step__aside">\n              <div class="route-list route-list_deleteable route-list_draggable popupwin__content">\n                <div class="title">\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f</div>\n                <ul class="list">\n                  <li class="item hide">\n                    <span class="drag"></span>\n                    <span class="number">0</span>\n                    <img src="" alt="" class="img">\n                    <div class="text">\n                      <span class="text__place"></span>\n                      <span class="text__type"></span>\n                    </div>\n                  </li>\n                </ul>\n                <a href="#?" class="delete-item js-delete"></a>\n              </div>\x3c!-- class="route-list" --\x3e\n              <div class="route-ctrls popupwin__content">\n                <a href="#?" class="btn btn_color_blue btn_next js-next-step">\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433</a>\n                <a href="#?" class="btn btn_color_blue btn_finish js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</a>\n                <a href="#?" class="btn btn_color_green js-prev-step">\u041d\u0430\u0437\u0430\u0434</a>\n              </div>\n            </div>\n            <div class="popupwin__content popupwin__content_route_place">\n              <div class="popupwin__title clearfix">\n                <div class="steps">\n                  <ul class="steps__list steps__list_route">\n                    <li class="steps__item active">1</li>\n                    <li class="steps__item active">2</li>\n                    <li class="steps__item">3</li>\n                  </ul>\n                  <div class="steps__title">\n                    <span class="title-place">\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432 \u0441\u0432\u043e\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</span>\n                    <span class="title-order">\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0440\u044f\u0434\u043e\u043a</span>\n                  </div>\n                </div>\n              </div>\n              <div class="route-search">\n                <select data-placeholder="\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043c\u0435\u0441\u0442\u0430\u043c \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c">\n                  <option></option>\n                  <option value="1" data-type="g" data-city="\u0433. \u0412\u043e\u043b\u043e\u0433\u0434\u0430">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0435 \u0443\u0437\u043e\u0440\u044b</option>\n                  <option value="2" data-type="y" data-city="\u0433. \u0412\u043e\u043b\u043e\u0433\u0434\u0430">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f</option>\n                  <option value="3" data-type="b" data-city="\u0433. \u0412\u043e\u043b\u043e\u0433\u0434\u0430">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0435 \u043a\u0430\u0444\u0435</option>\n                  <option value="4" data-type="br" data-city="\u0433. \u0412\u043e\u043b\u043e\u0433\u0434\u0430">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u043e\u0442\u0434\u044b\u0445\u0430</option>\n                  <option value="5" data-type="g" data-city="\u0433. \u0412\u043e\u043b\u043e\u0433\u0434\u0430">\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0435 \u0434\u043e\u0440\u043e\u0433\u0438</option>\n                </select>\n              </div>\n              <div class="route-categories">\n                <ul class="categories">\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-photo" data-toggle="tooltip" title="\u0424\u043e\u0442\u043e"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-gun" data-toggle="tooltip" title="\u041e\u0445\u043e\u0442\u0430"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-fish" data-toggle="tooltip" title="\u0420\u044b\u0431\u0430\u043b\u043a\u0430"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-ski" data-toggle="tooltip" title="\u041b\u044b\u0436\u0438"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-music" data-toggle="tooltip" title="\u041c\u0443\u0437\u044b\u043a\u0430"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-food" data-toggle="tooltip" title="\u0415\u0434\u0430"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-drink" data-toggle="tooltip" title="\u041d\u0430\u043f\u0438\u0442\u043a\u0438"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-tag" data-toggle="tooltip" title="\u041c\u0430\u0433\u0430\u0437\u0438\u043d\u044b"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-theatre" data-toggle="tooltip" title="\u0422\u0435\u0430\u0442\u0440\u044b"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link sprite-filter-place" data-toggle="tooltip" title="\u041c\u0435\u0441\u0442\u0430"></a></li>\n                  <li class="categories__item"><a href="#?" class="categories__link categories__link_type_all sprite-filter-all"></a></li>\n                </ul>\n              </div>\n              <div class="map map_popupwin map_route">\n                <div class="map__container" id="map3"></div>\n                <a href="#?" class="btn-open js-map-open"></a>\n                <div class="map__add-place">\n                  <div class="title">\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430</div>\n                  <div class="form">\n                    <div class="form__field">\n                      <label>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430:</label>\n                      <input type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0437\u0430\u043a\u0443\u0441\u043e\u0447\u043d\u0430\u044f">\n                    </div>\n                    <a href="#?" class="btn btn_color_green js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</a>\n                  </div>\n                </div>\n              </div>\n              <div class="route-grid" id="route-grid">\n                <div class="box" data-type="place" data-id="1" data-pic-small="media/uploads/route-4.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n                  <div class="box__img active">\n                    <a href="#?">\n                      <img src="media/uploads/box-2.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0410\u0440\u0445\u0438\u0435\u0440\u0435\u0439\u0441\u043a\u043e\u0435 \u043f\u043e\u0434\u0432\u043e\u0440\u044c\u0435 (\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0439 \u043a\u0440\u0435\u043c\u043b\u044c)</div>\n                      <span class="info info_like">6</span>\n                      <span class="info info_comment">4</span>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="event" data-id="2" data-pic-small="media/uploads/route-2.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_event">\u0421\u043e\u0431\u044b\u0442\u0438\u0435 14.09-20.10</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-4.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0434\u0435\u043b\u044c\u0444\u0438\u043d\u0430\u0440\u0438\u0439 \u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u0432 \u0412\u043e\u043b\u043e\u0433\u0434\u0435</div>\n                      <span class="info info_like">12</span>\n                      <span class="info info_comment">11</span>\n                    </a>\n                  </div>\n                  <div class="box__person">\n                    <a href="#?">\n                      <img src="media/uploads/user-2.png" alt="user" class="img">\n                      <div class="text">\n                        \u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b<br>\n                        <span class="name">\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u0420\u0438\u0431\u0430\u043a\u043e\u0432</span>\n                      </div>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="place" data-id="3" data-pic-small="media/uploads/route-1.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-5.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0424\u0435\u0440\u0430\u043f\u043e\u043d\u0442\u043e\u0432 \u043c\u043e\u043d\u0430\u0441\u0442\u044b\u0440\u044c</div>\n                      <span class="info info_like">11</span>\n                      <span class="info info_comment">8</span>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="event" data-id="4" data-pic-small="media/uploads/route-3.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_event">\u0421\u043e\u0431\u044b\u0442\u0438\u0435 14.09</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/place-unknown.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0424\u0435\u0441\u0442\u0438\u0432\u0430\u043b\u044c \u043a\u0440\u0430\u0441\u043e\u043a \u0425\u041e\u041b\u0418<br> \u041d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0439 \u044f\u0440\u043a\u0438\u0439 \u0434\u0435\u043d\u044c \u0432 \u044d\u0442\u043e\u043c \u0433\u043e\u0434\u0443!!</div>\n                      <span class="info info_like">14</span>\n                      <span class="info info_comment">17</span>\n                    </a>\n                  </div>\n                  <div class="box__person">\n                    <a href="#?">\n                      <img src="media/uploads/user-2.png" alt="user" class="img">\n                      <div class="text">\n                        \u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b<br>\n                        <span class="name">\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u0420\u0438\u0431\u0430\u043a\u043e\u0432</span>\n                      </div>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="place" data-id="5" data-pic-small="media/uploads/route-4.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-7.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0423\u0441\u0430\u0434\u044c\u0431\u0430 \u0411\u0440\u044f\u043d\u0447\u0430\u043d\u0438\u043d\u043e\u0432\u044b\u0445</div>\n                      <span class="info info_like">2</span>\n                      <span class="info info_comment">2</span>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="place" data-id="6" data-pic-small="media/uploads/route-1.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-2.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0410\u0440\u0445\u0438\u0435\u0440\u0435\u0439\u0441\u043a\u043e\u0435 \u043f\u043e\u0434\u0432\u043e\u0440\u044c\u0435 (\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0438\u0439 \u043a\u0440\u0435\u043c\u043b\u044c)</div>\n                      <span class="info info_like">6</span>\n                      <span class="info info_comment">4</span>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="event" data-id="7" data-pic-small="media/uploads/route-2.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_event">\u0421\u043e\u0431\u044b\u0442\u0438\u0435 14.09-20.10</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-4.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0434\u0435\u043b\u044c\u0444\u0438\u043d\u0430\u0440\u0438\u0439 \u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u0432 \u0412\u043e\u043b\u043e\u0433\u0434\u0435</div>\n                      <span class="info info_like">12</span>\n                      <span class="info info_comment">11</span>\n                    </a>\n                  </div>\n                  <div class="box__person">\n                    <a href="#?">\n                      <img src="media/uploads/user-2.png" alt="user" class="img">\n                      <div class="text">\n                        \u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b<br>\n                        <span class="name">\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u0420\u0438\u0431\u0430\u043a\u043e\u0432</span>\n                      </div>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="place" data-id="8" data-pic-small="media/uploads/route-3.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-5.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0424\u0435\u0440\u0430\u043f\u043e\u043d\u0442\u043e\u0432 \u043c\u043e\u043d\u0430\u0441\u0442\u044b\u0440\u044c</div>\n                      <span class="info info_like">11</span>\n                      <span class="info info_comment">8</span>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n                <div class="box" data-type="event" data-id="9" data-pic-small="media/uploads/route-4.png">\n                  <a href="#?" class="btn-delete js-delete-from-route"></a>\n                  <div class="box__title box__title_type_event">\u0421\u043e\u0431\u044b\u0442\u0438\u0435 14.09</div>\n                  <div class="box__img">\n                    <a href="#?">\n                      <img src="media/uploads/box-6.png" alt="church" class="img">\n                      <div class="btns">\n                        <a href="#?" class="btn btn_color_blue js-add-to-route-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n                      </div>\n                    </a>\n                  </div>\n                  <div class="box__description">\n                    <a href="#?">\n                      <div class="name">\u0424\u0435\u0441\u0442\u0438\u0432\u0430\u043b\u044c \u043a\u0440\u0430\u0441\u043e\u043a \u0425\u041e\u041b\u0418<br> \u041d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0439 \u044f\u0440\u043a\u0438\u0439 \u0434\u0435\u043d\u044c \u0432 \u044d\u0442\u043e\u043c \u0433\u043e\u0434\u0443!!</div>\n                      <span class="info info_like">14</span>\n                      <span class="info info_comment">17</span>\n                    </a>\n                  </div>\n                  <div class="box__person">\n                    <a href="#?">\n                      <img src="media/uploads/user-2.png" alt="user" class="img">\n                      <div class="text">\n                        \u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b<br>\n                        <span class="name">\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u0420\u0438\u0431\u0430\u043a\u043e\u0432</span>\n                      </div>\n                    </a>\n                  </div>\n                </div>\x3c!-- class="box" --\x3e\n              </div>\x3c!-- class="content" --\x3e\n            </div>\x3c!-- class="popup-content" --\x3e\n\n'});
this.Templates.AddTripAction=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h;b='<div class="btn-wrap clearfix">\n  <a href="#" class="btn btn_color_yel left js-add-block">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u0438\u043d \u0431\u043b\u043e\u043a</a>\n  ';if((c=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.dealer),{hash:{},inverse:this.program(3,function(a,b){return'\n  <button data-placement="bottom" data-title="\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</button>\n  '},
e),fn:this.program(1,function(a,b){return'\n  <button data-placement="bottom" data-title="\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f" class="btn btn_color_blue right js-next">\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433</button>\n  '},e),data:e}))||0===c)b+=c;return b+"\n</div>\n"});
this.Templates.AddTripAside=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n    <li class="item dd-item clearfix" data-id="';(e=f.position)?e=e.call(a,{hash:{},data:b}):(e=a&&a.position,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" data-step="';(e=f.position)?e=e.call(a,{hash:{},data:b}):(e=a&&a.position,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'">\n      <div class="dd-handle">\n        <span class="drag"></span>\n        <span class="number">';(e=f.position)?
e=e.call(a,{hash:{},data:b}):(e=a&&a.position,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'</span>\n        <div class="text">\n          <span class="text__place">';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'</span>\n          <span class="text__type"></span>\n        </div>\n        <a data-position="';(e=f.position)?e=e.call(a,{hash:{},data:b}):(e=a&&a.position,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" href="#" class="delete-item js-delete"></a>\n      </div>\n    </li>\n    '}
this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this;b='<div class="trip-list trip-list_deleteable dd route-list_draggable popupwin__content">\n  ';if((c=f["if"].call(c,c&&c.items,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d;c='\n  <div class="title">\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435</div>\n  <ul class="list dd-list">\n    ';if((d=f.each.call(a,a&&a.items,{hash:{},inverse:k.noop,fn:k.program(2,
h,b),data:b}))||0===d)c+=d;return c+"\n  </ul>\n  "},e),data:e}))||0===c)b+=c;return b+'\n</div>\x3c!-- class="trip-list" --\x3e\n\n<div class="trip-ctrls">\n  <a href="#" class="btn btn_color_blue btn_finish js-finish-preview">\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440</a>\n</div>\n'});
this.Templates.AddTripCommerce=Handlebars.template(function(b,c,f,a,e){function h(a,b){return'\n          <input type="checkbox" class="check-wrap__input" checked="">\n          '}function g(a,b){return'\n          <input type="checkbox" class="check-wrap__input">\n          '}function d(a,b){var c,d,e;e={hash:{},data:b};c='\n            <div class="form__field form__field_service">\n              <span class="service">'+(p((d=f.orderService||a&&a.orderService,d?d.call(a,"name",a,e):n.call(a,"orderService",
"name",a,e)))+'</span>\n              <span class="price">');e={hash:{},data:b};return c+=p((d=f.orderService||a&&a.orderService,d?d.call(a,"price",a,e):n.call(a,"orderService","price",a,e)))+' <span class="rouble">o</span></span>\n              <input name="additional" type="hidden" value="'+p(typeof a===l?a.apply(a):a)+'">\n              <a href="#" class="close js-delete-field"></a>\n            </div>\n            '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var k,n=f.helperMissing,
p=this.escapeExpression,l="function";b='<div class="popupwin__title fs18 clearfix">\n  <div class="steps">\n    <ul class="steps__list steps__list_trip">\n      <li class="steps__item active">1</li>\n      <li class="steps__item active">2</li>\n    </ul>\n  </div>\n</div>\n<div class="popupwin__container clearfix">\n  <section class="toggle-list toggle-list_trip">\n    <div class="toggle-list__item">\n      <div class="toggle-list__title">\n        <label class="check-wrap">\n          ';if((a=f["if"].call(c,
(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_price_tour),{hash:{},inverse:this.program(3,g,e),fn:this.program(1,h,e),data:e}))||0===a)b+=a;b+='\n          <span class="check-wrap__icon"></span>\n        </label>\n        \u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0442\u0443\u0440\n      </div>\n      <div class="toggle-list__body">\n        <form id="personalTour">\n          <div class="form">\n            <div class="form__field">\n              <div class="form__item form__item_men-count">\n                <label>\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a:</label>\n                <input name="personal_max_people" type="text" value="'+
p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_max_people),typeof k===l?k.apply(c):k))+'">\n              </div>\n              <div class="form__item form__item_price">\n                <label>\u0426\u0435\u043d\u0430 \u0437\u0430 \u0442\u0443\u0440:</label>\n                <input name="personal_price_tour" type="text" value="'+p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_price_tour),typeof k===l?k.apply(c):k))+
'">\n                <span class="rouble">o</span>\n              </div>\n            </div>\n            <div class="form__field">\n              <label>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0442\u0443\u0440\u0430:</label>\n              <div class="form__item form__item_time">\n                <input name="personal_dur_days" type="text" value="'+p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_dur_days),
typeof k===l?k.apply(c):k))+'">\n                <label>\u0434\u043d\u0435\u0439</label>\n              </div>\n              <div class="form__item form__item_time">\n                <input name="personal_dur_hours" type="text" value="'+p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_dur_hours),typeof k===l?k.apply(c):k))+'">\n                <label>\u0447\u0430\u0441\u043e\u0432</label>\n              </div>\n              <div class="form__item form__item_time">\n                <input name="personal_dur_minutes" type="text" value="'+
p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_dur_minutes),typeof k===l?k.apply(c):k))+'">\n                <label>\u043c\u0438\u043d\u0443\u0442</label>\n              </div>\n            </div>\n            <div class="form__field">\n              <div class="form__item-wrap">\n                <div class="form__item form__item_date">\n                  <label>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f:</label>\n                  <input type="text" class="js-datapicker-period input-date" placeholder="\u0434\u0434.\u043c\u043c.\u0433\u0433\u0433\u0433">\n                </div>\n                <label class="label-start">\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430</label>\n                <div class="form__item form__item_start">\n                  <label>\u043e\u0442</label>\n                  <input type="text" class="input-start js-parse-time" placeholder="00:00">\n                </div>\n                <div class="form__item form__item_start">\n                  <label>\u0434\u043e</label>\n                  <input type="text" class="input-end js-parse-time" placeholder="00:00">\n                </div>\n              </div>\n              <button class="btn btn_color_green js-add-tour-item">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</button>\n            </div>\n            ';
if((a=f.each.call(c,(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.personal_date),{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d,e;e={hash:{},data:b};c='\n            <div class="form__field form__field_tour">\n              <span class="date">'+(p((d=f.orderDate||a&&a.orderDate,d?d.call(a,"date",a,e):n.call(a,"orderDate","date",a,e)))+'</span>\n              <span class="time"> c ');e={hash:{},data:b};c+=p((d=f.orderDate||a&&a.orderDate,d?d.call(a,"start",
a,e):n.call(a,"orderDate","start",a,e)))+" \u0434\u043e ";e={hash:{},data:b};return c+=p((d=f.orderDate||a&&a.orderDate,d?d.call(a,"end",a,e):n.call(a,"orderDate","end",a,e)))+'</span>\n              <input name="personal_date" type="hidden" value="'+p(typeof a===l?a.apply(a):a)+'">\n              <a href="#" class="close js-delete-field"></a>\n            </div>\n            '},e),data:e}))||0===a)b+=a;b+='\n            <div class="form__field">\n              <div class="subtitle">\n                \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438\n              </div>\n            </div>\n            <div class="form__field">\n              <div class="form__item-wrap">\n                <div class="form__item form__item_service">\n                  <label>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438:</label>\n                  <textarea></textarea>\n                </div>\n                <div class="form__item form__item_service-price">\n                  <label>\u0426\u0435\u043d\u0430 \u0437\u0430 \u0443\u0441\u043b\u0443\u0433\u0443:</label>\n                  <input type="text">\n                  <span class="rouble">o</span>\n                </div>\n              </div>\n              <button class="btn btn_color_green js-add-tour-service">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</button>\n            </div>\n            ';
if((a=f.each.call(c,(k=(k=c&&c.summary_info,null==k||!1===k?k:k.personal),null==k||!1===k?k:k.additional),{hash:{},inverse:this.noop,fn:this.program(7,d,e),data:e}))||0===a)b+=a;b+='\n          </div>\n        </form>\n      </div>\n    </div>\n    \x3c!-- class="toggle-list__item" --\x3e\n    <div class="toggle-list__item">\n      <div class="toggle-list__title">\n        <label class="check-wrap">\n          ';if((a=f["if"].call(c,(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===
k?k:k.group_price_tour),{hash:{},inverse:this.program(3,g,e),fn:this.program(1,h,e),data:e}))||0===a)b+=a;b+='\n          <span class="check-wrap__icon"></span>\n        </label>\n        \u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0442\u0443\u0440\n      </div>\n      <div class="toggle-list__body">\n        <form id="groupTour">\n          <div class="form">\n            <div class="form__field">\n              <div class="form__item form__item_men-count">\n                <label>\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a:</label>\n                <input name="group_max_people" value="'+
p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?k:k.group_max_people),typeof k===l?k.apply(c):k))+'" type="text">\n              </div>\n              <div class="form__item form__item_price">\n                <label>\u0426\u0435\u043d\u0430 \u0437\u0430 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430:</label>\n                <input name="group_price_tour" value="'+p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?k:k.group_price_tour),typeof k===l?
k.apply(c):k))+'" type="text">\n                <span class="rouble">o</span>\n              </div>\n            </div>\n            <div class="form__field">\n              <label>\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0442\u0443\u0440\u0430:</label>\n              <div class="form__item form__item_time">\n                <input name="group_dur_days" value="'+p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?
k:k.group_dur_days),typeof k===l?k.apply(c):k))+'" type="text">\n                <label>\u0434\u043d\u0435\u0439</label>\n              </div>\n              <div class="form__item form__item_time">\n                <input name="group_dur_hours" value="'+p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?k:k.group_dur_hours),typeof k===l?k.apply(c):k))+'" type="text">\n                <label>\u0447\u0430\u0441\u043e\u0432</label>\n              </div>\n              <div class="form__item form__item_time">\n                <input name="group_dur_minutes" value="'+
p((k=(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?k:k.group_dur_minutes),typeof k===l?k.apply(c):k))+'" type="text">\n                <label>\u043c\u0438\u043d\u0443\u0442</label>\n              </div>\n            </div>\n            <div class="form__field">\n              <div class="form__item-wrap">\n                <div class="form__item form__item_date">\n                  <label>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f:</label>\n                  <input type="text" class="js-datapicker-period input-date" placeholder="\u0434\u0434.\u043c\u043c.\u0433\u0433\u0433\u0433">\n                </div>\n                <div class="form__item form__item_begin">\n                  <label>\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430</label>\n                  <input type="text" class="input-start js-parse-time" placeholder="00:00">\n                </div>\n              </div>\n              <a href="#" class="btn btn_color_green js-add-tour-item">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</a>\n            </div>\n            ';
if((a=f.each.call(c,(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?k:k.group_date),{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){var c,d,e;e={hash:{},data:b};c='\n            <div class="form__field form__field_tour">\n              <span class="date">'+(p((d=f.orderDate||a&&a.orderDate,d?d.call(a,"date",a,e):n.call(a,"orderDate","date",a,e)))+'</span>\n              <span class="time"> c ');e={hash:{},data:b};return c+=p((d=f.orderDate||a&&a.orderDate,d?d.call(a,
"start",a,e):n.call(a,"orderDate","start",a,e)))+'</span>\n              <input name="personal_date" type="hidden" value="'+p(typeof a===l?a.apply(a):a)+'">\n              <a href="#" class="close js-delete-field"></a>\n            </div>\n            '},e),data:e}))||0===a)b+=a;b+='\n            <div class="form__field">\n              <div class="subtitle">\n                \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438\n              </div>\n            </div>\n            <div class="form__field">\n              <div class="form__item-wrap">\n                <div class="form__item form__item_service">\n                  <label>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438:</label>\n                  <textarea></textarea>\n                </div>\n                <div class="form__item form__item_service-price">\n                  <label>\u0426\u0435\u043d\u0430 \u0437\u0430 \u0443\u0441\u043b\u0443\u0433\u0443:</label>\n                  <input type="text">\n                  <span class="rouble">o</span>\n                </div>\n              </div>\n              <a href="#" class="btn btn_color_green js-add-tour-service">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</a>\n            </div>\n            ';
if((a=f.each.call(c,(k=(k=c&&c.summary_info,null==k||!1===k?k:k.group),null==k||!1===k?k:k.additional),{hash:{},inverse:this.noop,fn:this.program(7,d,e),data:e}))||0===a)b+=a;return b+'\n          </div>\n        </form>\n      </div>\n    </div>\x3c!-- class="toggle-list__item" --\x3e\n  </section>\x3c!-- class="toggle-list toggle-list_trip" --\x3e\n</div>\n<div class="popupwin__footer clearfix">\n  <a href="#" class="btn btn_color_yel left js-back">\u041d\u0430\u0437\u0430\u0434</a>\n  <button data-placement="bottom" data-title="\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</button>\n</div>\n'});
this.Templates.AddTripContent=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b='<div class="trip-step__blocks">\n\n  <div class="trip-step__block trip-step__block_title popupwin__content mb10 clearfix">\n    ';if((a=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.dealer),{hash:{},inverse:this.program(3,function(a,b){return'\n    <div class="popupwin__title fs18 clearfix">\n      \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f\n    </div>\n    '},
e),fn:this.program(1,function(a,b){return'\n    <div class="popupwin__title fs18 clearfix">\n      <div class="steps">\n        <ul class="steps__list steps__list_trip">\n          <li class="steps__item active">1</li>\n          <li class="steps__item">2</li>\n        </ul>\n      </div>\n    </div>\n    '},e),data:e}))||0===a)b+=a;b+='\n    <div class="popupwin__container clearfix">\n      <div class="form">\n        <div class="form__field form__field_name">\n          <label>\u041e\u0431\u0449\u0435\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f:</label>\n          <input type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0441\u0435\u043c\u0438\u0434\u043d\u0435\u0432\u043d\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u043f\u043e \u041a\u0430\u043b\u0438\u0444\u043e\u0440\u043d\u0438\u0438" value="';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'">\n          <span class="star">*</span>\n        </div>\n        <div class="form__field form__field_description">\n          <label>\u041e\u0431\u0449\u0435\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f:</label>\n          <textarea>';(a=f.description)?a=a.call(c,{hash:{},data:e}):(a=c&&c.description,a="function"===
typeof a?a.call(c,{hash:{},data:e}):a);return b+=g(a)+'</textarea>\n        </div>\n      </div>\n    </div>\n  </div>\x3c!-- class="popupwin__content" --\x3e\n\n  <div id="trip-blocks-region"></div>\n\n</div>\x3c!-- class="trip-step__blocks" --\x3e\n\n<div id="trip-action-region"></div>\n'});this.Templates.AddTripLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="trip-step trip-step_wide">\n  <div id="trip-aside-region"></div>\n  <div id="trip-content-region"></div>\n\n</div>\x3c!-- class="trip-step" --\x3e\n<div id="trip-commerce-region" class="trip-step trip-step_commerce"></div>\n'});
this.Templates.BlockItem=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="popupwin__container clearfix">\n  <div class="form">\n    \n    <div class="form__field form__field_title">\n      <span class="number">';(a=f.position)?a=a.call(c,{hash:{},data:e}):(a=c&&c.position,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'</span>\n      <span class="span-title editable" data-text="\u0411\u043b\u043e\u043a \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f:">';
if((a=f["if"].call(c,c&&c.name,{hash:{},inverse:this.program(3,function(a,b){return"\u0411\u043b\u043e\u043a \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f:"},e),fn:this.program(1,function(a,b){var c;(c=f.name)?c=c.call(a,{hash:{},data:b}):(c=a&&a.name,c="function"===typeof c?c.call(a,{hash:{},data:b}):c);return h(c)},e),data:e}))||0===a)b+=a;b+='</span>\n\n      <div class="form__field form__field_description hide">\n        <input type="text" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a" class="input-title" value="';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'">\n        <span class="star">*</span>\n      </div>\n    \n    </div>\n    \n    <div id="blockitem-imgs-region-';(a=f.cid)?a=a.call(c,{hash:{},data:e}):(a=c&&c.cid,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'"></div>\n    \n    <div class="form__field mb20">\n      <textarea id="tinyeditor-';(a=f.position)?a=a.call(c,{hash:{},data:e}):(a=c&&c.position,a="function"===
typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'" class="tinyeditor" placeholder="\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0432\u044b\u0448\u0435">';(a=f.txt)?a=a.call(c,{hash:{},data:e}):(a=c&&c.txt,a="function"===typeof a?a.call(c,{hash:{},
data:e}):a);b+=h(a)+'</textarea>\n    </div>\n\n    <div class="field">\n      <div class="map map_popupwin mb10">\n        <a href="#" class="map__open js-map-open">\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435</a>\n        <a href="#" class="map__clear js-map-close">\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n        <div class="map__container" id="map-block-';(a=f.cid)?a=a.call(c,{hash:{},data:e}):(a=c&&c.cid,
a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'"></div>\n      </div>\n      <div class="field__input-map">\n        <input name="address-block-';(a=f.cid)?a=a.call(c,{hash:{},data:e}):(a=c&&c.cid,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'" type="text" placeholder="\u0413\u043e\u0440\u043e\u0434, \u0443\u043b\u0438\u0446\u0430, \u0434\u043e\u043c" value="';(a=f.address)?a=a.call(c,{hash:{},data:e}):(a=c&&c.address,a="function"===typeof a?a.call(c,{hash:{},data:e}):
a);b+=h(a)+'">\n      </div>\n    </div>\n    \n    <div class="form__field form__field_add-stuff">\n      <a href="#" class="btn btn_color_blue js-add-place">\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f</a>\n      <div id="blockitem-points-region-';(a=f.cid)?a=a.call(c,{hash:{},data:e}):(a=c&&c.cid,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=h(a)+'"></div>\n    </div>\n\n  </div>\n</div>\n'});
this.Templates.BlockItemImgs=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};a=this.escapeExpression;b='<div class="form__field photo-upload">\n  <form action="/file-upload" class="dropzone clearfix" id="trip-dropzone-';(f=f.cid)?f=f.call(c,{hash:{},data:e}):(f=c&&c.cid,f="function"===typeof f?f.call(c,{hash:{},data:e}):f);return b+=a(f)+'">\n    <div class="fallback">\n      <input name="file" type="file" multiple />\n    </div>\n  </form>\n</div>\n'});
this.Templates.BlockItemPoints=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n    <li class="item item_place">\n      <a data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'" href="/';(e=f.type_of_item)?e=e.call(a,{hash:{},data:b}):(e=a&&a.type_of_item,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+"/";(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'" class="link" title="';
(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'">\n        <img src="';if((e=f["if"].call(a,a&&a.imgs,{hash:{},inverse:p.program(5,d,b),fn:p.program(3,g,b),data:b}))||0===e)c+=e;c+='" alt="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'" class="img">\n        <span data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===k?e.call(a,{hash:{},data:b}):e);return c+=
n(e)+'" class="icon icon_delete sprite-delete-added-photo js-delete"></span>\n      </a>\n    </li>\n    '}function g(a,b){var c;return n((c=(c=(c=a&&a.imgs,null==c||!1===c?c:c[0]),null==c||!1===c?c:c.thumbnail104x104),typeof c===k?c.apply(a):c))}function d(a,b){return"/static/images/place-unknown.png"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var k="function",n=this.escapeExpression,p=this;if((c=f["if"].call(c,c&&c.points,{hash:{},inverse:p.noop,fn:p.program(1,function(a,
b){var c,d;c='\n<div class="already-added-photos">\n  <ul class="list clearfix">\n    ';if((d=f.each.call(a,a&&a.points,{hash:{},inverse:p.noop,fn:p.program(2,h,b),data:b}))||0===d)c+=d;return c+"\n  </ul>\n</div>\n"},e),data:e}))||0===c)b+=c;return b+"\n"});
this.Templates.EventComments=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var h,g=this.escapeExpression,d=f.helperMissing,k=f.blockHelperMissing;h={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e,h;c=""+('\n  <li class="comments__item">\n    <a href="#" class="photo">\n      <img src="'+g((e=(e=a&&a.author,null==e||!1===e?e:e.icon),"function"===typeof e?e.apply(a):e))+'" alt="'+g((e=(e=a&&a.author,null==e||!1===e?
e:e.first_name),"function"===typeof e?e.apply(a):e))+" "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'" class="photo__img">\n    </a>\n    <div class="text">\n      <div class="text__info">\n        <a href="#" class="name">'+g((e=(e=a&&a.author,null==e||!1===e?e:e.first_name),"function"===typeof e?e.apply(a):e))+" "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'</a>\n        <span class="time">&bull; ');h={hash:{},
data:b};c+=g((e=f.dateFormat||a&&a.dateFormat,e?e.call(a,a&&a.created,h):d.call(a,"dateFormat",a&&a.created,h)))+'</span>\n      </div>\n      <div class="text__comment">';h={hash:{},data:b};return c+=g((e=f.safe||a&&a.safe,e?e.call(a,a&&a.review,h):d.call(a,"safe",a&&a.review,h)))+"</div>\n    </div>\n  </li>\n"},e),data:e};(a=f.reviews)?a=a.call(c,h):(a=c&&c.reviews,a="function"===typeof a?a.call(c,h):a);f.reviews||(a=k.call(c,a,h));if(a||0===a)b+=a;b+='\n<li class="comments__item">\n  <form class="comment-form" action="/">\n    <a href="#" class="photo">\n      <img src="';
if((e=f["if"].call(c,(a=c&&c.user,null==a||!1===a?a:a.authorized),{hash:{},inverse:this.program(5,function(a,b){return"/static/images/user-unknown-small.png"},e),fn:this.program(3,function(a,b){var c;return g((c=(c=a&&a.user,null==c||!1===c?c:c.icon),"function"===typeof c?c.apply(a):c))},e),data:e}))||0===e)b+=e;return b+='" alt="'+g((a=(a=c&&c.user,null==a||!1===a?a:a.first_name),"function"===typeof a?a.apply(c):a))+" "+g((a=(a=c&&c.user,null==a||!1===a?a:a.last_name),"function"===typeof a?a.apply(c):
a))+'" class="photo__img">\n    </a>\n    <div class="text">\n      <textarea name="review_text" placeholder="\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></textarea>\n      <input type="submit" class="btn btn_color_blue" value="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c">\n    </div>\n  </form>\n</li>\n'});
this.Templates.EventDescription=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n    <li class="item">\n      <a data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" href="/point/';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" class="link c-place js-popupwin-place">';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===g?e.call(a,{hash:{},data:b}):
e);c+=d(e)+'</a>\n      <div class="description__address">';(e=f.address)?e=e.call(a,{hash:{},data:b}):(e=a&&a.address,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+"</div>\n    </li>\n    "}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this;b='<h3 class="description__title">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===g?a.call(c,{hash:{},data:e}):a);b+=d(a)+'</h3>\n<p class="description__text">';
(a=f.description)?a=a.call(c,{hash:{},data:e}):(a=c&&c.description,a=typeof a===g?a.call(c,{hash:{},data:e}):a);b+=d(a)+"</p>\n";if((a=f["if"].call(c,c&&c.points,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d;c='\n<div class="description__places">\n  <div class="title"><span class="c-event">\u0421\u043e\u0431\u044b\u0442\u0438\u0435</span> \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u0432 \u043c\u0435\u0441\u0442\u0430\u0445:</div>\n  <ul class="list">\n    ';if((d=f.each.call(a,
a&&a.points,{hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b}))||0===d)c+=d;return c+"\n  </ul>\n</div>\n"},e),data:e}))||0===a)b+=a;return b+"\n"});
this.Templates.EventHeader=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=f.helperMissing,d=this.escapeExpression;b=""+('<a href="#" class="user">\n  <img src="'+d((h=(h=c&&c.author,null==h||!1===h?h:h.icon),"function"===typeof h?h.apply(c):h))+'" alt="'+d((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+d((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+
'" class="img">\n  <span class="name">'+d((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+d((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+'</span><br>\n  \u0434\u043e\u0431\u0430\u0432\u0438\u043b <span class="type c-event">\u0421\u043e\u0431\u044b\u0442\u0438\u0435</span>\n</a>\n<ul class="actions">\n  <li class="item">\n  <div class="date c-event">\n    ');if((h=f["if"].call(c,c&&c.dt_start,{hash:{},inverse:this.noop,
fn:this.program(1,function(a,b){var c,e;c={hash:{format:"D.MM"},data:b};return c=""+(d((e=f.dateFormat||a&&a.dateFormat,e?e.call(a,a&&a.dt_start,c):g.call(a,"dateFormat",a&&a.dt_start,c)))+"&mdash;")},e),data:e}))||0===h)b+=h;if((h=f["if"].call(c,c&&c.dt_end,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;e={hash:{format:"D.MM"},data:b};return d((c=f.dateFormat||a&&a.dateFormat,c?c.call(a,a&&a.dt_end,e):g.call(a,"dateFormat",a&&a.dt_end,e)))},e),data:e}))||0===h)b+=h;b+='\n  </div>\n  </li>\n  <li class="item">\n    <a href="#" class="btn-like ';
if((h=f["if"].call(c,c&&c.isliked,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return"active"},e),data:e}))||0===h)b+=h;b+='" data-toggle="tooltip" data-original-title="\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0438\u0442\u044c\u0441\u044f" data-placement="bottom">\n      <span class="icon sprite-like-user"></span>\n      <span class="text">';if((h=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:this.program(9,function(a,b){return"0"},
e),fn:this.program(7,function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c="function"===typeof c?c.call(a,{hash:{},data:b}):c);return d(c)},e),data:e}))||0===h)b+=h;b+='</span>\n    </a>\n  </li>\n  <li class="item">\n  \x3c!--\n    <a href="#" class="btn-place">\n      <span class="icon sprite-place-user"></span>\u0412 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\n    </a>\n  --\x3e\n  </li>\n  <li class="item">\n    <a href="#" class="btn-upload">\n      <span class="icon sprite-upload"></span>\n    </a>\n    <div class="soc-wrap">\n      <ul class="soc-list">\n        <li class="soc-list__item">\n          <a target="_blank" href="https://twitter.com/intent/tweet?original_referer=http://yasenput.ru/event/';
(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=d(h)+"&text=";(h=f.name)?h=h.call(c,{hash:{},data:e}):(h=c&&c.name,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=d(h)+"&url=http://yasenput.ru/event/";(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=d(h)+'&via=yasenput" class="btn-soc btn-soc_tw">Twitter</a>\n        </li>\n        <li class="soc-list__item">\n          <a target="_blank" href="http://vk.com/share.php?url=http://yasenput.ru/event/';
(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=d(h)+'" class="btn-soc btn-soc_vk">\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435</a>\n        </li>\n        <li class="soc-list__item">\n          <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yasenput.ru/event/';(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);return b+=d(h)+'&display=popup" class="btn-soc btn-soc_fb">Facebook</a>\n        </li>\n      </ul>\n    </div>\n  </li>\n</ul>\n'});
this.Templates.EventLayout=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,f;return c=""+('\n      <li class="peoples__item">\n        <a href="#" class="peoples__link">\n          <img src="'+d((f=(f=a&&a.author,null==f||!1===f?f:f.icon),typeof f===g?f.apply(a):f))+'" alt="user" class="peoples__img">\n        </a>\n      </li>\n    ')}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;b='<div class="popupwin__content clearfix">\n  <div id="event-header-region" class="place-info clearfix"></div>\n  \n  <div id="event-photo-region"></div> \n\n  <div id="event-description-region"></div> \n\n  <div id="event-map-region"></div>\n\n  <div class="comments-wrap" id="event-comments-region"></div>\n</div>\x3c!-- class="popup-content" --\x3e\n\n<div class="popupwin__content clearfix" id="event-likes-region"></div>\n\n';
if((c=f["if"].call(c,c&&c.sets,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d,e;c='\n<div class="popupwin__content clearfix">\n  <div class="title title_green title_bg_light">\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043a \u0441\u0435\u0431\u0435 \u0432 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435:</div>\n  <ul class="peoples">\n    ';e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.sets)?d=d.call(a,e):(d=a&&a.sets,d=typeof d===g?d.call(a,e):
d);f.sets||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+'\n    <li class="peoples__item">\n      <a href="#" class="peoples__link peoples__link_all js-more-people">\n        \u0415\u0449\u0451\n      </a>\n    </li>\n  </ul>\n</div>\x3c!-- class="popup-content" --\x3e\n'},e),data:e}))||0===c)b+=c;return b+"\n"});
this.Templates.EventLikes=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n      <li class="peoples__item">\n      <a title="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" href="#" class="peoples__link">\n          <img src="';(e=f.icon)?e=e.call(a,{hash:{},data:b}):(e=a&&a.icon,e=typeof e===
g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" alt="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="peoples__img">\n        </a>\n      </li>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;if((c=
f["if"].call(c,c&&c.likeusers,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d,e;c='\n  <div class="title title_blue title_bg_light">\u0418\u043c \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c:</div>\n  <ul class="peoples">\n    ';e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.likeusers)?d=d.call(a,e):(d=a&&a.likeusers,d=typeof d===g?d.call(a,e):d);f.likeusers||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+"\n  </ul>\n"},e),data:e}))||0===c)b+=c;return b+
"\n"});this.Templates.EventMap=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<a href="#" class="map__open js-map-open">\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n<a href="#" class="map__close sprite-close js-map-close"></a>\n<div class="map__container" id="map-event"></div>\n<a href="#" class="btn-open js-map-open"></a>\n'});
this.Templates.EventPhoto=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n    <li class="item"><img src="';(e=f.thumbnail560)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail560,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="img" /></li>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;b='<div class="slider">\n  <ul class="bxslider bxslider-place">\n    ';if((a=
f["if"].call(c,c&&c.imgs,{hash:{},inverse:k.program(4,function(a,b){return'\n    <li class="item empty"><img src="/static/images/place-unknown-big.png" class="img" /></li>\n    '},e),fn:k.program(1,function(a,b){var c,d,e;c="\n    ";e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.imgs)?d=d.call(a,e):(d=a&&a.imgs,d=typeof d===g?d.call(a,e):d);f.imgs||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+"\n    "},e),data:e}))||0===a)b+=a;b+='\n  </ul>\n  <div class="bx-pager" id="bx-pager">\n    <div class="bx-pager__viewport">\n      <div class="bx-pager__scrollbox">\n        ';
e={hash:{},inverse:k.noop,fn:k.program(6,function(a,b){var c,e;c=""+('\n        <a data-slide-index="'+d((e=(e=b,null==e||!1===e?e:e.index),typeof e===g?e.apply(a):e))+'" href="" class="bx-pager__item">\n          <img src="');(e=f.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail104x104,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="img"/>\n          </a>\n        '},e),data:e};(a=f.imgs)?a=a.call(c,e):(a=c&&c.imgs,a=typeof a===g?a.call(c,e):a);f.imgs||(a=n.call(c,
a,e));if(a||0===a)b+=a;return b+'\n      </div>\n    </div>\n  </div>\n  <a href="#" class="btn-photo-add js-popup-add-photos">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</a>\n</div>\n'});
this.Templates.BoardEvent=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,d;c='\n        <div class="btns">\n          <a href="/event/';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===p?d.call(a,{hash:{},data:b}):d);c+=n(d)+'/edit" class="btn btn_color_green btn_edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n          <a href="/#event/';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===p?d.call(a,{hash:{},data:b}):
d);return c+=n(d)+'/delete" class="btn btn_color_red btn_remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>\n        </div>\n      '}function g(a,b){return"active"}function d(a,b){return"0"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var k=f.helperMissing,n=this.escapeExpression,p="function",l=this;b='<a href="#" class="btn-delete js-delete-from-trip"></a>\n<div class="box__title box__title_type_event">\n  \u0421\u043e\u0431\u044b\u0442\u0438\u0435 ';if((a=f["if"].call(c,
c&&c.dt_start,{hash:{},inverse:l.noop,fn:l.program(1,function(a,b){var c,d;c={hash:{format:"D.MM"},data:b};return c=""+(n((d=f.dateFormat||a&&a.dateFormat,d?d.call(a,a&&a.dt_start,c):k.call(a,"dateFormat",a&&a.dt_start,c)))+"&ndash;")},e),data:e}))||0===a)b+=a;if((a=f["if"].call(c,c&&c.dt_end,{hash:{},inverse:l.noop,fn:l.program(3,function(a,b){var c,d;d={hash:{format:"D.MM"},data:b};return n((c=f.dateFormat||a&&a.dateFormat,c?c.call(a,a&&a.dt_end,d):k.call(a,"dateFormat",a&&a.dt_end,d)))},e),data:e}))||
0===a)b+=a;b+='\n</div>\n<div class="box__img">\n  <a href="/event/';(a=f.id)?a=a.call(c,{hash:{},data:e}):(a=c&&c.id,a=typeof a===p?a.call(c,{hash:{},data:e}):a);b+=n(a)+'" class="js-popupwin-event">\n    ';if((a=f["if"].call(c,c&&c.imgs,{hash:{},inverse:l.program(7,function(a,b){var c,d;c='\n      <img src="/static/images/place-unknown.png" height="174" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===p?d.call(a,{hash:{},data:b}):d);return c+=n(d)+'" class="img">\n    '},
e),fn:l.program(5,function(a,b){var c,d,e;c=""+('\n      <img src="'+n((d=(d=(d=a&&a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207),typeof d===p?d.apply(a):d))+'" alt="');(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===p?e.call(a,{hash:{},data:b}):e);return c+=n(e)+'" height="'+n((d=(d=(d=a&&a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207_height),typeof d===p?d.apply(a):d))+'" class="img">\n    '},e),data:e}))||0===a)b+=a;b+="\n    ";if((a=f["if"].call(c,
c&&c.addtotrip,{hash:{},inverse:l.noop,fn:l.program(9,function(a,b){return'\n    <div class="btns">\n      <a href="#" class="btn btn_color_blue js-add-to-trip-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n    </div>\n    '},e),data:e}))||0===a)b+=a;b+="\n    ";if((a=f["if"].call(c,c&&c.editable,{hash:{},inverse:l.program(14,function(a,b){var c,d;c='\n    <div class="icons">\n      \x3c!--\n      <a class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435"></a>\n      <a href="#" class="icon sprite-like ';
if((d=f["if"].call(a,a&&a.isliked,{hash:{},inverse:l.noop,fn:l.program(15,g,b),data:b}))||0===d)c+=d;return c+'" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n      --\x3e\n    </div>\n    '},e),fn:l.program(11,function(a,b){var c,d,e;c="\n      ";e={hash:{},inverse:l.noop,fn:l.program(12,h,b),data:b};if((e=(d=f.ifContains||a&&a.ifContains,d?d.call(a,(d=a&&a.author,null==d||!1===d?d:d.id),a&&a.user,e):k.call(a,"ifContains",(d=a&&a.author,null==d||!1===d?d:d.id),
a&&a.user,e)))||0===e)c+=e;return c+"\n    "},e),data:e}))||0===a)b+=a;b+='\n  </a>\n</div>\n<div class="box__description">\n  <div class="name">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===p?a.call(c,{hash:{},data:e}):a);b+=n(a)+'</div>\n  <span class="info info_like">';if((a=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:l.program(19,d,e),fn:l.program(17,function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c=typeof c===p?c.call(a,{hash:{},
data:b}):c);return n(c)},e),data:e}))||0===a)b+=a;b+='</span>\n  <span class="info info_comment">';if((a=f["if"].call(c,c&&c.review_count,{hash:{},inverse:l.program(19,d,e),fn:l.program(21,function(a,b){var c;(c=f.review_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.review_count,c=typeof c===p?c.call(a,{hash:{},data:b}):c);return n(c)},e),data:e}))||0===a)b+=a;return b+='</span>\n</div>\n<div class="box__person">\n  <img src="'+n((a=(a=c&&c.author,null==a||!1===a?a:a.icon),typeof a===p?a.apply(c):a))+
'" alt="'+n((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===p?a.apply(c):a))+" "+n((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===p?a.apply(c):a))+'" class="img">\n  <div class="text">\n    \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043b<br>\n    <span class="name">'+n((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===p?a.apply(c):a))+" "+n((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===p?a.apply(c):a))+"</span>\n  </div>\n</div>\n"});
this.Templates.BoardPoint=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,d;c='\n        <div class="btns">\n          <a href="/point/';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===n?d.call(a,{hash:{},data:b}):d);c+=p(d)+'/edit" class="btn btn_color_green btn_edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n          <a href="/#point/';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===n?d.call(a,{hash:{},data:b}):
d);return c+=p(d)+'/delete" class="btn btn_color_red btn_remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>\n        </div>\n      '}function g(a,b){return'\n      <div class="btns">\n        <a href="#" class="btn btn_color_blue js-add-to-trip-popupwin">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</a>\n      </div>\n      '}function d(a,b){return"active"}function k(a,b){return"0"}this.compilerInfo=[4,">= 1.0.0"];f=
this.merge(f,b.helpers);e=e||{};var n="function",p=this.escapeExpression,l=this,q=f.helperMissing;b='<a href="#" class="btn-delete js-delete-from-trip"></a>\n<div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n<div class="box__img">\n  <a href="/point/';(a=f.id)?a=a.call(c,{hash:{},data:e}):(a=c&&c.id,a=typeof a===n?a.call(c,{hash:{},data:e}):a);b+=p(a)+'" class="js-popupwin-place">\n    ';if((a=f["if"].call(c,c&&c.imgs,{hash:{},inverse:l.program(3,function(a,b){var c,
d;c='\n      <img src="/static/images/place-unknown.png" height="174" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n    '},e),fn:l.program(1,function(a,b){var c,d;c=""+('\n      <img src="'+p((d=(d=(d=a&&a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207),typeof d===n?d.apply(a):d))+'" height="'+p((d=(d=(d=a&&a.imgs,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207_height),typeof d===n?d.apply(a):
d))+'" alt="');(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n    '},e),data:e}))||0===a)b+=a;b+="\n    ";if((a=f["if"].call(c,c&&c.editable,{hash:{},inverse:l.program(8,function(a,b){var c,e;c="\n      ";if((e=f["if"].call(a,a&&a.addtotrip,{hash:{},inverse:l.noop,fn:l.program(9,g,b),data:b}))||0===e)c+=e;c+='\n    <div class="icons">\n      \x3c!--\n      <a class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"></a>\n      <a href="#" class="icon sprite-like ';
if((e=f["if"].call(a,a&&a.isliked,{hash:{},inverse:l.noop,fn:l.program(11,d,b),data:b}))||0===e)c+=e;return c+'" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n      --\x3e\n    </div>\n    '},e),fn:l.program(5,function(a,b){var c,d,e;c="\n      ";e={hash:{},inverse:l.noop,fn:l.program(6,h,b),data:b};if((e=(d=f.ifContains||a&&a.ifContains,d?d.call(a,(d=a&&a.author,null==d||!1===d?d:d.id),a&&a.user,e):q.call(a,"ifContains",(d=a&&a.author,null==d||!1===d?d:d.id),
a&&a.user,e)))||0===e)c+=e;return c+"\n    "},e),data:e}))||0===a)b+=a;b+='\n  </a>\n</div>\n<div class="box__description">\n  <div class="name">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===n?a.call(c,{hash:{},data:e}):a);b+=p(a)+'</div>\n  <span class="info info_like">';if((a=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:l.program(15,k,e),fn:l.program(13,function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c=typeof c===n?c.call(a,{hash:{},
data:b}):c);return p(c)},e),data:e}))||0===a)b+=a;b+='</span>\n  <span class="info info_comment">';if((a=f["if"].call(c,c&&c.review_count,{hash:{},inverse:l.program(15,k,e),fn:l.program(17,function(a,b){var c;(c=f.review_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.review_count,c=typeof c===n?c.call(a,{hash:{},data:b}):c);return p(c)},e),data:e}))||0===a)b+=a;return b+"</span>\n</div>\n"});
this.Templates.BoardRoute=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,d;c=""+('\n        <img src="'+p((d=(d=(d=(d=(d=a&&a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207),typeof d===n?d.apply(a):d))+'" height="'+p((d=(d=(d=(d=(d=a&&a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207_height),typeof d===n?d.apply(a):d))+'" alt="');(d=f.name)?d=d.call(a,
{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n      '}function g(a,b){var c,d;c='\n        <img src="/static/images/place-unknown.png" height="174" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n      '}function d(a,b){return"0"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var k,n="function",p=this.escapeExpression,l=this,q=f.helperMissing;
b='<div class="box__title box__title_type_route">\u041c\u0430\u0440\u0448\u0440\u0443\u0442</div>\n<div class="box__img">\n  <a href="/route/';(a=f.id)?a=a.call(c,{hash:{},data:e}):(a=c&&c.id,a=typeof a===n?a.call(c,{hash:{},data:e}):a);b+=p(a)+'" class="js-popupwin-route">\n    ';if((a=f["if"].call(c,c&&c.points,{hash:{},inverse:l.program(6,function(a,b){var c,d;c='\n      <img src="/static/images/place-unknown.png" height="174" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===
n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n    '},e),fn:l.program(1,function(a,b){var c,d,e;c="\n      ";if((e=f["if"].call(a,(d=(d=a&&a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),{hash:{},inverse:l.program(4,g,b),fn:l.program(2,h,b),data:b}))||0===e)c+=e;return c+"\n    "},e),data:e}))||0===a)b+=a;b+="\n    ";k={hash:{},inverse:l.noop,fn:l.program(8,function(a,b){var c,d;c='\n    <div class="days">\n      <div class="days__circle">\n        <span class="days__count">';
(d=f.days)?d=d.call(a,{hash:{},data:b}):(d=a&&a.days,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+"</span>\n        <br> \u0434\u043d\u0435\u0439\n      </div>\n    </div>\n    "},e),data:e};if((k=(a=f.ifCond||c&&c.ifCond,a?a.call(c,c&&c.days,"!=",0,k):q.call(c,"ifCond",c&&c.days,"!=",0,k)))||0===k)b+=k;b+='\n    <div class="icons">\n      \x3c!--<a href="#" class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"></a>--\x3e\n      \x3c!--<a class="icon sprite-like" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>--\x3e\n    </div>\n  </a>\n</div>\n<div class="box__description">\n  ';
k={hash:{},inverse:l.noop,fn:l.program(10,function(a,b){var c,d;c='\n  <div class="price price_green">\n    ';(d=f.price)?d=d.call(a,{hash:{},data:b}):(d=a&&a.price,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+' <span class="sprite-ruble-white"></span>\n  </div>\n  '},e),data:e};if((k=(a=f.ifCond||c&&c.ifCond,a?a.call(c,c&&c.price,"!=","0.00",k):q.call(c,"ifCond",c&&c.price,"!=","0.00",k)))||0===k)b+=k;b+='\n  <div class="name">';(k=f.name)?k=k.call(c,{hash:{},data:e}):(k=c&&c.name,
k=typeof k===n?k.call(c,{hash:{},data:e}):k);b+=p(k)+'</div>\n  <span class="info info_like">';if((k=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:l.program(14,d,e),fn:l.program(12,function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c=typeof c===n?c.call(a,{hash:{},data:b}):c);return p(c)},e),data:e}))||0===k)b+=k;b+='</span>\n  <span class="info info_comment">';if((k=f["if"].call(c,c&&c.review_count,{hash:{},inverse:l.program(14,d,e),fn:l.program(16,function(a,
b){var c;(c=f.review_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.review_count,c=typeof c===n?c.call(a,{hash:{},data:b}):c);return p(c)},e),data:e}))||0===k)b+=k;return b+='</span>\n</div>\n<div class="box__person">\n  <img src="'+p((a=(a=c&&c.author,null==a||!1===a?a:a.icon),typeof a===n?a.apply(c):a))+'" alt="'+p((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===n?a.apply(c):a))+" "+p((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===n?a.apply(c):a))+'" class="img">\n  <div class="text">\n    \u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u043b<br>\n    <span class="name">'+
p((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===n?a.apply(c):a))+" "+p((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===n?a.apply(c):a))+"</span>\n  </div>\n</div>\n"});
this.Templates.BoardSet=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c=""+('\n        <img src="'+d((e=(e=(e=(e=(e=a&&a.points,null==e||!1===e?e:e[0]),null==e||!1===e?e:e.imgs),null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail207),typeof e===g?e.apply(a):e))+'" height="'+d((e=(e=(e=(e=(e=a&&a.points,null==e||!1===e?e:e[0]),null==e||!1===e?e:e.imgs),null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail207_height),typeof e===g?e.apply(a):e))+'" alt="');(e=f.name)?e=e.call(a,{hash:{},
data:b}):(e=a&&a.name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="img">\n      '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this;b='<div class="box__title box__title_type_trip">\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</div>\n<div class="box__img">\n  <a href="#?">\n    ';if((a=f["if"].call(c,c&&c.points,{hash:{},inverse:k.program(4,function(a,b){var c,e;c='\n      <img src="/static/images/place-unknown.png" height="174" alt="';
(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="img">\n    '},e),fn:k.program(1,function(a,b){var c,d,e;c="\n      ";if((e=f["if"].call(a,(d=(d=a&&a.points,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),{hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b}))||0===e)c+=e;return c+"\n    "},e),data:e}))||0===a)b+=a;b+="\n    ";if((a=f["if"].call(c,c&&c.editable,{hash:{},inverse:k.program(8,function(a,b){return'\n    <div class="icons">\n      <a href="#?" class="icon sprite-like" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n    </div>\n    '},
e),fn:k.program(6,function(a,b){return'\n    <div class="btns">\n      <a href="#?" class="btn btn_color_green btn_edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n      <a href="#?" class="btn btn_color_red btn_remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>\n    </div>\n    '},e),data:e}))||0===a)b+=a;b+='\n  </a>\n</div>\n<div class="box__description">\n  <div class="name">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===g?a.call(c,
{hash:{},data:e}):a);b+=d(a)+'</div>\n  <span class="info info_like">';if((a=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:k.program(12,function(a,b){return"0"},e),fn:k.program(10,function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c=typeof c===g?c.call(a,{hash:{},data:b}):c);return d(c)},e),data:e}))||0===a)b+=a;return b+='</span>\n  <span class="info info_comment">0</span>\n</div>\n<div class="box__person">\n  <img src="'+d((a=(a=c&&c.author,null==a||!1===a?
a:a.icon),typeof a===g?a.apply(c):a))+'" alt="'+d((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===g?a.apply(c):a))+" "+d((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===g?a.apply(c):a))+'" class="img">\n  <div class="text">\n    \u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u043b<br>\n    <span class="name">'+d((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===g?a.apply(c):a))+" "+d((a=(a=c&&c.author,
null==a||!1===a?a:a.last_name),typeof a===g?a.apply(c):a))+"</span>\n  </div>\n</div>\n"});
this.Templates.BoardTrip=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,d;c=""+('\n        <img src="'+p((d=(d=(d=(d=(d=a&&a.blocks,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207),typeof d===n?d.apply(a):d))+'" height="'+p((d=(d=(d=(d=(d=a&&a.blocks,null==d||!1===d?d:d[0]),null==d||!1===d?d:d.imgs),null==d||!1===d?d:d[0]),null==d||!1===d?d:d.thumbnail207_height),typeof d===n?d.apply(a):d))+'" alt="');(d=f.name)?d=d.call(a,
{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n      '}function g(a,b){var c,d;c='\n        <img src="/static/images/place-unknown.png" height="174" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n      '}function d(a,b){var c,d;c='\n        <div class="btns">\n          <a href="/trip/';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===
n?d.call(a,{hash:{},data:b}):d);c+=p(d)+'/edit" class="btn btn_color_green btn_edit">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>\n          <a href="/#trip/';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'/delete" class="btn btn_color_red btn_remove">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a>\n        </div>\n      '}function k(a,b){return"0"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);
e=e||{};var n="function",p=this.escapeExpression,l=this,q=f.helperMissing;b='<div class="box__title box__title_type_trip">';if((a=f["if"].call(c,c&&c.price,{hash:{},inverse:l.program(3,function(a,b){return"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435"},e),fn:l.program(1,function(a,b){return"\u042d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u044f"},e),data:e}))||0===a)b+=a;b+='</div>\n<div class="box__img">\n  <a href="/trip/';(a=f.id)?a=a.call(c,{hash:{},data:e}):(a=c&&c.id,a=
typeof a===n?a.call(c,{hash:{},data:e}):a);b+=p(a)+'" class="js-popupwin-trip">\n    ';if((a=f["if"].call(c,c&&c.blocks,{hash:{},inverse:l.program(10,function(a,b){var c,d;c='\n      <img src="/static/images/place-unknown.png" height="174" alt="';(d=f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'" class="img">\n    '},e),fn:l.program(5,function(a,b){var c,d,e;c="\n      ";if((e=f["if"].call(a,(d=(d=a&&a.blocks,null==d||!1===d?d:d[0]),
null==d||!1===d?d:d.imgs),{hash:{},inverse:l.program(8,g,b),fn:l.program(6,h,b),data:b}))||0===e)c+=e;return c+"\n    "},e),data:e}))||0===a)b+=a;b+="\n\n    ";if((a=f["if"].call(c,c&&c.editable,{hash:{},inverse:l.program(15,function(a,b){return'\n    <div class="icons">\n      \x3c!--<a href="#" class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"></a>\n      <a href="#" class="icon sprite-like" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>--\x3e\n    </div>\n    '},
e),fn:l.program(12,function(a,b){var c,e,g;c="\n      ";g={hash:{},inverse:l.noop,fn:l.program(13,d,b),data:b};if((g=(e=f.ifContains||a&&a.ifContains,e?e.call(a,(e=a&&a.author,null==e||!1===e?e:e.id),a&&a.user,g):q.call(a,"ifContains",(e=a&&a.author,null==e||!1===e?e:e.id),a&&a.user,g)))||0===g)c+=g;return c+"\n    "},e),data:e}))||0===a)b+=a;b+='\n  </a>\n</div>\n<div class="box__description">\n  ';if((a=f["if"].call(c,c&&c.price,{hash:{},inverse:l.noop,fn:l.program(17,function(a,b){var c,d;c={hash:{},
data:b};return c='\n  <div class="price price_green">\n    '+(p((d=f.toFixed||a&&a.toFixed,d?d.call(a,a&&a.price,0,c):q.call(a,"toFixed",a&&a.price,0,c)))+' <span class="sprite-ruble-white"></span>\n  </div>\n  ')},e),data:e}))||0===a)b+=a;b+='\n  <div class="name">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===n?a.call(c,{hash:{},data:e}):a);b+=p(a)+'</div>\n  <span class="info info_like">';if((a=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:l.program(21,k,e),fn:l.program(19,
function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c=typeof c===n?c.call(a,{hash:{},data:b}):c);return p(c)},e),data:e}))||0===a)b+=a;b+='</span>\n  <span class="info info_comment">';if((a=f["if"].call(c,c&&c.review_count,{hash:{},inverse:l.program(21,k,e),fn:l.program(23,function(a,b){var c;(c=f.review_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.review_count,c=typeof c===n?c.call(a,{hash:{},data:b}):c);return p(c)},e),data:e}))||0===a)b+=a;return b+='</span>\n</div>\n<div class="box__person">\n  <img src="'+
p((a=(a=c&&c.author,null==a||!1===a?a:a.icon),typeof a===n?a.apply(c):a))+'" alt="'+p((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===n?a.apply(c):a))+" "+p((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===n?a.apply(c):a))+'" class="img">\n  <div class="text">\n    \u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u043b<br>\n    <span class="name">'+p((a=(a=c&&c.author,null==a||!1===a?a:a.first_name),typeof a===n?
a.apply(c):a))+" "+p((a=(a=c&&c.author,null==a||!1===a?a:a.last_name),typeof a===n?a.apply(c):a))+"</span>\n  </div>\n</div>\n"});
this.Templates.EmptyCard=Handlebars.template(function(b,c,f,a,e){function h(a,b){return'\n<a href="/add/trip" class="js-popupwin-add-trip">\n'}function g(a,b){return'\n      <div class="name" style="text-align: center;font-size: 18px;">\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</div>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var d,k;a=f.helperMissing;var n=f.blockHelperMissing;
k={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return'\n<a href="/add/point" class="js-popupwin-add-trip">\n'},e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"points",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"points",k)))||0===k)b+=k;b+="\n";k={hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return'\n<a href="/add/event" class="js-popupwin-add-trip">\n'},e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,
d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"events",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"events",k)))||0===k)b+=k;b+="\n";k={hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return'\n<a href="/add/route" class="js-popupwin-add-trip">\n'},e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"routes",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"routes",k)))||0===k)b+=k;b+="\n";
k={hash:{},inverse:this.noop,fn:this.program(7,h,e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"trips",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"trips",k)))||0===k)b+=k;b+="\n";k={hash:{},inverse:this.noop,fn:this.program(7,h,e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"tours",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"tours",k)))||
0===k)b+=k;b+="\n";if((k=(d=(d=(d=c&&c.settings,null==d||!1===d?d:d.models),"function"===typeof d?d.apply(c):d),n.call(c,d,{hash:{},inverse:this.program(7,h,e),fn:this.noop,data:e})))||0===k)b+=k;b+='\n  <div class="box__img">\n    <span class="btn btn_action_add btn_color_green">\n      <span class="sprite-add"></span>\n    </span>\n  </div>\n  <div class="box__description" style="padding-bottom:70px;">\n    ';k={hash:{},inverse:this.noop,fn:this.program(9,function(a,b){return'\n      <div class="name" style="text-align: center;font-size: 18px;">\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e</div>\n    '},
e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"points",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"points",k)))||0===k)b+=k;b+="\n    ";k={hash:{},inverse:this.noop,fn:this.program(11,function(a,b){return'\n      <div class="name" style="text-align: center;font-size: 18px;">\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435</div>\n    '},e),data:e};if((k=(d=f.ifEquals||
c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"events",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"events",k)))||0===k)b+=k;b+="\n    ";k={hash:{},inverse:this.noop,fn:this.program(13,function(a,b){return'\n      <div class="name" style="text-align: center;font-size: 18px;">\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 </div>\n    '},e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,
(d=c&&c.settings,null==d||!1===d?d:d.models),"routes",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"routes",k)))||0===k)b+=k;b+="\n    ";k={hash:{},inverse:this.noop,fn:this.program(15,g,e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"trips",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"trips",k)))||0===k)b+=k;b+="\n    ";k={hash:{},inverse:this.noop,fn:this.program(17,function(a,b){return'\n      <div class="name" style="text-align: center;font-size: 18px;">\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u044e \u044d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u044e</div>\n    '},
e),data:e};if((k=(d=f.ifEquals||c&&c.ifEquals,d?d.call(c,(d=c&&c.settings,null==d||!1===d?d:d.models),"tours",k):a.call(c,"ifEquals",(d=c&&c.settings,null==d||!1===d?d:d.models),"tours",k)))||0===k)b+=k;b+="\n    ";if((k=(d=(d=(d=c&&c.settings,null==d||!1===d?d:d.models),"function"===typeof d?d.apply(c):d),n.call(c,d,{hash:{},inverse:this.program(15,g,e),fn:this.noop,data:e})))||0===k)b+=k;return b+"\n  </div>\n</a>\n"});
this.Templates.Fullscreen=Handlebars.template(function(b,c,f,a,e){function h(a,b){return"opacity:0;"}function g(a,b){return"opacity:1;"}function d(a,b){var c,d;c=""+('\n      <li class="preview-item" data-index="'+p((d=(d=b,null==d||!1===d?d:d.index),typeof d===n?d.apply(a):d))+'">\n        <a href="#" title="">\n          <img src="');(d=f.thumbnail104x104)?d=d.call(a,{hash:{},data:b}):(d=a&&a.thumbnail104x104,d=typeof d===n?d.call(a,{hash:{},data:b}):d);c+=p(d)+'" alt="';(d=f.name)?d=d.call(a,{hash:{},
data:b}):(d=a&&a.name,d=typeof d===n?d.call(a,{hash:{},data:b}):d);return c+=p(d)+'">\n        </a>\n      </li>\n      '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var k,n="function",p=this.escapeExpression,l=this;b=""+('<div id="pv_fs_img_wrap">\n  <img src="'+p((k=(k=c&&c.current,null==k||!1===k?k:k.img_url),typeof k===n?k.apply(c):k))+'" style="margin-top: 0px;">\n</div>\n<div id="pv_fs_controls" class="pv_fs_shown" style="display: block;">\n  <div id="pv_fs_topright" class="pv_fs_controls">\n    <table cellspacing="0" cellpadding="0">\n      <tbody>\n        <tr>\n          <td>\n            <div id="pv_fs_num">');
(a=f.index)?a=a.call(c,{hash:{},data:e}):(a=c&&c.index,a=typeof a===n?a.call(c,{hash:{},data:e}):a);b+=p(a)+" / "+p((k=(k=c&&c.imgs,null==k||!1===k?k:k.length),typeof k===n?k.apply(c):k))+'</div>\n          </td>\n          <td>\n            <div id="pv_fs_close">\n              <div id="pv_fs_close_btn"></div>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  \n  ';if((a=f["if"].call(c,c&&c.imgs,{hash:{},inverse:l.noop,fn:l.program(1,function(a,b){var c,
e;c='\n  <div id="pv_fs_bottomleft" class="pv_fs_controls" style="';if((e=f["if"].call(a,a&&a.hide,{hash:{},inverse:l.program(4,g,b),fn:l.program(2,h,b),data:b}))||0===e)c+=e;c+='">\n    <ul class="preview-list">\n      ';if((e=f.each.call(a,a&&a.imgs,{hash:{},inverse:l.noop,fn:l.program(6,d,b),data:b}))||0===e)c+=e;return c+"\n    </ul>\n  </div>\n  "},e),data:e}))||0===a)b+=a;return b+'\n\n  <div id="pv_fs_left_wrap" class="pv_fs_controls">\n    <div id="pv_fs_left"></div>\n  </div>\n  <div id="pv_fs_right_wrap" class="pv_fs_controls">\n    <div id="pv_fs_right"></div>\n  </div>\n</div>\n'});
this.Templates.AddPhotoPopup=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438\n  </div>\n  <div class="popupwin__container">\n    <div class="photo-upload">\n      <form class="dropzone clearfix" id="photos-dropzone">\n        <div class="fallback">\n          <input name="file" type="file" multiple />\n        </div>\n      </form>\n    </div>\n  </div>\n  <div class="popupwin__footer clearfix">\n    <button disabled href="#" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</button>\n  </div>\n</div>\x3c!-- class="popup-content" --\x3e\n'});
this.Templates.PointComments=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var h,g=this.escapeExpression,d=f.helperMissing,k=f.blockHelperMissing;h={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e,h;c=""+('\n  <li class="comments__item">\n    <a href="#" class="photo">\n      <img src="'+g((e=(e=a&&a.author,null==e||!1===e?e:e.icon),"function"===typeof e?e.apply(a):e))+'" alt="'+g((e=(e=a&&a.author,null==e||!1===e?
e:e.first_name),"function"===typeof e?e.apply(a):e))+"  "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'" class="photo__img">\n    </a>\n    <div class="text">\n      <div class="text__info">\n        <a href="#" class="name">'+g((e=(e=a&&a.author,null==e||!1===e?e:e.first_name),"function"===typeof e?e.apply(a):e))+" "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'</a>\n        <span class="time">&bull; ');h={hash:{},
data:b};c+=g((e=f.dateFormat||a&&a.dateFormat,e?e.call(a,a&&a.created,h):d.call(a,"dateFormat",a&&a.created,h)))+'</span>\n      </div>\n      <div class="text__comment">';h={hash:{},data:b};return c+=g((e=f.safe||a&&a.safe,e?e.call(a,a&&a.review,h):d.call(a,"safe",a&&a.review,h)))+"</div>\n    </div>\n  </li>\n"},e),data:e};(a=f.reviews)?a=a.call(c,h):(a=c&&c.reviews,a="function"===typeof a?a.call(c,h):a);f.reviews||(a=k.call(c,a,h));if(a||0===a)b+=a;b+='\n<li class="comments__item">\n  <form class="comment-form" action="/">\n    <a href="#" class="photo">\n      <img src="';
if((e=f["if"].call(c,(a=c&&c.user,null==a||!1===a?a:a.authorized),{hash:{},inverse:this.program(5,function(a,b){return"/static/images/user-unknown-small.png"},e),fn:this.program(3,function(a,b){var c;return g((c=(c=a&&a.user,null==c||!1===c?c:c.icon),"function"===typeof c?c.apply(a):c))},e),data:e}))||0===e)b+=e;return b+='" alt="'+g((a=(a=c&&c.user,null==a||!1===a?a:a.first_name),"function"===typeof a?a.apply(c):a))+" "+g((a=(a=c&&c.user,null==a||!1===a?a:a.last_name),"function"===typeof a?a.apply(c):
a))+'" class="photo__img">\n    </a>\n    <div class="text">\n      <textarea name="review_text" placeholder="\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></textarea>\n      <input type="submit" class="btn btn_color_blue" value="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c">\n    </div>\n  </form>\n</li>\n'});
this.Templates.PointDescription=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,d;return c=""+('\n      <li class="item item_phone">'+y((d=(d=a&&a.additional,null==d||!1===d?d:d.phone),typeof d===x?d.apply(a):d))+"</li>\n      ")}function g(a,b){return'\n      <li class="item item_phone">\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</li>\n      '}function d(a,b){var c,d;return c=""+('\n        <li class="item item_site"><a href="http://'+y((d=(d=a&&a.additional,null==d||!1===
d?d:d.website),typeof d===x?d.apply(a):d))+'" target="_blank" class="link">'+y((d=(d=a&&a.additional,null==d||!1===d?d:d.website),typeof d===x?d.apply(a):d))+"</a></li>\n      ")}function k(a,b){return'\n        <li class="item item_site">\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</li>\n      '}function n(a,b){return'\n        <li class="item item_tw">\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</li>\n      '}function p(a,b){return"\n      "}function l(a,b){var c,d;return c=
""+('\n        <li class="item item_vk"><a href="http://'+y((d=(d=a&&a.additional,null==d||!1===d?d:d.vk),typeof d===x?d.apply(a):d))+'" target="_blank" class="link">'+y((d=(d=a&&a.additional,null==d||!1===d?d:d.vk),typeof d===x?d.apply(a):d))+"</a></li>\n      ")}function q(a,b){return'\n        <li class="item item_vk">\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</li>\n      '}function m(a,b){var c;return c=""+("\n          "+y(typeof a===x?a.apply(a):a)+"<br>\n          ")}function s(a,
b){var c,d;return c=""+("\n          "+y((d=(d=a&&a.additional,null==d||!1===d?d:d.price_start),typeof d===x?d.apply(a):d))+' <span class="sprite-ruble-commercial"></span>&nbsp;\n          ')}function r(a,b){var c,d;return c=""+("\n          -&nbsp;"+y((d=(d=a&&a.additional,null==d||!1===d?d:d.price_end),typeof d===x?d.apply(a):d))+' <span class="sprite-ruble-commercial"></span>\n          ')}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var u=f.helperMissing,y=this.escapeExpression,
x="function",w=this;b='<h3 class="description__title">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===x?a.call(c,{hash:{},data:e}):a);b+=y(a)+"</h3>\n";if((a=f["if"].call(c,c&&c.description,{hash:{},inverse:w.noop,fn:w.program(1,function(a,b){var c,d;c={hash:{},data:b};return c='\n  <p class="description__text">'+(y((d=f.br||a&&a.br,d?d.call(a,a&&a.description,c):u.call(a,"br",a&&a.description,c)))+"</p>\n")},e),data:e}))||0===a)b+=a;b+="\n";if((a=f["if"].call(c,c&&c.additional,
{hash:{},inverse:w.noop,fn:w.program(3,function(a,b){var c,e,u;c='\n<div class="description__additional commercial-info">\n  <div class="commercial-info__head">\n    <ul class="list">\n      ';if((u=f["if"].call(a,(e=a&&a.additional,null==e||!1===e?e:e.phone),{hash:{},inverse:w.program(6,g,b),fn:w.program(4,h,b),data:b}))||0===u)c+=u;c+="\n      ";if((u=f["if"].call(a,(e=a&&a.additional,null==e||!1===e?e:e.website),{hash:{},inverse:w.program(10,k,b),fn:w.program(8,d,b),data:b}))||0===u)c+=u;c+="\n      ";
if((u=f["if"].call(a,(e=a&&a.additional,null==e||!1===e?e:e.twitter),{hash:{},inverse:w.program(14,p,b),fn:w.program(12,n,b),data:b}))||0===u)c+=u;c+="\n      ";if((u=f["if"].call(a,(e=a&&a.additional,null==e||!1===e?e:e.vk),{hash:{},inverse:w.program(18,q,b),fn:w.program(16,l,b),data:b}))||0===u)c+=u;c+='\n    </ul>\n    <a href="#" class="link-open js-open"></a>\n  </div>\n  <div class="commercial-info__body clearfix">\n    <ul class="list list_first">\n      <li class="item">\n        <div class="entry-title">\u0412\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b:</div>\n        <div class="text">\n          ';
if((u=f.each.call(a,(e=a&&a.additional,null==e||!1===e?e:e.working_hours),{hash:{},inverse:w.noop,fn:w.program(20,m,b),data:b}))||0===u)c+=u;c+='\n        </div>\n      </li>\n      <li class="item">\n        <div class="entry-title">\u041a\u0440\u0435\u0434\u0438\u0442\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u044b:</div>\n        <div class="text">\n          '+y((e=(e=a&&a.additional,null==e||!1===e?e:e.credit_card),typeof e===x?e.apply(a):e))+'\n        </div>\n      </li>\n      <li class="item">\n        <div class="entry-title">\u0423\u043b\u0438\u0447\u043d\u0430\u044f \u0432\u0435\u0440\u0430\u043d\u0434\u0430:  </div>\n        <div class="text">\n          '+
y((e=(e=a&&a.additional,null==e||!1===e?e:e.terrace),typeof e===x?e.apply(a):e))+'\n        </div>\n      </li>\n    </ul>\n    <ul class="list list_second">\n      <li class="item">\n        <div class="entry-title">\u0426\u0435\u043d\u0430:</div>\n        <div class="text">\n          ';if((u=f["if"].call(a,(e=a&&a.additional,null==e||!1===e?e:e.price_start),{hash:{},inverse:w.noop,fn:w.program(22,s,b),data:b}))||0===u)c+=u;c+="\n          ";if((u=f["if"].call(a,(e=a&&a.additional,null==e||!1===
e?e:e.price_end),{hash:{},inverse:w.noop,fn:w.program(24,r,b),data:b}))||0===u)c+=u;c+='\n        </div>\n      </li>\n      <li class="item">\n        <div class="entry-title">\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f:</div>\n        <div class="text">\n          ';if((u=f.each.call(a,(e=a&&a.additional,null==e||!1===e?e:e.services),{hash:{},inverse:w.noop,fn:w.program(20,m,b),data:b}))||0===u)c+=u;return c+='\n        </div>\n      </li>\n      <li class="item">\n        <div class="entry-title">\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430:  </div>\n        <div class="text">\n          '+
y((e=(e=a&&a.additional,null==e||!1===e?e:e.delivery),typeof e===x?e.apply(a):e))+'\n        </div>\n      </li>\n    </ul>\n    <ul class="list list_third">\n      <li class="item">\n        <div class="entry-title">\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435:</div>\n        <div class="text">\n          '+y((e=(e=a&&a.additional,null==e||!1===e?e:e.booking),typeof e===x?e.apply(a):e))+'\n        </div>\n      </li>\n      <li class="item">\n        <div class="entry-title">WiFi:</div>\n        <div class="text">\n          '+
y((e=(e=a&&a.additional,null==e||!1===e?e:e.wifi),typeof e===x?e.apply(a):e))+'\n        </div>\n      </li>\n      \x3c!--\n      <li class="item">\n        <a href="#" class="link-changes">\u0425\u043e\u0447\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</a>\n      </li>\n      --\x3e\n    </ul>\n  </div>\n</div>\n'},e),data:e}))||0===a)b+=a;b+='\n<div class="description__address">';(a=f.address)?a=a.call(c,{hash:{},data:e}):
(a=c&&c.address,a=typeof a===x?a.call(c,{hash:{},data:e}):a);return b+=y(a)+"</div>\n"});
this.Templates.PointHeader=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b=""+('<a href="#" class="user">\n  <img src="'+g((h=(h=c&&c.author,null==h||!1===h?h:h.icon),"function"===typeof h?h.apply(c):h))+'" alt="'+g((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+g((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+'" class="img">\n  <span class="name">'+
g((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+g((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+'</span><br>\n  \u0434\u043e\u0431\u0430\u0432\u0438\u043b <span class="type c-place">\u043c\u0435\u0441\u0442\u043e</span>\n</a>\n<ul class="actions">\n  <li class="item">\n    <a href="#" class="btn-like ');if((h=f["if"].call(c,c&&c.isliked,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"active"},e),
data:e}))||0===h)b+=h;b+='" data-toggle="tooltip" data-original-title="" data-placement="bottom">\n      <span class="icon sprite-like-user"></span>\n      <span class="text">';if((h=f["if"].call(c,c&&c.likes_count,{hash:{},inverse:this.program(5,function(a,b){return"0"},e),fn:this.program(3,function(a,b){var c;(c=f.likes_count)?c=c.call(a,{hash:{},data:b}):(c=a&&a.likes_count,c="function"===typeof c?c.call(a,{hash:{},data:b}):c);return g(c)},e),data:e}))||0===h)b+=h;b+='</span>\n    </a>\n  </li>\n  <li class="item">\n    \x3c!--\n    <a href="#" class="btn-place">\n      <span class="icon sprite-place-user"></span>\u0412 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\n    </a>\n    --\x3e\n  </li>\n  <li class="item">\n    <a href="#" class="btn-upload" title="\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u043e\u0446. \u0441\u0435\u0442\u044f\u0445">\n      <span class="icon sprite-upload"></span>\n    </a>\n    <div class="soc-wrap">\n      <ul class="soc-list">\n        <li class="soc-list__item">\n          <a target="_blank" href="https://twitter.com/intent/tweet?original_referer=http://yasenput.ru/point/';
(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=g(h)+"&text=";(h=f.name)?h=h.call(c,{hash:{},data:e}):(h=c&&c.name,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=g(h)+"&url=http://yasenput.ru/point/";(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=g(h)+'&via=yasenput" class="btn-soc btn-soc_tw">Twitter</a>\n        </li>\n        <li class="soc-list__item">\n          <a target="_blank" href="http://vk.com/share.php?url=http://yasenput.ru/point/';
(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);b+=g(h)+'" class="btn-soc btn-soc_vk">\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435</a>\n        </li>\n        <li class="soc-list__item">\n          <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yasenput.ru/point/';(h=f.id)?h=h.call(c,{hash:{},data:e}):(h=c&&c.id,h="function"===typeof h?h.call(c,{hash:{},data:e}):h);return b+=g(h)+'&display=popup" class="btn-soc btn-soc_fb">Facebook</a>\n        </li>\n      </ul>\n    </div>\n  </li>\n</ul>\n'});
this.Templates.PointLayout=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,f;return c=""+('\n      <li class="peoples__item">\n        <a href="#" class="peoples__link">\n          <img src="'+d((f=(f=a&&a.author,null==f||!1===f?f:f.icon),typeof f===g?f.apply(a):f))+'" alt="user" class="peoples__img">\n        </a>\n      </li>\n    ')}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;b='<div class="popupwin__content clearfix">\n  <div id="point-header-region" class="place-info clearfix"></div>\n  \n  <div id="point-photo-region"></div> \n\n  <div id="point-description-region" class="description"></div>\n\n  <div id="point-map-region"></div>\n\n  <div class="comments-wrap" id="point-comments-region"></div>\n</div>\x3c!-- class="popup-content" --\x3e\n\n<div class="popupwin__content clearfix" id="point-likes-region"></div>\n\n';
if((c=f["if"].call(c,c&&c.sets,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d,e;c='\n<div class="popupwin__content clearfix">\n  <div class="title title_green title_bg_light">\u0414\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043a \u0441\u0435\u0431\u0435 \u0432 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435:</div>\n  <ul class="peoples">\n    ';e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.sets)?d=d.call(a,e):(d=a&&a.sets,d=typeof d===g?d.call(a,e):
d);f.sets||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+'\n    <li class="peoples__item">\n      <a href="#" class="peoples__link peoples__link_all js-more-people">\n        \u0415\u0449\u0451\n      </a>\n    </li>\n  </ul>\n</div>\x3c!-- class="popup-content" --\x3e\n'},e),data:e}))||0===c)b+=c;return b+"\n"});
this.Templates.PointLikes=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n      <li class="peoples__item">\n      <a title="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" href="#" class="peoples__link">\n          <img src="';(e=f.icon)?e=e.call(a,{hash:{},data:b}):(e=a&&a.icon,e=typeof e===
g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" alt="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="peoples__img">\n        </a>\n      </li>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;if((c=
f["if"].call(c,c&&c.likeusers,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d,e;c='\n  <div class="title title_blue title_bg_light">\u0418\u043c \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c:</div>\n  <ul class="peoples">\n    ';e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.likeusers)?d=d.call(a,e):(d=a&&a.likeusers,d=typeof d===g?d.call(a,e):d);f.likeusers||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+"\n  </ul>\n"},e),data:e}))||0===c)b+=c;return b+
"\n"});this.Templates.PointMap=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<a href="#" class="map__open js-map-open">\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n<a href="#" class="map__close sprite-close js-map-close"></a>\n<div class="map__container" id="map-point"></div>\n'});
this.Templates.PointPhoto=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n    <li class="item"><img src="';(e=f.thumbnail560)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail560,e=typeof e===d?e.call(a,{hash:{},data:b}):e);return c+=k(e)+'" class="img" /></li>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g,d="function",k=this.escapeExpression,n=this,p=f.blockHelperMissing;b='<ul class="bxslider bxslider-place">\n  ';if((a=f["if"].call(c,c&&c.imgs,
{hash:{},inverse:n.program(4,function(a,b){return'\n  <li class="item empty"><img src="/static/images/place-unknown-big.png" class="img" /></li>\n  '},e),fn:n.program(1,function(a,b){var c,e,g;c="\n    ";g={hash:{},inverse:n.noop,fn:n.program(2,h,b),data:b};(e=f.imgs)?e=e.call(a,g):(e=a&&a.imgs,e=typeof e===d?e.call(a,g):e);f.imgs||(e=p.call(a,e,g));if(e||0===e)c+=e;return c+"\n  "},e),data:e}))||0===a)b+=a;b+='\n</ul>\n<div class="bx-pager" id="bx-pager">\n  <div class="bx-pager__viewport">\n    <div class="bx-pager__scrollbox">\n      ';
g={hash:{},inverse:n.noop,fn:n.program(6,function(a,b){var c,e;c=""+('\n      <a data-slide-index="'+k((e=(e=b,null==e||!1===e?e:e.index),typeof e===d?e.apply(a):e))+'" href="#" class="bx-pager__item">\n        <img src="');(e=f.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail104x104,e=typeof e===d?e.call(a,{hash:{},data:b}):e);return c+=k(e)+'" class="img"/>\n        </a>\n      '},e),data:e};(a=f.imgs)?a=a.call(c,g):(a=c&&c.imgs,a=typeof a===d?a.call(c,g):a);f.imgs||(a=p.call(c,
a,g));if(a||0===a)b+=a;b+='\n    </div>\n  </div>\n</div>\n<a href="#" class="btn-photo-add js-popup-add-photos">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</a>\n';if((a=f["if"].call(c,c&&c.imgs,{hash:{},inverse:n.noop,fn:n.program(8,function(a,b){return'\n<a href="#" title="\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u043e \u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d" class="btn-fullsize">\u0412\u043e \u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d</a>\n'},
e),data:e}))||0===a)b+=a;return b+"\n"});
this.Templates.OrderRoute=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b='<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    \u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\n  </div>\n  <div class="form">\n    <div class="field">\n      <label>\u0412\u0430\u0448\u0438 \u0424\u0418\u041e:</label>\n      ';if((a=f["if"].call(c,(h=
c&&c.user,null==h||!1===h?h:h.first_name),{hash:{},inverse:this.program(3,function(a,b){return'\n      <input name="fullname" type="text">\n      '},e),fn:this.program(1,function(a,b){var c,f;return c=""+('\n      <input name="fullname" type="text" value="'+g((f=(f=a&&a.user,null==f||!1===f?f:f.first_name),"function"===typeof f?f.apply(a):f))+" "+g((f=(f=a&&a.user,null==f||!1===f?f:f.last_name),"function"===typeof f?f.apply(a):f))+'">\n      ')},e),data:e}))||0===a)b+=a;b+='\n    </div>\n    <div class="field field_email">\n      <label>E-mail:</label>\n      ';
if((a=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.email),{hash:{},inverse:this.program(7,function(a,b){return'\n      <input name="email" type="text">\n      '},e),fn:this.program(5,function(a,b){var c,f;return c=""+('\n      <input name="email" type="text" value="'+g((f=(f=a&&a.user,null==f||!1===f?f:f.email),"function"===typeof f?f.apply(a):f))+'">\n      ')},e),data:e}))||0===a)b+=a;b+='\n    </div>\n    <div class="field field_phone">\n      <label>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</label>\n      ';
if((a=f["if"].call(c,(h=c&&c.user,null==h||!1===h?h:h.phone),{hash:{},inverse:this.program(11,function(a,b){return'\n      <input name="phone" type="text" placeholder="* (***) ***-**-**">\n      '},e),fn:this.program(9,function(a,b){var c,f;return c=""+('\n      <input name="phone" type="text" placeholder="* (***) ***-**-**" value="'+g((f=(f=a&&a.user,null==f||!1===f?f:f.phone),"function"===typeof f?f.apply(a):f))+'">\n      ')},e),data:e}))||0===a)b+=a;return b+'\n    </div>\n    <div class="note">\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</div>\n  </div>\n  <div class="popupwin__footer clearfix">\n    <a href="#?" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</a>\n  </div>\n</div>\x3c!-- class="popup-content" --\x3e\n'});
this.Templates.RouteAside=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="route-list popupwin__content">\n  <div class="title">\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f</div>\n  <ul class="list">\n    ';if((a=f.each.call(c,c&&c.points,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,
e;c='\n    <li class="item">\n      <a href="#?" class="close js-delete"></a>\n      <a href="#?" class="link-wrap js-popupwin-place">\n      <span class="drag"></span>\n      <span class="number">';(e=f.position)?e=e.call(a,{hash:{},data:b}):(e=a&&a.position,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=h(e)+'</span>\n      <img src="'+h((e=(e=(e=(e=a&&a.point,null==e||!1===e?e:e.imgs),null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail104x104),"function"===typeof e?e.apply(a):
e))+'" alt="" class="img">\n      <div class="text">\n        <span class="text__place">'+h((e=(e=a&&a.point,null==e||!1===e?e:e.name),"function"===typeof e?e.apply(a):e))+'</span>\n      <span class="text__type c-place">\u043c\u0435\u0441\u0442\u043e</span>\n      </div>\n      </a>\n    </li>\n    '},e),data:e}))||0===a)b+=a;b+='\n  </ul>\n</div>\n<div class="route-aside-commercial popupwin__content">\n  <div class="price">';(a=f.price)?a=a.call(c,{hash:{},data:e}):(a=c&&c.price,a="function"===
typeof a?a.call(c,{hash:{},data:e}):a);return b+=h(a)+' <span class="sprite-ruble-green-big"></span></div>\n  <div class="text">\u0426\u0435\u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 <a href="#?">\u0411\u0435\u043b\u043a\u043e\u0442\u0443\u0440</a></div>\n  <a href="#?" class="btn btn_color_blue js-popup-order-route">\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</a>\n</div>\n'});
this.Templates.RouteComments=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var h,g=this.escapeExpression,d=f.helperMissing,k=f.blockHelperMissing;h={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e,h;c=""+('\n  <li class="comments__item">\n    <a href="#" class="photo">\n      <img src="'+g((e=(e=a&&a.author,null==e||!1===e?e:e.icon),"function"===typeof e?e.apply(a):e))+'" alt="user1" class="photo__img">\n    </a>\n    <div class="text">\n      <div class="text__info">\n        <a href="#" class="name">'+
g((e=(e=a&&a.author,null==e||!1===e?e:e.first_name),"function"===typeof e?e.apply(a):e))+" "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'</a>\n        <span class="time">&bull; ');h={hash:{},data:b};c+=g((e=f.dateFormat||a&&a.dateFormat,e?e.call(a,a&&a.created,h):d.call(a,"dateFormat",a&&a.created,h)))+'</span>\n      </div>\n      <div class="text__comment">';h={hash:{},data:b};return c+=g((e=f.safe||a&&a.safe,e?e.call(a,a&&a.review,h):d.call(a,"safe",
a&&a.review,h)))+"</div>\n    </div>\n  </li>\n"},e),data:e};(a=f.reviews)?a=a.call(c,h):(a=c&&c.reviews,a="function"===typeof a?a.call(c,h):a);f.reviews||(a=k.call(c,a,h));if(a||0===a)b+=a;b+="\n";if((c=f["if"].call(c,(a=c&&c.user,null==a||!1===a?a:a.authorized),{hash:{},inverse:this.program(5,function(a,b){return'\n<li class="comments__item">\n<p>\n  <a class="login__link link" href="#">\u0412\u043e\u0439\u0434\u0438\u0442\u0435</a>, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\n</p>\n</li>\n'},
e),fn:this.program(3,function(a,b){var c,d;return c=""+('\n<li class="comments__item">\n  <form class="comment-form" action="/">\n    <a href="#" class="photo">\n      <img src="'+g((d=(d=a&&a.user,null==d||!1===d?d:d.icon),"function"===typeof d?d.apply(a):d))+'" alt="user1" class="photo__img">\n    </a>\n    <div class="text">\n      <textarea name="review_text" placeholder="\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></textarea>\n      <input type="submit" class="btn btn_color_blue" value="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c">\n    </div>\n  </form>\n</li>\n')},
e),data:e}))||0===c)b+=c;return b+"\n"});
this.Templates.RouteHeader=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);var h;b=this.escapeExpression;return c=""+('<a href="#" class="user">\n  <img src="'+b((h=(h=c&&c.author,null==h||!1===h?h:h.icon),"function"===typeof h?h.apply(c):h))+'" alt="" class="img">\n  <span class="name">'+b((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+b((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?
h.apply(c):h))+'</span><br>\n  \u0434\u043e\u0431\u0430\u0432\u0438\u043b <span class="type c-route">\u043c\u0430\u0440\u0448\u0440\u0443\u0442</span>\n</a>\n<ul class="actions">\n  <li class="item">\n    \x3c!--<a href="#?" class="btn btn_color_grey btn-print">\n      <span class="icon sprite-print"></span>\n      <span class="text">\u041f\u0435\u0447\u0430\u0442\u044c</span>\n    </a>\n  </li>\n  <li class="item">\n    <a href="#?" class="btn-like">\n      <span class="icon sprite-like-user"></span>\n      <span class="text">4</span>\n    </a>\n  </li>\n  <li class="item">\n    <a href="#?" class="btn btn_color_blue">\n      \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435\n    </a>\n  </li>-\n  <li class="item">\n    <a href="#?" class="btn-upload">\n      <span class="icon sprite-upload"></span>\n    </a>\n    <div class="soc-wrap">\n      <ul class="soc-list">\n        <li class="soc-list__item">\n          <a href="#?" class="btn-soc btn-soc_tw">Twitter</a>\n        </li>\n        <li class="soc-list__item">\n          <a href="#?" class="btn-soc btn-soc_vk">\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435</a>\n        </li>\n        <li class="soc-list__item">\n          <a href="#?" class="btn-soc btn-soc_fb">Facebook</a>\n        </li>\n      </ul>\n    </div>\n  </li>--\x3e\n</ul>\n')});
this.Templates.RouteLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="popupwin__route-wrap clearfix">\n  <div id="route-aside-region"></div>\n\n  <div class="popupwin__content">\n    <div id="route-header-region" class="place-info clearfix"></div>\n    <div id="route-map-region"></div>\n    \x3c!--<div class="map map_popupwin">\n      <a href="#?" class="map__close sprite-close js-map-close"></a>\n      <div class="map__container" id="map4"></div>\n      <a href="#?" class="btn-open js-map-open"></a>\n    </div>--\x3e\n    <div class="description">\n      <h3 class="description__title route_name">';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'</h3>\n      <p class="description__text route_description">';(a=f.description)?a=a.call(c,{hash:{},data:e}):(a=c&&c.description,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=h(a)+'</p>\n    </div>\n    <div class="comments-wrap" id="route-comments-region"></div>\n\n  </div>\n</div>\n'});
this.Templates.RouteMap=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<a href="#" class="map__close sprite-close js-map-close"></a>\n<div class="map__container" id="map-route"></div>\n<a href="#" class="btn-open js-map-open"></a>\n'});
this.Templates.OrderTrip=Handlebars.template(function(b,c,f,a,e){function h(a,b){return'\n        <button class="btn btn_color_blue js-tour-personal" style="width:150px;">\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439</button>\n        <button class="btn btn_color_grey js-tour-group" style="width:150px;">\u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439</button>\n        '}function g(a,b){var c,e,g;c='\n        <div class="field additional">\n          <div class="entry-title">\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438:</div>\n          <ul class="list clearfix">\n            ';
if((g=f.each.call(a,(e=(e=a&&a.summary_info,null==e||!1===e?e:e.personal),null==e||!1===e?e:e.additional),{hash:{},inverse:m.noop,fn:m.program(18,d,b),data:b}))||0===g)c+=g;return c+"\n          </ul>\n        </div>\n        "}function d(a,b){var c,d,e;e={hash:{},data:b};c='\n            <li class="item clearfix">\n            <div class="name">'+(q((d=f.orderService||a&&a.orderService,d?d.call(a,"name",a,e):s.call(a,"orderService","name",a,e)))+'</div>\n              <label class="check-wrap">\n                <input class="js-personal-service" name="');
e={hash:{},data:b};c+=q((d=f.orderService||a&&a.orderService,d?d.call(a,"name",a,e):s.call(a,"orderService","name",a,e)))+'" value="';e={hash:{},data:b};c+=q((d=f.orderService||a&&a.orderService,d?d.call(a,"price",a,e):s.call(a,"orderService","price",a,e)))+'" type="checkbox">\n                <span class="icon"></span>\n              </label>\n              <div class="price">';e={hash:{},data:b};return c+=q((d=f.orderService||a&&a.orderService,d?d.call(a,"price",a,e):s.call(a,"orderService","price",
a,e)))+' <span class="rouble">o</span></div>\n            </li>\n            '}function k(a,b){return"hide"}function n(a,b){var c,d,e;c='\n        <div class="field additional">\n          <div class="entry-title">\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438:</div>\n          <ul class="list clearfix">\n            ';if((e=f.each.call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.additional),{hash:{},
inverse:m.noop,fn:m.program(24,p,b),data:b}))||0===e)c+=e;return c+"\n          </ul>\n        </div>\n        "}function p(a,b){var c,d,e;e={hash:{},data:b};c='\n            <li class="item clearfix">\n            <div class="name">'+(q((d=f.orderService||a&&a.orderService,d?d.call(a,"name",a,e):s.call(a,"orderService","name",a,e)))+'</div>\n              <label class="check-wrap">\n                <input class="js-group-service" name="');e={hash:{},data:b};c+=q((d=f.orderService||a&&a.orderService,
d?d.call(a,"name",a,e):s.call(a,"orderService","name",a,e)))+'" value="';e={hash:{},data:b};c+=q((d=f.orderService||a&&a.orderService,d?d.call(a,"price",a,e):s.call(a,"orderService","price",a,e)))+'" type="checkbox">\n                <span class="icon"></span>\n              </label>\n              <div class="price">';e={hash:{},data:b};return c+=q((d=f.orderService||a&&a.orderService,d?d.call(a,"price",a,e):s.call(a,"orderService","price",a,e)))+' <span class="rouble">o</span></div>\n            </li>\n            '}
this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var l,q=this.escapeExpression,m=this,s=f.helperMissing;b='<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    \u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\n  </div>\n  <div class="form">\n    <div class="field">\n      <label>\u0412\u0430\u0448\u0438 \u0424\u0418\u041e:</label>\n      ';if((a=f["if"].call(c,(l=c&&c.user,null==l||!1===l?l:l.first_name),{hash:{},inverse:m.program(3,
function(a,b){return'\n      <input name="fullname" type="text">\n      '},e),fn:m.program(1,function(a,b){var c,d;return c=""+('\n      <input name="fullname" type="text" value="'+q((d=(d=a&&a.user,null==d||!1===d?d:d.first_name),"function"===typeof d?d.apply(a):d))+" "+q((d=(d=a&&a.user,null==d||!1===d?d:d.last_name),"function"===typeof d?d.apply(a):d))+'">\n      ')},e),data:e}))||0===a)b+=a;b+='\n    </div>\n    <div class="field field_email">\n      <label>E-mail<span class="star">*</span>:\n      </label>\n      ';
if((a=f["if"].call(c,(l=c&&c.user,null==l||!1===l?l:l.email),{hash:{},inverse:m.program(7,function(a,b){return'\n      <input name="email" type="text">\n      '},e),fn:m.program(5,function(a,b){var c,d;return c=""+('\n      <input name="email" type="text" value="'+q((d=(d=a&&a.user,null==d||!1===d?d:d.email),"function"===typeof d?d.apply(a):d))+'">\n      ')},e),data:e}))||0===a)b+=a;b+='\n    </div>\n    <div class="field field_phone">\n      <label>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</label>\n      ';
if((a=f["if"].call(c,(l=c&&c.user,null==l||!1===l?l:l.phone),{hash:{},inverse:m.program(11,function(a,b){return'\n      <input name="phone" type="text" placeholder="* (***) ***-**-**">\n      '},e),fn:m.program(9,function(a,b){var c,d;return c=""+('\n      <input name="phone" type="text" placeholder="* (***) ***-**-**" value="'+q((d=(d=a&&a.user,null==d||!1===d?d:d.phone),"function"===typeof d?d.apply(a):d))+'">\n      ')},e),data:e}))||0===a)b+=a;b+='\n    </div>\n    <div class="field clearfix">\n      ';
if((a=f["if"].call(c,(l=(l=c&&c.summary_info,null==l||!1===l?l:l.personal),null==l||!1===l?l:l.personal_price_tour),{hash:{},inverse:m.noop,fn:m.program(13,function(a,b){var c,d,e;c="\n        ";if((e=f["if"].call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.group_price_tour),{hash:{},inverse:m.noop,fn:m.program(14,h,b),data:b}))||0===e)c+=e;return c+"\n      "},e),data:e}))||0===a)b+=a;b+="\n    </div>\n    ";if((a=f["if"].call(c,(l=(l=c&&c.summary_info,null==l||!1===
l?l:l.personal),null==l||!1===l?l:l.personal_price_tour),{hash:{},inverse:m.noop,fn:m.program(16,function(a,b){var c,d,e;c={hash:{},data:b};c='\n    <form id="orderPersonalTour">\n      <div class="personal-tour">\n        <div class="field clearfix">\n          <div class="item item_count">\n            <label>\u041a\u043e\u043b-\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a<span class="star">*</span>:</label>\n            <div class="select-grey">\n              <select class="js-personal-users" name="user_count">\n                '+
(q((d=f.optionRange||a&&a.optionRange,d?d.call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_max_people),c):s.call(a,"optionRange",(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_max_people),c)))+'\n              </select>\n            </div>\n          </div>\n          <div class="item item_date">\n            <label>\u0414\u0430\u0442\u0430<span class="star">*</span>:</label>\n            <input name="date" type="text" class="js-datapicker-personal">\n          </div>\n        </div>\n        \x3c!--\n        <div class="field">\n          <label>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430<span class="star">*</span>:</label>\n          <div class="select-grey">\n            <select name="time">\n              <option value="1">18:30</option>\n              <option value="2">19:30</option>\n              <option value="3">20:30</option>\n              <option value="4">21:30</option>\n              <option value="5">22:30</option>\n            </select>\n          </div>\n        </div>\n        --\x3e\n        ');
if((e=f["if"].call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.additional),{hash:{},inverse:m.noop,fn:m.program(17,g,b),data:b}))||0===e)c+=e;return c+='\n        <input type="hidden" name="total_price" value="'+q((d=(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_price_tour),"function"===typeof d?d.apply(a):d))+'">\n        <div class="field finish-price">\u0418\u0442\u043e\u0433\u043e: <span class="price">'+q((d=(d=(d=a&&a.summary_info,
null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_price_tour),"function"===typeof d?d.apply(a):d))+' <span class="rouble">o</span></span></div>\n      </div>\x3c!-- /personal-tour --\x3e\n    </form>\n    '},e),data:e}))||0===a)b+=a;b+="\n\n    ";if((a=f["if"].call(c,(l=(l=c&&c.summary_info,null==l||!1===l?l:l.group),null==l||!1===l?l:l.group_price_tour),{hash:{},inverse:m.noop,fn:m.program(20,function(a,b){var c,d,e;c='\n    <form id="orderGroupTour">\n      <div class="group-tour ';if((e=
f["if"].call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_price_tour),{hash:{},inverse:m.noop,fn:m.program(21,k,b),data:b}))||0===e)c+=e;e={hash:{},data:b};c=c+'">\n        <div class="field clearfix">\n          <div class="item item_count">\n            <label>\u041a\u043e\u043b-\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a<span class="star">*</span>:</label>\n            <div class="select-grey">\n              <select class="js-group-users" name="user_count">\n                '+
(q((d=f.optionRange||a&&a.optionRange,d?d.call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.group_max_people),e):s.call(a,"optionRange",(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.group_max_people),e)))+'\n              </select>\n            </div>\n          </div>\n          <div class="item item_date">\n            <label>\u0414\u0430\u0442\u0430<span class="star">*</span>:</label>\n            <input name="date" type="text" class="js-datapicker-group">\n          </div>\n        </div>\n        \x3c!--\n        <div class="field">\n          <label>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430<span class="star">*</span>:</label>\n          <div class="select-grey">\n            <select name="time">\n              <option value="1">18:30</option>\n              <option value="2">19:30</option>\n              <option value="3">20:30</option>\n              <option value="4">21:30</option>\n              <option value="5">22:30</option>\n            </select>\n          </div>\n        </div>\n        --\x3e\n        ');
if((e=f["if"].call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.additional),{hash:{},inverse:m.noop,fn:m.program(23,n,b),data:b}))||0===e)c+=e;return c+='\n        <input type="hidden" name="total_price" value="'+q((d=(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_price_tour),"function"===typeof d?d.apply(a):d))+'">\n        <div class="field finish-price">\u0418\u0442\u043e\u0433\u043e: <span class="price">'+q((d=(d=(d=a&&a.summary_info,
null==d||!1===d?d:d.group),null==d||!1===d?d:d.group_price_tour),"function"===typeof d?d.apply(a):d))+' <span class="rouble">o</span></span></div>\n      </div>\x3c!-- /group-tour --\x3e\n    </form>\n    '},e),data:e}))||0===a)b+=a;return b+'\n\n  </div>\n  <div class="note"><span class="star">*</span> - \u043f\u043e\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</div>\n  <div class="popupwin__footer clearfix">\n    <button class="btn btn_color_blue right js-finish">\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c</button>\n  </div>\n</div>\x3c!-- class="popup-content" --\x3e\n'});
this.Templates.TripAside=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,d;c='\n    <li class="item clearfix" data-step="';(d=f.position)?d=d.call(a,{hash:{},data:b}):(d=a&&a.position,d=typeof d===p?d.call(a,{hash:{},data:b}):d);c+=l(d)+'">\n      <span class="number">';(d=f.position)?d=d.call(a,{hash:{},data:b}):(d=a&&a.position,d=typeof d===p?d.call(a,{hash:{},data:b}):d);c+=l(d)+'</span>\n      <div class="text">\n        <a class="text__place name__blck">';(d=f.name)?d=d.call(a,
{hash:{},data:b}):(d=a&&a.name,d=typeof d===p?d.call(a,{hash:{},data:b}):d);return c+=l(d)+"</a>\n      </div>\n    </li>\n    "}function g(a,b){var c,e,g;c=""+('\n  \u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0442\u0443\u0440:\n  <div class="price">'+l((e=(e=(e=a&&a.summary_info,null==e||!1===e?e:e.personal),null==e||!1===e?e:e.personal_price_tour),typeof e===p?e.apply(a):e))+' <span class="sprite-ruble-green-big"></span></div>\n  ');if((g=f["with"].call(a,
(e=a&&a.summary_info,null==e||!1===e?e:e.personal),{hash:{},inverse:q.noop,fn:q.program(6,d,b),data:b}))||0===g)c+=g;return c+"\n  "}function d(a,b){var c,d;c={hash:{},data:b};return c='\n  <div class="duration">'+(l((d=f.duration||a&&a.duration,d?d.call(a,a&&a.personal_dur_days,a&&a.personal_dur_hours,a&&a.personal_dur_minutes,c):m.call(a,"duration",a&&a.personal_dur_days,a&&a.personal_dur_hours,a&&a.personal_dur_minutes,c)))+"</div>\n  ")}function k(a,b){var c,d,e;c=""+('\n  \u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0442\u0443\u0440:\n  <div class="price">'+
l((d=(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.group_price_tour),typeof d===p?d.apply(a):d))+' <span class="sprite-ruble-green-big"></span> / \u0447\u0435\u043b</div>\n  ');if((e=f["with"].call(a,(d=a&&a.summary_info,null==d||!1===d?d:d.group),{hash:{},inverse:q.noop,fn:q.program(9,n,b),data:b}))||0===e)c+=e;return c+"\n  "}function n(a,b){var c,d;c={hash:{},data:b};return c='\n  <div class="duration">'+(l((d=f.duration||a&&a.duration,d?d.call(a,a&&a.group_dur_days,a&&
a.group_dur_hours,a&&a.group_dur_minutes,c):m.call(a,"duration",a&&a.group_dur_days,a&&a.group_dur_hours,a&&a.group_dur_minutes,c)))+"</div>\n  ")}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var p="function",l=this.escapeExpression,q=this,m=f.helperMissing;if((a=f["if"].call(c,c&&c.blocks,{hash:{},inverse:q.noop,fn:q.program(1,function(a,b){var c,d;c='\n<div class="trip-list popupwin__content">\n  <div class="title">\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435</div>\n  <ul class="list">\n    ';
if((d=f.each.call(a,a&&a.blocks,{hash:{},inverse:q.noop,fn:q.program(2,h,b),data:b}))||0===d)c+=d;return c+'\n  </ul>\n</div>\x3c!-- class="trip-list" --\x3e\n'},e),data:e}))||0===a)b+=a;b+='\n\x3c!--\n<div class="route-list popupwin__content">\n  <div class="title">\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438</div>\n  <ul class="list">\n    <li class="item">\n      <span class="drag"></span>\n      <span class="number">1</span>\n      <img src="media/uploads/route-1.png" alt="" class="img">\n      <div class="text">\n        <span class="text__place">\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0412\u044f\u0437\u043d\u0438\u043a\u043e\u0432</span>\n        <span class="text__type c-place">\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440</span>\n      </div>\n    </li>\n    <li class="item">\n      <span class="drag"></span>\n      <span class="number">2</span>\n      <img src="media/uploads/route-2.png" alt="" class="img">\n      <div class="text">\n        <span class="text__place">\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u041c\u0435\u043d\u044c\u0448\u0438\u043a\u043e\u0432</span>\n        <span class="text__type c-user">\u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a</span>\n      </div>\n    </li>\n  </ul>\n</div>\n--\x3e\x3c!-- class="route-list" --\x3e\n';
e={hash:{},inverse:q.noop,fn:q.program(4,function(a,b){var c,d,e;c='\n<div class="route-aside-commercial popupwin__content">\n  ';if((e=f["if"].call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.personal),null==d||!1===d?d:d.personal_price_tour),{hash:{},inverse:q.noop,fn:q.program(5,g,b),data:b}))||0===e)c+=e;c+="\n  ";if((e=f["if"].call(a,(d=(d=a&&a.summary_info,null==d||!1===d?d:d.group),null==d||!1===d?d:d.group_price_tour),{hash:{},inverse:q.noop,fn:q.program(8,k,b),data:b}))||0===e)c+=e;return c+=
'\n  <div class="text">\u0426\u0435\u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u044d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u0438 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 <a href="#?">'+l((d=(d=a&&a.author,null==d||!1===d?d:d.first_name),typeof d===p?d.apply(a):d))+" "+l((d=(d=a&&a.author,null==d||!1===d?d:d.last_name),typeof d===p?d.apply(a):d))+'</a></div>\n  <a href="#" class="btn btn_color_blue js-popup-order-route">\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437</a>\n  \x3c!--\n  <div class="separator">\u0438\u043b\u0438</div>\n  <a href="#" class="btn btn_color_yel js-popup-order-route">\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u0433\u0438\u0434\u043e\u043c</a>\n  --\x3e\n</div>\n'},
e),data:e};if((c=(a=f.ifOrderHasPrice||c&&c.ifOrderHasPrice,a?a.call(c,c&&c.summary_info,e):m.call(c,"ifOrderHasPrice",c&&c.summary_info,e)))||0===c)b+=c;return b+"\n"});
this.Templates.TripBlock=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="trip-view" data-step="';(a=f.position)?a=a.call(c,{hash:{},data:e}):(a=c&&c.position,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'">\n  <div id="blockitem-imgs-region-';(a=f.cid)?a=a.call(c,{hash:{},data:e}):(a=c&&c.cid,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'"></div> \n\n  <div id="blockitem-description-region-';
(a=f.cid)?a=a.call(c,{hash:{},data:e}):(a=c&&c.cid,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'"></div> \n\n  <div class="map map_popupwin mb10">\n    <a href="#" class="map__open js-map-open">\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n    <a href="#" class="map__close sprite-close js-map-close"></a>\n    <div class="map__container" id="map';(a=f.position)?a=a.call(c,{hash:{},data:e}):(a=c&&c.position,a="function"===typeof a?a.call(c,{hash:{},
data:e}):a);return b+=h(a)+'"></div>\n  </div>\n</div>\n<div class="line" style="display: block; height:6px; background: #616161;"></div>\n'});
this.Templates.TripBlockDesc=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n    <li class="item"><a href="/point/';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===d?e.call(a,{hash:{},data:b}):e);c+=k(e)+'" class="link c-place">';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===d?e.call(a,{hash:{},data:b}):e);return c+=k(e)+"</a></li>\n    "}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g,d="function",k=this.escapeExpression,
n=this,p=f.helperMissing;b='<h3 class="description__title">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a=typeof a===d?a.call(c,{hash:{},data:e}):a);b+=k(a)+'</h3>\n<p class="description__text">';g={hash:{},data:e};b+=k((a=f.br||c&&c.br,a?a.call(c,c&&c.txt,g):p.call(c,"br",c&&c.txt,g)))+"</p>\n";if((a=f["if"].call(c,c&&c.points,{hash:{},inverse:n.noop,fn:n.program(1,function(a,b){var c,d;c='\n<div class="description__places">\n  <div class="title">\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430 \x3c!--\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f--\x3e</div>\n  <ul class="list">\n    ';
if((d=f.each.call(a,a&&a.points,{hash:{},inverse:n.noop,fn:n.program(2,h,b),data:b}))||0===d)c+=d;return c+"\n  </ul>\n</div>\n"},e),data:e}))||0===a)b+=a;b+='\n<div class="description__address">';(a=f.address)?a=a.call(c,{hash:{},data:e}):(a=c&&c.address,a=typeof a===d?a.call(c,{hash:{},data:e}):a);return b+=k(a)+"</div>\n"});
this.Templates.TripBlockPhoto=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n      <li class="item"><img src="';(e=f.thumbnail625x370)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail625x370,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="img" /></li>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;b='<ul class="bxslider bxslider-trip-';(a=f.position)?a=a.call(c,
{hash:{},data:e}):(a=c&&c.position,a=typeof a===g?a.call(c,{hash:{},data:e}):a);b+=d(a)+'">\n  ';if((a=f["if"].call(c,c&&c.imgs,{hash:{},inverse:k.program(4,function(a,b){return'\n  <li class="item empty"><img src="/static/images/place-unknown-big.png" class="img" /></li>\n  '},e),fn:k.program(1,function(a,b){var c,d,e;c="\n    ";e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.imgs)?d=d.call(a,e):(d=a&&a.imgs,d=typeof d===g?d.call(a,e):d);f.imgs||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+
"\n  "},e),data:e}))||0===a)b+=a;b+='\n</ul>\n<div class="bx-pager" id="bx-pager-';(a=f.position)?a=a.call(c,{hash:{},data:e}):(a=c&&c.position,a=typeof a===g?a.call(c,{hash:{},data:e}):a);b+=d(a)+'">\n  <div class="bx-pager__viewport">\n    <div class="bx-pager__scrollbox">\n      ';e={hash:{},inverse:k.noop,fn:k.program(6,function(a,b){var c,e;c=""+('\n      <a data-slide-index="'+d((e=(e=b,null==e||!1===e?e:e.index),typeof e===g?e.apply(a):e))+'" href="#" class="bx-pager__item">\n        <img src="');
(e=f.thumbnail104x104)?e=e.call(a,{hash:{},data:b}):(e=a&&a.thumbnail104x104,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="img"/>\n        </a>\n      '},e),data:e};(a=f.imgs)?a=a.call(c,e):(a=c&&c.imgs,a=typeof a===g?a.call(c,e):a);f.imgs||(a=n.call(c,a,e));if(a||0===a)b+=a;return b+'\n    </div>\n  </div>\n</div>\n\x3c!--<a href="#" class="btn-photo-add js-popup-add-photos">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</a>--\x3e\n'});
this.Templates.TripComments=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var h,g=this.escapeExpression,d=f.helperMissing,k=f.blockHelperMissing;h={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e,h;c=""+('\n  <li class="comments__item">\n    <a href="#" class="photo">\n      <img src="'+g((e=(e=a&&a.author,null==e||!1===e?e:e.icon),"function"===typeof e?e.apply(a):e))+'" alt="'+g((e=(e=a&&a.author,null==e||!1===e?
e:e.first_name),"function"===typeof e?e.apply(a):e))+" "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'" class="photo__img">\n    </a>\n    <div class="text">\n      <div class="text__info">\n        <a href="#" class="name">'+g((e=(e=a&&a.author,null==e||!1===e?e:e.first_name),"function"===typeof e?e.apply(a):e))+" "+g((e=(e=a&&a.author,null==e||!1===e?e:e.last_name),"function"===typeof e?e.apply(a):e))+'</a>\n        <span class="time">&bull; ');h={hash:{},
data:b};c+=g((e=f.dateFormat||a&&a.dateFormat,e?e.call(a,a&&a.created,h):d.call(a,"dateFormat",a&&a.created,h)))+'</span>\n      </div>\n      <div class="text__comment">';h={hash:{},data:b};return c+=g((e=f.safe||a&&a.safe,e?e.call(a,a&&a.review,h):d.call(a,"safe",a&&a.review,h)))+"</div>\n    </div>\n  </li>\n"},e),data:e};(a=f.reviews)?a=a.call(c,h):(a=c&&c.reviews,a="function"===typeof a?a.call(c,h):a);f.reviews||(a=k.call(c,a,h));if(a||0===a)b+=a;b+='\n<li class="comments__item">\n  <form class="comment-form" action="/">\n    <a href="#" class="photo">\n      <img src="';
if((e=f["if"].call(c,(a=c&&c.user,null==a||!1===a?a:a.authorized),{hash:{},inverse:this.program(5,function(a,b){return"/static/images/user-unknown-small.png"},e),fn:this.program(3,function(a,b){var c;return g((c=(c=a&&a.user,null==c||!1===c?c:c.icon),"function"===typeof c?c.apply(a):c))},e),data:e}))||0===e)b+=e;return b+='" alt="'+g((a=(a=c&&c.user,null==a||!1===a?a:a.first_name),"function"===typeof a?a.apply(c):a))+" "+g((a=(a=c&&c.user,null==a||!1===a?a:a.last_name),"function"===typeof a?a.apply(c):
a))+'" class="photo__img">\n    </a>\n    <div class="text">\n      <textarea name="review_text" placeholder="\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"></textarea>\n      <input type="submit" class="btn btn_color_blue" value="\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c">\n    </div>\n  </form>\n</li>\n'});
this.Templates.TripHeader=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g,d=this.escapeExpression;a=f.helperMissing;b=""+('<a href="#" class="user user_in_popup">\n  <img src="'+d((h=(h=c&&c.author,null==h||!1===h?h:h.icon),"function"===typeof h?h.apply(c):h))+'" alt="" class="img">\n  <span class="name trip_author">'+d((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+d((h=(h=c&&c.author,null==
h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+'</span><br>\n  \u0434\u043e\u0431\u0430\u0432\u0438\u043b <span class="type c-trip">');if((g=f["if"].call(c,c&&c.price,{hash:{},inverse:this.program(3,function(a,b){return"\u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435"},e),fn:this.program(1,function(a,b){return"\u044d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u044e"},e),data:e}))||0===g)b+=g;b+='</span>\n</a>\n<ul class="actions">\n  \x3c!--\n  ';g={hash:{},inverse:this.noop,
fn:this.program(5,function(a,b){return'\n  <li class="item">\n    <a href="#" class="btn btn_color_blue" title="\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c">\n      \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\n    </a>\n  </li>\n  '},e),data:e};if((g=(h=f.ifContains||c&&c.ifContains,h?h.call(c,(h=c&&c.author,null==h||!1===h?h:h.id),c&&c.user,g):a.call(c,"ifContains",(h=c&&c.author,null==h||!1===h?h:h.id),c&&c.user,g)))||0===g)b+=
g;b+='\n  --\x3e\n  <li class="item">\n    <a href="#" class="btn-like ';g={hash:{},inverse:this.noop,fn:this.program(7,function(a,b){return"active"},e),data:e};if((g=(h=f.ifBelong||c&&c.ifBelong,h?h.call(c,c&&c.author,c&&c.likeusers,g):a.call(c,"ifBelong",c&&c.author,c&&c.likeusers,g)))||0===g)b+=g;b+='" data-toggle="tooltip" data-original-title="" data-placement="bottom">\n      <span class="icon sprite-like-user"></span>\n      <span class="text">';if((g=f["if"].call(c,(h=c&&c.likeusers,null==
h||!1===h?h:h.length),{hash:{},inverse:this.program(11,function(a,b){return"0"},e),fn:this.program(9,function(a,b){var c;return d((c=(c=a&&a.likeusers,null==c||!1===c?c:c.length),"function"===typeof c?c.apply(a):c))},e),data:e}))||0===g)b+=g;b+='</span>\n    </a>\n  </li>\n  <li class="item">\n    <a href="#" class="btn-upload" title="\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u043e\u0446. \u0441\u0435\u0442\u044f\u0445">\n      <span class="icon sprite-upload"></span>\n    </a>\n    <div class="soc-wrap">\n      <ul class="soc-list">\n        <li class="soc-list__item">\n        <a target="_blank" href="https://twitter.com/intent/tweet?original_referer=http://yasenput.ru/trip/';
(g=f.id)?g=g.call(c,{hash:{},data:e}):(g=c&&c.id,g="function"===typeof g?g.call(c,{hash:{},data:e}):g);b+=d(g)+"&text=";(g=f.name)?g=g.call(c,{hash:{},data:e}):(g=c&&c.name,g="function"===typeof g?g.call(c,{hash:{},data:e}):g);b+=d(g)+"&url=http://yasenput.ru/trip/";(g=f.id)?g=g.call(c,{hash:{},data:e}):(g=c&&c.id,g="function"===typeof g?g.call(c,{hash:{},data:e}):g);b+=d(g)+'&via=yasenput" class="btn-soc btn-soc_tw">Twitter</a>\n        </li>\n        <li class="soc-list__item">\n          <a target="_blank" href="http://vk.com/share.php?url=http://yasenput.ru/trip/';
(g=f.id)?g=g.call(c,{hash:{},data:e}):(g=c&&c.id,g="function"===typeof g?g.call(c,{hash:{},data:e}):g);b+=d(g)+'" class="btn-soc btn-soc_vk">\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435</a>\n        </li>\n        <li class="soc-list__item">\n        <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yasenput.ru/trip/';(g=f.id)?g=g.call(c,{hash:{},data:e}):(g=c&&c.id,g="function"===typeof g?g.call(c,{hash:{},data:e}):g);return b+=d(g)+'&display=popup" class="btn-soc btn-soc_fb">Facebook</a>\n        </li>\n      </ul>\n    </div>\n  </li>\n</ul>\n'});
this.Templates.TripLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=f.helperMissing,g=this.escapeExpression;b='<div class="popupwin__route-wrap clearfix">\n  <div id="trip-aside-region"></div>\n  <div class="popupwin__content">\n    <div class="place-info clearfix" id="trip-header-region"></div>\n    <div class="title-trip c-place trip_name">\n      <span>';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?
a.call(c,{hash:{},data:e}):a);b+=g(a)+'</span>\n      <p class="description__text">';if((a=f["if"].call(c,c&&c.description,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;e={hash:{},data:b};return g((c=f.br||a&&a.br,c?c.call(a,a&&a.description,e):h.call(a,"br",a&&a.description,e)))},e),data:e}))||0===a)b+=a;return b+'</p>\n    </div>\n    <div class="popupwin__blocks" id="trip-blocks-region"></div>\n    <div id="trip-comments-region" class="comments-wrap"></div>\n  </div>\x3c!-- class="popup-content" --\x3e\n\n  <div class="popupwin__content clearfix" id="trip-likes-region"></div>\n</div>\n'});
this.Templates.TripLikes=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n      <li class="peoples__item">\n      <a title="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" href="#" class="peoples__link">\n          <img src="';(e=f.icon)?e=e.call(a,{hash:{},data:b}):(e=a&&a.icon,e=typeof e===
g?e.call(a,{hash:{},data:b}):e);c+=d(e)+'" alt="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);c+=d(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e=typeof e===g?e.call(a,{hash:{},data:b}):e);return c+=d(e)+'" class="peoples__img">\n        </a>\n      </li>\n    '}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var g="function",d=this.escapeExpression,k=this,n=f.blockHelperMissing;if((c=
f["if"].call(c,c&&c.likeusers,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d,e;c='\n  <div class="title title_blue title_bg_light">\u0418\u043c \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c:</div>\n  <ul class="peoples">\n    ';e={hash:{},inverse:k.noop,fn:k.program(2,h,b),data:b};(d=f.likeusers)?d=d.call(a,e):(d=a&&a.likeusers,d=typeof d===g?d.call(a,e):d);f.likeusers||(d=n.call(a,d,e));if(d||0===d)c+=d;return c+"\n  </ul>\n"},e),data:e}))||0===c)b+=c;return b+
"\n"});this.Templates.TripMap=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<a href="#" class="map__close sprite-close js-map-close"></a>\n<div class="map__container" id="map-route"></div>\n<a href="#" class="btn-open js-map-open"></a>\n'});this.Templates.FooterView=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="logo"><img src="/static/images/logo-footer.png" alt="\u042f\u0441\u0435\u043d\u041f\u0443\u0442\u044c" class="img"></div>\n<div class="constrain">\n  <nav class="nav">\n    <ul class="nav_list">\n      <li class="nav__item"><a href="/about" class="nav__link">\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435</a></li>\n      <li class="nav__item"><a href="/contacts" class="nav__link">\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b</a></li>\n      <li class="nav__item"><a href="/terms" class="nav__link">\u0421\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435</a></li>\n    </ul>\n  </nav>\n  <a href="#top" class="link-up js-up">\u0412\u0432\u0435\u0440\u0445</a>\n</div>\n'});
this.Templates.Ctrls=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c;return n((c=(c=a&&a.user,null==c||!1===c?c:c.icon),typeof c===k?c.apply(a):c))}function g(a,b){var c;return n((c=(c=a&&a.user,null==c||!1===c?c:c.avatar),typeof c===k?c.apply(a):c))}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var d,k="function",n=this.escapeExpression,p=this;b='<a href="/" class="logo">\n  <img src="/static/images/logo.png" alt="\u042f\u0441\u0435\u043d\u041f\u0443\u0442\u044c">\n</a>\n\n<div class="header__btns">\n  <a href="#?" class="btn btn_action_add btn_color_green js-popup-add" title="\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u0430, \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u043b\u0438 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f">\n    <span class="sprite-add"></span>\n  </a>\n  ';
if((c=f["if"].call(c,(d=c&&c.user,null==d||!1===d?d:d.authorized),{hash:{},inverse:p.program(6,function(a,b){return'\n  <a href="#?" class="btn btn_color_blue js-popupwin-authorization">\u0412\u043e\u0439\u0442\u0438</a>\n  '},e),fn:p.program(1,function(a,b){var c,d,e;c='\n  <div class="header__user">\n    <a href="/#dashboard/" class="link-user">\n      <img src="';if((e=f["if"].call(a,(d=a&&a.user,null==d||!1===d?d:d.icon),{hash:{},inverse:p.program(4,g,b),fn:p.program(2,h,b),data:b}))||0===e)c+=
e;return c+='" alt="'+n((d=(d=a&&a.user,null==d||!1===d?d:d.first_name),typeof d===k?d.apply(a):d))+" "+n((d=(d=a&&a.user,null==d||!1===d?d:d.last_name),typeof d===k?d.apply(a):d))+'" class="photo">\n      <span class="first-name">'+n((d=(d=a&&a.user,null==d||!1===d?d:d.first_name),typeof d===k?d.apply(a):d))+'</span><br><span class="last-name">'+n((d=(d=a&&a.user,null==d||!1===d?d:d.last_name),typeof d===k?d.apply(a):d))+'</span>\n    </a>\n    <a href="#?" class="btn btn_color_blue js-profile-menu"></a>\n    <ul class="profile-menu">\n      <li class="item">\n        <a href="/#dashboard/" class="link nonav">\n          <span class="icon sprite-bag"></span>\n          \u042f \u0441\u043e\u0437\u0434\u0430\u043b\n        </a>\n        <a href="/#dashboard/likes/" class="link nonav">\n          <span class="icon sprite-heart"></span>\n          \u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\n        </a>\n        <a href="/#dashboard/settings/" class="link nonav">\n          <span class="icon sprite-settings"></span>\n          \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\n        </a>\n        <a href="/logout/" class="link">\n          <span class="icon sprite-power"></span>\n          \u0412\u044b\u0445\u043e\u0434\n        </a>\n      </li>\n    </ul>\n  </div>\n  '},
e),data:e}))||0===c)b+=c;return b+'\n</div>\x3c!-- class="header__btns" --\x3e\n'});this.Templates.Destination=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="slogan">\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0443\u0439\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u043d\u0430\u043c\u0438</div>\n<div class="query">\n  <form id="destination-form" action="/">\n    <input id="destination-input" type="text" placeholder="\u041a\u0443\u0434\u0430 \u0432\u044b \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044c?">\n    <button type="submit" class="btn btn_color_blue">\u041f\u043e\u0435\u0445\u0430\u043b\u0438</button>\n  </form>\n  <span>\n    \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440,\n    <a class="search-example" data-name="\u0427\u0435\u0440\u0435\u043f\u043e\u0432\u0435\u0446" data-address="\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c" href="#">\u0427\u0435\u0440\u0435\u043f\u043e\u0432\u0435\u0446</a> ,\n    <a class="search-example" data-name="\u0423\u0441\u0442\u044e\u0436\u043d\u0430" data-address="\u0412\u043e\u043b\u043e\u0433\u043e\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c" href="#">\u0423\u0441\u0442\u044e\u0436\u043d\u0430</a> ,\n    <a class="search-example" data-lower-corner="32.29990 44.20657" data-upper-corner="36.752144 46.229215" data-name="\u0420\u0435\u0441\u043f\u0443\u0431\u043b\u0438\u043a\u0430 \u041a\u0440\u044b\u043c" data-address="\u0420\u043e\u0441\u0441\u0438\u044f" href="#">\u041a\u0440\u044b\u043c</a>\n  </span>\n</div>\n'});
this.Templates.Filter=Handlebars.template(function(b,c,f,a,e){function h(a,b){return"btn_color_blue active"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var g,d,k=this.escapeExpression;a=f.helperMissing;b='<ul class="categories">\n  \x3c!--\n  <li class="categories__item categories__item_btn">\n    <a href="/map" class="btn btn_color_grey" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u0443">\u041c\u043e\u0435 \u043d\u043e\u0432\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</a>\n  </li>\n  --\x3e\n  <li class="categories__item categories__item_btn">\n    <a href="/point" class="categories__link btn btn_color_grey ';
d={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"btn_color_green active"},e),data:e};if((d=(g=f.ifEquals||c&&c.ifEquals,g?g.call(c,(g=c&&c.settings,null==g||!1===g?g:g.models),"points",d):a.call(c,"ifEquals",(g=c&&c.settings,null==g||!1===g?g:g.models),"points",d)))||0===d)b+=d;b+='" data-model="points" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043c\u0435\u0441\u0442\u0430">\u041c\u0435\u0441\u0442\u0430</a>\n  </li>\n  <li class="categories__item categories__item_btn">\n    <a href="/event" class="categories__link btn btn_color_grey ';
d={hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return"btn_color_yel active"},e),data:e};if((d=(g=f.ifEquals||c&&c.ifEquals,g?g.call(c,(g=c&&c.settings,null==g||!1===g?g:g.models),"events",d):a.call(c,"ifEquals",(g=c&&c.settings,null==g||!1===g?g:g.models),"events",d)))||0===d)b+=d;b+='" data-model="events" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a>\n  </li>\n  <li class="categories__item categories__item_btn">\n  <a href="/trip" class="categories__link btn btn_color_grey ';
d={hash:{},inverse:this.noop,fn:this.program(5,h,e),data:e};if((d=(g=f.ifEquals||c&&c.ifEquals,g?g.call(c,(g=c&&c.settings,null==g||!1===g?g:g.models),"trips",d):a.call(c,"ifEquals",(g=c&&c.settings,null==g||!1===g?g:g.models),"trips",d)))||0===d)b+=d;b+='" data-model="trips" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f">\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f</a>\n  </li>\n  <li class="categories__item categories__item_btn">\n    <a href="/tour" class="categories__link btn btn_color_grey ';
d={hash:{},inverse:this.noop,fn:this.program(5,h,e),data:e};if((d=(g=f.ifEquals||c&&c.ifEquals,g?g.call(c,(g=c&&c.settings,null==g||!1===g?g:g.models),"tours",d):a.call(c,"ifEquals",(g=c&&c.settings,null==g||!1===g?g:g.models),"tours",d)))||0===d)b+=d;b+='" data-model="tours" title="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u044d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u0438">\u042d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u0438</a>\n  </li>\n</ul>\n\n<div class="header__search">\n  <form id="header-search-form">\n    <input type="text" placeholder="\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043c\u0435\u0441\u0442\u0430\u043c ...">\n  </form>\n</div>\n\n\x3c!--\n<ul class="categories">\n  ';
if((d=f.each.call(c,c&&c.items,{hash:{},inverse:this.noop,fn:this.program(7,function(a,b){var c,d;c='\n  <li class="categories__item">\n    <a href="#" class="categories__link sprite-filter-photo ';(d=f.style)?d=d.call(a,{hash:{},data:b}):(d=a&&a.style,d="function"===typeof d?d.call(a,{hash:{},data:b}):d);c+=k(d)+'" data-id="';(d=f.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d="function"===typeof d?d.call(a,{hash:{},data:b}):d);c+=k(d)+'" data-toggle="tooltip" data-placement="bottom" title="';(d=
f.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d="function"===typeof d?d.call(a,{hash:{},data:b}):d);return c+=k(d)+'"></a>\n  </li>\n  '},e),data:e}))||0===d)b+=d;return b+'\n  <li class="categories__item"><a href="#?" class="categories__link categories__link_type_all sprite-filter-all"></a></li>\n</ul>\n<div class="filter-type">\n  <a href="#?" class="btn btn_color_grey js-open">\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f</a>\n  <ul class="filter-type__list">\n    <li class="filter-type__item">\n      <a data-name="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f" data-models="" href="#?" class="filter-type__link active">\u0412\u0441\u0435</a>\n    </li>\n    <li class="filter-type__item">\n      <a data-name="\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f" data-models="trips" href="#?" class="filter-type__link c-trip">\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f</a>\n    </li>\n    <li class="filter-type__item">\n      <a data-name="\u041c\u0435\u0441\u0442\u0430" data-models="points" href="#?" class="filter-type__link c-place">\u041c\u0435\u0441\u0442\u0430</a>\n    </li>\n    <li class="filter-type__item">\n      <a data-name="\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b" data-models="routes" href="#?" class="filter-type__link c-route">\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</a>\n    </li>\n    <li class="filter-type__item">\n      <a data-name="\u0421\u043e\u0431\u044b\u0442\u0438\u044f" data-models="events" href="#?" class="filter-type__link c-event">\u0421\u043e\u0431\u044b\u0442\u0438\u044f</a>\n    </li>\n  </ul>\n</div>\n\n<div class="filter-sort">\n  <a href="#?" class="sprite-filter-down" data-toggle="tooltip" data-placement="bottom" title="\u041d\u043e\u0432\u043e\u0435"></a>\n  <a href="#?" class="sprite-filter-up" data-toggle="tooltip" data-placement="bottom" title="\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435"></a>\n</div>\n<div class="filter-dropdown">\n  <div class="dropdown">\n    <a href="" class="link sprite-filter2-time" title="\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c" data-toggle="dropdown"></a>\n    <div class="dropdown-block dropdown-block_time">\n      \u043e\u0442&nbsp;\n      <input type="text" class="delay_start">&nbsp;&nbsp;\n      \u0434\u043e&nbsp;\n      <input type="text" class="delay_end">&nbsp;&nbsp;\n      \u0434\u043d\u0435\u0439\n      <button class="btn btn_color_green-dark yp_delay_sub">\u041e\u043a</button>\n    </div>\n  </div>\n  <div class="dropdown">\n    <a href="" class="link sprite-filter2-money" title="\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u0446\u0435\u043d" data-toggle="dropdown"></a>\n    <div class="dropdown-block dropdown-block_money">\n      \u043e\u0442&nbsp;\n      <input type="text" class="price_start">&nbsp;&nbsp;\n      \u0434\u043e&nbsp;\n      <input type="text" class="price_end">&nbsp;\n      <span class="sprite-ruble-dark"></span>\n      <button class="btn btn_color_green-dark yp_price_sub">\u041e\u043a</button>\n    </div>\n  </div>\n</div>\n--\x3e\n'});
this.Templates.HeaderView=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="header__ctrls"></div>\n<div class="header__destination"></div>\n<div class="header__dashboard hide"></div>\n<div class="header__filter"></div>\n\n<div class="header__title hide">\n  <div class="constrain">\n    <div class="title">\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f</div>\n  </div>\n</div>\n'});
this.Templates.PopupAdd=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c\n  </div>\n  <ul class="stuff-add">\n    <li class="stuff-add__item">\n      <a href="/add/point" class="stuff-add__link js-popup-add-place">\n        <span class="icon icon_place"></span>\n        <span class="btn btn_color_green">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e</span>\n        <span class="text">\u0413\u043e\u0440\u043e\u0434, \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430, \u043a\u0430\u0444\u0435, \u0443\u043b\u0438\u0446\u0430...</span>\n      </a>\n    </li>\n    <li class="stuff-add__item">\n      <a href="/add/event" class="stuff-add__link js-popup-add-event">\n        <span class="icon icon_event"></span>\n        <span class="btn btn_color_yel">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435</span>\n        <span class="text">\u0424\u0435\u0441\u0442\u0438\u0432\u0430\u043b\u0438, \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0438, \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a\u0438...</span>\n      </a>\n    </li>\n    \x3c!--\n    <li class="stuff-add__item">\n      <a  class="stuff-add__link ">\n        <span class="icon icon_route"></span>\n        <span class="btn btn_color_brown">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442</span>\n        <span class="text">\u041e\u0442\u043a\u0443\u0434\u0430, \u043a\u0443\u0434\u0430 \u0438 \u043a\u0430\u043a...</span>\n      </a>\n    </li>\n    --\x3e\n    <li class="stuff-add__item">\n      <a href="/add/trip" class="stuff-add__link js-popup-add-trip">\n        <span class="icon icon_trip"></span>\n        <span class="btn btn_color_blue">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</span>\n        <span class="text">\u0424\u043e\u0442\u043e, \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b, \u0441\u043e\u0431\u044b\u0442\u0438\u044f, \u043c\u0435\u0441\u0442\u0430</span>\n      </a>\n    </li>\n  </ul>\n</div>\x3c!-- class="popup-content" --\x3e\n'});
this.Templates.PopupInfo=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b='<div class="popupwin__content clearfix">\n  <div class="text">';(f=f.message)?f=f.call(c,{hash:{},data:e}):(f=c&&c.message,f="function"===typeof f?f.call(c,{hash:{},data:e}):f);if(f||0===f)b+=f;return b+"</div>\n</div>\n"});
this.Templates.PopupLogin=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="popupwin__content clearfix">\n  <div class="popupwin__title clearfix">\n    \u0412\u043e\u0439\u0442\u0438\n  </div>\n  <div class="wrap-content">\n    <div class="title-entry">\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0435\u0440\u0435\u0437 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0442\u0438</div>\n    <ul class="soc-reg">\n      <li class="soc-reg__item"><a href="/auth/login/vk-oauth2/?next=/';
(a=f.current)?a=a.call(c,{hash:{},data:e}):(a=c&&c.current,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'" class="link link_vk"></a></li>\n      <li class="soc-reg__item"><a href="/auth/login/facebook/?next=/';(a=f.current)?a=a.call(c,{hash:{},data:e}):(a=c&&c.current,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'" class="link link_fb"></a></li>\n      <li class="soc-reg__item"><a href="/auth/login/twitter/?next=/';(a=f.current)?a=a.call(c,{hash:{},data:e}):(a=c&&
c.current,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=h(a)+'" class="link link_tw"></a></li>\n      <li class="soc-reg__item"><a href="#?" class="link link_odn disabled"></a></li>\n      <li class="soc-reg__item"><a href="#?" class="link link_ya disabled"></a></li>\n      <li class="soc-reg__item"><a href="#?" class="link link_mail disabled"></a></li>\n    </ul>\n    \x3c!--\n    <div class="title-entry"><span class="c-place">\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 e-mail</span></div>\n    <form action="/">\n      <div class="form">\n        <div class="form__field clearfix">\n          <div class="form__item form__item_email left">\n            <input type="text" placeholder="\u0412\u0430\u0448 email">\n          </div>\n          <div class="form__item form__pass right">\n            <input type="text" placeholder="\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c">\n          </div>\n        </div>\n        <div class="links right">\n          <a href="#?" class="link">\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f?</a><br>\n          <a href="#?" class="link">\u0437\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c</a>\n        </div>\n        <input type="submit" value="\u0412\u043e\u0439\u0442\u0438" class="btn btn_color_blue">\n      </div>\n    </form>\n    --\x3e\n  </div>\n</div>\x3c!-- class="popup-content" --\x3e\n'});
this.Templates.IconTemplate=Handlebars.template(function(b,c,f,a,e){function h(a,b){var c,e;c='\n  <a href="#" data-toggle="tooltip" title="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'" data-placement="top" data-type-ico="';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===k?e.call(a,{hash:{},data:b}):e);c+=n(e)+'">\n    <span class="m-ico ';if((e=f["if"].call(a,a&&a.style,{hash:{},inverse:p.program(5,d,b),fn:p.program(3,
g,b),data:b}))||0===e)c+=e;c+='" data-id="';(e=f.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===k?e.call(a,{hash:{},data:b}):e);return c+=n(e)+'"></span>\n  </a>\n  '}function g(a,b){var c;(c=f.style)?c=c.call(a,{hash:{},data:b}):(c=a&&a.style,c=typeof c===k?c.call(a,{hash:{},data:b}):c);return n(c)}function d(a,b){return"m-dostoprimechatelnost"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var k="function",n=this.escapeExpression,p=this,l=f.helperMissing;if((c=
f.each.call(c,c&&c.items,{hash:{},inverse:p.noop,fn:p.program(1,function(a,b){var c,d,e;c="\n  ";e={hash:{},inverse:p.noop,fn:p.program(2,h,b),data:b};if((e=(d=f.ifEquals||a&&a.ifEquals,d?d.call(a,a&&a.level,0,e):l.call(a,"ifEquals",a&&a.level,0,e)))||0===e)c+=e;return c+"\n"},e),data:e}))||0===c)b+=c;return b+"\n"});this.Templates.MapLayout=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'\x3c!--<div id="mainmap" style="width: 100%;"></div>\n\n<div id="m-ico-group" class="m-ico-group"></div>\n\n<div class="toggle-bottom">\n  <a href="#" class="a-toggle">\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043a\u0430\u0440\u0442\u0443</a>\n</div>--\x3e\n\n\x3c!--\n<div class="map__route route-list route-list_draggable route-list_deleteable popupwin_add-route">\n  <ul class="list route_right">\n    <li class="item hide route_item">\n      <span class="drag"></span>\n      <span class="number">0</span>\n      <img src="" alt="" class="img" width="44px" height="44px">\n      <div class="text">\n        <span class="text__place"></span>\n        <span class="text__type c-place"></span>\n      </div>\n    </li>\n  </ul>\n</div>\n\n--\x3e\n\n<div id="yandex-map-region"></div>\n<div class="map__ctrls-wrap">\n  <div class="map__ctrls hide">\n    <form action="/">\n      <input type="submit" value="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442" class="btn btn_color_blue">\n      <ul class="map-counter">\n        <li class="map-counter__item hide">\n          <a href="#?" class="map-counter__link map-counter__link_type_event " data-type="event" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435&nbsp;\u0441\u043e\u0431\u044b\u0442\u0438\u044f">0</a>\n        </li>\n        <li class="map-counter__item hide">\n          <a href="#?" class="map-counter__link map-counter__link_type_place" data-type="place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435&nbsp;\u043c\u0435\u0441\u0442\u0430">0</a>\n        </li>\n      </ul>\n      <div class="hint hint_pos_ne" style="bottom: -115px; left: -115px; width: 220px;">\n        \u041c\u0435\u0441\u0442\u0430 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0432 \u0432\u0430\u0448 \u043d\u043e\u0432\u044b\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\n        <a href="#?" class="hint__close"></a>\n      </div>\x3c!-- class="hint" --\x3e\n    </form>\n  </div>\n</div>\n<div class="constrain">\n  \x3c!--\n  <div class="map__where">\n    <a href="#?" class="btn btn_color_green btn-change-city js-change-city"><span class="text">\u0412\u044b \u0435\u0434\u0435\u0442\u0435 \u0438\u0437 <span class="city">\u0412\u043e\u043b\u043e\u0433\u0434\u044b</span>  ?</span></a>\n    <div class="select-wrap">\n      <select>\n        <option value="1">\u0412\u043e\u043b\u043e\u0433\u0434\u0430</option>\n        <option value="2">\u041c\u043e\u0441\u043a\u0432\u0430</option>\n        <option value="3">\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433</option>\n        <option value="4">\u0412\u043e\u0440\u043e\u043d\u0435\u0436</option>\n        <option value="5">\u041f\u0435\u0440\u043c\u044c</option>\n      </select>\n      <a href="#?" class="btn btn_color_green js-chosen-city">\u041e\u041a</a>\n    </div>\n  </div>\n  --\x3e\n</div>\n'});
this.Templates.MapView=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="constrain">\n  <a href="#" class="map__close sprite-close js-map-close"></a>\n</div>\n'});this.Templates.CommercialPopup=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="popupwin__scrollbox">\n  <div class="popupwin__content clearfix">\n    <div class="popupwin__title clearfix">\n      \u041a\u043e\u043c\u043c\u0435\u0440\u0447\u0435\u0441\u043a\u0438\u0439 \u0432\u0445\u043e\u0434\n    </div>\n    <div class="form">\n      <div class="field">\n        <label>\u0424\u0418\u041e:</label>\n        <input name="fullname" type="text">\n      </div>\n      <div class="field field_email">\n        <label>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438:</label>\n        <input name="company" type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u041e\u0410\u041e \u0411\u0435\u043b\u043a\u043e\u0442\u0443\u0440">\n      </div>\n      <div class="field field_email">\n        <label>E-mail:</label>\n        <input name="email" type="text">\n      </div>\n      <div class="field field_phone">\n        <label>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</label>\n        <input name="phone" type="text" placeholder="* (***) ***-**-**">\n      </div>\n      <div class="note">\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</div>\n    </div>\n    <div class="popupwin__footer clearfix">\n      <a href="#?" class="btn btn_color_blue right js-finish">\u0413\u043e\u0442\u043e\u0432\u043e</a>\n    </div>\n  </div>\x3c!-- class="popup-content" --\x3e\n</div>\n'});
this.Templates.Dashboard=Handlebars.template(function(b,c,f,a,e){function h(a,b){return"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"}function g(a,b){return"active"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var d,k=this.escapeExpression,n=f.helperMissing;b='<div class="user-info">\n  <img src="';(a=f.icon)?a=a.call(c,{hash:{},data:e}):(a=c&&c.icon,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=k(a)+'" alt="user" class="img">\n  <div class="text">\n    <span class="name">';
(a=f.first_name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.first_name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=k(a)+" ";(a=f.last_name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.last_name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=k(a)+'</span>\n    <span class="location">';if((a=f["if"].call(c,c&&c.city,{hash:{},inverse:this.program(3,h,e),fn:this.program(1,function(a,b){var c;(c=f.city)?c=c.call(a,{hash:{},data:b}):(c=a&&a.city,c="function"===typeof c?c.call(a,{hash:{},data:b}):
c);return k(c)},e),data:e}))||0===a)b+=a;b+='</span>\n    <span class="mail">';if((a=f["if"].call(c,c&&c.email,{hash:{},inverse:this.program(3,h,e),fn:this.program(5,function(a,b){var c;(c=f.email)?c=c.call(a,{hash:{},data:b}):(c=a&&a.email,c="function"===typeof c?c.call(a,{hash:{},data:b}):c);return k(c)},e),data:e}))||0===a)b+=a;b+='</span>\n  </div>\n</div>\n<div class="user-ctrls">\n  <ul class="list">\n    <li class="item">\n    <a href="/#dashboard/" class="link link_make ';if((a=f.unless.call(c,
c&&c.section,{hash:{},inverse:this.noop,fn:this.program(7,g,e),data:e}))||0===a)b+=a;b+=' nonav">\u042f \u0441\u043e\u0437\u0434\u0430\u043b<span class="number">';(a=f.total_added)?a=a.call(c,{hash:{},data:e}):(a=c&&c.total_added,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=k(a)+'</span></a>\n    </li>\n    \x3c!--\n    <li class="item">\n    <a href="/#dashboard/likes/" class="link link_like ';d={hash:{},inverse:this.noop,fn:this.program(7,g,e),data:e};if((d=(a=f.ifEquals||c&&c.ifEquals,
a?a.call(c,c&&c.section,"likes",d):n.call(c,"ifEquals",c&&c.section,"likes",d)))||0===d)b+=d;b+=' nonav">\u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f<span class="number">';(d=f.count_liked_objects)?d=d.call(c,{hash:{},data:e}):(d=c&&c.count_liked_objects,d="function"===typeof d?d.call(c,{hash:{},data:e}):d);b+=k(d)+'</span></a>\n    --\x3e\n    </li>\n    <li class="item"><a href="/#dashboard/settings/" class="link link_settings ';d={hash:{},inverse:this.noop,fn:this.program(7,
g,e),data:e};if((d=(a=f.ifEquals||c&&c.ifEquals,a?a.call(c,c&&c.section,"settings",d):n.call(c,"ifEquals",c&&c.section,"settings",d)))||0===d)b+=d;return b+' nonav">\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438</a></li>\n    <li class="item"><a href="/logout/" class="link link_exit">\u0412\u044b\u0445\u043e\u0434</a></li>\n  </ul>\n</div>\n'});
this.Templates.DashboardSettings=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};b="";var h=this.escapeExpression;if((a=f["if"].call(c,c&&c.change,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n<div class="dashboard-change clearfix">\n  <div class="picture">\n    <img src="';(e=f.icon)?e=e.call(a,{hash:{},data:b}):(e=a&&a.icon,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" alt="';(e=f.first_name)?
e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" class="img">\n    <img src="';(e=f.icon_small)?e=e.call(a,{hash:{},data:b}):(e=a&&a.icon_small,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);c+=h(e)+'" alt="';(e=f.first_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.first_name,e="function"===typeof e?e.call(a,
{hash:{},data:b}):e);c+=h(e)+" ";(e=f.last_name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.last_name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=h(e)+'" class="img">\n  </div>\n  <div class="btns btns_picture">\n    <a href="#?" class="btn btn_color_green" onclick="document.getElementById(\'uploadAvatar\').click();return false;">\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0442\u0430\u0440</a>\n    <input id="uploadAvatar" name="avatar" type="file" style="visibility:hidden;width:0px;height:0px;display:none;">\n    <a href="#?" class="btn btn_color_blue">\u0410\u0432\u0430\u0442\u0430\u0440 \u0438\u0437 \u0432\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435</a>\n  </div>\n  <div class="btns btns_ctrls">\n    <a href="#?" class="btn btn-enter-commerce btn_color_blue js-popup-login-commercial">\u041a\u043e\u043c\u043c\u0435\u0440\u0447\u0435\u0441\u043a\u0438\u0439 \u0432\u0445\u043e\u0434</a><br>\n    \x3c!--\n    <a href="#?" class="btn btn_color_yel">\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u0438</a>\n    <a href="#?" class="btn btn_color_white">\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442</a>\n    --\x3e\n  </div>\n</div>\x3c!-- class="dashboard-change" --\x3e\n'},
e),data:e}))||0===a)b+=a;b+='\n\n<br><br>\n<div class="form form_dashboard">\n  <div class="form__field">\n    <label>\u0412\u0430\u0448 email:</label>\n    <input name="email" type="text" value="';(a=f.email)?a=a.call(c,{hash:{},data:e}):(a=c&&c.email,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'">\n  </div>\n  <div class="form__field">\n    <label>\u0412\u0430\u0448\u0435 \u0438\u043c\u044f:</label>\n    <input name="fullname" type="text" value="';(a=f.first_name)?a=a.call(c,{hash:{},
data:e}):(a=c&&c.first_name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+" ";(a=f.last_name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.last_name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'">\n  </div>\n  <div class="form__field">\n    <label>\u041e \u0441\u0435\u0431\u0435:</label>\n    <textarea name="about" placeholder="\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e \u0441\u0435\u0431\u0435">';(a=f.about)?a=a.call(c,
{hash:{},data:e}):(a=c&&c.about,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'</textarea>\n  </div>\n</div>\n\n<div class="form form_dashboard">\n  <div class="form__field">\n    <label>\u0412\u0430\u0448 \u0442\u0435\u043b\u0435\u0444\u043e\u043d:</label>\n    <input name="phone" type="text" value="';(a=f.phone)?a=a.call(c,{hash:{},data:e}):(a=c&&c.phone,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'">\n  </div>\n  <div class="form__field">\n    <label>\u0412\u0430\u0448 \u0441\u0430\u0439\u0442:</label>\n    <input name="website" type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: https://vk.com/ivan" value="';
(a=f.website)?a=a.call(c,{hash:{},data:e}):(a=c&&c.website,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'">\n  </div>\n  <div class="form__field">\n    <label>\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435:</label>\n    <input name="city" type="text" placeholder="\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u0412\u043e\u043b\u043e\u0433\u0434\u0430" value="';(a=f.city)?a=a.call(c,{hash:{},data:e}):(a=c&&c.city,a="function"===typeof a?a.call(c,
{hash:{},data:e}):a);return b+=h(a)+'">\n  </div>\n  <div class="form__field form__field__control">\n    <button class="btn btn_color_blue save-settings">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</button><br>\n  </div>\n</div>\n\x3c!--\n<div class="form form_dashboard">\n  <div class="form__field">\n    <label>\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f:</label>\n    <input type="text">\n  </div>\n  <div class="form__field">\n    <label>\u0412\u0430\u0448 \u0418\u041d\u041d:</label>\n    <input type="text">\n  </div>\n  <div class="form__field">\n    <label>\u0420\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442:</label>\n    <input type="text">\n  </div>\n</div>\n--\x3e\n'});
this.Templates.ProfileBoardPoint=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h=this.escapeExpression;b='<div class="box__title box__title_type_place">\u041c\u0435\u0441\u0442\u043e</div>\n<div class="box__img">\n  <a href="#?" class="js-popupwin-place">\n    ';if((a=f["if"].call(c,c&&c.imgs,{hash:{},inverse:this.program(3,function(a,b){var c,e;c='\n      <img src="/static/images/place-unknown.png" alt="';(e=f.name)?e=e.call(a,{hash:{},
data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=h(e)+'" class="img">\n    '},e),fn:this.program(1,function(a,b){var c,e;c=""+('\n      <img src="'+h((e=(e=(e=a&&a.imgs,null==e||!1===e?e:e[0]),null==e||!1===e?e:e.thumbnail207),"function"===typeof e?e.apply(a):e))+'" alt="');(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e="function"===typeof e?e.call(a,{hash:{},data:b}):e);return c+=h(e)+'" class="img">\n    '},e),data:e}))||0===a)b+=a;b+='\n    <div class="icons">\n      <a class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"></a>\n      <a href="#?" class="icon sprite-like ';
if((a=f["if"].call(c,c&&c.isliked,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return"active"},e),data:e}))||0===a)b+=a;b+='" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n    </div>\n  </a>\n</div>\n<div class="box__description">\n  <div class="name">';(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'</div>\n  <span class="info info_like">';(a=f.likes_count)?a=a.call(c,{hash:{},
data:e}):(a=c&&c.likes_count,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=h(a)+'</span>\n  <span class="info info_comment">';if((a=f["if"].call(c,c&&c.reviews,{hash:{},inverse:this.program(9,function(a,b){return"0"},e),fn:this.program(7,function(a,b){var c;return h((c=(c=a&&a.reviews,null==c||!1===c?c:c.length),"function"===typeof c?c.apply(a):c))},e),data:e}))||0===a)b+=a;return b+"</span>\n</div>\n"});
this.Templates.ProfileBoardRoute=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b=""+('<div class="box__title box__title_type_route">\u041c\u0430\u0440\u0448\u0440\u0443\u0442</div>\n<div class="box__img">\n  <a href="#?" class="js-popupwin-route">\n    <img src="'+g((h=(h=(h=(h=(h=c&&c.points,null==h||!1===h?h:h[0]),null==h||!1===h?h:h.imgs),null==h||!1===h?h:h[0]),null==h||!1===h?h:h.thumbnail207),"function"===
typeof h?h.apply(c):h))+'" alt="');(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'" class="img">\n    <div class="icons">\n      <a href="#?" class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"></a>\n      <a href="#?" class="icon sprite-like" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n    </div>\n  </a>\n</div>\n<div class="box__description">\n  <div class="name">';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'</div>\n  <span class="info info_like">';(a=f.likes_count)?a=a.call(c,{hash:{},data:e}):(a=c&&c.likes_count,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=g(a)+'</span>\n  <span class="info info_comment">0</span>\n</div>\n<div class="box__person">\n  <img src="'+g((h=(h=c&&c.author,null==h||!1===h?h:h.icon),"function"===typeof h?h.apply(c):h))+'" alt="'+g((h=(h=c&&c.author,
null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+g((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+'" class="img">\n  <div class="text">\n    \u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u043b<br>\n    <span class="name">'+g((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+g((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===
typeof h?h.apply(c):h))+"</span>\n  </div>\n</div>\n"});
this.Templates.ProfileBoardSet=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);e=e||{};var h,g=this.escapeExpression;b=""+('<div class="box__title box__title_type_trip">\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435</div>\n<div class="box__img">\n  <a href="#?">\n    <img src="'+g((h=(h=(h=(h=(h=c&&c.points,null==h||!1===h?h:h[0]),null==h||!1===h?h:h.imgs),null==h||!1===h?h:h[0]),null==h||!1===h?h:h.thumbnail207),"function"===
typeof h?h.apply(c):h))+'" alt="');(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'" class="img">\n    <div class="icons">\n      <a href="#?" class="icon sprite-place" data-toggle="tooltip" title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"></a>\n      <a href="#?" class="icon sprite-like" data-toggle="tooltip" title="\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"></a>\n    </div>\n  </a>\n</div>\n<div class="box__description">\n  <div class="name">';
(a=f.name)?a=a.call(c,{hash:{},data:e}):(a=c&&c.name,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);b+=g(a)+'</div>\n  <span class="info info_like">';(a=f.likes_count)?a=a.call(c,{hash:{},data:e}):(a=c&&c.likes_count,a="function"===typeof a?a.call(c,{hash:{},data:e}):a);return b+=g(a)+'</span>\n  <span class="info info_comment">0</span>\n</div>\n<div class="box__person">\n  <img src="'+g((h=(h=c&&c.author,null==h||!1===h?h:h.icon),"function"===typeof h?h.apply(c):h))+'" alt="'+g((h=(h=c&&c.author,
null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+g((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===typeof h?h.apply(c):h))+'" class="img">\n  <div class="text">\n    \u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u043b<br>\n    <span class="name">'+g((h=(h=c&&c.author,null==h||!1===h?h:h.first_name),"function"===typeof h?h.apply(c):h))+" "+g((h=(h=c&&c.author,null==h||!1===h?h:h.last_name),"function"===
typeof h?h.apply(c):h))+"</span>\n  </div>\n</div>\n"});this.Templates.LoadingView=Handlebars.template(function(b,c,f,a,e){this.compilerInfo=[4,">= 1.0.0"];this.merge(f,b.helpers);return'<div class="loader">\n</div>\n'});
(function(){Handlebars.registerHelper("ifCond",function(b,c,f,a){switch(c){case "==":return b===f?a.fn(this):a.inverse(this);case "===":return b===f?a.fn(this):a.inverse(this);case "<":return b<f?a.fn(this):a.inverse(this);case "<=":return b<=f?a.fn(this):a.inverse(this);case ">":return b>f?a.fn(this):a.inverse(this);case ">=":return b>=f?a.fn(this):a.inverse(this);case "&&":return b&&f?a.fn(this):a.inverse(this);case "||":return b||f?a.fn(this):a.inverse(this);case "!=":return b!==f?a.fn(this):a.inverse(this);
default:return a.inverse(this)}});Handlebars.registerHelper("ifEquals",function(b,c,f){return(null!=b?b.toString():void 0)===(null!=c?c.toString():void 0)?f.fn(this):f.inverse(this)});Handlebars.registerHelper("ifContains",function(b,c,f){return void 0===c?!1:_.contains(c,b)?f.fn(this):f.inverse(this)});Handlebars.registerHelper("ifBelong",function(b,c,f){var a,e,h,g;if(void 0===c)return!1;h=0;for(g=c.length;h<g;h++)e=c[h],e.id===b.id&&(a=!0);return a?f.fn(this):f.inverse(this)});Handlebars.registerHelper("dateFormat",
function(b,c){var f;return window.moment?(f=c.hash.format||"D MMMM YYYY \u0432 HH:mm",moment(b).format(f)):b});Handlebars.registerHelper("duration",function(b,c,f,a){a=[];window.moment&&(b&&a.push(moment.duration({days:b}).humanize()),c&&a.push(moment.duration({hours:c}).humanize()),f&&a.push(moment.duration({minutes:f}).humanize()));return a.join(" ")});Handlebars.registerHelper("eachKey",function(b,c){var f,a,e,h;a="";b=b.toString().substring(1,b.length-1).split(",");e=0;for(h=b.length;e<h;e++)f=
b[e],a+=c.fn(f.trim());return a});Handlebars.registerHelper("splitAddr",function(b,c,f){b=b.split(c);return b[2]});Handlebars.registerHelper("addShy",function(b,c){var f,a;if(_.contains(b," "))return b;f=b.slice(0,10);a=b.slice(10);return new Handlebars.SafeString(""+f+"&shy;"+a)});Handlebars.registerHelper("safe",function(b,c){return new Handlebars.SafeString(b)});Handlebars.registerHelper("br",function(b,c){b&&(b=b.split("\n"),b=b.join("<br>"));return new Handlebars.SafeString(b)});Handlebars.registerHelper("working_hours",
function(b,c){var f;if(b&&(f=b.split(" "),2===f.length))return f='<span class="days">'+f[0]+'</span>\n<span class="time">'+f[1]+"</span>",new Handlebars.SafeString(f)});Handlebars.registerHelper("plus",function(b,c,f){b=parseFloat(b);c=parseFloat(c);return b+c});Handlebars.registerHelper("toFixed",function(b,c,f){b=parseFloat(b);return b.toFixed(c)});Handlebars.registerHelper("orderService",function(b,c,f){return"name"===b?c.split(";")[0]:c.split(";")[1]});Handlebars.registerHelper("orderDate",function(b,
c,f){var a;"date"===b&&(a=c.split(";")[0]);"start"===b&&(a=c.split(";")[1]);"end"===b&&(a=c.split(";")[2]);return a});Handlebars.registerHelper("ifOrderHasPrice",function(b,c){if(_.has(b,"personal")||_.has(b,"group"))if(_.has(b.personal,"personal_price_tour")||_.has(b.group,"group_price_tour"))return c.fn(this);return c.inverse(this)});Handlebars.registerHelper("optionRange",function(b,c){var f;f=_.range(1,parseInt(b,10)+1);f=_.reduce(f,function(a,b){return a+("<option value='"+b+"'>"+b+"</option>")},
"");return new Handlebars.SafeString(f)})}).call(this);
(function(){(function(b,c,f){c(document).click(function(a){if(!c(a.target).closest(".header__user").length&&(c(".header__user .profile-menu").hide(),c(".js-profile-menu").removeClass("open"),!c(a.target).closest(".filter-type").length&&(c(".filter-type__list").hide(),c(".header__filter .js-open").removeClass("open"),!c(a.target).closest(".filter-dropdown").length)))return c(".dropdown").removeClass("open")});c.ajaxSetup({headers:{"X-CSRFToken":c.cookie("csrftoken")}});f.autoDiscover=!1;b.emulateJSON=
!0;b.emulateHTTP=!0;return _.extend(b.Marionette.Application.prototype,{buttonSpinner:function(a,b,c){var f,d;f={};d={lines:11,length:4,width:2,radius:3,trail:60,speed:1,shadow:!1,left:15};f.button=a;f.button_static_text=a.html();f.button_spinning_text=b;f.spinner=c;f.start=function(){f.button.html(f.button_spinning_text).addClass("disabled").prop("disabled",!0);return f.spinner.spin(d)};f.stop=function(){f.button.html(f.button_static_text).removeClass("disabled").prop("disabled",!1);return f.spinner.spin(!1)};
return f},settings:{},navigate:function(a,c){null==c&&(c={});return b.history.navigate(a,c)},getCurrentRoute:function(){var a;a=b.history.fragment;return _.isEmpty(a)?null:a},startHistory:function(){if(b.history)return b.history.start({pushState:!0})},register:function(a,b){null==this._registry&&(this._registry={});return this._registry[b]=a},unregister:function(a,b){return delete this._registry[b]},resetRegistry:function(){var a,b,c,f;c=this.getRegistrySize();f=this._registry;for(b in f)a=f[b],a.region.empty();
a="There were "+c+" controllers in the registry, there are now "+this.getRegistrySize();return 0<this.getRegistrySize()?console.warn(a,this._registry):console.log(a)},getRegistrySize:function(){return _.size(this._registry)},updateSettings:function(a){var b,c,f;c={};b=!1;for(f in a)a.hasOwnProperty(f)&&this.settings[f]!==a[f]&&(_.isNumber(a[f])||!_.isEmpty(a[f])?this.settings[f]=a[f]:delete this.settings[f],c[f]=a[f],b=!0);if(b)return this.vent.trigger("change:settings",c)},getCookie:function(a){var b,
c,f,d,k,n;b=null;if(document.cookie&&""!==document.cookie){c=document.cookie.split(";");d=function(c){c=c.trim();if(c.substring(0,a.length+1)===a+"=")return b=decodeURIComponent(c.substring(a.length+1))};k=0;for(n=c.length;k<n;k++)f=c[k],d(f)}return b},apiRequest:function(a){var b,f=this;b=this.API_BASE_URL+a.url;console.log([""+a.type+" request to "+b+" with data:",a.data]);return c.ajax({url:b,type:a.type,dataType:a.dataType||"json",processData:a.processData,contentType:a.contentType,data:a.data,
beforeSend:function(a){return a.setRequestHeader("X-CSRFToken",f.getCookie("csrftoken"))},success:function(b){var c;console.log(["response from API: ",b]);if(a.successCallback)return c=[b],_.each(a.params,function(a){return c.push(a)}),a.successCallback.apply(a.context,c)}})}})})(Backbone,$,Dropzone)}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};(function(b,a){var e;return a.Region.Modal=function(a){function g(){return e=g.__super__.constructor.apply(this,arguments)}c(g,a);g.prototype.initialize=function(a){_.extend(this,b.Events);return _.bindAll(this)};g.prototype.attachHtml=function(a){var c,e;console.info("current url",b.history.fragment);
c=$(".modal.in").not(this.$el);e=_.max(c,function(a){return $(a).css("z-index")});_.isEmpty(e)?this.prevModal=c.first():this.prevModal=$(e);this.zIndex=parseInt(this.$el.css("z-index"),10);this.prevModal.length&&this.prevModal.css("z-index",this.zIndex-50);this.$el.find(".modal-dialog").empty().append(a.el);this.$el.on("hidden.bs.modal",this.closeModal);return this.saveUrl=a.saveUrl};g.prototype.onShow=function(a){this.setupBindings(a);a=this.getDefaultOptions(_.result(a,"modal"));return this.$el.modal(a)};
g.prototype.onEmpty=function(a){return this.$el.modal("hide")};g.prototype.getDefaultOptions=function(a){null==a&&(a={});return _.defaults(a,{modalClass:a.className})};g.prototype.setupBindings=function(a){return this.listenTo(a,"modal:close",this.closeModal)};g.prototype.closeModal=function(a){this.$el.off();this.stopListening();this.empty();this.prevModal.length&&(a.preventDefault(),a.stopPropagation(),this.prevModal.css("z-index",""),$("body").addClass("modal-open"));if(!this.saveUrl)return console.info("navigate to previous"),
this.app.trigger("route:back")};return g}(a.Region)})(Backbone,Marionette)}).call(this);(function(){(function(b){return _.extend(b.Renderer,{render:function(b,f){var a;if(!1!==b)return a=Templates[b],a(f)}})})(Marionette)}).call(this);
(function(){(function(b){var c;_.extend(b.Marionette.Application.prototype,{API_BASE_URL:""},void 0!==window.DEBUG?c=window.DEBUG:c=!0,{DEBUG:c});b="undefined"===typeof window.console?{}:window.console;if(!1===window.DEBUG||"undefined"===typeof b.log)return b.log=b.debug=b.trace=b.dir=b.dirxml=b.group=b.groupEnd=b.time=b.timeEnd=b.assert=b.profile=function(){}})(Backbone)}).call(this);
(function(){(function(b){var c;c=b.sync;return b.sync=function(b,a,e){null==e&&(e={});b=c(b,a,e);console.log("sync",a._fetch);return a._fetch=b}})(Backbone)}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp=function(b,a){var e,h,g;e=new a.Application;e.Router=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}c(b,a);return b}(a.AppRouter);e.rootRoute="/";e.history=[];e.router=new e.Router;e.router.on("route",function(a,b){console.log("onRoute",a,b);return e.history.push(e.getCurrentRoute()||
e.rootRoute)});h=a.Region.Modal.extend({el:".popup",app:e});e.addRegions({headerRegion:"#header-region",boardRegion:"#board-region",footerRegion:"#footer-region",mapRegion:"#map-region",sidebarRegion:"#sidebar-region",photoviewRegion:"#photoview-region",photoPopupRegion:{selector:".popupwin_add-photos",regionClass:h},addPopupRegion:{selector:".popupwin_add",regionClass:h},loginPopupRegion:{selector:".popupwin_authorization",regionClass:h},infoPopupRegion:{selector:".popupwin_info",regionClass:h},
commercialPopupRegion:{selector:".popupwin_login-commercial",regionClass:h},pointPopup:{selector:".popupwin_place",regionClass:h},eventPopup:{selector:".popupwin_event",regionClass:h},routePopup:{selector:".popupwin_route",regionClass:h},orderRoutePopup:{selector:".popupwin_order-route",regionClass:h},tripPopup:{selector:".popupwin_trip",regionClass:h},addPointPopup:{selector:".popupwin_add-place",regionClass:h},addEventPopup:{selector:".popupwin_add-event",regionClass:h},addRoutePopup:{selector:".popupwin_add-route",
regionClass:h},addTripPopup:{selector:".popupwin_add-trip",regionClass:h},addPlaceToTripPopup:{selector:".popupwin_add-place-to-trip",regionClass:h}});e.reqres.setHandler("default:region",function(){return e.boardRegion});e.commands.setHandler("register:instance",function(a,b){return e.register(a,b)});e.commands.setHandler("unregister:instance",function(a,b){return e.unregister(a,b)});e.on("route:back",function(){console.log("fired back url");this.navigate(this.history[this.history.length-2]||this.rootRoute);
return this.history=this.history.slice(0,-1)});e.on("start",function(a){this.startHistory();if(!this.getCurrentRoute())return this.navigate(this.rootRoute,{trigger:!0})});return e}(Backbone,Marionette)}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Controllers",function(b,a,e,h,g,d){return b.Base=function(b){function f(b){null==b&&(b={});this.region=b.region||a.request("default:region");this._instance_id=d.uniqueId("controller");a.execute("register:instance",this,this._instance_id);f.__super__.constructor.apply(this,arguments)}
c(f,b);f.prototype.close=function(){a.execute("unregister:instance",this,this._instance_id);return f.__super__.close.apply(this,arguments)};f.prototype.show=function(a,b){null==b&&(b={});d.defaults(b,{loading:!1,region:this.region});this._setMainView(a);return this._manageView(a,b)};f.prototype._setMainView=function(a){if(!this._mainView)return this._mainView=a,this.listenTo(a,"close",this.close)};f.prototype._manageView=function(b,c){return c.loading?a.execute("show:loading",b,c):c.region.show(b)};
return f}(h.Controller)})}).call(this);(function(){this.Yapp.module("Views",function(b,c,f,a,e,h){return h.extend(a.View.prototype,{templateHelpers:function(){return{user:c.request("get:my:profile").toJSON(),settings:c.settings}}})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Views",function(b,a,e,h,g,d){var k;return b.CollectionView=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.itemViewEventPrefix="childview";return b}(h.CollectionView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Views",function(b,a,e,h,g,d){var k;return b.CompositeView=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.itemViewEventPrefix="childview";return b}(h.CompositeView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Views",function(b,a,e,h,g,d){var k;return b.ItemView=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);return b}(h.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Views",function(b,a,e,h,g,d){var k;return b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);return b}(h.LayoutView)})}).call(this);
(function(){this.Yapp.module("Entities",function(b,c,f,a,e,h){return c.commands.setHandler("when:fetched",function(a,b){var c;c=h.chain([a]).flatten().pluck("_fetch").value();return e.when.apply(e,c).done(function(){return b()})})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k;return b.Collection=function(a){function d(){return k=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.model=function(a,c){return"point"===a.type_of_item?new b.Point(a,c):"event"===a.type_of_item?new b.Event(a,c):"set"===a.type_of_item?
new b.Set(a,c):"trip"===a.type_of_item?new b.Trip(a,c):"route"===a.type_of_item?new b.Route(a,c):new b.Point(a,c)};d.prototype.initialize=function(){return console.log("initializing Entities.Collection")};return d}(e.Collection)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k;return b.Model=function(b){function f(){return k=f.__super__.constructor.apply(this,arguments)}c(f,b);f.prototype.__url=function(){var a;console.log("call id",this.id);a=e.Model.prototype.url.call(this);return a+("/"===a.charAt(a.length-1)?"":"/")};
f.prototype.initialize=function(){var a;console.log("initializing Entities.Model");this.id=this.get("id")||this.id;a=this.get("latitude")&&this.get("longitude")?[this.get("latitude"),this.get("longitude")]:null;return this.setCoordinates(a)};f.prototype.idAttribute="unid";f.prototype.parse=function(a){d.isArray(a)&&(a=a[0]);!a.unid&&a.id&&(a.unid=a.id);a.summary_info&&(a.summary_info=JSON.parse(a.summary_info));return a};f.prototype.setCoordinates=function(b){var c,d,f=this;null!==b&&(b=b.map(String));
c=(d=this.get("imgs"))&&d.length?d[0].thumbnail104x104:"/static/images/place-unknown.png";this.placemark?(this.placemark.geometry.setCoordinates(b),this.placemark.properties.set({id:"map-point"+(this.id||this.get("id")),name:this.get("name"),address:this.get("address"),img:c})):a.ymaps.ready(function(){return f.placemark=new a.ymaps.Placemark(b,{id:"map-point"+(f.id||f.get("id")),name:f.get("name"),address:f.get("address"),img:c},{iconLayout:"default#image",iconImageClipRect:[[80,0],[112,36]],iconImageHref:"/static/images/sprite-baloon.png",
iconImageSize:[32,36],balloonContentLayout:"point#BCLayout",balloonCloseButton:!1})});return this.placemark};return f}(e.Model)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.Event=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.urlRoot=a.API_BASE_URL+"/api/v1/events/";d.prototype.defaults=function(){return{type_of_item:"event",dt_start:"",dt_end:"",ypi:0,imgs:[],
tags:[],name:"",description:"",points:[]}};d.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.dt_start&&c.push("dt_start");""===a.dt_end&&c.push("dt_end");if(c.length)return c};return d}(b.Model);k={getDetail:function(a,b){null==b&&(b={});a.id=a.get("id")||a.get("unid");d.defaults(b);a.fetch({reset:!0,data:b});return a},like:function(b,c){var d;null==c&&(c={});d=b.get("id")||event.get("unid");return a.apiRequest({url:a.API_BASE_URL+("/api/v1/events/"+d+"/like/"),type:"POST",
successCallback:function(a){return b.trigger("event:like:response",a)},data:{id:d}})},comment:function(b,c){var f;null==c&&(c={});d.defaults(c);f=b.get("id")||b.get("unid");return a.apiRequest({url:a.API_BASE_URL+("/api/v1/events/"+f+"/review/"),type:"POST",successCallback:function(a){return b.trigger("event:comment:response",a)},data:c})}};a.reqres.setHandler("get:detail:event",function(a){return k.getDetail(a)});a.reqres.setHandler("like:event",function(a){k.like(a).done(function(b){if(b=b[0])return a.set({likes_count:b.likes_count,
isliked:b.isliked,likeusers:b.likeusers})});return a});return a.reqres.setHandler("comment:event",function(a,b){null==b&&(b={});k.comment(a,b);return a})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.Point=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.urlRoot=a.API_BASE_URL+"/api/v1/points/";d.prototype.defaults=function(){return{type_of_item:"point",priority:0,longitude:0,latitude:0,ypi:0,
imgs:[],tags:[],name:"",address:""}};d.prototype.validate=function(a,b){var c;c=[];""===a.name&&c.push("name");""===a.address&&c.push("address");if(c.length)return c};return d}(b.Model);k={getDetail:function(a,b){null==b&&(b={});a.id=a.get("id")||a.get("unid");d.defaults(b);a.fetch({reset:!0,data:b});return a},like:function(b,c){var d;null==c&&(c={});d=b.get("id")||b.get("unid");return a.apiRequest({url:a.API_BASE_URL+("/api/v1/points/"+d+"/like/"),type:"POST",successCallback:function(a){return b.trigger("point:like:response",
a)},data:{id:d}})},comment:function(b,c){var f;null==c&&(c={});d.defaults(c);f=b.get("id")||b.get("unid");return a.apiRequest({url:a.API_BASE_URL+("/api/v1/points/"+f+"/review/"),type:"POST",successCallback:function(a){return b.trigger("point:comment:response",a)},data:c})},deletePhoto:function(b,c){a.apiRequest({url:a.API_BASE_URL+"/photos/del",type:"POST",successCallback:function(a){return b.trigger("success:delete:photo",a,c)},data:{id:c.id}});return b}};a.reqres.setHandler("get:detail:point",
function(a){return k.getDetail(a)});a.reqres.setHandler("like:point",function(a){k.like(a).done(function(b){if(b=b[0])return a.set({likes_count:b.likes_count,isliked:b.isliked,likeusers:b.likeusers})});return a});a.reqres.setHandler("comment:point",function(a,b){null==b&&(b={});k.comment(a,b);return a});return a.reqres.setHandler("delete:photo",function(a,b){return k.deletePhoto(a,b)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.Route=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.urlRoot=function(){return a.API_BASE_URL+"/api/v1/route/"};d.prototype.defaults=function(){return{type_of_item:"route"}};return d}(b.Model);
k={getDetail:function(a,b){null==b&&(b={});a.id=a.get("id")||a.get("unid");a.fetch({reset:!0,data:b});return a}};return a.reqres.setHandler("get:detail:route",function(a){return k.getDetail(a)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.Set=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.urlRoot=function(){return a.API_BASE_URL+"/api/v1/sets/"};return d}(b.Model);k={getDetailSets:function(a,c){var e;null==c&&(c={});d.defaults(c);
e=new b.Set({unid:a});e.fetch({reset:!0,data:c});return e}};return a.reqres.setHandler("get:detail:sets",function(a){return k.getDetailSets(a)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.TagCollection=function(a){function b(){return n=b.__super__.constructor.apply(this,arguments)}c(b,a);return b}(e.Collection);k={getTags:function(c){var e;null==c&&(c={});d.defaults(c);e=new b.TagCollection;e.url=a.API_BASE_URL+"/api/v1/tags/";
e.fetch({reset:!0,data:c});return e}};return a.reqres.setHandler("get:all:tags",function(a){null==a&&(a={level:0});if(!1===a.level)return delete a.level,k.getTags(a);if(0===a.level)return this.rootTags=this.rootTags||k.getTags(a)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n,p,l;b.TripBlock=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.defaults=function(){return{imgs:[],events:[],points:[],position:1,name:"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f",
txt:""}};d.prototype.urlRoot=function(){return a.API_BASE_URL+"/api/v1/tripblock/"};return d}(b.Model);b.TripBlocks=function(a){function d(){return p=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.model=b.TripBlock;return d}(b.Collection);b.Trip=function(b){function d(){return l=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.defaults=function(){return{type_of_item:"trip",blocks:[]}};d.prototype.urlRoot=function(){return a.API_BASE_URL+"/api/v1/trips/"};return d}(b.Model);
k={getBlocks:function(a){a.length?(d.map(a,function(a){return a.unid=a.id}),a=new b.TripBlocks(a)):(a=new b.TripBlock,a=new b.TripBlocks([a]));return a},getDetailTrip:function(a,b){null==b&&(b={});a.id=a.get("id")||a.get("unid");d.defaults(b);a.fetch({reset:!0,data:b});return a},like:function(b,c){var d;null==c&&(c={});d=b.get("id")||b.get("unid");return a.apiRequest({url:a.API_BASE_URL+("/api/v1/trips/"+d+"/like/"),type:"POST",successCallback:function(a){return b.trigger("trip:like:response",a)},
data:{id:d}})},comment:function(b,c){var f;null==c&&(c={});d.defaults(c);f=b.get("id")||b.get("unid");return a.apiRequest({url:a.API_BASE_URL+("/api/v1/trips/"+f+"/review/"),type:"POST",successCallback:function(a){return b.trigger("trip:comment:response",a)},data:c})}};a.reqres.setHandler("get:detail:trip",function(a){return k.getDetailTrip(a)});a.reqres.setHandler("get:blocks",function(a){return k.getBlocks(a)});a.reqres.setHandler("like:trip",function(a){k.like(a).done(function(b){if(b=b[0])return a.set({likes_count:b.likes_count,
isliked:b.isliked,likeusers:b.likeusers})});return a});return a.reqres.setHandler("comment:trip",function(a,b){null==b&&(b={});k.comment(a,b);return a})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.User=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.idAttribute="id";d.prototype.url=a.API_BASE_URL+"/users/account/";d.prototype.defaults={first_name:"",last_name:"",authorized:!1,email:!1,
avatar:"/static/images/user-unknown.png",count_liked_objects:0,count_commented_objects:0};return d}(b.Model);k={me:function(c){null==c&&(c={});d.defaults(c);return this.user=this.user||new b.User(a.USER)}};return a.reqres.setHandler("get:my:profile",function(){return k.me()})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Entities",function(b,a,e,h,g,d){var k,n;b.YapensCollection=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.url=a.API_BASE_URL+"/api/v1/yapens/";return d}(b.Collection);k={getEntities:function(a){var c;null==a&&(a={});this.fetch&&this.fetch.abort();
c=a.withoutEmpty;delete a.withoutEmpty;a["new"]?(delete a["new"],this.yapens=new b.YapensCollection):this.yapens=this.yapens||new b.YapensCollection;this.fetch=this.yapens.fetch({reset:!0,data:a,__success:function(a){var d;c&&(d=new b.Model({empty:!0}),a.add(d,{at:0}));return a}});return this.yapens},search:function(b,c){null==b&&(b={});d.defaults(b,{s:""});return a.apiRequest({url:a.API_BASE_URL+"/api/v1/search/",data:b,successCallback:c})}};a.reqres.setHandler("get:all:yapens",function(a){null==
a&&(a={});return k.getEntities(a)});return a.reqres.setHandler("search:all:yapens",function(a,b){null==a&&(a={});return k.search(a,b)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Components.Loading",function(b,a,e,h,g,d){var k;b.LoadingController=function(e){function g(){return k=g.__super__.constructor.apply(this,arguments)}c(g,e);g.prototype.initialize=function(a){var b,c;console.log("initialize LoadingController");c=a.view;a=a.config;a=d.isBoolean(a)?{}:a;
d.defaults(a,{loadingType:"spinner",entities:this.getEntities(c),debug:!1});switch(a.loadingType){case "opacity":this.region.currentView.$el.css("opacity",0.5);break;case "spinner":b=this.getLoadingView();this.show(b);break;default:throw Error("Invalid loadingType");}return this.showRealView(c,b,a)};g.prototype.showRealView=function(b,c,d){var e=this;return a.execute("when:fetched",d.entities,function(){switch(d.loadingType){case "opacity":e.region.currentView.$el.removeAttr("style");break;case "spinner":if(e.region.currentView!==
c)return b}if(!d.debug)return e.show(b)})};g.prototype.getEntities=function(a){return d.chain(a).pick("model","collection").toArray().compact().value()};g.prototype.getLoadingView=function(){return new b.LoadingView};return g}(a.Controllers.Base);return a.commands.setHandler("show:loading",function(a,c){console.log("show:loading");return new b.LoadingController({view:a,region:c.region,config:c.loading})})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("Components.Loading",function(b,a,e,h,g,d){var k;return b.LoadingView=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="LoadingView";b.prototype.className="loading-container";b.prototype.onClose=function(){return this.close()};
return b}(a.Views.ItemView)})}).call(this);
(function(){this.Yapp.module("AddPopupApp",function(b,c,f,a,e,h){var g,d;d={"add/point":"addPoint","add/event":"addEvent","add/route":"addPlacetotrip","add/trip":"addTrip","add/placetotrip":"addPlacetotrip","point/:id/edit":"stubUrl","event/:id/edit":"stubUrl","route/:id/edit":"stubUrl","trip/:id/edit":"stubUrl"};g={addPoint:function(){return new b.Point.Controller},addEvent:function(){return new b.Event.Controller},addRoute:function(){return new b.Route.Controller},addTrip:function(){return new b.Trip.Controller},
addPlacetotrip:function(a){return new b.PlaceToTrip.Controller({model:a})},stubUrl:function(a){return console.log("fired url",a)}};c.vent.on("show:edit:popup",function(a){c.addPopupRegion.empty();a instanceof c.Entities.Point&&new b.Point.Controller({model:a});a instanceof c.Entities.Event&&new b.Event.Controller({model:a});a instanceof c.Entities.Route&&new b.Route.Controller({model:a});if(a instanceof c.Entities.Trip)return new b.Trip.Controller({model:a})});c.vent.on("show:add:place:popup",function(){c.addPopupRegion.empty();
return g.addPoint()});c.vent.on("show:add:event:popup",function(){c.addPopupRegion.empty();return g.addEvent()});c.vent.on("show:add:route:popup",function(){c.addPopupRegion.empty();return g.addRoute()});c.vent.on("show:add:trip:popup",function(){c.addPopupRegion.empty();return g.addTrip()});c.vent.on("show:add:placetotrip:popup",function(a){c.addPopupRegion.empty();return g.addPlacetotrip(a)});return c.addInitializer(function(){return c.router.processAppRoutes(g,d)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Event",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize AddPopupApp.Event.Controller");this.tags=a.request("get:all:tags",
{level:!1});this.model=this.options.model||new a.Entities.Event;this.layout=new b.Layout({model:this.model});this.listenTo(this.model,"spinner:start",this.startSpinner);this.listenTo(this.layout,"show",function(){c.showStepName();return c.showStepWhat()});return this.model.isNew()?a.addEventPopup.show(this.layout,{loading:!0}):this.model.fetch({success:function(){a.addEventPopup.show(c.layout,{loading:!0});if(c.spinner)return c.spinner.stop()}})};e.prototype.startSpinner=function(a){return this.spinner=
a};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showStepName=function(){this.nameView=new b.StepName({model:this.model});this.show(this.nameView,{region:this.layout.stepNameRegion,loading:!0});return this.listenTo(this.nameView,"show:step:what",function(){this.layout.stepNameRegion.$el.hide();return this.layout.stepWhatRegion.$el.show()})};e.prototype.showStepWhat=function(){var c=this;return a.execute("when:fetched",this.tags,function(){c.whatView=new b.StepWhat({model:c.model,
collection:c.tags});c.listenTo(c.whatView,"show",function(){var a;a=new b.Points({model:c.model});return c.whatView.pointsRegion.show(a)});c.show(c.whatView,{region:c.layout.stepWhatRegion});return c.listenTo(c.whatView,"show:step:name",function(){this.layout.stepWhatRegion.$el.hide();return this.layout.stepNameRegion.$el.show()})})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Event",function(b,a,e,h,g,d){var k,n,p,l;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="AddEventLayout";b.prototype.className="popupwin__scrollbox";b.prototype.regions={stepNameRegion:"#event-name-region",
stepWhatRegion:"#event-what-region"};b.prototype.onShow=function(){return this.stepNameRegion.$el.show()};return b}(a.Views.Layout);b.StepName=function(b){function e(){return n=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="EventStepName";e.prototype.className="popupwin__content clearfix";e.prototype.events={"blur .form__field_name input":"setName","blur .form__field_description textarea":"setDescription","click .js-next":"nextStep","submit form":"nextStep"};e.prototype.initialize=
function(){return this.listenTo(this.model,"success:delete:photo",this.successDeletePhoto)};e.prototype.onShow=function(){var b,c,e,f=this;this.$("#dt_start").datepicker({showOn:"button",buttonImage:"/static/images/calendar.png",buttonImageOnly:!0,dateFormat:"dd.mm.yy",numberOfMonths:3,onClose:function(a){return f.$("#dt_end").datepicker("option","minDate",a)}});this.$("#dt_end").datepicker({showOn:"button",buttonImage:"/static/images/calendar.png",buttonImageOnly:!0,dateFormat:"dd.mm.yy",numberOfMonths:3,
onClose:function(a){return f.$("#dt_start").datepicker("option","maxDate",a)}});e=this;c=this.model.get("imgs");b=(b=this.model.get("id"))?"/photos/event/"+b+"/add":"/photos/add";return this.$("#place-dropzone").dropzone({init:function(){var a=this;return d.each(c,function(b){var c;c={name:"Image"+d.uniqueId(),size:12345,id:b.id};a.emit("addedfile",c);return a.emit("thumbnail",c,b.thumbnail104x104)})},dictDefaultMessage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",
addRemoveLinks:!0,paramName:"img",url:b,maxFilesize:20,headers:{"X-CSRFToken":g.cookie("csrftoken")},error:function(b,c,d){if(404===d.status)return e=new a.HeaderApp.Show.PopupInfo({message:'\u0412\u0430\u0448\u0430 \u0441\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430.<br>\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, <a href="/">\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</a>'}),a.infoPopupRegion.show(e)},
success:function(a,b){var d;g(a.previewElement).removeClass("dz-processing").addClass("dz-success");d=b[0];c=e.model.get("imgs");c.push(d);a.id=d.id;return e.model.set("imgs",c)},removedfile:function(b){"uploading"===b.status&&this.cancelUpload(b);a.request("delete:photo",e.model,b);return this._updateMaxFilesReachedClass()}})};e.prototype.successDeletePhoto=function(a,b){console.log("photo deleted");return b.id?a.status?alert(a.txt):this.$(b.previewElement).remove():this.$(b.previewElement).remove()};
e.prototype.setName=function(a){(a=g(a.currentTarget).val())&&this.$(".form__field_name").removeClass("error");return this.model.set({name:a})};e.prototype.setDescription=function(a){a=g(a.currentTarget).val();return this.model.set({description:a})};e.prototype.nextStep=function(a){var b;a.preventDefault();b=this.$("#dt_start").val();a=this.$("#dt_end").val();this.model.set({dt_start:b});this.model.set({dt_end:a});this.model.get("dt_start")?this.$("#dt_start").removeClass("error"):this.$("#dt_start").addClass("error");
this.model.get("dt_end")?this.$("#dt_end").removeClass("error"):this.$("#dt_end").addClass("error");this.model.get("name")?this.$(".form__field_name").removeClass("error"):this.$(".form__field_name").addClass("error");if(this.model.get("name")&&this.model.get("dt_start")&&this.model.get("dt_end"))return this.trigger("show:step:what")};return e}(a.Views.ItemView);b.StepWhat=function(b){function e(){return p=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="EventStepWhat";e.prototype.regions=
{pointsRegion:"#points-region"};e.prototype.events={"click .tags__link":"selectAdditionalLabel","select2-removed .field_tags .select-type":"removeLabel","select2-selecting .field__input-place .select-type":"addPoint","select2-removed .field__input-place .select-type":"removePoint","click .js-back":"backStep","click .js-next":"nextStep"};e.prototype.initialize=function(){this.listenTo(this.model,"select2-removed",this.removePoint);this.rootLabels=this.collection.toJSON().filter(function(a){return 0===
a.level});this.additionalLabels=this.collection.toJSON().filter(function(a){return 1===a.level});this.otherLabels=this.collection.toJSON().filter(function(a){return 2===a.level});return this.labels={}};e.prototype.templateHelpers=function(){return{rootLabels:this.rootLabels,additionalLabels:this.additionalLabels}};e.prototype.format_tags=function(a){return"<span data-id='"+a.id+"'>"+a.text+"</span>"};e.prototype.format_place=function(a){return"<span data-id='"+a.id+"' class='type type_"+a.type+"'>"+
a.name+"<i>"+(a.address||"")+"</i></span>"};e.prototype.selectAdditionalLabel=function(a){var b;a.preventDefault();b=g(a.currentTarget);a=this.$(".field_tags .select-type").select2("data");a.push({id:b.data("id"),text:b.text()});return this.$(".field_tags .select-type").select2("data",a)};e.prototype.removeLabel=function(a){var b;console.log(a);b=this.$(".field_tags .select-type").select2("data");d.remove(b,function(b){return b.id===a.val});return b=this.$(".field_tags .select-type").select2("data",
b)};e.prototype.addPoint=function(b){var c,d,e=this;b=b.val;d=this.model.get("points");c=new a.Entities.Point({unid:b});c.fetch();return a.execute("when:fetched",c,function(){var b;e.$(".field__input-place").removeClass("error");b=[c.get("latitude"),c.get("longitude")];c.setCoordinates(b);e.map.geoObjects.add(c.placemark);e.storage=a.ymaps.geoQuery(e.map.geoObjects);e.map.setCenter(b);d.push(c.toJSON());e.model.set({points:d});return e.model.trigger("change:points")})};e.prototype.removePoint=function(b){d.remove(this.model.get("points"),
function(a){return a.id===b.val});this.$(".field__input-place .select-type").select2("data",this.model.get("points"));this.storage.search("properties.id='map-point"+b.val+"'").removeFromMap(this.map);this.storage=a.ymaps.geoQuery(this.map.geoObjects);return this.model.trigger("change:points")};e.prototype.backStep=function(a){a.preventDefault();return this.trigger("show:step:name")};e.prototype.nextStep=function(b){var c=this;b.preventDefault();b=this.$(".field_tags .select-type").select2("val");
this.model.set({tags:b});return this.model.get("points").length?(this.$(".field__input-place").removeClass("error"),this.model.save(null,{success:function(){var b;a.addEventPopup.empty();a.BoardApp.board.yapens.add(c.model,{at:1});a.vent.trigger("show:detail:popup",c.model);a.navigate("event/"+c.model.get("id"));b=a.BoardApp.board.yapensView.render();if(b.wall)return b.wall.reloadItems()&b.wall.layout()}})):this.$(".field__input-place").addClass("error")};e.prototype.initMap=function(){var b=this;
console.log("initMap");if(void 0!==a.ymaps)return a.ymaps.ready(function(){var c;b.map=b.map||new a.ymaps.Map("map-event-add",{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"});b.map.controls.add("zoomControl");c=b.model.get("points");d.each(c,function(c){c=new a.Entities.Point(c);b.map.geoObjects.add(c.placemark);c=c.placemark.geometry.getCoordinates();return b.map.setCenter(c)});return b.storage=a.ymaps.geoQuery(b.map.geoObjects)})};e.prototype.onShow=
function(){var b,c=this;this.initMap();this.$(".field__input-place .select-type").select2({containerCssClass:"select2-container_tags",dropdownCssClass:"select2-drop_tags",width:"480px",multiple:!0,quietMillis:750,allowClear:!0,ajax:{dataType:"json",url:a.API_BASE_URL+"/api/v1/search/",data:function(a,b){return{s:a}},results:function(a,b){var c;c=d.map(a,function(a,b){if("points"===b)return d.map(a,function(a){return a.type=b}),a});return{results:d.compact(d.flatten(c))}}},formatResult:this.format_place,
formatSelection:this.format_place,minimumInputLength:1,formatInputTooShort:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b 1 \u0441\u0438\u043c\u0432\u043e\u043b"},formatNoMatches:function(){return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},escapeMarkup:function(a){return a}});this.$(".field_tags .select-type").select2({containerCssClass:"select2-container_tags",dropdownCssClass:"select2-drop_tags",
width:"480px",multiple:!0,tags:function(){return c.otherLabels.map(function(a){return{id:a.id,text:a.name}})},maximumInputLength:50,formatResult:this.format_tags,formatSelection:this.format_tags,tokenSeparators:[","],escapeMarkup:function(a){return a}});b=d.filter(this.model.get("tags"),function(a){return 0!==a.level});b=d.map(b,function(a){return{id:a.id,text:a.name}});this.$(".field_tags .select-type").select2("data",b);b=d.map(this.model.get("points"),function(a){return{id:a.id,name:a.name,type:"point"}});
return this.$(".field__input-place .select-type").select2("data",b)};e.prototype.closePopup=function(b,c,d){console.log("event saved",b,c,d);return a.addEventPopup.empty()};return e}(a.Views.Layout);return b.Points=function(b){function d(){return l=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PointList";d.prototype.modelEvents={"change:points":"render"};d.prototype.events={"click .js-delete":"deletePoint","click .item .link":"showPoint"};d.prototype.deletePoint=function(a){var b;
a.preventDefault();a.stopPropagation();b=g(a.currentTarget).data();a.val=b.id;return this.model.trigger("select2-removed",a)};d.prototype.showPoint=function(b){b.preventDefault();b=g(b.currentTarget).attr("href");return a.navigate(b,!0)};return d}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.PlaceToTrip",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize AddPopupApp.PlaceToTrip.Controller");this.model=this.options.model||
new a.Entities.TripBlock;this.collection=a.request("get:all:yapens",{"new":!0,models:"points,events"});this.tripyapens=new a.Entities.YapensCollection;this.layout=new b.Layout({model:this.model});this.listenTo(this.layout,"show",function(){c.showContent();return c.showAside()});return a.addPlaceToTripPopup.show(this.layout)};e.prototype.showAside=function(){this.asideView=new b.Aside({model:this.model,collection:this.collection,tripyapens:this.tripyapens});return this.show(this.asideView,{region:this.layout.asideRegion})};
e.prototype.showContent=function(){var a=this;this.contentView=new b.Content({model:this.model,collection:this.collection,tripyapens:this.tripyapens});this.listenTo(this.contentView,"show",function(){return a.showGrid(a.contentView)});return this.show(this.contentView,{region:this.layout.contentRegion})};e.prototype.showGrid=function(a){this.gridView=new b.Grid({collection:this.collection,tripyapens:this.tripyapens});return this.show(this.gridView,{region:a.gridRegion})};e.prototype.onClose=function(){return this.stopListening()};
return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.PlaceToTrip",function(b,a,e,h,g,d){var k,n,p,l,q;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="PlaceToTripLayout";b.prototype.className="popupwin__scrollbox";b.prototype.regions={asideRegion:"#placetotrip-aside-region",
contentRegion:"#placetotrip-content-region"};b.prototype.initialize=function(a){return this.saveUrl=!0};return b}(a.Views.Layout);b.Content=function(b){function e(){return n=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="PlaceToTripContent";e.prototype.className="popupwin__content popupwin__content_route_place";e.prototype.regions={gridRegion:"#trip-grid-region"};e.prototype.initialize=function(){this.listenTo(this.options.tripyapens,"set:map:center",this.setMapCenter);
this.listenTo(this.options.collection,"add:to:trip",this.addToTrip);return this.listenTo(this.options.collection,"delete:from:trip",this.deleteFromTrip)};e.prototype.events={"click .js-map-open":"mapOpen","click .js-map-close":"mapClose","select2-selecting":"searchItem","select2-clearing":"searchClear"};e.prototype.setMapCenter=function(a){var b;if("point"===a.get("type_of_item"))return b=a.placemark.geometry.getCoordinates(),a.placemark.balloon.open(b),this.geoMap.setCenter(b)};e.prototype.addToTrip=
function(a){console.log("add placemark",a.placemark);a.set({added:!0},{silent:!0});a.trigger("change:added");return this.geoMap.geoObjects.add(a.placemark)};e.prototype.deleteFromTrip=function(a){console.log("delete placemark",a.placemark);a.set({added:!1},{silent:!0});a.trigger("change:added");return this.geoMap.geoObjects.remove(a.placemark)};e.prototype.mapOpen=function(a){a.preventDefault();return this.$(".map_route").addClass("open")};e.prototype.mapClose=function(a){a.preventDefault();return this.$(".map_route").removeClass("open")};
e.prototype.searchItem=function(a){var b,c=this;b="custom"===a.object.type?"points":a.object.type;this.options.collection.reset();return this.options.collection.fetch({reset:!0,data:{s:a.object.name||"",models:b},success:function(a){return c.successSearch(a)}})};e.prototype.searchClear=function(a){var b=this;this.options.collection.reset();return this.options.collection.fetch({reset:!0,data:{models:"points,events"},success:function(a){return b.successSearch(a)}})};e.prototype.successSearch=function(a){var b=
this;return d.each(this.options.tripyapens.models,function(c){var d;if(d=a.findWhere({id:c.get("id"),type_of_item:c.get("type_of_item")}))return b.deleteFromTrip(c),b.addToTrip(d);d=c;a.add(d);d.set({added:!0},{silent:!0});return d.trigger("change:added")})};e.prototype.format=function(a){return"<span data-id='"+a.id+"' class='type type_"+a.type+"'>"+a.name+"</span>"};e.prototype.onShow=function(){var b=this;if(void 0!==a.ymaps)return a.ymaps.ready(function(){return b.geoMap=new a.ymaps.Map("map-route",
{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"})}),this.$(".route-search input").select2({allowClear:!0,quietMillis:750,containerCssClass:"select2-container_route",dropdownCssClass:"select2-drop_route",createSearchChoice:function(a){return{id:0,type:"custom",name:a}},ajax:{dataType:"json",url:a.API_BASE_URL+"/api/v1/search/",data:function(a,b){return{s:a}},results:function(a,b){var c;console.log(a);c=d.map(a,function(a,b){d.map(a,function(a){return a.type=
b});return a});return{results:d.filter(d.flatten(c),function(a){return"users"!==a.type&&"tags"!==a.type&&"trips"!==a.type})}}},formatResult:this.format,formatSelection:this.format,minimumInputLength:3,formatInputTooShort:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},formatNoMatches:function(){return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},escapeMarkup:function(a){return a}})};
e.prototype.onClose=function(){return this.stopListening()};return e}(a.Views.Layout);b.GridItem=function(b){function d(){return p=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.className="box";d.prototype.initialize=function(a){return this.model.set("addtotrip",!0)};d.prototype.modelEvents=function(){return{"change:added":"added"}};d.prototype.getTemplate=function(){return"point"===this.model.get("type_of_item")?"BoardPoint":"set"===this.model.get("type_of_item")?"BoardSet":"route"===
this.model.get("type_of_item")?"BoardRoute":"trip"===this.model.get("type_of_item")?"BoardTrip":"event"===this.model.get("type_of_item")?"BoardEvent":"BoardPoint"};d.prototype.events={"click .box__img":"addBox","click .js-delete-from-trip":"deleteBox","click .item_place .link":"showDetailPoint","click .item_place .js-delete":"deletePoint"};d.prototype.added=function(){console.log("added to trip");return this.model.get("added")?this.$el.addClass("added"):this.$el.removeClass("added")};d.prototype.addBox=
function(a){a.preventDefault();return this.model.trigger("add:to:trip",this.model)};d.prototype.deleteBox=function(a){a.preventDefault();return this.model.trigger("delete:from:trip",this.model)};d.prototype.showDetailPoint=function(b){b.preventDefault();console.log(b);b=g(b.currentTarget).prop("hash");return a.navigate(b,!0)};d.prototype.deletePoint=function(a){a.preventDefault();return console.log(a)};d.prototype.onClose=function(){return this.model.placemark.balloon.close()};return d}(a.Views.ItemView);
b.Grid=function(d){function e(){return l=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.childView=b.GridItem;e.prototype.className="route-grid";e.prototype.id="trip-grid";e.prototype.initialize=function(){return this.listenTo(this.options.tripyapens,"add:to:trip",this.addToTrip)};e.prototype.addToTrip=function(b){var c=this;return a.execute("when:fetched",this.collection,function(){var a;a=c.collection.findWhere({id:b.get("id"),type_of_item:b.get("type_of_item")});a||(a=b,c.collection.add(a));
return c.collection.trigger("add:to:trip",a)})};e.prototype.onAfterItemAdded=function(a,b){if(this.wall)return this.wall.appended(a.$el)};e.prototype.onCollectionRendered=function(){var b=this;return a.execute("when:fetched",this.collection,function(){console.log("collection rendered. We rebuild masonry layout");if(b.wall)return b.wall.reloadItems()&b.wall.layout()})};e.prototype.onShow=function(){var b=this;return a.execute("when:fetched",this.collection,function(){console.log("collection fetched",
b.collection);return b.wall=b.wall||new Masonry(b.el,{itemSelector:".box"})})};e.prototype.onClose=function(){console.log("onClose yapens");this.wall&&this.wall.destroy();return this.remove()};return e}(a.Views.CollectionView);return b.Aside=function(b){function e(){return q=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="PlaceToTripAside";e.prototype.className="route-step__aside";e.prototype.initialize=function(){var b=this;d.bindAll(this);this.yapens=this.options.tripyapens;
this.listenTo(this.options.collection,"add:to:trip",this.addToTrip);this.listenTo(this.options.collection,"delete:from:trip",this.deleteFromTrip);return d.each(this.model.get("points"),function(c){var d;c.unid=c.type_of_item+c.id;c.added=!0;"point"===c.type_of_item&&(d=new a.Entities.Point(c));"event"===c.type_of_item&&(d=new a.Entities.Event(c));return b.yapens.trigger("add:to:trip",d)})};e.prototype.modelEvents=function(){return{"change:points":"render"}};e.prototype.events={"click .item":"setMapCenter",
"click .js-finish-adding":"addPoints","click .js-show-map":"showMainMap"};e.prototype.scrollAside=function(){252<g(window).scrollTop()&&1E3>g(window).scrollTop()&&this.$el.parent("#sidebar-region").addClass("fixed");if(252>g(window).scrollTop())return this.$el.parent("#sidebar-region").removeClass("fixed")};e.prototype.onShow=function(){var a=this;d.debounce(this.scrollAside,50);g(window).on("scroll.Aside",this.scrollAside);this.popupwin=this.$el.closest(".popupwin");return this.popupwin.on("scroll.Yapp",
function(){if(a.$el.length)return a.$el.css({"-webkit-transform":"translate3d(0, "+a.popupwin.scrollTop()+"px, 0)",transform:"translate3d(0, "+a.popupwin.scrollTop()+"px, 0)"})})};e.prototype.addToTrip=function(a){console.log(a);a.id=a.get("type_of_item")+a.get("id");this.yapens.add(a);return this.model.set({points:this.yapens.toJSON()})};e.prototype.deleteFromTrip=function(a){console.log(a);a.id=a.get("type_of_item")+a.get("id");this.yapens.remove(a);return this.model.set({points:this.yapens.toJSON()})};
e.prototype.setMapCenter=function(a){var b;b=g(a.currentTarget).data("id");a=g(a.currentTarget).data("type");b=this.yapens.findWhere({id:b,type_of_item:a});return this.yapens.trigger("set:map:center",b)};e.prototype.addPoints=function(b){var c;console.log("clicked .js-finish");b.preventDefault();a.addPlaceToTripPopup.currentView||(b=a.buttonSpinner(this.$(".btn_finish"),"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c",this.$(".btn_finish")),b.start(),c=this.model.toJSON(),c=new a.Entities.Trip({name:"\u041c\u043e\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435",
blocks:[c],author:a.USER}),new a.AddPopupApp.Trip.Controller({model:c}),b.stop());return a.addPlaceToTripPopup.empty()};e.prototype.showMainMap=function(b){b.preventDefault();a.boardRegion.reset();return a.vent.trigger("show:map:region",this.options.tripyapens)};e.prototype.onClose=function(){g(window).off("scroll.Aside");this.popupwin.off("scroll.Yapp");return this.stopListening()};e.prototype.onRender=function(){var a,b;a=this.$(".route-list").height();b=g(window).height()-250;this.$(".route-list").height(a>
b?b:a);return this.$(".route-list").jScrollPane({autoReinitialise:!0})};return e}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Point",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize AddPopupApp.Point.Controller");this.tags=a.request("get:all:tags",
{level:!1});this.model=this.options.model||new a.Entities.Point;this.layout=new b.Layout({model:this.model});this.listenTo(this.model,"spinner:start",this.startSpinner);this.listenTo(this.layout,"show",function(){c.showStepName();c.showStepWhat();return c.showStepCommers()});return this.model.isNew()?a.addPointPopup.show(this.layout,{loading:!0}):this.model.fetch({success:function(){a.addPointPopup.show(c.layout,{loading:!0});if(c.spinner)return c.spinner.stop()}})};e.prototype.startSpinner=function(a){return this.spinner=
a};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showStepName=function(){this.nameView=new b.StepName({model:this.model});this.listenTo(this.nameView,"show:step:what",function(){this.layout.stepNameRegion.$el.hide();return this.layout.stepWhatRegion.$el.show()});return this.show(this.nameView,{region:this.layout.stepNameRegion,loading:!0})};e.prototype.showStepWhat=function(){var c=this;return a.execute("when:fetched",this.tags,function(){c.whatView=new b.StepWhat({model:c.model,
collection:c.tags});c.show(c.whatView,{region:c.layout.stepWhatRegion});c.listenTo(c.whatView,"show:step:commers",function(){this.layout.stepWhatRegion.$el.hide();return this.layout.stepCommersRegion.$el.show()});return c.listenTo(c.whatView,"show:step:name",function(){this.layout.stepWhatRegion.$el.hide();return this.layout.stepNameRegion.$el.show()})})};e.prototype.showStepCommers=function(){this.commersView=new b.StepCommers({model:this.model});this.show(this.commersView,{region:this.layout.stepCommersRegion});
return this.listenTo(this.commersView,"show:step:what",function(){this.layout.stepCommersRegion.$el.hide();return this.layout.stepWhatRegion.$el.show()})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Point",function(b,a,e,h,g,d){var k,n,p,l;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="AddPointLayout";b.prototype.className="popupwin__scrollbox";b.prototype.regions={stepNameRegion:"#point-name-region",
stepWhatRegion:"#point-what-region",stepCommersRegion:"#point-commers-region"};b.prototype.onShow=function(){return this.stepNameRegion.$el.show()};return b}(a.Views.Layout);b.StepName=function(b){function e(){return n=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="PointStepName";e.prototype.events={"blur .form__field_name input":"setName","blur .form__field_description textarea":"setDescription","click .dz-details":"setMainImage","click .js-next":"nextStep","submit form":"nextStep"};
e.prototype.initialize=function(){return this.listenTo(this.model,"success:delete:photo",this.successDeletePhoto)};e.prototype.onClose=function(){this.stopListening();return this.model.unset()};e.prototype.onShow=function(){var b,c,e;e=this;c=this.model.get("imgs");b=(b=this.model.get("id"))?"/photos/point/"+b+"/add":"/photos/add";return this.$("#place-dropzone").dropzone({init:function(){var a=this;return d.each(c,function(b){var c;c={name:"Image"+d.uniqueId(),size:12345,id:b.id};a.emit("addedfile",
c);return a.emit("thumbnail",c,b.thumbnail104x104)})},dictDefaultMessage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",addRemoveLinks:!0,paramName:"img",url:b,maxFilesize:20,headers:{"X-CSRFToken":g.cookie("csrftoken")},error:function(b,c,d){if(404===d.status)return e=new a.HeaderApp.Show.PopupInfo({message:'\u0412\u0430\u0448\u0430 \u0441\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430.<br>\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, <a href="/">\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</a>'}),
a.infoPopupRegion.show(e)},success:function(a,b){var d;g(a.previewElement).removeClass("dz-processing").addClass("dz-success");d=b[0];c=e.model.get("imgs");c.push(d);a.id=d.id;return e.model.set("imgs",c)},removedfile:function(b){"uploading"===b.status&&this.cancelUpload(b);a.request("delete:photo",e.model,b);return this._updateMaxFilesReachedClass()}})};e.prototype.successDeletePhoto=function(a,b){console.log("photo deleted");return b.id?a.status?alert(a.txt):this.$(b.previewElement).remove():this.$(b.previewElement).remove()};
e.prototype.setName=function(a){(a=g(a.currentTarget).val())&&this.$(".form__field_name").removeClass("error");return this.model.set({name:a})};e.prototype.setDescription=function(a){a=g(a.currentTarget).val();return this.model.set({description:a})};e.prototype.setMainImage=function(a){a.preventDefault();a=g(a.currentTarget);this.$(".dz-details").not(a).removeClass("main-image");return a.toggleClass("main-image")};e.prototype.nextStep=function(a){a.preventDefault();this.model.isValid();return 0>d.indexOf(this.model.validationError,
"name")?(this.$(".form__field_name").removeClass("error"),this.trigger("show:step:what"),this.$(".categories__link").eq(0).trigger("click")):this.$(".form__field_name").addClass("error")};return e}(a.Views.ItemView);b.StepWhat=function(b){function e(){return p=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="PointStepWhat";e.prototype.className="popupwin__content clearfix";e.prototype.events={"click .categories__link":"selectRootLabel","click .tags__link":"selectAdditionalLabel",
"select2-removed .tags-additional":"removeLabel","select2-selecting .field__input-map input":"setAddress","select2-clearing .field__input-map input":"mapClear","click .js-back":"backStep","click .js-next":"nextStep","click .js-finish":"finishStep"};e.prototype.initialize=function(){this.rootLabels=this.collection.toJSON().filter(function(a){return 0===a.level});this.additionalLabels=this.collection.toJSON().filter(function(a){return 1===a.level});this.otherLabels=this.collection.toJSON().filter(function(a){return 2===
a.level});return this.labels={}};e.prototype.templateHelpers=function(){return{user:a.request("get:my:profile").toJSON(),rootLabels:this.rootLabels,additionalLabels:this.additionalLabels}};e.prototype.format=function(a){return"<span data-id='"+a.id+"'>"+a.text+"</span>"};e.prototype.formatPoint=function(a){return"<span data-id='"+a.id+"' class='type type_"+a.type+"'\ndata-pos='"+a.pos+"'>\n"+a.name+"\n<i>"+a.address+"</i>\n</span>"};e.prototype.searchQuery=function(b){var c;c={};return a.ymaps.geocode(b.term,
{json:!0,kind:"locality",results:10}).then(function(a){console.log("geocode response",a);a=d.map(a.GeoObjectCollection.featureMember,function(a){return{id:-1,name:a.GeoObject.name,type:"geocode",address:a.GeoObject.description||"",pos:a.GeoObject.Point.pos}});c.results=a;return b.callback(c)})};e.prototype.selectRootLabel=function(a){var b,c;a.preventDefault();c=g(a.currentTarget);b=c.data();this.$(".tags__item").hide();(a=this.$(".categories__link.active").data())&&(this.labels[a.id]=this.$(".select-type").select2("data"));
this.$el.find(".categories__link").not(c).removeClass("active");c.toggleClass("active");c.hasClass("active")?this.$el.find(".field_tags").attr("class","field field_tags field_tags-"+b.style):this.$el.find(".field_tags").attr("class","hide field field_tags field_tags-"+b.style);this.$(".tags__link").filter(function(a,c){return g(c).data("parent")===b.id}).parent().show();if(b)return this.$(".select-type").select2("data",this.labels[b.id])};e.prototype.selectAdditionalLabel=function(a){var b;a.preventDefault();
b=g(a.currentTarget);a=this.$(".select-type").select2("data");a.push({id:b.data("id"),text:b.text()});return this.$(".select-type").select2("data",a)};e.prototype.removeLabel=function(a){var b;b=this.$(".select-type").select2("data");d.remove(b,function(b){return b.id===a.val});return b=this.$(".select-type").select2("data",b)};e.prototype.mapClear=function(a){this.map.geoObjects.remove(this.model.placemark);return this.model.set({longitude:null,latitude:null,address:""},{silent:!0})};e.prototype.setAddress=
function(a){var b,c;c=a.object;a=c.address;b=c.pos.split(" ");c=b[1];b=b[0];this.model.setCoordinates([c,b]);this.model.set({address:a,longitude:b,latitude:c},{silent:!0});this.model.setCoordinates([this.model.get("latitude"),this.model.get("longitude")]);this.map.setCenter([this.model.get("latitude"),this.model.get("longitude")],12);return this.map.geoObjects.add(this.model.placemark)};e.prototype.backStep=function(a){a.preventDefault();return this.trigger("show:step:name")};e.prototype.nextStep=
function(a){var b;a.preventDefault();this.model.isValid();return 0>d.indexOf(this.model.validationError,"address")?(this.$(".select2-choice").removeClass("error"),this.trigger("show:step:commers"),b=this.$(".select-type").select2("val"),a=this.$(".categories__link.active").data()||{id:1},b.push(a.id),this.model.set({tags:b})):this.$(".select2-choice").addClass("error")};e.prototype.finishStep=function(b){var c,e=this;b.preventDefault();this.model.isValid();return 0>d.indexOf(this.model.validationError,
"address")?(this.$(".select2-choice").removeClass("error"),this.spinner=new a.buttonSpinner(this.$(".js-finish"),"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c",this.$(".js-finish")),c=this.$(".select-type").select2("val"),b=this.$(".categories__link.active").data()||{id:1},c.push(b.id),this.model.set({tags:c}),b=this.model.get("additional"),this.model.set({additional:JSON.stringify(b)},{silent:!0}),this.spinner.start(),this.model.save(null,{success:function(){var b;e.spinner.stop();a.addPointPopup.empty();
a.BoardApp.board.yapens.add(e.model,{at:1});a.vent.trigger("show:detail:popup",e.model);a.navigate("point/"+e.model.get("id"));b=a.BoardApp.board.yapensView.render();if(b.wall)return b.wall.reloadItems()&b.wall.layout()}})):this.$(".select2-choice").addClass("error")};e.prototype.initMap=function(){var b=this;console.log("initMap");if(void 0!==a.ymaps)return a.ymaps.ready(function(){b.map=b.map||new a.ymaps.Map("map-point-add",{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},
{autoFitToViewport:"always"});b.map.controls.add("zoomControl");a.execute("when:fetched",b.model,function(){if(b.model.get("latitude"))return b.$(".field__input-map input").select2("data",{name:"",address:b.model.get("address")}),b.model.setCoordinates([b.model.get("latitude"),b.model.get("longitude")]),b.map.setCenter([b.model.get("latitude"),b.model.get("longitude")],12),b.map.geoObjects.add(b.model.placemark)});b.map.events.remove("click");return b.map.events.add("click",function(c){c=c.get("coordPosition");
b.map.geoObjects.remove(b.model.placemark);b.model.setCoordinates(c);b.map.geoObjects.add(b.model.placemark);a.ymaps.geocode(c).then(function(a){a=a.geoObjects.get(0).properties.get("metaDataProperty.GeocoderMetaData.text");b.$(".field__input-map input").select2("data",{name:"",address:a});return b.model.set({address:a},{silent:!0})});return b.model.set({longitude:c[1],latitude:c[0]},{silent:!0})})})};e.prototype.onShow=function(){var a,b,c=this;console.log("onShow");this.$(".field__input-map input").select2({allowClear:!0,
quietMillis:750,containerCssClass:"select2-container_trip",dropdownCssClass:"select2-drop_trip",query:this.searchQuery,formatResult:this.formatPoint,formatSelection:this.formatPoint,minimumInputLength:3,formatInputTooShort:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},formatNoMatches:function(){return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},escapeMarkup:function(a){return a}});
this.$(".categories__link").tooltip();this.$(".select-type").select2({containerCssClass:"select2-container_tags",dropdownCssClass:"select2-drop_tags",width:"480px",multiple:!0,tags:function(){return c.otherLabels.map(function(a){return{id:a.id,text:a.name}})},maximumInputLength:50,formatResult:this.format,formatSelection:this.format,tokenSeparators:[","],escapeMarkup:function(a){return a}});a=d.find(this.model.get("tags"),{level:0});b=d.filter(this.model.get("tags"),function(a){return 0!==a.level});
b=d.map(b,function(a){return{id:a.id,text:a.name}});a?(this.$(".categories__link[data-id="+a.id+"]").trigger("click"),this.labels[a.id]=b):this.$(".categories__link").eq(0).trigger("click");this.$(".select-type").select2("data",b);return this.initMap()};e.prototype.onClose=function(){this.stopListening();this.collection.reset();return this.model.unset()};return e}(a.Views.ItemView);return b.StepCommers=function(b){function e(){return l=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template=
"PointStepCommers";e.prototype.className="popupwin__content clearfix";e.prototype.modelEvents={"change:additional":"render"};e.prototype.onBeforeRender=function(){var a;if((a=this.model.get("additional"))&&d.isString(a))try{return this.model.set("additional",JSON.parse(a),{silent:!0})}catch(b){return console.error(b)}};e.prototype.events={"click .working-days__item":"toggleDay","click .js-add-days":"addDays","click .js-delete":"daysDelete","click .toggle-list__title":"toggleList","click .js-select-quasi":"openQuasi",
"click .js-back":"backStep","click .js-finish":"finishStep"};e.prototype.toggleDay=function(a){a.preventDefault();return g(a.currentTarget).toggleClass("active")};e.prototype.addDays=function(a){var b,c;a.preventDefault();c=this.$(".start-time").val();b=this.$(".end-time").val();a=d.map(this.$(".working-days__item.active"),function(a){return g(a).text()});a=a.join(",");this.$(".working-period__result").append('<li class="item">\n<span class="days">'+(a||"\u041f\u041d-\u0412\u0421")+'</span>\n<span class="time">'+
c+"\u2014"+b+'</span>\n<input name="working_hours" type="hidden" value="'+(a||"\u041f\u041d-\u0412\u0421")+" "+c+"-"+b+'">\n<a href="#" class="delete js-delete"></a>\n</li>');return this.$(".working-days__item").removeClass("active")};e.prototype.daysDelete=function(a){a.preventDefault();return g(a.currentTarget).parent().remove()};e.prototype.openQuasi=function(a){a.preventDefault();return this.$(".select-quasi__list").toggle()};e.prototype.toggleList=function(a){a.preventDefault;a=g(a.currentTarget);
if(a.hasClass("active"))return a.removeClass("active"),a.siblings(".toggle-list__body").slideUp();this.$(".toggle-list__title").removeClass("active");this.$(".toggle-list__body").slideUp();a.addClass("active");return a.siblings(".toggle-list__body").slideDown()};e.prototype.setAdditionalData=function(){var a,b,c;a=this.$el.find("input").serializeArray();c=d(a).filter({name:"working_hours"}).pluck("value").value();b=d(a).filter({name:"services"}).pluck("value").value();a=d.reduce(a,function(a,b){a[b.name]=
b.value;return a},{});a.working_hours=c;a.services=b;return this.model.set({additional:JSON.stringify(a)},{silent:!0})};e.prototype.finishStep=function(b){var c=this;b.preventDefault();this.setAdditionalData();this.spinner=new a.buttonSpinner(this.$(".js-finish"),"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c",this.$(".js-finish"));this.spinner.start();return this.model.save(null,{success:function(){var b;c.spinner.stop();a.addPointPopup.empty();a.BoardApp.board.yapens.add(c.model,{at:1});
a.vent.trigger("show:detail:popup",c.model);a.navigate("point/"+c.model.get("id"));b=a.BoardApp.board.yapensView.render();if(b.wall)return b.wall.reloadItems()&b.wall.layout()}})};e.prototype.backStep=function(a){a.preventDefault();return this.trigger("show:step:what")};e.prototype.onClose=function(){this.stopListening();return this.model.unset()};return e}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Route",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize AddPopupApp.Route.Controller");this.tags=a.request("get:all:tags",
{level:!1});this.model=this.options.model||new a.Entities.Route;this.layout=new b.Layout({model:this.model});this.listenTo(this.layout,"show",function(){c.showStepName();c.showStepWhat();return c.showStepCommers()});return this.model.isNew()?a.addRoutePopup.show(this.layout,{loading:!0}):this.model.fetch({success:function(){return a.addRoutePopup.show(c.layout,{loading:!0})}})};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showStepName=function(){var a=this;this.nameView=
new b.StepName({model:this.model});this.listenTo(this.nameView,"show",function(){var c;c=new b.Imgs({model:a.model});return a.nameView.imgsRegion.show(c)});this.listenTo(this.nameView,"show:step:what",function(){console.log("fired show step what");this.layout.stepNameRegion.$el.hide();return this.layout.stepWhatRegion.$el.show()});return this.show(this.nameView,{region:this.layout.stepNameRegion,loading:!0})};e.prototype.showStepWhat=function(){var c=this;return a.execute("when:fetched",this.tags,
function(){c.whatView=new b.StepWhat({model:c.model,collection:c.tags});c.show(c.whatView,{region:c.layout.stepWhatRegion});c.listenTo(c.whatView,"show:step:commers",function(){this.layout.stepWhatRegion.$el.hide();return this.layout.stepCommersRegion.$el.show()});return c.listenTo(c.whatView,"show:step:name",function(){this.layout.stepWhatRegion.$el.hide();return this.layout.stepNameRegion.$el.show()})})};e.prototype.showStepCommers=function(){this.commersView=new b.StepCommers({model:this.model});
this.show(this.commersView,{region:this.layout.stepCommersRegion});return this.listenTo(this.commersView,"show:step:what",function(){this.layout.stepCommersRegion.$el.hide();return this.layout.stepWhatRegion.$el.show()})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Route",function(b,a,e,h,g,d){var k,n,p,l,q;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="AddRouteLayout";b.prototype.className="popupwin__scrollbox";b.prototype.regions={stepNameRegion:"#route-name-region",
stepWhatRegion:"#route-what-region",stepCommersRegion:"#point-commers-region"};b.prototype.onShow=function(){return this.stepNameRegion.$el.show()};return b}(a.Views.Layout);b.StepName=function(a){function b(){return n=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="RouteStepName";b.prototype.regions={imgsRegion:"#imgs-region"};b.prototype.events={"blur .form__field_name input":"setName","blur .form__field_description textarea":"setDescription","click .dz-details":"setMainImage",
"click .js-next-step":"nextStep","submit form":"nextStep"};b.prototype.onClose=function(){this.stopListening();return this.model.unset()};b.prototype.onShow=function(){var a,b=this;a=(a=this.model.get("id"))?"/photos/point/"+a+"/add":"/photos/add";return this.$("#place-dropzone").dropzone({dictDefaultMessage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",addRemoveLinks:!0,paramName:"img",url:a,headers:{"X-CSRFToken":g.cookie("csrftoken")},
success:function(a,c){var d,e;d=c[0];e=b.model.get("imgs");e.push(d);b.model.set("imgs",e);return b.model.trigger("change:imgs")}})};b.prototype.setName=function(a){(a=g(a.currentTarget).val())&&this.$(".form__field_name").removeClass("error");return this.model.set({name:a})};b.prototype.setDescription=function(a){a=g(a.currentTarget).val();return this.model.set({description:a})};b.prototype.nextStep=function(a){a.preventDefault();console.log("next step");this.model.isValid();return 0>d.indexOf(this.model.validationError,
"name")?(this.$(".form__field_name").removeClass("error"),this.trigger("show:step:what"),this.$(".categories__link").eq(0).trigger("click")):this.$(".form__field_name").addClass("error")};return b}(a.Views.Layout);b.StepWhat=function(b){function e(){return p=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="RouteStepWhat";e.prototype.className="popupwin__content clearfix";e.prototype.events={"click .categories__link":"selectRootLabel","click .tags__link":"selectAdditionalLabel",
"change .field__input-map input":"setAddress","select2-removed":"removeLabel","click .js-back":"backStep","click .js-next":"nextStep"};e.prototype.initialize=function(){this.rootLabels=this.collection.toJSON().filter(function(a){return 0===a.level});this.additionalLabels=this.collection.toJSON().filter(function(a){return 1===a.level});this.otherLabels=this.collection.toJSON().filter(function(a){return 2===a.level});return this.labels={}};e.prototype.templateHelpers=function(){return{rootLabels:this.rootLabels,
additionalLabels:this.additionalLabels}};e.prototype.format=function(a){return"<span data-id='"+a.id+"'>"+a.text+"</span>"};e.prototype.selectRootLabel=function(a){var b,c;a.preventDefault();c=g(a.currentTarget);b=c.data();this.$(".tags__item").hide();(a=this.$(".categories__link.active").data())&&(this.labels[a.id]=this.$(".select-type").select2("data"));this.$el.find(".categories__link").not(c).removeClass("active");c.toggleClass("active");c.hasClass("active")?this.$el.find(".field_tags").attr("class",
"field field_tags field_tags-"+b.style):this.$el.find(".field_tags").attr("class","hide field field_tags field_tags-"+b.style);this.$(".tags__link").filter(function(a,c){return g(c).data("parent")===b.id}).parent().show();if(b)return this.$(".select-type").select2("data",this.labels[b.id])};e.prototype.selectAdditionalLabel=function(a){var b;a.preventDefault();b=g(a.currentTarget);a=this.$(".select-type").select2("data");a.push({id:b.data("id"),text:b.text()});return this.$(".select-type").select2("data",
a)};e.prototype.removeLabel=function(a){var b;b=this.$(".select-type").select2("data");d.remove(b,function(b){return b.id===a.val});return b=this.$(".select-type").select2("data",b)};e.prototype.setAddress=function(b){var c,d=this;c=g(b.currentTarget).val();if(void 0!==a.ymaps)return a.ymaps.ready(function(){return a.ymaps.geocode(c).then(function(a){a=a.geoObjects.get(0).geometry.getCoordinates();d.model.setCoordinates(a);d.model.set({address:c,longitude:a[1],latitude:a[0]},{silent:!0});d.model.setCoordinates([d.model.get("latitude"),
d.model.get("longitude")]);return d.map.setCenter([d.model.get("latitude"),d.model.get("longitude")],12)})})};e.prototype.backStep=function(a){a.preventDefault();return this.trigger("show:step:name")};e.prototype.nextStep=function(a){var b;a.preventDefault();this.model.isValid();return 0>d.indexOf(this.model.validationError,"address")?(this.$(".field__input-map").removeClass("error"),this.trigger("show:step:commers"),b=this.$(".select-type").select2("val"),a=g(".categories__link.active").data()||
{id:1},b.push(a.id),this.model.set({tags:b})):this.$(".field__input-map").addClass("error")};e.prototype.initMap=function(){var b=this;console.log("initMap");if(void 0!==a.ymaps)return a.ymaps.ready(function(){b.map||(b.map=new a.ymaps.Map("map-point-add",{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"}),b.map.controls.add("zoomControl"));a.execute("when:fetched",b.model,function(){if(b.model.get("latitude"))return b.model.setCoordinates([b.model.get("latitude"),
b.model.get("longitude")]),b.map.setCenter([b.model.get("latitude"),b.model.get("longitude")],12),b.map.geoObjects.add(b.model.placemark)});b.map.events.remove("click");return b.map.events.add("click",function(c){c=c.get("coordPosition");b.map.geoObjects.remove(b.model.placemark);b.model.setCoordinates(c);b.map.geoObjects.add(b.model.placemark);a.ymaps.geocode(c).then(function(a){a=a.geoObjects.get(0).properties.get("metaDataProperty.GeocoderMetaData.text");b.$("[name=address]").val(a);return b.model.set({address:a},
{silent:!0})});return b.model.set({longitude:c[1],latitude:c[0]},{silent:!0})})})};e.prototype.onShow=function(){var a,b,c=this;console.log("onShow");this.$(".categories__link").tooltip();this.$(".select-type").select2({containerCssClass:"select2-container_tags",dropdownCssClass:"select2-drop_tags",width:"480px",multiple:!0,tags:function(){return c.otherLabels.map(function(a){return{id:a.id,text:a.name}})},maximumInputLength:50,formatResult:this.format,formatSelection:this.format,tokenSeparators:[","],
escapeMarkup:function(a){return a}});a=d.find(this.model.get("tags"),{level:0});b=d.filter(this.model.get("tags"),function(a){return 0!==a.level});b=d.map(b,function(a){return{id:a.id,text:a.name}});a?(this.$(".categories__link[data-id="+a.id+"]").trigger("click"),this.labels[a.id]=b):this.$(".categories__link").eq(0).trigger("click");this.$(".select-type").select2("data",b);this.$(".map_popupwin").resizable({minHeight:80,handles:"s",resize:function(a,b){var d;d=g(c);return 440<b.size.height?d.addClass("open"):
d.removeClass("open")}});return this.initMap()};e.prototype.onClose=function(){this.stopListening();this.collection.reset();return this.model.unset()};return e}(a.Views.ItemView);b.StepCommers=function(b){function d(){return l=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PointStepCommers";d.prototype.className="popupwin__content clearfix";d.prototype.events={"click .toggle-list__title":"toggleList","click .js-back":"backStep","click .js-finish":"finishStep"};d.prototype.toggleList=
function(a){a.preventDefault;a=g(a.currentTarget);if(a.hasClass("active"))return a.removeClass("active"),a.siblings(".toggle-list__body").slideUp();this.$(".toggle-list__title").removeClass("active");this.$(".toggle-list__body").slideUp();a.addClass("active");return a.siblings(".toggle-list__body").slideDown()};d.prototype.finishStep=function(b){var c=this;b.preventDefault();return this.model.save(null,{success:function(){a.addRoutePopup.empty();return a.vent.trigger("show:detail:popup",c.model)}})};
d.prototype.backStep=function(a){a.preventDefault();return this.trigger("show:step:what")};d.prototype.onClose=function(){this.stopListening();return this.model.unset()};return d}(a.Views.ItemView);return b.Imgs=function(a){function b(){return q=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="ImgsList";b.prototype.modelEvents={"change:imgs":"render"};b.prototype.events={"click .js-delete":"deleteImg"};b.prototype.deleteImg=function(a){a.preventDefault();a=g(a.currentTarget).data();
return console.log(a)};b.prototype.onClose=function(){this.stopListening();return this.model.unset()};return b}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Trip",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c,d=this;console.log("initialize AddPopupApp.Trip.Controller");this.model=this.options.model||
new a.Entities.Trip;this.layout=new b.Layout({model:this.model});this.listenTo(this.model,"spinner:start",this.startSpinner);this.listenTo(this.layout,"show",function(){d.showAside();d.showContent();return d.showCommerce()});return this.model.isNew()?(c=this.model.get("blocks"),this.blocks=a.request("get:blocks",c),a.addTripPopup.show(this.layout,{loading:!0})):this.model.fetch({success:function(){c=d.model.get("blocks");d.blocks=a.request("get:blocks",c);a.addTripPopup.show(d.layout,{loading:!0});
if(d.spinner)return d.spinner.stop()}})};e.prototype.startSpinner=function(a){return this.spinner=a};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showAside=function(){this.asideView=new b.Aside({model:this.model,collection:this.blocks});return this.show(this.asideView,{region:this.layout.asideRegion})};e.prototype.showActions=function(a){this.actionView=new b.Action({model:this.model,collection:this.blocks});this.show(this.actionView,{region:a.actionRegion});return this.listenTo(this.actionView,
"show:step:commerce",function(){this.layout.contentRegion.$el.hide();this.layout.asideRegion.$el.hide();return this.layout.commerceRegion.$el.show()})};e.prototype.showBlocks=function(a){this.blocksView=new b.Blocks({collection:this.blocks});return this.show(this.blocksView,{region:a.blocksRegion,loading:!0})};e.prototype.showContent=function(){var a=this;this.contentView=new b.Content({model:this.model});this.listenTo(this.contentView,"show",function(){a.showActions(a.contentView);return a.showBlocks(a.contentView)});
return this.show(this.contentView,{region:this.layout.contentRegion})};e.prototype.showCommerce=function(){this.commerceView=new b.Commerce({model:this.model,collection:this.blocks});this.show(this.commerceView,{region:this.layout.commerceRegion});return this.listenTo(this.commerceView,"show:step:content",function(){this.layout.commerceRegion.$el.hide();this.layout.contentRegion.$el.show();return this.layout.asideRegion.$el.show()})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("AddPopupApp.Trip",function(b,a,e,h,g,d){var k,n,p,l,q,m,s,r,u;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="AddTripLayout";b.prototype.className="popupwin__scrollbox";b.prototype.regions={asideRegion:"#trip-aside-region",
contentRegion:"#trip-content-region",commerceRegion:"#trip-commerce-region"};return b}(a.Views.Layout);b.Commerce=function(b){function e(){return n=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="AddTripCommerce";e.prototype.className="trip-step__block trip-step__block_title popupwin__content mb10 clearfix";e.prototype.events={"click .toggle-list__title":"toggleList","click .js-add-tour-item":"addTourItem","click .js-delete-field":"deleteField","click .js-add-tour-service":"addTourService",
"keypress .js-parse-time":"keypressTime","keyup .js-parse-time":"keyupTime","click .js-back":"backStep","click .js-finish":"saveTrip","submit form":"formSubmit"};e.prototype.initialize=function(){this.user=a.request("get:my:profile");return this.collection=this.options.collection};e.prototype.onShow=function(){var a;a="";return this.$(".js-datapicker-period").datepicker({showOn:"both",buttonImage:"/static/images/calendar.png",buttonImageOnly:!0,dateFormat:"dd.mm.yy",beforeShow:function(){g(this).datepicker("setDate",
null);g("#ui-datepicker-div").addClass("ui-datepicker_period");return a=""},onSelect:function(b,c){c.inline=!0;""!==a&&(c.inline=!1,parseInt(b.split(".")[0])>=parseInt(a.split(".")[0])||parseInt(b.split(".")[1])>parseInt(a.split(".")[1])||parseInt(b.split(".")[2])>parseInt(a.split(".")[2])?g(this).val(a+" - "+b):g(this).val(""));return a=g(this).val().split(" -")[0]},onClose:function(a,b){return b.inline=!1}})};e.prototype.isNumberKey=function(a){a=a.which?a.which:event.keyCode;return 31<a&&(48>a||
57<a)?!1:!0};e.prototype.keypressTime=function(a){var b;b=g(a.currentTarget);return this.isNumberKey(a)&&5>b.val().length?!0:!1};e.prototype.keyupTime=function(a){var b,c;b=g(a.currentTarget);c=b.val();if(8!==(a.which?a.which:event.keyCode)&&2===c.length)return b.val(b.val()+":")};e.prototype.toggleList=function(a){a.preventDefault();console.log(a);a=g(a.currentTarget);a.hasClass("active")?(a.removeClass("active"),a.siblings(".toggle-list__body").slideUp(),a.find(".check-wrap input").prop("checked",
!1)):(this.$(".toggle-list__title").removeClass("active"),this.$(".toggle-list__body").slideUp(),a.addClass("active"),a.siblings(".toggle-list__body").slideDown(),a.find(".check-wrap input").prop("checked","checked"));return a.find(".check-wrap input").is(":checked")?a.siblings(".toggle-list__body").find("input, textarea").removeClass("disabled").prop("disabled",!1):a.siblings(".toggle-list__body").find("input, textarea").addClass("disabled").prop("disabled",!0)};e.prototype.addTourItem=function(a){var b,
c,d;a.preventDefault();a=g(a.currentTarget);b=a.parent().find(".input-date").val();d=a.parent().find(".input-start").val();c=a.parent().find(".input-end").val();if(b&&d)return a.parent().after(c?'<div class="form__field form__field_tour">\n  <span class="date">'+b+'</span>\n  <span class="time"> c '+d+" \u0434\u043e "+c+'</span>\n  <input name="personal_date" type="hidden" value="'+b+";"+d+";"+c+'">\n  <a href="#" class="close js-delete-field"></a></div>':'<div class="form__field form__field_tour">\n  <span class="date">'+
b+'</span>\n  <span class="time"> c '+d+'</span>\n  <input name="group_date" type="hidden" value="'+b+";"+d+'">\n  <a href="#" class="close js-delete-field"></a></div>')};e.prototype.deleteField=function(a){a.preventDefault();return g(a.currentTarget).parent().remove()};e.prototype.addTourService=function(a){var b,c,d;console.log(a);a.preventDefault();a=g(a.currentTarget);b=a.parent().find("textarea").val();c=a.parent().find("input").val();a.closest("#personalTour")&&(d='<div class="form__field form__field_service">\n  <span class="service">'+
b+'</span>\n  <span class="price">'+c+' <span class="rouble">o</span></span>\n  <input name="additional" type="hidden" value="'+b+";"+c+'">\n  <a href="#" class="close js-delete-field"></a>\n</div>');if(b&&c)return a.parent().after(d)};e.prototype.setAdditionalData=function(){var a,b,c,e,f;b=this.$("#personalTour").serializeArray();c=d(b).filter({name:"personal_date"}).pluck("value").value();a=d(b).filter({name:"additional"}).pluck("value").value();f=d.reduce(b,function(a,b){a[b.name]=b.value;return a},
{});f.personal_date=c;f.additional=a;b=this.$("#groupTour").serializeArray();e=d(b).filter({name:"group_date"}).pluck("value").value();a=d(b).filter({name:"additional"}).pluck("value").value();c=d.reduce(b,function(a,b){a[b.name]=b.value;return a},{});c.group_date=e;c.additional=a;b={personal:f,group:c};this.model.set({price:f.personal_price_tour||c.group_price_tour},{silent:!0});return this.model.set({summary_info:JSON.stringify(b)},{silent:!0})};e.prototype.backStep=function(a){a.preventDefault();
return this.trigger("show:step:content")};e.prototype.saveTrip=function(b){var c=this;b.preventDefault();if(this.model.get("name"))return g(".form__field_name").removeClass("error"),this.spinner=new a.buttonSpinner(this.$(".js-finish"),"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c",this.$(".js-finish")),this.spinner.start(),this.model.set({author:this.user.toJSON()}),this.model.set({blocks:this.collection.toJSON()}),this.setAdditionalData(),this.model.save(null,{success:function(){var b;
localStorage.removeItem("trip/"+c.model.cid);c.spinner.stop();a.addTripPopup.empty();a.navigate("trip/"+c.model.get("id"));a.vent.trigger("show:detail:popup",c.model);a.BoardApp.board.yapens.add(c.model,{at:1});b=a.BoardApp.board.yapensView.render();if(b.wall)return b.wall.reloadItems()&b.wall.layout()}});g(".form__field_name").addClass("error");g(".js-finish, .js-next").tooltip("show")};e.prototype.formSubmit=function(a){return a.preventDefault()};return e}(a.Views.ItemView);b.Aside=function(b){function d(){return p=
d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="AddTripAside";d.prototype.className="trip-step__aside";d.prototype.initialize=function(){this.user=a.request("get:my:profile");this.collection=this.options.collection;return this.listenTo(this.collection,"block:change",this.render)};d.prototype.templateHelpers=function(){return{items:this.collection.toJSON()}};d.prototype.events={"click .js-delete":"deleteBlock","click .js-finish-preview":"tripPreview"};d.prototype.collectionEvents=
function(){return{add:"setBlockPosition render",remove:"setBlockPosition render"}};d.prototype.deleteBlock=function(a){a.preventDefault();a=g(a.currentTarget).data("position");a=this.collection.findWhere({position:a});return this.collection.remove(a)};d.prototype.tripPreview=function(b){var c;b.preventDefault();this.model.set({author:this.user.toJSON()});this.model.set({blocks:this.collection.toJSON()});a.vent.trigger("show:detail:popup",this.model);if(this.model.isNew())return c="trip/"+this.model.cid,
b=JSON.stringify(this.model.toJSON()),localStorage.setItem(c,b),a.navigate("preview/"+c)};d.prototype.setBlockPosition=function(a,b,c){var d=this;return this.collection.each(function(a){var b;b=d.collection.indexOf(a)+1;return a.set({position:b})})};d.prototype.onShow=function(){var a=this;this.popupwin=this.$el.closest(".popupwin");return this.popupwin.scroll(function(){if(a.$el.length)return a.$el.css({"-webkit-transform":"translate3d(0, "+a.popupwin.scrollTop()+"px, 0)",transform:"translate3d(0, "+
a.popupwin.scrollTop()+"px, 0)"})})};d.prototype.onClose=function(){this.popupwin.off("scroll");this.remove();return this.stopListening()};return d}(a.Views.ItemView);b.Content=function(a){function b(){return l=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="AddTripContent";b.prototype.className="trip-step__container";b.prototype.regions={actionRegion:"#trip-action-region",blocksRegion:"#trip-blocks-region"};b.prototype.events={"blur .form__field_name input":"setTripName",
"blur .form__field_description textarea":"setTripDescription"};b.prototype.setTripName=function(a){this.model.set({name:g(".form__field_name input").val()});return g(".js-finish, .js-next").tooltip("destroy")};b.prototype.setTripDescription=function(a){return this.model.set({description:g(".form__field_description textarea").val()})};b.prototype.onClose=function(){return this.stopListening()};return b}(a.Views.Layout);b.Action=function(b){function d(){return q=d.__super__.constructor.apply(this,arguments)}
c(d,b);d.prototype.template="AddTripAction";d.prototype.className="popupwin__content popupwin__content_actions clearfix";d.prototype.events={"click .js-add-block":"addBlock","click .js-finish":"saveTrip","click .js-next":"showCommerce"};d.prototype.initialize=function(){this.user=a.request("get:my:profile");return this.collection=this.options.collection};d.prototype.addBlock=function(b){b.preventDefault();b=new a.Entities.TripBlock;return this.options.collection.add(b)};d.prototype.showCommerce=function(a){a.preventDefault();
if(this.model.get("name"))return g(".form__field_name").removeClass("error"),this.trigger("show:step:commerce");g(".form__field_name").addClass("error");return g(".js-finish, .js-next").tooltip("show")};d.prototype.saveTrip=function(b){var c=this;b.preventDefault();if(this.model.get("name"))return g(".form__field_name").removeClass("error"),this.spinner=new a.buttonSpinner(this.$(".js-finish"),"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c",this.$(".js-finish")),this.spinner.start(),this.model.set({author:this.user.toJSON()}),
this.model.set({blocks:this.collection.toJSON()}),this.model.save(null,{success:function(){var b;localStorage.removeItem("trip/"+c.model.cid);c.spinner.stop();a.addTripPopup.empty();a.navigate("trip/"+c.model.get("id"));a.vent.trigger("show:detail:popup",c.model);a.BoardApp.board.yapens.add(c.model,{at:0});b=a.BoardApp.board.yapensView.render();if(b.wall)return b.wall.reloadItems()&b.wall.layout()}});g(".form__field_name").addClass("error");g(".js-finish, .js-next").tooltip("show")};return d}(a.Views.ItemView);
b.BlockItem=function(e){function g(){return m=g.__super__.constructor.apply(this,arguments)}c(g,e);g.prototype.className="trip-step__block popupwin__content mb10 clearfix";g.prototype.template="BlockItem";g.prototype.initialize=function(){return this.addRegions({blockPointsRegion:"#blockitem-points-region-"+this.model.cid,blockImgsRegion:"#blockitem-imgs-region-"+this.model.cid})};g.prototype.modelEvents={"change:position":"changePosition"};g.prototype.events={"click .js-add-place":"addPlace","click .span-title":"editableBlockTitle",
"blur .input-title":"saveBlockTitle","blur .tinyeditor":"saveBlockTxt","click .js-map-close":"mapClose","click .js-map-open":"mapOpen","select2-selecting .field__input-map input":"setAddress","select2-clearing .field__input-map input":"mapClear"};g.prototype.templateHelpers=function(){return{cid:this.model.cid}};g.prototype.format=function(a){return"<span data-id='"+a.id+"' class='type type_"+a.type+"'\ndata-pos='"+a.pos+"'>\n"+a.name+"\n<i>"+a.address+"</i>\n</span>"};g.prototype.searchQuery=function(b){var c;
c={};return a.ymaps.geocode(b.term,{json:!0,kind:"locality",results:10}).then(function(a){console.log("geocode response",a);a=d.map(a.GeoObjectCollection.featureMember,function(a){return{id:-1,name:a.GeoObject.name,type:"geocode",address:a.GeoObject.description||"",pos:a.GeoObject.Point.pos}});c.results=a;return b.callback(c)})};g.prototype.onShow=function(){var a,c;this.$(".field__input-map input").select2({allowClear:!0,quietMillis:750,containerCssClass:"select2-container_trip",dropdownCssClass:"select2-drop_trip",
query:this.searchQuery,formatResult:this.format,formatSelection:this.format,minimumInputLength:3,formatInputTooShort:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},formatNoMatches:function(){return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},escapeMarkup:function(a){return a}});c=new b.Points({model:this.model});a=new b.Imgs({model:this.model});this.blockPointsRegion.show(c);
this.blockImgsRegion.show(a);return this.initMap()};g.prototype.changePosition=function(){return this.$(".number").text(this.model.get("position"))};g.prototype.addPlace=function(b){b.preventDefault();return a.vent.trigger("show:add:placetotrip:popup",this.model)};g.prototype.editableBlockTitle=function(a){a.preventDefault();this.$(".span-title").addClass("hide");this.$(".form__field_description").removeClass("hide");return this.$(".input-title").focus()};g.prototype.saveBlockTitle=function(a){a.preventDefault();
a=this.$(".input-title").val();a||(a="\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f",this.$(".input-title").val(a));this.$(".span-title").text(a).removeClass("hide");this.$(".span-title").removeClass("hide");this.$(".form__field_description").addClass("hide");this.model.set({name:a});return this.model.collection.trigger("block:change")};g.prototype.saveBlockTxt=function(a){a.preventDefault();a=this.$(".tinyeditor").val();return this.model.set({txt:a})};g.prototype.setAddress=
function(a){var b,c;c=a.object;a=c.name+" "+c.address;b=c.pos.split(" ");c=b[1];b=b[0];this.model.setCoordinates([c,b]);this.model.set({address:a,longitude:b,latitude:c},{silent:!0});this.model.setCoordinates([this.model.get("latitude"),this.model.get("longitude")]);this.map.setCenter([this.model.get("latitude"),this.model.get("longitude")],12);return this.map.geoObjects.add(this.model.placemark)};g.prototype.initMap=function(){var b=this;console.log("initMap");if(void 0!==a.ymaps)return a.ymaps.ready(function(){var c;
if(!b.map&&(b.map=new a.ymaps.Map("map-block-"+b.model.cid,{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"}),b.map.controls.add("zoomControl"),c=b.model.get("address")))b.$(".field__input-map input").select2("data",{name:"",address:c}),b.model.setCoordinates([b.model.get("latitude"),b.model.get("longitude")]),b.map.setCenter([b.model.get("latitude"),b.model.get("longitude")],12),b.map.geoObjects.add(b.model.placemark);b.map.events.remove("click");
return b.map.events.add("click",function(d){d=d.get("coordPosition");b.map.geoObjects.remove(b.model.placemark);b.model.setCoordinates(d);b.map.geoObjects.add(b.model.placemark);a.ymaps.geocode(d).then(function(a){c=a.geoObjects.get(0).properties.get("metaDataProperty.GeocoderMetaData.text");b.$(".field__input-map input").select2("data",{name:"",address:c});return b.model.set({address:c},{silent:!0})});return b.model.set({longitude:d[1],latitude:d[0]},{silent:!0})})})};g.prototype.mapClear=function(a){this.map.geoObjects.remove(this.model.placemark);
return this.model.set({longitude:null,latitude:null,address:""},{silent:!0})};g.prototype.mapClose=function(a){a.preventDefault();return this.$(".map").removeClass("open")};g.prototype.mapOpen=function(a){a.preventDefault();return this.$(".map").addClass("open")};return g}(a.Views.Layout);b.Blocks=function(a){function d(){return s=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.childView=b.BlockItem;d.prototype.className="trip-blocks";d.prototype.collectionEvents=function(){return{add:"setBlockPosition",
remove:"setBlockPosition"}};d.prototype.setBlockPosition=function(a,b,c){var d=this;return this.collection.each(function(a){var b;b=d.collection.indexOf(a)+1;return a.set({position:b})})};d.prototype.onClose=function(){this.remove();return this.stopListening()};return d}(a.Views.CollectionView);b.Points=function(b){function e(){return r=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="BlockItemPoints";e.prototype.modelEvents=function(){return{"change:points":"render"}};e.prototype.events=
{"click .link":"showPopupPoint","click .js-delete":"deletePoint"};e.prototype.showPopupPoint=function(b){b.preventDefault();console.log(b);b=g(b.target).attr("href");return a.navigate(b,!0)};e.prototype.deletePoint=function(a){var b;a.preventDefault();a.stopPropagation();b=g(a.target).data();a=this.model.get("points");b=d.findIndex(a,b);a.splice(b,1);this.model.set({points:a});return this.model.trigger("change:points")};return e}(a.Views.ItemView);return b.Imgs=function(b){function e(){return u=e.__super__.constructor.apply(this,
arguments)}c(e,b);e.prototype.template="BlockItemImgs";e.prototype.initialize=function(){return this.listenTo(this.model,"success:delete:photo",this.successDeletePhoto)};e.prototype.templateHelpers=function(){return{cid:this.model.cid}};e.prototype.onRender=function(){var b,c,e;c=this.model.get("imgs");b=this.model.get("id");e=this;b=b?"/photos/block/"+b+"/add":"/photos/add";return this.$("#trip-dropzone-"+this.model.cid).dropzone({init:function(){var a=this;return d.each(c,function(b){var c;c={name:"Image"+
d.uniqueId(),size:12345,id:b.id};a.emit("addedfile",c);return a.emit("thumbnail",c,b.thumbnail104x104)})},dictDefaultMessage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",addRemoveLinks:!0,paramName:"img",url:b,maxFilesize:20,headers:{"X-CSRFToken":g.cookie("csrftoken")},error:function(b,c,d){if(404===d.status)return e=new a.HeaderApp.Show.PopupInfo({message:'\u0412\u0430\u0448\u0430 \u0441\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430.<br>\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, <a href="/">\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</a>'}),
a.infoPopupRegion.show(e)},success:function(a,b){var d;g(a.previewElement).removeClass("dz-processing").addClass("dz-success");d=b[0];c=e.model.get("imgs");c.push(d);a.id=d.id;return e.model.set("imgs",c)},removedfile:function(b){"uploading"===b.status&&this.cancelUpload(b);a.request("delete:photo",e.model,b);return this._updateMaxFilesReachedClass()}})};e.prototype.successDeletePhoto=function(a,b){console.log("photo deleted");return b.id?a.status?alert(a.txt):this.$(b.previewElement).remove():this.$(b.previewElement).remove()};
return e}(a.Views.ItemView)})}).call(this);
(function(){this.Yapp.module("BoardApp",function(b,c,f,a,e,h){var g,d;d={"_=_":"index","":"index",point:"pointList","point/:id":"point",event:"eventList","event/:id":"event",route:"routeList","route/:id":"route",tour:"tourList",trip:"tripList","trip/:id":"trip","preview/:type/:id":"preview","city/:city_code/":"city"};g={index:function(){c.vent.trigger("show:destination:region");c.vent.trigger("hide:dashboard:region");return c.ymaps.ready(function(){return c.updateSettings({user:null,city:c.ymaps.geolocation.city,
models:c.settings.models||"trips",coord_left:null,coord_right:null})})},getModel:function(a,d){var e,f;e=new a({unid:d});b.board||(b.board=new b.List.Controller(c.settings));f=b.board.yapens.findWhere({id:parseInt(d,10),type_of_item:e.get("type_of_item")});f||(f=e,b.board.yapens.add(f));return f},point:function(a){a=this.getModel(c.Entities.Point,a);return c.vent.trigger("show:detail:popup",a)},event:function(a){a=this.getModel(c.Entities.Event,a);return c.vent.trigger("show:detail:popup",a)},route:function(a){a=
this.getModel(c.Entities.Route,a);return c.vent.trigger("show:detail:popup",a)},trip:function(a){a=this.getModel(c.Entities.Trip,a);return c.vent.trigger("show:detail:popup",a)},preview:function(a,b){var d,e;if(d=localStorage.getItem(""+a+"/"+b))return d=JSON.parse(d),"point"===a&&(e=new c.Entities.Point(d)),"event"===a&&(e=new c.Entities.Event(d)),"route"===a&&(e=new c.Entities.Route(d)),"trip"===a&&(e=new c.Entities.Trip(d)),c.vent.trigger("show:detail:popup",e)},city:function(a){return c.updateSettings({city:a})},
pointList:function(a){return c.updateSettings({models:"points"})},eventList:function(a){return c.updateSettings({models:"events"})},routeList:function(a){return c.updateSettings({models:"routes"})},tourList:function(a){return c.updateSettings({models:"tours"})},tripList:function(a){return c.updateSettings({models:"trips"})}};c.vent.on("show:detail:popup",function(a){a instanceof c.Entities.Point&&new b.Point.Controller({model:a});a instanceof c.Entities.Event&&new b.Event.Controller({model:a});a instanceof
c.Entities.Route&&new b.Route.Controller({model:a});if(a instanceof c.Entities.Trip)return new b.Trip.Controller({model:a})});c.vent.on("change:settings",function(a){console.log("settings changed",a);return b.board=new b.List.Controller(c.settings)});c.vent.on("filter:all:yapens",function(a){null==a&&(a={});return c.updateSettings(a)});return c.addInitializer(function(){return c.router.processAppRoutes(g,d)})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Event",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize BoardApp.Event.Controller");this.model=a.request("get:detail:event",
this.options.model);this.layout=new b.Layout({model:this.model});this.listenTo(this.layout,"show",function(){c.showPhotos();c.showDescription();c.showHeader();c.showMap();c.showComments();return c.showLikes()});return a.eventPopup.show(this.layout,{loading:!0})};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showHeader=function(){this.headerView=new b.Header({model:this.model});return this.show(this.headerView,{region:this.layout.headerRegion})};e.prototype.showPhotos=function(){this.photoView=
new b.Photo({model:this.model});return this.show(this.photoView,{region:this.layout.photoRegion,loading:!1})};e.prototype.showDescription=function(){this.descView=new b.Description({model:this.model});return this.show(this.descView,{region:this.layout.descRegion,loading:!1})};e.prototype.showMap=function(){this.mapView=new b.Map({model:this.model});return this.show(this.mapView,{region:this.layout.mapRegion})};e.prototype.showComments=function(){this.commentsView=new b.Comments({model:this.model});
return this.show(this.commentsView,{region:this.layout.commentsRegion,loading:!1})};e.prototype.showLikes=function(){this.likesView=new b.Likes({model:this.model});return this.show(this.likesView,{region:this.layout.likesRegion,loading:!1})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Event",function(b,a,e,h,g,d){var k,n,p,l,q,m,s,r,u;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="EventLayout";b.prototype.regions={headerRegion:"#event-header-region",photoRegion:"#event-photo-region",descRegion:"#event-description-region",
mapRegion:"#event-map-region",commentsRegion:"#event-comments-region",likesRegion:"#event-likes-region",tagsRegion:"#event-tags-region"};b.prototype.className="popupwin__scrollbox";return b}(a.Views.Layout);b.Header=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="EventHeader";d.prototype.modelEvents={"change:isliked":"render","change:likes_count":"render"};d.prototype.events={"click .btn-like":"eventLike","click .btn-place":function(){return this.trigger("add:path:popup",
this.model)},"click .btn-upload":"upload","click .js-map-close":"mapClose"};d.prototype.initialize=function(){return this.listenTo(this.model,"event:like:response",this.eventLikeResponse)};d.prototype.eventLike=function(b){b.preventDefault();return a.request("like:event",this.model)};d.prototype.eventLikeResponse=function(a){var b=this;if(1===a.status)return this.$(".btn-like").tooltip("show"),setTimeout(function(){return b.$(".btn-like").tooltip("destroy")},1E3)};d.prototype.upload=function(a){a.preventDefault();
return g(a.currentTarget).toggleClass("active")};return d}(a.Views.ItemView);b.Description=function(b){function d(){return p=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="EventDescription";d.prototype.className="description";d.prototype.modelEvents={change:"render"};d.prototype.events={"click .js-popupwin-place":"showPointPopup"};d.prototype.showPointPopup=function(b){b.preventDefault();b=g(b.currentTarget).attr("href");return a.navigate(b,!0)};return d}(a.Views.ItemView);
b.Photo=function(d){function e(){return l=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.template="EventPhoto";e.prototype.events={"click .btn-photo-add":"showPhotoPopup"};e.prototype.modelEvents={"change:imgs":"addedImage"};e.prototype.initialize=function(){return this.bxPagerInit=function(){return this.$(".bx-pager").each(function(){var a,b,c;a=g(this);c=a.find(".bx-pager__item:first-child").outerWidth(!0);b=a.find(".bx-pager__item").length;a.find(".bx-pager__scrollbox").width(c*
b);return g(this).find(".bx-pager__viewport").scrollLeft(0)})}};e.prototype.showPhotoPopup=function(c){c.preventDefault();c=new b.AddPhoto({model:this.model});return a.photoPopupRegion.show(c)};e.prototype.addedImage=function(){this.render();return this.onShow()};e.prototype.onShow=function(){var a=this;if(this.model.get("imgs").length)return this.bxPagerInit(),this.$(".bxslider-place").bxSlider({pagerCustom:"#bx-pager",onSliderLoad:function(){return a.$("#bx-pager .bx-pager__viewport").scrollLeft(-100)},
onSlideNext:function(b,c,d){b=a.$("#bx-pager .bx-pager__scrollbox .active").position().left+a.$("#bx-pager .bx-pager__item").outerWidth(!0);a.$("#bx-pager .bx-pager__viewport").scrollLeft(b);if(a.$("#bx-pager .bx-pager__item:first-child").index()===d)return a.$("#bx-pager .bx-pager__viewport").scrollLeft(0)},onSlidePrev:function(b,c,d){b=a.$("#bx-pager .bx-pager__scrollbox .active").position().left-a.$("#bx-pager .bx-pager__item").outerWidth(!0);a.$("#bx-pager .bx-pager__viewport").scrollLeft(b);
if(a.$("#bx-pager .bx-pager__item:last-child").index()===d)return a.$("#bx-pager .bx-pager__viewport").scrollLeft(g("#bx-pager .bx-pager__viewport").width())}})};return e}(a.Views.ItemView);b.Map=function(b){function e(){return q=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="EventMap";e.prototype.className="map map_popupwin";e.prototype.events={"click .js-map-open":"mapOpen","click .js-map-close":"mapClose"};e.prototype.onShow=function(){var b=this;if(void 0!==a.ymaps)return a.ymaps.ready(function(){var c;
b.geoMap=new a.ymaps.Map("map-event",{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"});c=b.model.get("points");return d.each(c,function(c){var d;d=new a.ymaps.Placemark([c.latitude,c.longitude],{},{iconImageClipRect:[[80,0],[112,36]],iconImageHref:"/static/images/sprite-baloon.png",iconImageSize:[32,36]});b.geoMap.geoObjects.add(d);b.geoMap.setCenter([c.latitude,c.longitude],12);return b.geoMap.controls.add("zoomControl")})})};e.prototype.mapOpen=
function(a){console.log(a);a.preventDefault();this.$el.addClass("open");if(this.geoMap)return this.geoMap.setZoom(12)};e.prototype.mapClose=function(a){console.log(a);a.preventDefault();return this.$el.removeClass("open")};return e}(a.Views.ItemView);b.Comments=function(b){function d(){return m=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="EventComments";d.prototype.className="comments";d.prototype.tagName="ul";d.prototype.events={"submit .comment-form":"addComment","click .login__link":"showLoginPopup"};
d.prototype.modelEvents={"change:reviews":"render"};d.prototype.initialize=function(){this.listenTo(this.model,"event:comment:response",this.eventCommentResponse);return this.user=a.request("get:my:profile")};d.prototype.eventCommentResponse=function(a){var b=this;return 0===a.status?(this.model.fetch({success:function(){return b.$(".comment-form").parent().removeClass("loading")}}),this.$("[name=review_text]").val(""),this.$("[name=review_text]").removeClass("error")):this.$("[name=review_text]").addClass("error")};
d.prototype.addComment=function(b){b.preventDefault();if(this.user.get("authorized")){if(b=this.$("[name=review_text]").val())return a.request("comment:event",this.model,{review:b}),this.$(".comment-form").parent().addClass("loading");this.$("[name=review_text]").addClass("error");return this.$("[name=review_text]").focus()}a.vent.trigger("show:login:popup")};d.prototype.showLoginPopup=function(b){b.preventDefault();return a.vent.trigger("show:login:popup")};return d}(a.Views.ItemView);b.Tags=function(a){function b(){return s=
b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="EventTags";b.prototype.modelEvents={"change:tags":"render"};return b}(a.Views.ItemView);b.Likes=function(a){function b(){return r=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="EventLikes";b.prototype.modelEvents={"change:likeusers":"render"};return b}(a.Views.ItemView);return b.AddPhoto=function(b){function d(){return u=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="AddPhotoPopup";
d.prototype.className="popupwin__scrollbox";d.prototype.ui={finishBtn:".js-finish"};d.prototype.events={"click .js-finish":"addImage"};d.prototype.initialize=function(){this.listenTo(this.model,"success:delete:photo",this.successDeletePhoto);return this.saveUrl=!0};d.prototype.addImage=function(b){b.preventDefault();this.model.trigger("change:imgs");return a.photoPopupRegion.empty()};d.prototype.onShow=function(){var b,c,d=this;b=this.model.get("id");c=this;return this.$("#photos-dropzone").dropzone({dictDefaultMessage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",
addRemoveLinks:!0,url:"/photos/event/"+b+"/add",paramName:"img",headers:{"X-CSRFToken":g.cookie("csrftoken")},error:function(b,d,e){if(404===e.status)return c=new a.HeaderApp.Show.PopupInfo({message:'\u0412\u0430\u0448\u0430 \u0441\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430.<br>\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, <a href="/">\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</a>'}),a.infoPopupRegion.show(c)},
success:function(a,b){var c,e;g(a.previewElement).removeClass("dz-processing").addClass("dz-success");c=b[0];e=d.model.get("imgs");e.push(c);a.id=c.id;d.model.set("imgs",e);return d.ui.finishBtn.prop("disabled",!1)},removedfile:function(b){"uploading"===b.status&&this.cancelUpload(b);a.request("delete:photo",c.model,b);return this._updateMaxFilesReachedClass()}})};d.prototype.successDeletePhoto=function(a,b){console.log("photo deleted");return b.id?a.status?alert(a.txt):this.$(b.previewElement).remove():
this.$(b.previewElement).remove()};return d}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.List",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){console.log("initialize BoardApp.List.Controller");this.yapens=a.request("get:all:yapens",this.options);
this.yapensView=this.yapensView||new b.Yapens({collection:this.yapens});return this.show(this.yapensView,{region:a.boardRegion,loading:!0})};e.prototype.onClose=function(){this.stopListening();return this.yapensView.close()};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.List",function(b,a,e,h,g,d){var k,n;b.Yapen=function(b){function d(){return k=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.initialize=function(b){this.user=a.request("get:my:profile");this.model.set("editable",b.editable);this.listenTo(this.model,"point:like:response",
this.likeResponse);return this.listenTo(this.model,"event:like:response",this.likeResponse)};d.prototype.getTemplate=function(){return"point"===this.model.get("type_of_item")?"BoardPoint":"set"===this.model.get("type_of_item")?"BoardSet":"route"===this.model.get("type_of_item")?"BoardRoute":"trip"===this.model.get("type_of_item")?"BoardTrip":"event"===this.model.get("type_of_item")?"BoardEvent":"EmptyCard"};d.prototype.className=function(){return this.model.get("empty")?"box empty":this.model.get("editable")?
"box box_dashboard":"box"};d.prototype.events=function(){return Modernizr.touch?{"touchstart.touch .js-popupwin-add-trip":"showAddTripPopup","touchstart.touch .js-popupwin-place":"showDetailPopup","touchstart.touch .js-popupwin-event":"showDetailPopup","touchstart.touch .js-popupwin-route":"showDetailPopup","touchstart.touch .js-add-to-trip-popupwin":"addToTrip","touchstart.touch .sprite-like":"like","touchstart.touch .sprite-place":"mark","touchstart.touch .btn_edit":"showEditPopup","touchstart.touch .btn_remove":"showRemovePopup"}:
{"click .js-popupwin-add-trip":"showAddTripPopup","click .js-popupwin-place":"showDetailPopup","click .js-popupwin-event":"showDetailPopup","click .js-popupwin-route":"showDetailPopup","click .js-popupwin-trip":"showDetailPopup","click .js-add-to-trip-popupwin":"addToTrip","click .sprite-like":"like","click .sprite-place":"mark","click .btn_edit":"showEditPopup","click .btn_remove":"showRemovePopup"}};d.prototype.modelEvents={"change:likes_count":"renderLikes","change:reviews":"renderReviews","change:imgs":"render"};
d.prototype.renderLikes=function(){return this.$(".info_like").text(this.model.get("likes_count"))};d.prototype.renderReviews=function(){return this.$(".info_comment").text(this.model.get("reviews").length)};d.prototype.onRender=function(){return console.log("onRender model")};d.prototype.showAddTripPopup=function(b){b.preventDefault();return this.user.get("authorized")?(b=g(b.currentTarget),b=b.attr("href"),a.navigate(b,!0)):a.vent.trigger("show:login:popup")};d.prototype.showDetailPopup=function(b){console.log("show popup");
b.preventDefault();b=g(b.currentTarget).attr("href");return a.navigate(b,!0)};d.prototype.addToTrip=function(a){a.preventDefault();return this.model.collection.trigger("add:to:trip",this.model)};d.prototype.showEditPopup=function(b){var c;b.preventDefault();c=g(b.currentTarget);b=c.attr("href");c=a.buttonSpinner(c,"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e",c);c.start();a.vent.trigger("show:edit:popup",this.model);this.model.trigger("spinner:start",c);return a.navigate(b,!0)};d.prototype.showRemovePopup=
function(a){return a.preventDefault()};d.prototype.like=function(b){b.preventDefault();switch(this.model.get("type_of_item")){case "point":return a.request("like:point",this.model);case "event":return a.request("like:event",this.model);case "route":return a.request("like:route",this.model);case "trip":return a.request("like:trip",this.model)}};d.prototype.likeResponse=function(b){if(1===b.status)return a.vent.trigger("show:login:popup")};d.prototype.mark=function(a){a.preventDefault();return console.log(a)};
return d}(a.Views.ItemView);return b.Yapens=function(d){function h(){return n=h.__super__.constructor.apply(this,arguments)}c(h,d);h.prototype.childView=b.Yapen;h.prototype.className="content";h.prototype.id="grid";h.prototype.getEmptyView=function(){return a.HeaderApp.Show.PopupAdd};h.prototype.childViewOptions=function(){return{editable:!!a.settings.user}};h.prototype.onAddChild=function(a,b){if(this.wall)return this.wall.appended(a.$el),this.wall.reloadItems()};h.prototype.onShow=function(){var b=
this;return a.execute("when:fetched",this.collection,function(){console.log("collection fetched",b.collection);b.collection.length?(b.wall=b.wall||new Masonry(b.el,{itemSelector:".box"}),b.wall.reloadItems(),b.wall.layout()):b.wall&&b.wall.destroy();return b.infiniScroll=new e.InfiniScroll(b.collection,{scrollOffset:350,includePage:!0,extraParams:a.settings,onFetch:function(){return g(".loader").removeClass("hide")},success:function(){return g(".loader").addClass("hide")}})})};h.prototype.onClose=
function(){console.log("onClose yapens");this.infiniScroll.destroy();this.wall&&this.wall.destroy();return this.remove()};return h}(a.Views.CollectionView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Point",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize BoardApp.Point.Controller");this.model=a.request("get:detail:point",
this.options.model);this.layout=new b.Layout({model:this.model});this.listenTo(this.layout,"show",function(){c.showHeader();c.showPhotos();c.showDescription();c.showMap();c.showComments();return c.showLikes()});return a.pointPopup.show(this.layout,{loading:!0})};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showHeader=function(){this.headerView=new b.Header({model:this.model});return this.show(this.headerView,{region:this.layout.headerRegion})};e.prototype.showPhotos=function(){this.photoView=
new b.Photo({model:this.model});return this.show(this.photoView,{region:this.layout.photoRegion,loading:!0})};e.prototype.showDescription=function(){this.descView=new b.Description({model:this.model});return this.show(this.descView,{region:this.layout.descriptionRegion})};e.prototype.showMap=function(){this.mapView=new b.Map({model:this.model});return this.show(this.mapView,{region:this.layout.mapRegion})};e.prototype.showComments=function(){this.commentsView=new b.Comments({model:this.model});return this.show(this.commentsView,
{region:this.layout.commentsRegion,loading:!1})};e.prototype.showLikes=function(){this.likesView=new b.Likes({model:this.model});return this.show(this.likesView,{region:this.layout.likesRegion,loading:!1})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Point",function(b,a,e,h,g,d){var k,n,p,l,q,m,s,r,u,y;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="PointLayout";b.prototype.regions={headerRegion:"#point-header-region",photoRegion:"#point-photo-region",
descriptionRegion:"#point-description-region",mapRegion:"#point-map-region",commentsRegion:"#point-comments-region",likesRegion:"#point-likes-region",tagsRegion:"#point-tags-region"};b.prototype.className="popupwin__scrollbox";return b}(a.Views.Layout);b.Header=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PointHeader";d.prototype.modelEvents={"change:isliked":"render","change:likes_count":"render"};d.prototype.events={"click .btn-like":"pointLike",
"click .btn-place":function(){return this.trigger("add:path:popup",this.model)},"click .btn-upload":"upload"};d.prototype.initialize=function(){return this.listenTo(this.model,"point:like:response",this.pointLikeResponse)};d.prototype.pointLike=function(b){b.preventDefault();return a.request("like:point",this.model)};d.prototype.pointLikeResponse=function(b){var c=this;if(1===b.status)return a.vent.trigger("show:login:popup"),this.$(".btn-like").tooltip("show"),setTimeout(function(){return c.$(".btn-like").tooltip("destroy")},
1E3)};d.prototype.upload=function(a){a.preventDefault();return g(a.currentTarget).toggleClass("active")};return d}(a.Views.ItemView);b.Photo=function(d){function e(){return p=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.template="PointPhoto";e.prototype.className="slider";e.prototype.events={"click .btn-photo-add":"showPhotoPopup","click .btn-fullsize":"fullsize"};e.prototype.modelEvents={"change:imgs":"addedImage"};e.prototype.initialize=function(){return this.bxPagerInit=function(){return this.$(".bx-pager").each(function(){var a,
b,c;a=g(this);c=a.find(".bx-pager__item:first-child").outerWidth(!0);b=a.find(".bx-pager__item").length;a.find(".bx-pager__scrollbox").width(c*b);return g(this).find(".bx-pager__viewport").scrollLeft(0)})}};e.prototype.showPhotoPopup=function(c){c.preventDefault();c=new b.AddPhoto({model:this.model});return a.photoPopupRegion.show(c)};e.prototype.fullsize=function(c){c.preventDefault();c=new b.FullscreenPhoto({model:this.model});return a.photoviewRegion.show(c)};e.prototype.addedImage=function(){this.render();
return this.onShow()};e.prototype.onShow=function(){var a=this;if(this.model.get("imgs").length)return this.bxPagerInit(),this.$(".bxslider-place").bxSlider({pagerCustom:"#bx-pager",onSliderLoad:function(){return a.$("#bx-pager .bx-pager__viewport").scrollLeft(-100)},onSlideNext:function(b,c,d){b=a.$("#bx-pager .bx-pager__scrollbox .active").position().left+a.$("#bx-pager .bx-pager__item").outerWidth(!0);a.$("#bx-pager .bx-pager__viewport").scrollLeft(b);if(a.$("#bx-pager .bx-pager__item:first-child").index()===
d)return a.$("#bx-pager .bx-pager__viewport").scrollLeft(0)},onSlidePrev:function(b,c,d){b=a.$("#bx-pager .bx-pager__scrollbox .active").position().left-a.$("#bx-pager .bx-pager__item").outerWidth(!0);a.$("#bx-pager .bx-pager__viewport").scrollLeft(b);if(a.$("#bx-pager .bx-pager__item:last-child").index()===d)return a.$("#bx-pager .bx-pager__viewport").scrollLeft(g("#bx-pager .bx-pager__viewport").width())}})};return e}(a.Views.ItemView);b.Description=function(a){function b(){return l=b.__super__.constructor.apply(this,
arguments)}c(b,a);b.prototype.template="PointDescription";b.prototype.modelEvents={"change:name":"render","change:address":"render","change:description":"render","change:additional":"render"};b.prototype.events={"click .js-open":"toggleCommercial"};b.prototype.toggleCommercial=function(a){a.preventDefault();this.$(".js-open").toggleClass("active");return this.$(".commercial-info__body ").slideToggle()};b.prototype.onBeforeRender=function(){var a;if((a=this.model.get("additional"))&&d.isString(a))try{return this.model.set("additional",
JSON.parse(a),{silent:!0})}catch(b){return console.error(b)}};return b}(a.Views.ItemView);b.Map=function(b){function d(){return q=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PointMap";d.prototype.className="map map_popupwin";d.prototype.events={"click .js-map-close":"mapClose","click .js-map-open":"mapOpen"};d.prototype.modelEvents=function(){return{"change:latitude":"setPlacemark"}};d.prototype.onShow=function(){return this.setPlacemark()};d.prototype.setPlacemark=
function(){var b=this;if(void 0!==a.ymaps)return a.ymaps.ready(function(){b.geoMap=b.geoMap||new a.ymaps.Map("map-point",{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12,controls:["zoomControl"]},{autoFitToViewport:"always"});b.model.setCoordinates([b.model.get("latitude"),b.model.get("longitude")]);b.geoMap.geoObjects.add(b.model.placemark);b.geoMap.setCenter([b.model.get("latitude"),b.model.get("longitude")],12);return b.geoMap.controls.add("zoomControl")})};d.prototype.mapClose=
function(a){a.preventDefault();return this.$el.removeClass("open")};d.prototype.mapOpen=function(a){a.preventDefault();this.$el.addClass("open");if(this.geoMap)return this.geoMap.setZoom(12)};return d}(a.Views.ItemView);b.Comments=function(b){function d(){return m=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PointComments";d.prototype.className="comments";d.prototype.tagName="ul";d.prototype.events={"submit .comment-form":"addComment","click .login__link":"showLoginPopup"};
d.prototype.modelEvents={"change:reviews":"render"};d.prototype.initialize=function(){this.listenTo(this.model,"point:comment:response",this.pointCommentResponse);return this.user=a.request("get:my:profile")};d.prototype.pointCommentResponse=function(a){var b=this;return 0===a.status?(this.model.fetch({success:function(){return b.$(".comment-form").parent().removeClass("loading")}}),this.$("[name=review_text]").val(""),this.$("[name=review_text]").removeClass("error")):this.$("[name=review_text]").addClass("error")};
d.prototype.addComment=function(b){b.preventDefault();if(this.user.get("authorized")){if(b=this.$("[name=review_text]").val())return a.request("comment:point",this.model,{review:b}),this.$(".comment-form").parent().addClass("loading");this.$("[name=review_text]").addClass("error");return this.$("[name=review_text]").focus()}a.vent.trigger("show:login:popup")};d.prototype.showLoginPopup=function(b){b.preventDefault();return a.vent.trigger("show:login:popup")};return d}(a.Views.ItemView);b.Tags=function(a){function b(){return s=
b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="PointTags";b.prototype.modelEvents={"change:tags":"render"};return b}(a.Views.ItemView);b.Likes=function(a){function b(){return r=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="PointLikes";b.prototype.modelEvents={"change:likeusers":"render"};return b}(a.Views.ItemView);b.AddPhoto=function(b){function d(){return u=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="AddPhotoPopup";
d.prototype.className="popupwin__scrollbox";d.prototype.ui={finishBtn:".js-finish"};d.prototype.events={"click .js-finish":"addImage"};d.prototype.initialize=function(){this.listenTo(this.model,"success:delete:photo",this.successDeletePhoto);return this.saveUrl=!0};d.prototype.addImage=function(a){a.preventDefault();this.model.trigger("change:imgs");return this.trigger("modal:close")};d.prototype.onShow=function(){var b,c,d=this;b=this.model.get("id");c=this;return this.$("#photos-dropzone").dropzone({dictDefaultMessage:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",
addRemoveLinks:!0,url:"/photos/point/"+b+"/add",paramName:"img",headers:{"X-CSRFToken":g.cookie("csrftoken")},error:function(b,d,e){if(404===e.status)return c=new a.HeaderApp.Show.PopupInfo({message:'\u0412\u0430\u0448\u0430 \u0441\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430.<br>\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, <a href="/">\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443</a>'}),a.infoPopupRegion.show(c)},
success:function(a,b){var c,e;g(a.previewElement).removeClass("dz-processing").addClass("dz-success");c=b[0];e=d.model.get("imgs");e.push(c);a.id=c.id;d.model.set("imgs",e);return d.ui.finishBtn.prop("disabled",!1)},removedfile:function(b){"uploading"===b.status&&this.cancelUpload(b);a.request("delete:photo",c.model,b);return this._updateMaxFilesReachedClass()}})};d.prototype.successDeletePhoto=function(a,b){console.log("photo deleted");return b.id?a.status?alert(a.txt):this.$(b.previewElement).remove():
this.$(b.previewElement).remove()};return d}(a.Views.ItemView);return b.FullscreenPhoto=function(a){function b(){return y=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="Fullscreen";b.prototype.className="fixed";b.prototype.id="pv_fullscreen";b.prototype.events={"click #pv_fs_close":"closeFullscreen","click #pv_fs_left_wrap":"prev","click #pv_fs_right_wrap":"next","click #pv_fs_img_wrap img":"next","click .preview-item":"photo","mouseleave #pv_fs_bottomleft":"hidePreview",
"mouseenter #pv_fs_bottomleft":"showPreview"};b.prototype.initialize=function(){this.imgs=this.model.get("imgs");this.current=(this.current=d.findWhere(this.imgs,{id:this.options.imgId}))||d.first(this.imgs);this.currentIndex=d.findIndex(this.imgs,this.current);return this.hide=!0};b.prototype.templateHelpers=function(){return{current:this.current,index:this.currentIndex+1,hide:this.hide}};b.prototype.closeFullscreen=function(a){a.preventDefault();return this.destroy()};b.prototype.next=function(a){a.preventDefault();
this.currentIndex=this.currentIndex===this.imgs.length-1?0:this.currentIndex+1;this.current=this.imgs[this.currentIndex];return this.render()};b.prototype.prev=function(a){a.preventDefault();this.currentIndex=0===this.currentIndex?this.imgs.length-1:this.currentIndex-1;this.current=this.imgs[this.currentIndex];return this.render()};b.prototype.photo=function(a){a.preventDefault();this.currentIndex=g(a.currentTarget).data("index");this.current=this.imgs[this.currentIndex];return this.render()};b.prototype.hidePreview=
function(a){a.preventDefault();this.$("#pv_fs_bottomleft").css("opacity",0);return this.hide=!0};b.prototype.showPreview=function(a){a.preventDefault();console.log(a);this.$("#pv_fs_bottomleft").css("opacity",1);return this.hide=!1};return b}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Route",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize BoardApp.Route.Controller");this.model=a.request("get:detail:route",
this.options.model);this.layout=new b.Layout({model:this.model});this.listenTo(this.layout,"show",function(){c.showHeader();c.showComments();c.showAside();return c.showMap()});return a.routePopup.show(this.layout,{loading:!0})};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showHeader=function(){this.headerView=new b.Header({model:this.model});return this.show(this.headerView,{region:this.layout.headerRegion})};e.prototype.showComments=function(){this.commentsView=new b.Comments({model:this.model});
return this.show(this.commentsView,{region:this.layout.commentsRegion,loading:!1})};e.prototype.showAside=function(){this.asideView=new b.Aside({model:this.model});return this.show(this.asideView,{region:this.layout.asideRegion})};e.prototype.showMap=function(){this.mapView=new b.Map({model:this.model});return this.show(this.mapView,{region:this.layout.mapRegion})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Route",function(b,a,e,h,g,d){var k,n,p,l,q,m,s;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="RouteLayout";b.prototype.regions={headerRegion:"#route-header-region",asideRegion:"#route-aside-region",mapRegion:"#route-map-region",
commentsRegion:"#route-comments-region",tagsRegion:"#route-tags-region"};b.prototype.className="popupwin__scrollbox";b.prototype.modelEvents={"change:name":"updateText","change:description":"updateText"};b.prototype.events={"click .js-open":"toggleCommercial"};b.prototype.updateText=function(){this.$(".route_name").text(this.model.get("name"));return this.$(".route_description").text(this.model.get("description"))};b.prototype.toggleCommercial=function(a){a.preventDefault();this.$(".js-open").toggleClass("active");
return this.$(".commercial-info__body ").slideToggle()};return b}(a.Views.Layout);b.Header=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="RouteHeader";d.prototype.modelEvents={change:"render"};d.prototype.events={"click .btn-like":"routeLike","click .btn-place":function(){return this.trigger("add:path:popup",this.model)},"click .btn-upload":"upload"};d.prototype.initialize=function(){return this.listenTo(this.model,"route:like:response",
this.routeLikeResponse)};d.prototype.routeLike=function(b){b.preventDefault();return a.request("like:route",this.model)};d.prototype.routeLikeResponse=function(b){var c=this;if(1===b.status)return a.vent.trigger("show:login:popup"),this.$(".btn-like").tooltip("show"),setTimeout(function(){return c.$(".btn-like").tooltip("destroy")},1E3)};d.prototype.upload=function(a){a.preventDefault();return g(a.currentTarget).toggleClass("active")};return d}(a.Views.ItemView);b.Aside=function(d){function e(){return p=
e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.template="RouteAside";e.prototype.className="popupwin__aside";e.prototype.modelEvents={change:"render"};e.prototype.events={"click .js-popup-order-route":"showOrderPopup"};e.prototype.showOrderPopup=function(c){c.preventDefault();c=new b.OrderRoute({model:this.model});return a.orderRoutePopup.show(c)};e.prototype.initialize=function(){return this.saveUrl=!0};e.prototype.onShow=function(){var a=this;this.popupwin=this.$el.closest(".popupwin");
return this.popupwin.scroll(function(){if(a.$el.length)return a.$el.css({"-webkit-transform":"translateY("+a.popupwin.scrollTop()+"px)",transform:"translateY("+a.popupwin.scrollTop()+"px)"})})};e.prototype.onClose=function(){return this.popupwin.off("scroll")};return e}(a.Views.ItemView);b.Map=function(b){function e(){return l=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="RouteMap";e.prototype.className="map map_popupwin";e.prototype.initMap=function(){var b=this;if(void 0===
a.ymaps)this.map=null;else return console.log("map is start",this.model.get("points")),a.ymaps.ready(function(){var c;b.map=new a.ymaps.Map("map-route",{center:[56,45],zoom:7},{autoFitToViewport:"always"});c=[];d.each(b.model.get("points"),function(d){var e;e=d.point;e=[e.latitude,e.longitude];e=e.map(String);d=new a.ymaps.Placemark(e,{id:"map-point"+d.id},{iconImageClipRect:[[80,0],[112,36]],iconImageHref:"/static/images/sprite-baloon.png",iconImageSize:[32,36]});b.map.geoObjects.add(d);return c.push({type:"wayPoint",
point:e})});return a.ymaps.route(c,{mapStateAutoApply:!0}).then(function(c){c.getPaths().options.set({balloonContenBodyLayout:a.ymaps.templateLayoutFactory.createClass("$[properties.humanJamsTime]"),strokeColor:"ca7953",opacity:0.9,noPlacemark:!0});c.getWayPoints().options.set("visible",!1);return b.map.geoObjects.add(c)})})};e.prototype.onShow=function(){var b=this;return a.execute("when:fetched",this.model,function(){b.initMap();return b.$el.resizable({minHeight:80,handles:"s",resize:function(a,
c){var d;d=g(b);return 440<c.size.height?d.addClass("open"):d.removeClass("open")}})})};return e}(a.Views.ItemView);b.Comments=function(b){function d(){return q=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="RouteComments";d.prototype.className="comments";d.prototype.tagName="ul";d.prototype.events={"submit .comment-form":"addComment","click .login__link":"showLoginPopup"};d.prototype.modelEvents={"change:reviews":"render"};d.prototype.initialize=function(){return this.listenTo(this.model,
"route:comment:response",this.routeCommentResponse)};d.prototype.routeCommentResponse=function(a){var b=this;return 0===a.status?(this.model.fetch({success:function(){return b.$(".comment-form").parent().removeClass("loading")}}),this.$("[name=review_text]").val(""),this.$("[name=review_text]").removeClass("error")):this.$("[name=review_text]").addClass("error")};d.prototype.addComment=function(b){b.preventDefault();return(b=this.$("[name=review_text]").val())?(a.request("comment:route",this.model,
{review:b}),this.$(".comment-form").parent().addClass("loading")):this.$("[name=review_text]").addClass("error")};return d}(a.Views.ItemView);b.Tags=function(a){function b(){return m=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="RouteTags";b.prototype.modelEvents={"change:tags":"render"};return b}(a.Views.ItemView);return b.OrderRoute=function(b){function d(){return s=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="OrderRoute";d.prototype.className=
"popupwin__scrollbox";d.prototype.ui={fullname:"[name=fullname]",email:"[name=email]",phone:"[name=phone]"};d.prototype.events={"click .js-finish":"saveInfo"};d.prototype.saveInfo=function(b){var c,d,e;b.preventDefault();this.ui.fullname.val()?(d=this.ui.fullname.val(),this.ui.fullname.parent().removeClass("error")):this.ui.fullname.parent().addClass("error");this.ui.email.val()?(c=this.ui.email.val(),this.ui.email.parent().removeClass("error")):this.ui.email.parent().addClass("error");this.ui.phone.val()?
(e=this.ui.phone.val(),this.ui.phone.parent().removeClass("error")):this.ui.phone.parent().addClass("error");if(d&&c&&e)return console.log(d,c,e),a.apiRequest({url:"/order/",type:"POST",data:{fullname:d,phone:e,email:c,cont_id:this.model.get("id"),cont_type:"route"},successCallback:function(b){console.log(b);a.orderRoutePopup.empty();return a.vent.trigger("show:info:popup","\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0432\u0430\u043c \u043f\u0435\u0440\u0435\u0437\u0432\u043e\u043d\u044f\u0442 \u0434\u043b\u044f \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438")}})};
return d}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Trip",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){var c=this;console.log("initialize BoardApp.Trip.Controller");this.model=this.options.model.id?a.request("get:detail:trip",
this.options.model):this.options.model;this.blocks=a.request("get:blocks",this.model.get("blocks"));this.layout=new b.Layout({model:this.model});this.listenTo(this.layout,"show",function(){c.showHeader();c.showAside();c.showBlocks();c.showComments();return c.showLikes()});return a.tripPopup.show(this.layout,{loading:!0})};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showHeader=function(){this.headerView=new b.Header({model:this.model});return this.show(this.headerView,{region:this.layout.headerRegion})};
e.prototype.showAside=function(){this.asideView=new b.Aside({model:this.model});return this.show(this.asideView,{region:this.layout.asideRegion})};e.prototype.showBlocks=function(){this.blocksView=new b.Blocks({model:this.model,collection:this.blocks});return this.show(this.blocksView,{region:this.layout.blocksRegion,loading:!0})};e.prototype.showComments=function(){this.commentsView=new b.Comments({model:this.model});return this.show(this.commentsView,{region:this.layout.commentsRegion,loading:!1})};
e.prototype.showLikes=function(){this.likesView=new b.Likes({model:this.model});return this.show(this.likesView,{region:this.layout.likesRegion,loading:!1})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("BoardApp.Trip",function(b,a,e,h,g,d){var k,n,p,l,q,m,s,r,u,y,x;b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="TripLayout";b.prototype.regions={headerRegion:"#trip-header-region",asideRegion:"#trip-aside-region",mapRegion:"#trip-map-region",
commentsRegion:"#trip-comments-region",tagsRegion:"#trip-tags-region",likesRegion:"#trip-likes-region",blocksRegion:"#trip-blocks-region"};b.prototype.className="popupwin__scrollbox";b.prototype.modelEvents={"change:name":"updateText"};b.prototype.updateText=function(){var a;this.$(".trip_name span").text(this.model.get("name"));a=this.model.get("description");a=a.split("\n").join("<br>");return this.$(".description__text").html(a)};return b}(a.Views.Layout);b.Header=function(b){function d(){return n=
d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="TripHeader";d.prototype.modelEvents={"change:author":"render","change:isliked":"render","change:likes_count":"render","change:likeusers":"render"};d.prototype.events={"click .btn-like":"tripLike","click .btn-place":function(){return this.trigger("add:path:popup",this.model)},"click .btn-upload":"upload"};d.prototype.initialize=function(){return this.listenTo(this.model,"trip:like:response",this.tripLikeResponse)};d.prototype.tripLike=
function(b){b.preventDefault();return a.request("like:trip",this.model)};d.prototype.tripLikeResponse=function(b){var c=this;if(1===b.status)return a.vent.trigger("show:login:popup"),this.$(".btn-like").tooltip("show"),setTimeout(function(){return c.$(".btn-like").tooltip("destroy")},1E3)};d.prototype.upload=function(a){a.preventDefault();return g(a.currentTarget).toggleClass("active")};return d}(a.Views.ItemView);b.Aside=function(d){function e(){return l=e.__super__.constructor.apply(this,arguments)}
c(e,d);e.prototype.template="TripAside";e.prototype.className="popupwin__aside";e.prototype.modelEvents={change:"render"};e.prototype.events={"click .js-popup-order-route":"showOrderPopup","click .item":"scrollBlock"};e.prototype.showOrderPopup=function(c){c.preventDefault();c=new b.OrderRoute({model:this.model});return a.orderRoutePopup.show(c)};e.prototype.scrollBlock=function(a){var b;a.preventDefault();a=g(a.currentTarget);b=a.data("step");b=a.closest(".popupwin_trip").find(".trip-view[data-step="+
b+"]").position().top-20;return a.closest(".modal").animate({scrollTop:b})};e.prototype.initialize=function(){return this.saveUrl=!0};e.prototype.onShow=function(){return this.popupwin=this.$el.closest(".popupwin")};e.prototype.onClose=function(){return this.popupwin.off("scroll")};return e}(a.Views.ItemView);b.BlockItem=function(e){function h(){return q=h.__super__.constructor.apply(this,arguments)}c(h,e);h.prototype.template="TripBlock";h.prototype.className="popupwin__blocks mb10";h.prototype.initialize=
function(){return this.addRegions({blockImgsRegion:"#blockitem-imgs-region-"+this.model.cid,blockDescRegion:"#blockitem-description-region-"+this.model.cid})};h.prototype.events={"click .link.c-place":"showPointPopup","click .js-add-place":"addPlace","click .js-map-close":"mapClose","click .js-map-open":"mapOpen"};h.prototype.templateHelpers=function(){return{cid:this.model.cid}};h.prototype.onShow=function(){var a,c;c=new b.BlockImgs({model:this.model});a=new b.BlockDesc({model:this.model});this.blockImgsRegion.show(c);
this.blockDescRegion.show(a);return this.initMap()};h.prototype.addPlace=function(b){b.preventDefault();return a.vent.trigger("show:add:placetotrip:popup",this.model)};h.prototype.showPointPopup=function(b){b.preventDefault();console.log(b);b=g(b.currentTarget).attr("href");return a.navigate(b,!0)};h.prototype.initMap=function(){var b=this;if(void 0!==a.ymaps)return a.ymaps.ready(function(){var c;b.geoMap=b.geoMap||new a.ymaps.Map("map"+b.model.get("position"),{center:[a.ymaps.geolocation.latitude,
a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"});b.geoCollection=new a.ymaps.GeoObjectCollection;b.model.get("address")&&(b.geoCollection.add(b.model.placemark),b.geoMap.setCenter([b.model.get("latitude"),b.model.get("longitude")],12));c=b.model.get("points");d.each(c,function(c){var d;d=new a.ymaps.Placemark([c.latitude,c.longitude],{},{iconImageClipRect:[[80,0],[112,36]],iconImageHref:"/static/images/sprite-baloon.png",iconImageSize:[32,36]});b.geoCollection.add(d);return b.geoMap.setCenter([c.latitude,
c.longitude],12)});b.geoMap.controls.add("zoomControl");return b.geoMap.geoObjects.add(b.geoCollection)})};h.prototype.mapClose=function(a){a.preventDefault();return this.$(".map").removeClass("open")};h.prototype.mapOpen=function(a){a.preventDefault();return this.$(".map").addClass("open")};return h}(a.Views.Layout);b.Blocks=function(a){function d(){return m=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.childView=b.BlockItem;d.prototype.className="trip-blocks";return d}(a.Views.CollectionView);
b.BlockDesc=function(a){function b(){return s=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="TripBlockDesc";b.prototype.className="description";b.prototype.modelEvents={change:"render"};return b}(a.Views.ItemView);b.BlockImgs=function(a){function b(){return r=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="TripBlockPhoto";b.prototype.className="slider";b.prototype.modelEvents={"change:imgs":"onShow"};b.prototype.initialize=function(){return this.bxPagerInit=
function(){return this.$(".bx-pager").each(function(){var a,b,c;a=g(this);c=a.find(".bx-pager__item:first-child").outerWidth(!0);b=a.find(".bx-pager__item").length;a.find(".bx-pager__scrollbox").width(c*b);return g(this).find(".bx-pager__viewport").scrollLeft(0)})}};b.prototype.onShow=function(){var a=this;if(this.model.get("imgs").length)return this.bxPagerInit(),this.$(".bxslider").bxSlider({pagerCustom:".bx-pager",onSliderLoad:function(){return a.$(".bx-pager .bx-pager__viewport").scrollLeft(-100)},
onSlideNext:function(b,c,d){b=a.$(".bx-pager .bx-pager__scrollbox .active").position().left+a.$(".bx-pager .bx-pager__item").outerWidth(!0);a.$(".bx-pager .bx-pager__viewport").scrollLeft(b);if(a.$(".bx-pager .bx-pager__item:first-child").index()===d)return a.$(".bx-pager .bx-pager__viewport").scrollLeft(0)},onSlidePrev:function(b,c,d){b=a.$(".bx-pager .bx-pager__scrollbox .active").position().left-a.$(".bx-pager .bx-pager__item").outerWidth(!0);a.$(".bx-pager .bx-pager__viewport").scrollLeft(b);
if(a.$(".bx-pager .bx-pager__item:last-child").index()===d)return a.$(".bx-pager .bx-pager__viewport").scrollLeft(g(".bx-pager .bx-pager__viewport").width())}})};return b}(a.Views.ItemView);b.Comments=function(b){function d(){return u=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="TripComments";d.prototype.className="comments";d.prototype.tagName="ul";d.prototype.events={"submit .comment-form":"addComment","click .login__link":"showLoginPopup"};d.prototype.modelEvents=
{"change:reviews":"render"};d.prototype.initialize=function(){this.listenTo(this.model,"trip:comment:response",this.tripCommentResponse);return this.user=a.request("get:my:profile")};d.prototype.tripCommentResponse=function(a){var b=this;return 0===a.status?(this.model.fetch({success:function(){return b.$(".comment-form").parent().removeClass("loading")}}),this.$("[name=review_text]").val(""),this.$("[name=review_text]").removeClass("error")):this.$("[name=review_text]").addClass("error")};d.prototype.addComment=
function(b){b.preventDefault();if(this.user.get("authorized")){if(b=this.$("[name=review_text]").val())return a.request("comment:trip",this.model,{review:b}),this.$(".comment-form").parent().addClass("loading");this.$("[name=review_text]").addClass("error");return this.$("[name=review_text]").focus()}a.vent.trigger("show:login:popup")};d.prototype.showLoginPopup=function(b){b.preventDefault();return a.vent.trigger("show:login:popup")};return d}(a.Views.ItemView);b.Tags=function(a){function b(){return y=
b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="TripTags";b.prototype.modelEvents={"change:tags":"render"};return b}(a.Views.ItemView);b.Likes=function(a){function b(){return x=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="TripLikes";b.prototype.modelEvents={"change:likeusers":"render"};return b}(a.Views.ItemView);return b.OrderRoute=function(b){function e(){return p=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="OrderTrip";
e.prototype.className="popupwin__scrollbox";e.prototype.ui={fullname:"[name=fullname]",email:"[name=email]",phone:"[name=phone]"};e.prototype.events={"click .js-finish":"saveInfo","click .js-tour-personal":"activePersonalTour","click .js-tour-group":"activeGroupTour","select2-selecting .js-group-users":"selectGroupUsers","change .js-personal-service":"changePersonalService","change .js-group-service":"changeGroupService"};e.prototype.initialize=function(){d.bindAll(this);return this.saveUrl=!0};e.prototype.getPersonalRange=
function(){var a;return(a=this.model.get("summary_info"))&&a.personal?(a=a.personal.personal_date,a=d.map(a,function(a){return a.split(";")[0]}),d.map(a,function(a){var b;b=a.split("-")[0];a=a.split("-")[1];b=moment(b,"D.M.YYYY");a=moment(a,"D.M.YYYY");return moment.range(b,a)})):[]};e.prototype.personalDays=function(a){var b;b=this.getPersonalRange();return[d.some(b,function(b){return b.contains(a)})]};e.prototype.getGroupRange=function(){var a;return(a=this.model.get("summary_info"))&&a.group?(a=
a.group.group_date,a=d.map(a,function(a){return a.split(";")[0]}),d.map(a,function(a){var b;b=a.split("-")[0];a=a.split("-")[1];b=moment(b,"D.M.YYYY");a=moment(a,"D.M.YYYY");return moment.range(b,a)})):[]};e.prototype.groupDays=function(a){var b;b=this.getGroupRange();return[d.some(b,function(b){return b.contains(a)})]};e.prototype.onShow=function(){this.$(".js-datapicker-personal").datepicker({showOn:"both",buttonImage:"/static/images/calendar.png",buttonImageOnly:!0,dateFormat:"dd.mm.yy",beforeShowDay:this.personalDays});
this.$(".js-datapicker-group").datepicker({showOn:"both",buttonImage:"/static/images/calendar.png",buttonImageOnly:!0,dateFormat:"dd.mm.yy",beforeShowDay:this.groupDays});return this.$(".select-grey select").select2({containerCssClass:"select2-container_grey",dropdownCssClass:"select2-drop_grey"})};e.prototype.activePersonalTour=function(a){a.preventDefault();this.$(".js-tour-personal").removeClass("btn_color_grey").addClass("btn_color_blue");this.$(".js-tour-group").removeClass("btn_color_blue").addClass("btn_color_grey");
this.$(".group-tour").addClass("hide");return this.$(".personal-tour").removeClass("hide")};e.prototype.activeGroupTour=function(a){a.preventDefault();this.$(".js-tour-personal").removeClass("btn_color_blue").addClass("btn_color_grey");this.$(".js-tour-group").removeClass("btn_color_grey").addClass("btn_color_blue");this.$(".group-tour").removeClass("hide");return this.$(".personal-tour").addClass("hide")};e.prototype.selectGroupUsers=function(a){var b,c;console.log(a);c=a.val;a=this.model.get("summary_info");
b=g("#orderGroupTour .js-group-service:checked");b=d.map(b,function(a){return g(a).val()});b=d.reduce(b,function(a,b){return a+parseInt(b,10)},0);a=parseInt(a.group.group_price_tour*c,10)+b;this.$("#orderGroupTour [name=total_price]").val(a);return this.$("#orderGroupTour .finish-price .price").html(a+' <span class="rouble">o</span>')};e.prototype.changePersonalService=function(a){var b;a=this.model.get("summary_info");b=this.$("#orderPersonalTour .js-personal-service:checked");b=d.map(b,function(a){return g(a).val()});
b=d.reduce(b,function(a,b){return a+parseInt(b,10)},0);g("#orderPersonalTour .js-personal-users").select2("data");a=parseInt(a.personal.personal_price_tour,10)+b;this.$("#orderPersonalTour [name=total_price]").val(a);return this.$("#orderPersonalTour .finish-price .price").html(a+' <span class="rouble">o</span>')};e.prototype.changeGroupService=function(a){var b,c;a=this.model.get("summary_info");b=this.$("#orderGroupTour .js-group-service:checked");b=d.map(b,function(a){return g(a).val()});b=d.reduce(b,
function(a,b){return a+parseInt(b,10)},0);c=g("#orderGroupTour .js-group-users").select2("data").text;a=parseInt(a.group.group_price_tour*c,10)+b;this.$("#orderGroupTour [name=total_price]").val(a);return this.$("#orderGroupTour .finish-price .price").html(a+' <span class="rouble">o</span>')};e.prototype.saveInfo=function(b){var c,e,f,h,k;b.preventDefault();b=this.ui.fullname.val();h=this.ui.phone.val();k=/^\w+@\w+\.\w{2,4}$/i;this.ui.email.val()&&k.test(this.ui.email.val())?(f=this.ui.email.val(),
this.ui.email.parent().removeClass("error")):this.ui.email.parent().addClass("error");this.$(".personal-tour").length&&!this.$(".personal-tour").hasClass("hide")&&(c=this.$("#orderPersonalTour").serializeArray(),(e=this.$(".js-datapicker-personal").val())?(g(".js-datapicker-personal").closest(".field").removeClass("error"),g(".js-datapicker-group").closest(".field").removeClass("error")):g(".js-datapicker-personal").closest(".field").addClass("error"));this.$(".group-tour").length&&!this.$(".group-tour").hasClass("hide")&&
(c=this.$("#orderGroupTour").serializeArray(),(e=this.$(".js-datapicker-group").val())?(g(".js-datapicker-personal").closest(".field").removeClass("error"),g(".js-datapicker-group").closest(".field").removeClass("error")):g(".js-datapicker-group").closest(".field").addClass("error"));c=d.reduce(c,function(a,b){a[b.name]=b.value;return a},{});if(e&&f)return a.apiRequest({url:"/order/",type:"POST",data:{fullname:b,phone:h,email:f,cont_id:this.model.get("id"),cont_type:"trip",summary_info:JSON.stringify(c)},
successCallback:function(b){console.log(b);a.orderRoutePopup.empty();return a.vent.trigger("show:info:popup","\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0441 \u0432\u0430\u043c\u0438 \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0434\u043b\u044f \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438")}})};return e}(a.Views.ItemView)})}).call(this);
(function(){this.Yapp.module("FooterApp",function(b,c,f,a,e,h){var g;g={show:function(){return new b.Show.Controller({region:c.footerRegion})}};return b.on("start",function(){console.log("FooterApp onStart event");return g.show()})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("FooterApp.Show",function(b,a,e,h,g,d){var k;return b.Controller=function(a){function d(){return k=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){console.log("initialize FooterApp.Show.Controller");this.layout=this.getLayoutView();return this.show(this.layout)};
d.prototype.getLayoutView=function(){return new b.Layout};return d}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("FooterApp.Show",function(b,a,e,h,g,d){var k;return b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="FooterView";b.prototype.className="f-body";b.prototype.events={"click .js-up":"scrollTop","click .nav__link":"showStatic"};
b.prototype.onRender=function(){var a=this;return g(window).on("scroll.Footer",function(){return 252<g(window).scrollTop()?a.$(".link-up").addClass("visible"):a.$(".link-up").removeClass("visible")})};b.prototype.scrollTop=function(a){a.preventDefault();return g("html, body").animate({scrollTop:0},"fast")};b.prototype.showStatic=function(a){return a.preventDefault()};return b}(a.Views.Layout)})}).call(this);
(function(){this.Yapp.module("HeaderApp",function(b,c,f,a,e,h){var g;g={show:function(){return new b.Show.Controller({region:c.headerRegion})}};c.vent.on("show:add:popup",function(){var a;a=new b.Show.PopupAdd;return c.addPopupRegion.show(a)});c.vent.on("show:login:popup",function(){var a;a=new b.Show.PopupLogin;return c.loginPopupRegion.show(a)});c.vent.on("show:info:popup",function(a){a=new b.Show.PopupInfo({message:a});return c.infoPopupRegion.show(a)});c.vent.on("show:destination:region",function(){c.headerRegion.$el.removeClass("header_small");
return c.headerRegion.currentView.destinationRegion.$el.removeClass("hide")});c.vent.on("hide:destination:region",function(){c.headerRegion.$el.addClass("header_small");return c.headerRegion.currentView.destinationRegion.$el.addClass("hide")});return b.on("start",function(){console.log("HeaderApp onStart event");return g.show()})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("HeaderApp.Show",function(b,a,e,h,g,d){var k;return b.Controller=function(a){function d(){return k=d.__super__.constructor.apply(this,arguments)}c(d,a);d.prototype.initialize=function(){var a=this;console.log("initialize HeaderApp.Show.Controller");this.layout=this.getLayoutView();this.listenTo(this.layout,
"show",function(){a.ctrlsView();a.destinationView();return a.filterView()});return this.show(this.layout)};d.prototype.ctrlsView=function(){var a;a=new b.Ctrls;return this.show(a,{region:this.layout.ctrlsRegion})};d.prototype.destinationView=function(){var a;a=new b.Destination;return this.show(a,{region:this.layout.destinationRegion})};d.prototype.filterView=function(){var a;a=new b.Filter;return this.show(a,{region:this.layout.filterRegion})};d.prototype.getLayoutView=function(){return new b.Layout};
d.prototype.onClose=function(){return this.stopListening()};return d}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("HeaderApp.Show",function(b,a,e,h,g,d){var k,n,p,l,q,m,s;console.log("initialize HeaderApp.Show.Layout");b.Layout=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="HeaderView";b.prototype.className="h-body";b.prototype.regions=
{ctrlsRegion:".header__ctrls",destinationRegion:".header__destination",filterRegion:".header__filter",dashboardRegion:".header__dashboard"};return b}(a.Views.Layout);b.Ctrls=function(d){function e(){return n=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.template="Ctrls";e.prototype.className="constrain";e.prototype.events={"click .js-popup-add":"showAddPopup","click .js-popupwin-authorization":"showLoginPopup","click .js-profile-menu":"showProfileMenu","click .item .link.nonav":"link",
"click .link-user":"link","click .logo":"link"};e.prototype.initialize=function(){var b;b=a.request("get:my:profile");return this.listenTo(b,"change",this.changeUser)};e.prototype.changeUser=function(a){this.$(".first-name").text(a.get("first_name"));return this.$(".last-name").text(a.get("last_name"))};e.prototype.link=function(b){b.preventDefault();b=g(b.currentTarget).prop("hash");return a.navigate(b,!0)};e.prototype.showAddPopup=function(c){c.preventDefault();return a.addPopupRegion.show(new b.PopupAdd)};
e.prototype.showLoginPopup=function(c){c.preventDefault();return a.loginPopupRegion.show(new b.PopupLogin)};e.prototype.showProfileMenu=function(a){a.preventDefault();g(a.currentTarget).toggleClass("open");return this.$(".profile-menu").slideToggle()};return e}(a.Views.ItemView);b.Destination=function(b){function e(){return p=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="Destination";e.prototype.className="constrain";e.prototype.events={"submit #destination-form":"submitSearch",
"select2-selecting #destination-input":"submitSearch","select2-clearing #destination-input":"clearSearch","click .search-example":"searchExample"};e.prototype.submitSearch=function(b){var c;"submit"===b.type&&b.preventDefault();b=b.object;c={s:b?b.name:a.settings.s||""};b&&b.upperCorner&&(c.coord_left=JSON.stringify(d.zipObject(["ln","lt"],b.lowerCorner.split(" "))),c.coord_right=JSON.stringify(d.zipObject(["ln","lt"],b.upperCorner.split(" "))),c.s=null,c.city=null);c.s&&(c.city=null,c.coord_left=
null,c.coord_right=null);console.log("yapens request params",c);return a.updateSettings(c)};e.prototype.clearSearch=function(b){return a.updateSettings({s:null,city:null,user:null,coord_left:null,coord_right:null})};e.prototype.searchExample=function(b){var c;b.preventDefault();b=g(b.currentTarget).data();c={city:b.name,s:null,coord_left:null,coord_right:null};b&&b.upperCorner&&(c.coord_left=JSON.stringify(d.zipObject(["ln","lt"],b.lowerCorner.split(" "))),c.coord_right=JSON.stringify(d.zipObject(["ln",
"lt"],b.upperCorner.split(" "))),c.city=null);a.updateSettings(c);return this.$("#destination-input").select2("data",b)};e.prototype.format=function(a){return"<span data-id='"+a.id+"' class='type type_"+a.type+"'\ndata-lowerCorner='"+a.lowerCorner+"' data-upperCorner='"+a.upperCorner+"'>\n"+a.name+"\n<i>"+a.address+"</i>\n</span>"};e.prototype.searchQuery=function(b){var c;c={};return a.ymaps.geocode(b.term,{json:!0,kind:"locality",results:10,boundedBy:[[41.18599,19.484764],[81.886117,191.204665]],
strictBounds:!0}).then(function(a){console.log("geocode response",a);a=d.map(a.GeoObjectCollection.featureMember,function(a){return{id:-1,name:a.GeoObject.name,type:"geocode",address:a.GeoObject.description||"",lowerCorner:a.GeoObject.boundedBy.Envelope.lowerCorner,upperCorner:a.GeoObject.boundedBy.Envelope.upperCorner}});c.results=a;return b.callback(c)})};e.prototype.initSelect2=function(a){null==a&&(a={});d.defaults(a,{quietMillis:750,allowClear:!0,query:this.searchQuery,formatResult:this.format,
formatSelection:this.format,minimumInputLength:3,formatInputTooShort:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},formatNoMatches:function(){return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},escapeMarkup:function(a){return a},sortResults:function(a,b,c){return c.term?d.sortBy(a,"id"):a},containerCssClass:"select2-container_destination",dropdownCssClass:"select2-drop_destination"});
return this.$("#destination-input").select2(a)};e.prototype.onShow=function(){var b=this;this.initSelect2();a.vent.on("change:settings",function(c){if(a.settings.city&&d.has(c,"city"))return b.$("#destination-input").select2("data",{name:a.settings.city||"",address:""})});d.debounce(this.fixedDestForm,200);return g(window).on("scroll.Header",this.fixedDestForm)};e.prototype.fixedDestForm=function(){120<g(window).scrollTop()&&this.$("#destination-form").addClass("fixed");if(120>g(window).scrollTop())return this.$("#destination-form").removeClass("fixed")};
e.prototype.onClose=function(){return g(window).off("scroll.Header")};return e}(a.Views.ItemView);b.Filter=function(b){function e(){return l=e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="Filter";e.prototype.className="constrain clearfix";e.prototype.events={"click .categories__link":"filterCategory","submit #header-search-form":"submitSearch","select2-selecting .header__search input":"submitSearch","select2-clearing .header__search input":"clearSearch"};e.prototype.ui=
{filterAllCategory:".categories__link"};e.prototype.initialize=function(){var b=this;return a.vent.on("change:settings",function(a){if(d.has(a,"models"))return b.setActiveCategory(a.models)})};e.prototype.templateHelpers=function(){return{settings:a.settings}};e.prototype.onShow=function(){return g("[data-toggle=tooltip]").tooltip()};e.prototype.onRender=function(){return this.initSelect2()};e.prototype.setActiveCategory=function(a){this.ui.filterAllCategory.removeClass("active");console.log(a);return this.$("[data-model="+
a+"]").addClass("active")};e.prototype.filterCategory=function(b){b.preventDefault();this.ui.filterAllCategory.removeClass("active");b=g(b.currentTarget);b.addClass("active");b=b.attr("href");return a.navigate(b,!0)};e.prototype.submitSearch=function(b){"submit"===b.type&&b.preventDefault();b=b.object;b={s:b?b.name:a.settings.s||""};console.log("yapens request params",b);return a.updateSettings(b)};e.prototype.clearSearch=function(b){return a.updateSettings({s:null,user:null})};e.prototype.format=
function(a){return"<span data-id='"+a.id+"' class='type type_"+a.type+"'>\n"+a.name+"\n</span>"};e.prototype.searchQuery=function(b){var c;c={};return a.request("search:all:yapens",{s:b.term},function(e){c.results=d.map(e,function(a,b){d.map(a,function(a){return a.type=b});return a});c.results=d.filter(d.flatten(c.results),function(b){return a.settings.models?b.type===a.settings.models:"users"!==b.type&&"tags"!==b.type});return b.callback(c)})};e.prototype.initSelect2=function(a){null==a&&(a={});
d.defaults(a,{quietMillis:750,allowClear:!0,query:this.searchQuery,formatResult:this.format,formatSelection:this.format,minimumInputLength:3,formatInputTooShort:function(){return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},formatNoMatches:function(){return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},escapeMarkup:function(a){return a},sortResults:function(a,b,c){return c.term?
d.sortBy(a,"id"):a}});return this.$(".header__search input").select2(a)};return e}(a.Views.ItemView);b.PopupAdd=function(b){function d(){return q=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PopupAdd";d.prototype.className="popupwin__scrollbox";d.prototype.events={"click .stuff-add__link":"showPopup"};d.prototype.initialize=function(){this.user=a.request("get:my:profile");return this.saveUrl=!0};d.prototype.showPopup=function(b){b.preventDefault();a.addPopupRegion.empty();
b=g(b.currentTarget).attr("href");return this.user.get("authorized")?a.navigate(b,!0):a.vent.trigger("show:login:popup")};return d}(a.Views.ItemView);b.PopupLogin=function(b){function d(){return m=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="PopupLogin";d.prototype.className="popupwin__scrollbox";d.prototype.initialize=function(){return this.saveUrl=!0};d.prototype.templateHelpers=function(){return{current:a.getCurrentRoute()}};return d}(a.Views.ItemView);return b.PopupInfo=
function(a){function b(){return s=b.__super__.constructor.apply(this,arguments)}c(b,a);b.prototype.template="PopupInfo";b.prototype.className="popupwin__scrollbox";b.prototype.initialize=function(a){this.message=a.message;return this.saveUrl=!0};b.prototype.templateHelpers=function(){return{message:this.message}};return b}(a.Views.ItemView)})}).call(this);
(function(){this.Yapp.module("MapApp",function(b,c,f,a,e,h){var g=this;c.vent.on("show:map:region",function(a){if(!c.mapRegion.currentView)return c.mapRegion.show(g.controller.layout)});c.vent.on("hide:map:region",function(){return c.mapRegion.reset()});return b.on("start",function(){console.log("MapApp onStart event");return this.controller=new b.Show.Controller({region:c.mapRegion})})})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("MapApp.Show",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){console.log("initialize MapApp.Show.Controller");this.tripyapens=new a.Entities.YapensCollection;return this.layout=
this.getLayoutView()};e.prototype.showAside=function(){this.asideView=new a.AddPopupApp.PlaceToTrip.Aside({model:new a.Entities.TripBlock,collection:this.collection,tripyapens:this.tripyapens});return this.show(this.asideView,{region:a.sidebarRegion})};e.prototype.getLayoutView=function(){return new b.Layout};e.prototype.showMapView=function(){this.mapView=new b.Map({tripyapens:this.tripyapens,collection:this.collection});return this.show(this.mapView,{region:this.layout.yandexMapRegion})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("MapApp.Show",function(b,a,e,h,g,d){var k,n;b.Layout=function(b){function d(){return k=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="MapLayout";d.prototype.className="map open map_main";d.prototype.regions={yandexMapRegion:"#yandex-map-region"};d.prototype.initialize=
function(){console.log("initialize MapApp.Show.Layout");if(void 0!==a.ymaps)return a.ymaps.ready(function(){var b;b=a.ymaps.templateLayoutFactory.createClass("          <div class='baloon'>            <div class='baloon__head'>              <a href='#' class='title title_tag'>              <i class='icon'></i>                $[properties.name|\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e]              </a>              <a href='#' class='close'></a>            </div>            <div class='baloon__body'>              <div class='text'>                <img src='$[properties.img|#]' alt='' class='img'>                $[properties.address|\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e]              </div>            </div>          </div>          ",
{build:function(){this.constructor.superclass.build.call(this);return g(".baloon .close").on("click",{layout:this},this.closeBaloon)},clear:function(){g(".baloon .close").off("click",{layout:this},this.closeBaloon);return this.constructor.superclass.clear.call(this)},closeBaloon:function(a){a.preventDefault();return a.data.layout.getData().geoObject.balloon.close()}});return a.ymaps.layout.storage.add("point#BCLayout",b)})};return d}(a.Views.Layout);return b.Map=function(b){function e(){return n=
e.__super__.constructor.apply(this,arguments)}c(e,b);e.prototype.template="MapView";e.prototype.className="map__container";e.prototype.id="map";e.prototype.events={"click .map__close":"closeMap"};e.prototype.onShow=function(){var b=this;if(void 0!==a.ymaps)return a.ymaps.ready(function(){b.$(".ymaps-copyrights-pane").css("bottom","13px");b.geoMap=b.geoMap||new a.ymaps.Map(b.$el[0],{center:[a.ymaps.geolocation.latitude,a.ymaps.geolocation.longitude],zoom:12},{autoFitToViewport:"always"});b.geoObjectsCollection=
new a.ymaps.GeoObjectCollection;b.tripyapens.each(b.addPlacemarks);b.geoMap.geoObjects.add(b.geoObjectsCollection);1<b.geoObjectsCollection.getLength()&&b.geoMap.setBounds(b.geoObjectsCollection.getBounds());return b.geoMap.controls.add("zoomControl",{top:60,left:20})})};e.prototype.initialize=function(a){console.log("initialize MapApp.Show.Map");d.bindAll(this);this.tripyapens=a.tripyapens;this.collection=a.collection;this.listenTo(this.options.tripyapens,"set:map:center",this.setMapCenter);this.listenTo(this.collection,
"add:to:trip",this.addToTrip);return this.listenTo(this.collection,"delete:from:trip",this.deleteFromTrip)};e.prototype.closeMap=function(b){b.preventDefault();console.log(b);a.mapRegion.reset();return a.boardRegion.show(a.BoardApp.board.yapensView)};e.prototype.setMapCenter=function(a){console.log("set center",a);if("point"===a.get("type_of_item")&&(a=a.placemark.geometry.getCoordinates(),this.geoMap))return this.geoMap.setCenter(a)};e.prototype.addPlacemarks=function(a){console.log(this,a);if(this.geoMap)return this.geoObjectsCollection.add(a.placemark),
a=a.placemark.geometry.getCoordinates(),this.geoMap.setCenter(a)};e.prototype.addToTrip=function(a){console.log("add placemark",a.placemark);a.set({added:!0},{silent:!0});a.trigger("change:added");if(this.geoMap)return this.geoObjectsCollection.add(a.placemark)};e.prototype.deleteFromTrip=function(a){console.log("delete placemark",a.placemark);a.set({added:!1},{silent:!0});a.trigger("change:added");if(this.geoMap)return this.geoObjectsCollection.remove(a.placemark)};e.prototype.onClose=function(){return console.log("closed Show.Map view")};
return e}(a.Views.ItemView)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("ProfileApp.List",function(b,a,e,h,g,d){var k;return b.Controller=function(d){function e(){return k=e.__super__.constructor.apply(this,arguments)}c(e,d);e.prototype.initialize=function(){console.log("initialize ProfileApp.List.Controller");this.user=a.request("get:my:profile");if(this.user.get("authorized"))switch(this.user.fetch(),
this.showDashboard(),this.options.section){case "likes":return this.showMyLikes();case "settings":return this.showSettings();default:return this.showMyYapens()}else a.vent.trigger("show:login:popup")};e.prototype.onClose=function(){return this.stopListening()};e.prototype.showDashboard=function(){var c;c=new b.ProfileDashboard({model:this.user,section:this.options.section});this.show(c,{region:a.headerRegion.currentView.dashboardRegion});a.vent.trigger("hide:map:region");a.vent.trigger("hide:destination:region");
a.vent.trigger("hide:sidebar:region");return a.vent.trigger("show:dashboard:region")};e.prototype.showMyYapens=function(){return a.vent.trigger("filter:all:yapens",{user:this.user.get("id"),s:null,city:null,coord_left:null,coord_right:null})};e.prototype.showMyLikes=function(){return a.vent.trigger("filter:all:yapens",{user:this.user.get("id"),s:null,city:null,coord_left:null,coord_right:null})};e.prototype.showSettings=function(){var c;c=new b.ProfileSettings({model:this.user});return this.show(c,
{region:a.boardRegion,loading:!0})};return e}(a.Controllers.Base)})}).call(this);
(function(){var b={}.hasOwnProperty,c=function(c,a){function e(){this.constructor=c}for(var h in a)b.call(a,h)&&(c[h]=a[h]);e.prototype=a.prototype;c.prototype=new e;c.__super__=a.prototype;return c};this.Yapp.module("ProfileApp.List",function(b,a,e,h,g,d){var k,n,p;b.ProfileDashboard=function(b){function d(){return k=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="Dashboard";d.prototype.className="constrain clearfix";d.prototype.modelEvents={change:"calculateTotalAdded render"};
d.prototype.events={"click .item .link.nonav":"link"};d.prototype.initialize=function(b){var c=this;this.section=b.section;return a.execute("when:fetched",this.model,function(){var a;a=c.model.get("added_events")+c.model.get("added_points");return c.model.set("total_added",a)})};d.prototype.templateHelpers=function(){return{section:this.section}};d.prototype.calculateTotalAdded=function(){var a;a=this.model.get("added_events")+this.model.get("added_points")+this.model.get("added_routes")+this.model.get("added_trips");
return this.model.set("total_added",a)};d.prototype.onRender=function(){return this.tips=this.$(".box__img .icon").tooltip({placement:"bottom"})};d.prototype.link=function(b){b.preventDefault();b=g(b.currentTarget).prop("hash");return a.navigate(b,!0)};return d}(a.Views.ItemView);b.ProfileSettings=function(b){function d(){return n=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="DashboardSettings";d.prototype.className="dashboard-settings";d.prototype.ui={email:"[name=email]",
fullname:"[name=fullname]",username:"[name=username]",about:"[name=about]",phone:"[name=phone]",website:"[name=website]",city:"[name=city]"};d.prototype.events={"click .save-settings":"saveSettings","click .js-popup-login-commercial":"showCommercialPopup"};d.prototype.modelEvents={change:"render"};d.prototype.onShow=function(){g(".header__title").removeClass("hide");return g(".header__filter").addClass("hide")};d.prototype.onClose=function(){g(".header__title").addClass("hide");return g(".header__filter").removeClass("hide")};
d.prototype.showCommercialPopup=function(b){b.preventDefault();return a.vent.trigger("show:commercial:popup")};d.prototype.saveSettings=function(b){b.preventDefault();this.model.set({email:this.ui.email.val(),fullname:this.ui.fullname.val(),about:this.ui.about.val(),phone:this.ui.phone.val(),website:this.ui.website.val(),city:this.ui.city.val()});return this.model.save(this.model.changed,{patch:!0,success:function(b){return b.status?a.vent.trigger("show:info:popup",b.txt):a.vent.trigger("show:info:popup",
"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")}})};return d}(a.Views.ItemView);return b.CommercialView=function(b){function d(){return p=d.__super__.constructor.apply(this,arguments)}c(d,b);d.prototype.template="CommercialPopup";d.prototype.className="popupwin__scrollbox";d.prototype.ui={fullname:"[name=fullname]",email:"[name=email]",company:"[name=company]",phone:"[name=phone]"};d.prototype.events={"click .js-finish":"saveInfo"};
d.prototype.saveInfo=function(b){var c,d,e,f;b.preventDefault();this.ui.fullname.val()?(e=this.ui.fullname.val(),this.ui.fullname.parent().removeClass("error")):this.ui.fullname.parent().addClass("error");this.ui.email.val()?(d=this.ui.email.val(),this.ui.email.parent().removeClass("error")):this.ui.email.parent().addClass("error");this.ui.company.val()?(c=this.ui.company.val(),this.ui.company.parent().removeClass("error")):this.ui.company.parent().addClass("error");this.ui.phone.val()?(f=this.ui.phone.val(),
this.ui.phone.parent().removeClass("error")):this.ui.phone.parent().addClass("error");if(e&&d&&c&&f)return console.log(e,d,c,f),a.commercialPopupRegion.empty(),a.vent.trigger("show:info:popup","\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0432\u0430\u043c \u043f\u0435\u0440\u0435\u0437\u0432\u043e\u043d\u044f\u0442 \u0434\u043b\u044f \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438")};return d}(a.Views.ItemView)})}).call(this);
(function(){this.Yapp.module("ProfileApp",function(b,c,f,a,e,h){var g,d;d={"dashboard/":"dashboard","dashboard/likes/":"dashboardLikes","dashboard/settings/":"dashboardSettings"};g={dashboard:function(){console.log("ProfileApp index url");return new b.List.Controller},dashboardLikes:function(){console.log("ProfileApp likes url");return new b.List.Controller({section:"likes"})},dashboardSettings:function(){console.log("ProfileApp settings url");return new b.List.Controller({section:"settings"})}};
c.vent.on("show:commercial:popup",function(){var a;a=new b.List.CommercialView;return c.commercialPopupRegion.show(a)});c.vent.on("show:dashboard:region",function(){if(c.headerRegion.currentView.dashboardRegion.$el)return c.headerRegion.$el.addClass("header_small"),c.headerRegion.currentView.dashboardRegion.$el.removeClass("hide")});c.vent.on("hide:dashboard:region",function(){if(c.headerRegion.currentView.dashboardRegion.$el)return c.headerRegion.$el.removeClass("header_small"),c.headerRegion.currentView.dashboardRegion.$el.addClass("hide")});
c.vent.on("show:sidebar:region",function(){c.sidebarRegion.$el.addClass("active");return c.sidebarRegion.$el.removeClass("hide")});c.vent.on("hide:sidebar:region",function(){c.sidebarRegion.$el.removeClass("active");return c.sidebarRegion.$el.addClass("hide")});return c.addInitializer(function(){return c.router.processAppRoutes(g,d)})})}).call(this);
