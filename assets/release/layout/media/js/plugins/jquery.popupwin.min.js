/*!
* Popupwin
* Version: v.3.1.0 (2013-04-30)
*
* https://github.com/trolev/Popupwin/
*
* Popupwin plugin is MIT License released. Point free to use it for personal and commercial need
*/
(function(d){var g=d(window),k=d(document),n=void 0!==document.createTouch,l=n?"touchend.pw":"click.pw",f=d('<div style="position:fixed; left:0; right:0; top:0; bottom:0;display:none;z-index:999;"></div>'),p={left:-9E5,top:-9E5,display:"block"};d("body").append(f);var m={pwinBlock:!1,pwinClose:".close",pwinBack:"#000",pwinOpacity:0.3,pwinSpeed:400,pwinAnimate:!0,callbackOpen:!1,callbackClose:!1,fixed:!1,resize:!0},e={init:function(b){return this.each(function(){var a=d(this),c=d.extend({},m,b),h= c.pwinBlock?"object"===typeof c.pwinBlock?c.pwinBlock:d(c.pwinBlock):d(a.attr("href"));h.length&&(a.block=h,a.cls="object"===typeof c.pwinClose?c.pwinClose:d(c.pwinClose,h),a.on(l,function(b){b.preventDefault();"function"===typeof c.callbackOpen&&c.callbackOpen(h,a);e.setPosition(h,!1,c.fixed);e.show(a,c);if(c.resize)g.on("resize.pw",function(){e.setPosition(h,!0,c.fixed)});return!1}))})},setPosition:function(b,a,c){a||b.css(p);var d=n&&window.innerHeight?window.innerHeight:g.height(),e=n&&window.innerWidth? window.innerWidth:g.width(),f=b.innerHeight(),l=b.innerWidth(),k=g.scrollTop(),m=g.scrollLeft(),d=0.5*d-0.5*f,e=0.5*e-0.5*l;a||b.hide();c?b.css({left:0>e?0:e,top:0>d?0:d,"z-index":1E3,position:"fixed"}):b.css({left:0>e?m:e+m,top:0>d?k:d+k,"z-index":1E3,position:"absolute"})},show:function(b,a){f.css({"background-color":a.pwinBack});a.pwinAnimate?(f.fadeTo(a.pwinSpeed,a.pwinOpacity),b.block.fadeTo(a.pwinSpeed,1)):(f.css("opacity",a.pwinOpacity).show(),b.block.show());e.closeEvents(b,a)},closeEvents:function(b, a){f.on(l,function(c){c.preventDefault();e.close(b,a);return!1});b.cls.on(l,function(c){c.preventDefault();e.close(b,a);return!1});k.on("keydown.pw",function(c){27===(c.which||c.keyCode)&&e.close(b,a)})},close:function(b,a){a.pwinAnimate?(f.fadeOut(a.pwinSpeed),b.block.fadeOut(a.pwinSpeed,function(){"function"===typeof a.callbackClose&&a.callbackClose(b.block,b)})):(f.hide(),b.block.hide(),"function"===typeof a.callbackClose&&a.callbackClose(b.block,b));k.off(".pw");b.cls.off(".pw");f.off(".pw"); g.off(".pw")},open:function(b){return this.each(function(){var a=d(this),c=d.extend({},m,b);"function"===typeof c.callbackOpen&&c.callbackOpen(a);a.block=a;a.cls="object"===typeof c.pwinClose?c.pwinClose:d(c.pwinClose,a);e.setPosition(a,!1,c.fixed);e.show(a,c)})},center:function(){return this.each(function(){e.setPosition(d(this),!0)})}};d.fn.popupwin=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)d.error("Method named "+b+" does not exist to jQuery.popupwin"); else return e.init.apply(this,arguments)}})(jQuery);
